{"version":3,"file":"AddNewReceiptDialog-69862c63.js","sources":["../../src/components/AddNewReceiptDialog/AddNewReceiptDialog.tsx"],"sourcesContent":["import AclGuard from \"components/AclGuard/AclGuard\";\nimport AutoComplete from \"components/AutoComplete\";\nimport ButtonBox from \"components/ButtonBox/ButtonBox\";\nimport DialogBox from \"components/Dialog/Dialog\";\nimport DocumentUploader, {\n  DOC_UPLOADER_MODE,\n  IDocumentInfo,\n  IDocumentUploaderRef,\n} from \"components/DocumentUploader/DocumentUploader\";\nimport InputBox from \"components/InputBox/InputBox\";\nimport Label from \"components/Label/Label\";\nimport SimpleDropDown from \"components/SimpleDropDown\";\nimport SkeletonCustom from \"components/Skeleton/Skeleton\";\nimport SystemDatePicker from \"components/SystemDatePicker/SystemDatePicker\";\nimport Text from \"components/Text/Text\";\nimport TextData from \"components/TextData/TextData\";\nimport { numberFormatter } from \"locale\";\nimport {\n  ChangeEvent,\n  forwardRef,\n  useEffect,\n  useImperativeHandle,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport DepositAccountService from \"services/transaction/DDE/DepositAccountService\";\nimport LoanService from \"services/transaction/LoanService\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport {\n  YearDifference,\n  currencyFormatToNumber,\n  getLocalStorage,\n  getNumberWithMaxTwoDecimalPlaces,\n  getStandardValidator,\n  messageReplace,\n  parsedDateFromAPIValue,\n} from \"utils/CommonUtil\";\nimport {\n  BUTTON_TYPE,\n  DOCUMENT_CATEGORY,\n  FEE_MODE,\n  FEE_RECEIPT_STATUS,\n  INPUT_STYLE_TYPE,\n  LOCAL_STORAGE,\n} from \"utils/Constant\";\nimport { showCurrency } from \"views/transaction/PageCAM/Helper\";\nimport { IDropDownOptions } from \"views/transaction/PageDDE/Login/Helper\";\nimport { IDocumentProofFiles } from \"views/transaction/PageDDE/Login/PageApplicant/OtherDetails/OtherDetails\";\ninterface IData {\n  updateReceiptDetails: ILoginFeeReceiptData;\n  loanInfo?: {\n    applicantName?: string;\n    loanUid?: string;\n    lanId?: string;\n  };\n}\n\nexport const MODULE_FOR_ADD_NEW_RECEIPT: Record<TModuleForAddNewReceipt, TModuleForAddNewReceipt> =\n  {\n    DDE: \"DDE\",\n    FEES: \"FEES\",\n  };\nexport type TModuleForAddNewReceipt = \"DDE\" | \"FEES\";\ninterface IAddNewReceiptDialog {\n  onHide: () => void;\n  visible: boolean;\n  instrumentTypeOptions: IDropDownOptions[];\n  onSubmit: (data: ILoginFeeReceiptData) => void;\n  data: IData;\n  module: TModuleForAddNewReceipt;\n  isLoading?: boolean;\n}\n\ninterface IAutoComplete {\n  name?: string;\n  uid?: string;\n  // parent?: { name?: string; uid: string };\n  code?: string;\n}\n\nexport interface IBankAutoComplete extends IAutoComplete {\n  // parent?: { name?: string; uid: string };\n  branch?: string;\n  accountNo?: string;\n  holderName?: string;\n  ifscCode?: string;\n  upiHandle?: string;\n}\n\nexport interface ILoginFeeReceiptData {\n  uid?: string;\n  instrumentType: string;\n  instrumentDate: string | Date;\n  utrOrChequeNo?: string;\n  amount: string;\n  remark: string;\n  sahayyaBankAccount: IBankAutoComplete;\n  savedDocuments?: any[];\n  unsavedDocuments?: IDocumentInfo | undefined;\n  lanId: string;\n  applicantName: string;\n  loanUid: string;\n  status: string | \"\";\n}\n\ninterface IMetaOptions {\n  category: IDropDownOptions[];\n  type: IDropDownOptions[];\n}\n\nexport interface ILoanDataForReceipt {\n  applicantName: string;\n  lanId: string;\n  loanUid: string;\n}\n\nexport interface IAddNewReceiptDialogRef {\n  onCloseAndClearData: () => any;\n}\n\nconst initialDocInfo: IDocumentProofFiles = {\n  uid: \"\",\n  fileName: \"\",\n  url: \"\",\n  thumbUrl: \"\",\n  signedUrl: \"\",\n  contentType: \"\",\n  docFor: \"\",\n  docType: { uid: \"\", code: \"\", name: \"\" },\n  sectionCode: \"\",\n  sectionName: \"\",\n  isActive: true,\n};\n\nexport const initialNewReceiptData: ILoginFeeReceiptData = {\n  uid: \"\",\n  instrumentType: \"\",\n  instrumentDate: \"\",\n  utrOrChequeNo: \"\",\n  amount: \"\",\n  remark: \"\",\n  sahayyaBankAccount: { name: \"\", uid: \"\", branch: \"\", accountNo: \"\" },\n  savedDocuments: [],\n  lanId: \"\",\n  applicantName: \"\",\n  loanUid: \"\",\n  status: \"\",\n};\n\nconst AddNewReceiptDialog = forwardRef<IAddNewReceiptDialogRef, IAddNewReceiptDialog>(\n  (props, ref) => {\n    const { onHide, visible, instrumentTypeOptions, onSubmit, data, module, isLoading } = props;\n    /*\n    -------------------------------------------------------\n      State\n    -------------------------------------------------------\n  */\n    const [suggestionsTemplate, setSuggestionsTemplate] = useState<IAutoComplete[]>([]);\n    const [pageObj, setPageObj] = useState<ILoginFeeReceiptData>({ ...initialNewReceiptData });\n    const [, forceUpdate] = useState<undefined | boolean>(undefined);\n    const simpleValidator = useRef(\n      new SimpleReactValidator({\n        validators: { ...getStandardValidator() },\n        ...messageReplace(),\n        autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n      })\n    );\n    const documentUploaderRef = useRef<IDocumentUploaderRef | null>(null);\n\n    useImperativeHandle(ref, () => ({\n      onCloseAndClearData: onClose,\n    }));\n\n    /*\n    -------------------------------------------------------\n      useEffect\n    -------------------------------------------------------\n  */\n\n    useEffect(() => {\n      if (data?.updateReceiptDetails?.uid) {\n        setPageObj((prevObj) => ({ ...prevObj, ...data.updateReceiptDetails }));\n      } else if (module === MODULE_FOR_ADD_NEW_RECEIPT.DDE) {\n        setPageObj((prevObj) => ({\n          ...prevObj,\n          loanUid: data?.loanInfo?.loanUid ?? \"\",\n          applicantName: data?.loanInfo?.applicantName ?? \"\",\n          lanId: data?.loanInfo?.lanId ?? \"\",\n        }));\n      }\n    }, [data]);\n\n    useEffect(() => {\n      simpleValidator.current.visibleFields = [];\n      simpleValidator.current.hideMessages();\n      // for create pre-populate date\n      setPageObj((prevObj) => ({\n        ...prevObj,\n        instrumentDate: parsedDateFromAPIValue(getLocalStorage(LOCAL_STORAGE.SYSTEM_DATE)),\n      }));\n    }, [visible]);\n\n    useEffect(() => {\n      if (instrumentType === FEE_MODE.CASH) {\n        setPageObj((prevPageObj) => ({\n          ...prevPageObj,\n          utrOrChequeNo: \"\",\n          sahayyaBankAccount: { ...initialNewReceiptData.sahayyaBankAccount },\n        }));\n      }\n      if (instrumentType === FEE_MODE.CHEQUE) {\n        setPageObj((prevPageObj) => ({\n          ...prevPageObj,\n          sahayyaBankAccount: { ...initialNewReceiptData.sahayyaBankAccount },\n        }));\n      }\n      simpleValidator.current.visibleFields = [];\n      simpleValidator?.current?.purgeFields();\n    }, [pageObj?.instrumentType]);\n\n    useEffect(() => {\n      console.log(\"updated PageObj\", pageObj);\n    }, [pageObj]);\n\n    /*\n    -------------------------------------------------------\n      Service Calls\n    -------------------------------------------------------\n  */\n\n    /* \n  -------------------------------------------------------\n    Handlers\n  -------------------------------------------------------\n  */\n\n    const handleAutoCompleteBankChange = (event: ChangeEvent<HTMLInputElement> | any) => {\n      const { name, value } = event.target;\n      if (typeof value === \"object\") {\n        setPageObj((prevPageObj: any) => ({\n          ...prevPageObj,\n          [name]: {\n            name: value?.name,\n            uid: value?.uid,\n            branch: value?.branch,\n            accountNo: value?.accountNo,\n          },\n        }));\n      } else {\n        setPageObj((prevPageObj) => ({\n          ...prevPageObj,\n          [name]: { name: value, uid: \"\", branch: \"\", accountNo: \"\" },\n        }));\n      }\n    };\n\n    const handleAutoCompleteLoanApplicationNo = (event: ChangeEvent<HTMLInputElement> | any) => {\n      const { name, value } = event.target;\n      if (typeof value === \"object\") {\n        setPageObj((prevPageObj: any) => ({\n          ...prevPageObj,\n          lanId: value?.lanId,\n          loanUid: value?.uid,\n          applicantName: value?.applicantName,\n        }));\n      } else {\n        setPageObj((prevPageObj) => ({\n          ...prevPageObj,\n          lanId: value,\n          loanUid: \"\",\n          applicantName: \"\",\n        }));\n      }\n    };\n\n    const handleChange = (e: ChangeEvent<HTMLInputElement> | any) => {\n      setPageObj((prevPageObj: any) => ({\n        ...prevPageObj,\n        [e.target.name]: e.target.value,\n      }));\n    };\n\n    const handleAmountChange = (e: ChangeEvent<HTMLInputElement> | any) => {\n      \n      const unformattedValue: number = (e.target.value);\n      setPageObj((prevPageObj: any) => ({\n        ...prevPageObj,\n        [e.target.name]: showCurrency(unformattedValue),\n      }));\n    };\n\n    const handleInstrumentDateChange = (event: any) => {\n      const { value } = event.target;\n      // const age = YearDifference(new Date(), value);\n      setPageObj((prevPageObj: any) => ({\n        ...prevPageObj,\n        instrumentDate: value,\n        // ageAsOfLoanCreation: age,\n      }));\n    };\n\n    const onSave = () => {\n      const unSavedDocuments = documentUploaderRef.current?.getUploadedData();\n      if (\n        !validateForm() ||\n        ((pageObj.instrumentType === FEE_MODE.CHEQUE || pageObj.instrumentType === FEE_MODE.UPI) &&\n          !unSavedDocuments?.documentUid)\n      ) {\n        return;\n      }\n      return onSubmit({ ...pageObj, unsavedDocuments: unSavedDocuments });\n    };\n\n    /* \n    -------------------------------------------------------\n    Validators\n    -------------------------------------------------------\n  */\n    const validate = (e: any) => {\n      simpleValidator?.current?.showMessageFor(e?.target?.name);\n    };\n\n    const validateForm = () => {\n      let isValid = false;\n      isValid = simpleValidator?.current?.allValid() ?? false;\n      if (isValid) {\n        return isValid;\n      } else {\n        forceUpdate((prev) => !prev);\n        simpleValidator?.current?.showMessages();\n        forceUpdate((prev) => !prev);\n        return false;\n      }\n    };\n\n    /*\n    -------------------------------------------------------\n    Button Click Handlers\n    -------------------------------------------------------\n  */\n\n    const onClose = () => {\n      setPageObj((prevPageObj) => ({ ...prevPageObj, ...initialNewReceiptData }));\n      onHide();\n    };\n\n    /* \n -------------------------------------------------------\n   Helper Functions\n -------------------------------------------------------\n  */\n\n    const searchBank = async (event: any) => {\n      let suggestionsTemplate = [];\n      // setIsLoading(true);\n      try {\n        await DepositAccountService.getBankAccount(0, 50, event.query).then((res) => {\n          const options = res.data.results?.map((item: any) => ({\n            name: item.bank.name,\n            accountNo: item.accountNumber,\n            branch: item.ifsc.branch,\n            uid: item.uid,\n          }));\n          if (res.status === 200) {\n            suggestionsTemplate = [...(options ?? [])];\n            // setIsLoading(false);\n          }\n        });\n      } catch (error) {\n        console.log(error);\n      }\n\n      if (suggestionsTemplate.length === 0) {\n        suggestionsTemplate.push({ name: \"\", uid: \"\" });\n      }\n\n      setSuggestionsTemplate(suggestionsTemplate);\n    };\n\n    const searchLoanApplicationNo = async (event: any) => {\n      let suggestionsTemplate = [];\n      // setIsLoading(true);\n      try {\n        await LoanService.getAll(0, 50, `&lanId:lk=${event.query}&loanStatus:nq=DRAFT`).then(\n          (res) => {\n            if (res.status === 200) {\n              suggestionsTemplate = res.data.results;\n            }\n          }\n        );\n      } catch (error) {\n        console.log(error);\n      }\n\n      if (suggestionsTemplate.length === 0) {\n        suggestionsTemplate.push({ name: \"\", uid: \"\" });\n      }\n\n      setSuggestionsTemplate(suggestionsTemplate);\n    };\n\n    /* \n    -------------------------------------------------------\n      Sectional Render Functions: For Sub components / section wise renders\n    -------------------------------------------------------\n  */\n\n    const renderInputForLanId = () => {\n      if (module === MODULE_FOR_ADD_NEW_RECEIPT.DDE) {\n        return (\n          <div className=\"group grid\">\n            <Label label={\"label.dde.loanApplicationNo\"} />\n            <div className=\"mt-1\">\n              <Label label={pageObj?.lanId} />\n            </div>\n          </div>\n        );\n      }\n      return (\n        <AutoComplete\n          label=\"label.dde.loanApplicationNo\"\n          name=\"loanApplicationNo\"\n          value={pageObj?.lanId}\n          variant={INPUT_STYLE_TYPE.PRIMARY}\n          suggestions={suggestionsTemplate}\n          completeMethod={searchLoanApplicationNo}\n          onChange={handleAutoCompleteLoanApplicationNo}\n          itemTemplate={itemTemplateApplicationNo}\n          onBlur={validate}\n          // loader={isLoading}\n          validation={simpleValidator?.current?.message(\n            \"loanApplicationNo\",\n            pageObj?.loanUid,\n            \"mandatory\"\n          )}\n        />\n      );\n    };\n\n    const renderInstrumentDate = () => {\n      const { instrumentDate } = pageObj;\n      return (\n        <div>\n          <SystemDatePicker\n            // disabled={pageMode === PAGE_MODE.VIEW}\n            label=\"label.dde.instrumentDate\"\n            name=\"instrumentDate\"\n            value={instrumentDate}\n            variant={INPUT_STYLE_TYPE.SECONDARY}\n            onChange={handleInstrumentDateChange}\n            onBlur={validate}\n            placeholder=\"DD-MM-YYYY \"\n            validation={simpleValidator?.current?.message(\n              \"instrumentDate\",\n              instrumentDate,\n              \"mandatory\"\n            )}\n          />\n        </div>\n      );\n    };\n\n    const renderUtrOrChequeNo = () => {\n      const { utrOrChequeNo } = pageObj;\n      return (\n        <div>\n          <InputBox\n            label={pageObj?.instrumentType === FEE_MODE.CHEQUE?\"label.dde.ChqNo*\":\"label.dde.UTR*\"}\n            name=\"utrOrChequeNo\"\n            variant={INPUT_STYLE_TYPE.SECONDARY}\n            onChange={handleChange}\n            onBlur={validate}\n            value={utrOrChequeNo}\n            className=\"text-right\"\n            validation={simpleValidator?.current?.message(\n              \"utrOrChequeNo\",\n              utrOrChequeNo,\n              pageObj?.instrumentType === FEE_MODE.CHEQUE ? \"mandatory|chequeNo\":\"mandatory\"\n            )}\n          />\n        </div>\n      );\n    };\n\n    const renderAmount = () => {\n      const { utrOrChequeNo } = pageObj;\n      return (\n        <div>\n          <InputBox\n            label=\"label.dde.amount\"\n            name=\"amount\"\n            variant={INPUT_STYLE_TYPE.SECONDARY}\n            onChange={handleAmountChange}\n            onBlur={validate}\n            value={amount}\n            className=\"text-right\"\n            validation={simpleValidator?.current?.message(\n              \"amount\",\n              currencyFormatToNumber(amount),\n              \"mandatory|receiptAmount\"\n            )}\n          />\n        </div>\n      );\n    };\n\n    const renderRemark = () => {\n      const { remark } = pageObj;\n      return (\n        <div>\n          <InputBox\n            label=\"label.dde.remark\"\n            name=\"remark\"\n            variant={INPUT_STYLE_TYPE.SECONDARY}\n            onChange={handleChange}\n            onBlur={validate}\n            value={remark}\n            // className=\"text-right\"\n          />\n        </div>\n      );\n    };\n    const renderInstrumentFields = () => {\n      const { instrumentType, instrumentDate, utrOrChequeNo, amount, remark, sahayyaBankAccount } =\n        pageObj;\n      if (instrumentType === FEE_MODE.UPI) {\n        return (\n          <>\n            {renderInstrumentDate()}\n            {renderUtrOrChequeNo()}\n            {renderAmount()}\n            {renderRemark()}\n            <div>\n              <AutoComplete\n                label=\"label.dde.sahayyaBankAccount\"\n                name=\"sahayyaBankAccount\"\n                value={sahayyaBankAccount?.name}\n                variant={INPUT_STYLE_TYPE.PRIMARY}\n                suggestions={suggestionsTemplate}\n                completeMethod={searchBank}\n                onChange={handleAutoCompleteBankChange}\n                itemTemplate={itemTemplateBank}\n                onBlur={validate}\n                // loader={isLoading}\n                validation={simpleValidator?.current?.message(\n                  \"sahayyaBankAccount\",\n                  sahayyaBankAccount?.uid,\n                  \"mandatory\"\n                )}\n              />\n            </div>\n            <div>\n              <InputBox\n                label=\"label.loanListing.branch\"\n                name=\"branch\"\n                variant={INPUT_STYLE_TYPE.SECONDARY}\n                // onChange={handleChange}\n                onBlur={validate}\n                value={sahayyaBankAccount?.branch}\n                disabled\n              />\n            </div>\n            <div>\n              <InputBox\n                label=\"label.dde.accountNo\"\n                name=\"accountNo\"\n                variant={INPUT_STYLE_TYPE.SECONDARY}\n                // onChange={handleChange}\n                onBlur={validate}\n                value={sahayyaBankAccount?.accountNo}\n                className=\"text-right\"\n                disabled\n              />\n            </div>\n          </>\n        );\n      }\n      if (instrumentType === FEE_MODE.CHEQUE) {\n        return (\n          <>\n            {renderInstrumentDate()}\n            {renderUtrOrChequeNo()}\n            {renderAmount()}\n            {renderRemark()}\n          </>\n        );\n      }\n      if (instrumentType === FEE_MODE.CASH) {\n        return (\n          <>\n            {renderInstrumentDate()}\n            {renderAmount()}\n            {renderRemark()}\n          </>\n        );\n      }\n    };\n\n    const itemTemplateBank = (item: any) => {\n      return itemTemplate(item, `${item?.name}`);\n    };\n\n    const itemTemplateApplicationNo = (item: any) => {\n      return itemTemplate(item, `${item?.lanId}`);\n    };\n\n    const itemTemplate = (item: any, title: any, subTitle?: any) => {\n      if (item?.uid === undefined || item?.uid === \"\") {\n        return (\n          <div className=\"flex flex-col items-center justify-center h-39 pointer-events-none cursor-default\">\n            <Text className=\"text-primary-labelColor mt-2\" label=\"label.noDataFound\" />\n          </div>\n        );\n      }\n      return (\n        <div className=\"flex flex-col\">\n          <Text className=\"text-primary-labelColor\" label={title} />\n          {subTitle ? <Text className=\"text-secondary-gray-500 text-xxs\" label={subTitle} /> : null}\n        </div>\n      );\n    };\n\n    const renderFileUploader = useMemo(() => {\n      return (\n        <div className=\"flex flex-col space-y-4 pl-6 pb-11\">\n          <TextData\n            label={\"label.dde.receiptsProof*\"}\n            value=\"Attach Documents (PDF, JPG, JPEG or PNG)\"\n            titleClass=\"text-primary-gray-700 text-sm font-bold mb-1\"\n          />\n          <div className=\"flex gap-5\">\n            <DocumentUploader\n              ref={documentUploaderRef}\n              mandatoryDocUpload\n              savedDocument={\n                pageObj?.savedDocuments?.[0] ? data?.updateReceiptDetails?.savedDocuments?.[0] : {}\n              }\n              mode={DOC_UPLOADER_MODE.EDIT}\n              queryParamForDocList={DOCUMENT_CATEGORY.DOCUMENT_CATEGORY_FEE_RECEIPT}\n            />\n          </div>\n        </div>\n      );\n    }, [pageObj?.savedDocuments]);\n    /*\n    -------------------------------------------------------\n    Main Rendering\n    -------------------------------------------------------\n  */\n\n    const { amount, instrumentType } = pageObj;\n\n    return (\n      <DialogBox\n        onHide={onClose}\n        visible={visible}\n        modal\n        closable={false}\n        // dismissableMask={true}\n        variant={INPUT_STYLE_TYPE.SECONDARY}\n        className={\" w-[842px] !p-0\"}\n      >\n        {isLoading ? (\n          <SkeletonCustom height=\"19.375rem\" width=\"100%\" borderRadius=\"8px\" animation=\"wave\" />\n        ) : (\n          <AclGuard\n            override={{\n              read:\n                pageObj?.status !== \"\" && pageObj?.status !== FEE_RECEIPT_STATUS.PENDING_DEPOSIT,\n            }}\n          >\n            <div className=\"flex justify-between items-center px-6 pt-3 pb-3 border-b border-primary-gray-600\">\n              <Text\n                className=\"text-primary-primaryTextColor text-base font-bold \"\n                label={pageObj?.uid ? \"label.dde.editReceipts\" : \"label.dde.newReceipts\"}\n              />\n              <div className=\"flex\">\n                <div className=\"mr-6\">\n                  <ButtonBox\n                    buttonType={BUTTON_TYPE.CANCEL_OUTLINE}\n                    onClick={onClose}\n                    className=\"w-8 h-8\"\n                  />\n                </div>\n                <div className=\"\">\n                  <ButtonBox\n                    buttonType={BUTTON_TYPE.COLLECT}\n                    onClickWithLoader={onSave}\n                    className=\"w-8 h-8\"\n                  />\n                </div>\n              </div>\n            </div>\n            <div\n              className={`${\n                instrumentType === FEE_MODE.CHEQUE || instrumentType === FEE_MODE.UPI\n                  ? \"h-[420px]\"\n                  : \"\"\n              }  overflow-y-auto `}\n            >\n              <div\n                className={`mt-7 grid grid-cols-3 gap-3 px-6   ${\n                  !pageObj?.instrumentType ? \"pb-6\" : \"\"\n                } mb-6`}\n              >\n                <div>{renderInputForLanId()}</div>\n                <div className=\"\">\n                  <div className=\"group grid\">\n                    <Label label={\"label.loanListing.applicationName\"} />\n                    <div className=\"mt-1\">\n                      <Label label={pageObj?.applicantName} />\n                    </div>\n                  </div>\n                </div>\n                <div>\n                  <SimpleDropDown\n                    label=\"label.dde.instrumentType\"\n                    name=\"instrumentType\"\n                    placeholder=\"placeholder.dde.instrumentType\"\n                    value={instrumentType}\n                    variant={INPUT_STYLE_TYPE.PRIMARY}\n                    options={instrumentTypeOptions}\n                    optionLabel=\"name\"\n                    optionValue=\"value\"\n                    onChange={handleChange}\n                    onBlur={validate}\n                    disabled={pageObj?.uid ? true : false}\n                    // loader={isLoading}\n                    validation={simpleValidator?.current?.message(\n                      \"instrumentType\",\n                      instrumentType,\n                      \"mandatory\"\n                    )}\n                    // disabled={pageMode === PAGE_MODE.VIEW}\n                  />\n                </div>\n                {renderInstrumentFields()}\n              </div>\n              {instrumentType === FEE_MODE.CHEQUE || instrumentType === FEE_MODE.UPI\n                ? renderFileUploader\n                : null}\n            </div>\n          </AclGuard>\n        )}\n      </DialogBox>\n    );\n  }\n);\n\nexport default AddNewReceiptDialog;\n"],"names":["MODULE_FOR_ADD_NEW_RECEIPT","initialNewReceiptData","AddNewReceiptDialog","forwardRef","props","ref","onHide","visible","instrumentTypeOptions","onSubmit","data","module","isLoading","suggestionsTemplate","setSuggestionsTemplate","useState","pageObj","setPageObj","forceUpdate","simpleValidator","useRef","SimpleReactValidator","getStandardValidator","messageReplace","prev","documentUploaderRef","useImperativeHandle","onClose","useEffect","_a","prevObj","_b","_c","parsedDateFromAPIValue","getLocalStorage","LOCAL_STORAGE","instrumentType","FEE_MODE","prevPageObj","handleAutoCompleteBankChange","event","name","value","handleAutoCompleteLoanApplicationNo","handleChange","handleAmountChange","unformattedValue","showCurrency","handleInstrumentDateChange","onSave","unSavedDocuments","validateForm","validate","isValid","searchBank","DepositAccountService","res","options","item","error","searchLoanApplicationNo","LoanService","renderInputForLanId","jsxs","jsx","Label","AutoComplete","INPUT_STYLE_TYPE","itemTemplateApplicationNo","renderInstrumentDate","instrumentDate","SystemDatePicker","renderUtrOrChequeNo","utrOrChequeNo","InputBox","renderAmount","amount","currencyFormatToNumber","renderRemark","remark","renderInstrumentFields","sahayyaBankAccount","Fragment","itemTemplateBank","itemTemplate","title","subTitle","Text","renderFileUploader","useMemo","TextData","DocumentUploader","DOC_UPLOADER_MODE","DOCUMENT_CATEGORY","DialogBox","SkeletonCustom","AclGuard","FEE_RECEIPT_STATUS","ButtonBox","BUTTON_TYPE","SimpleDropDown"],"mappings":"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"}