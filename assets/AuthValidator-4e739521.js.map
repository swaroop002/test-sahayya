{"version":3,"file":"AuthValidator-4e739521.js","sources":["../../src/components/AuthValidator/AuthValidator.tsx"],"sourcesContent":["import Loader from \"components/Loader/Loader\";\nimport { useState } from \"react\";\nimport { Navigate } from \"react-router-dom\";\nimport { linkPageLogin } from \"routes\";\nimport ACLService from \"services/ACLService\";\nimport HelperService from \"services/HelperService\";\nimport { encode, parseStandardAPIErrorMessage } from \"utils/CommonUtil\";\nimport Page403 from \"views/Page403\";\n\ninterface IProps {\n  AuthorizedComponent: any;\n  urlPath: string;\n  isMenuLoading?: boolean;\n}\n\nfunction AuthValidator(props: IProps) {\n  const { isMenuLoading } = props;\n  const [errorMessageAcl, setErrorMessageAcl] = useState(\"\");\n\n  const isValid = () => {\n    return !!HelperService.getUserInfo();\n  };\n\n  const getAccessOfPath = async () => {\n    try {\n      const res = await ACLService.getRouteAccessModel(props.urlPath);\n      ACLService.saveRouteAccessControl(res);\n    } catch (error) {\n      setErrorMessageAcl(parseStandardAPIErrorMessage(error));\n    }\n  };\n\n  if (isMenuLoading) {\n    return <Loader />;\n  }\n\n  if (isValid()) {\n    if (ACLService.isAclApplicable()) {\n      if (ACLService.isRouteHasAccess(props.urlPath)) {\n        // getAccessOfPath();\n        if (!errorMessageAcl) {\n          return <props.AuthorizedComponent />;\n        } else {\n          return <>{errorMessageAcl}</>;\n        }\n      } else {\n        return <Page403 />;\n      }\n    } else {\n      return <props.AuthorizedComponent />;\n    }\n  } else {\n    return <Navigate to={`${linkPageLogin}?rto=` + encode(props.urlPath)} />;\n  }\n}\n\nexport default AuthValidator;\n"],"names":["AuthValidator","props","isMenuLoading","errorMessageAcl","setErrorMessageAcl","useState","isValid","HelperService","Loader","ACLService","jsx","Page403","Navigate","linkPageLogin","encode"],"mappings":"2IAeA,SAASA,EAAcC,EAAe,CAC9B,KAAA,CAAE,cAAAC,CAAkB,EAAAD,EACpB,CAACE,EAAiBC,CAAkB,EAAIC,WAAS,EAAE,EAEnDC,EAAU,IACP,CAAC,CAACC,EAAc,cAYzB,OAAIL,QACMM,EAAO,CAAA,CAAA,EAGbF,IACEG,EAAW,kBACTA,EAAW,iBAAiBR,EAAM,OAAO,EAEtCE,oBAGO,SAAgBA,CAAA,CAAA,EAFnBO,MAACT,EAAM,oBAAN,CAA0B,CAAA,QAK5BU,EAAQ,CAAA,CAAA,EAGXD,MAACT,EAAM,oBAAN,CAA0B,CAAA,EAG7BS,MAACE,GAAS,GAAI,GAAGC,SAAuBC,EAAOb,EAAM,OAAO,CAAG,CAAA,CAE1E"}