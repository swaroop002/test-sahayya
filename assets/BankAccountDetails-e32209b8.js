import{r,aF as i,ad as B,ae as F,af as M,j as o,c8 as me,T as v,o as p,aH as be}from"./index-e8217573.js";import{D as ge}from"./DocumentUploader-e2ec1a13.js";import{I as C}from"./InputBox-b9e88f52.js";import{S as pe}from"./SaveComponent-160c5b32.js";import{S as Ne}from"./SimpleDropDown-061a3470.js";import{S as he}from"./Skeleton-7e12d019.js";import{A as Ce}from"./AutoComplete-0bca608a.js";import{T as fe}from"./TextData-06df331b.js";import{f as Se}from"./Helper-03e9d878.js";import{B as xe}from"./BankAccountDetailsService-375c75c8.js";const Me=r.forwardRef((U,_)=>{const{data:f=Se,isLoading:w,disabled:Y,disabledSaveMenu:R,cardNumber:T,pageType:H,ocrRelatedData:c,dropDownOptions:W,documentCategory:G=me.DOCUMENT_CATEGORY_BANK_ACCOUNT_DOCUMENT,onSaveBankAccountDetails:L,onRemoveBankAccountDetails:S}=U,[b,N]=r.useState(f),[u,x]=r.useState(i.VIEW),[ve,q]=r.useState("bottom-right"),[J,D]=r.useState(!1),[Te,K]=r.useState(""),[X,z]=r.useState(!1),[Q,Z]=r.useState([]),[$,De]=r.useState({isBankProofMandatory:!H}),l=r.useRef(null),[,h]=r.useState(!1),a=r.useRef(new B({validators:{...F()},...M(),autoForceUpdate:{forceUpdate:()=>h(e=>!e)}})),V=[{className:"",label:"Remove",command:()=>{S==null||S()},disabled:T===0}];r.useImperativeHandle(_,()=>({save:oe,onSaveSuccess:te,remove:ne,resetValidator:j}));const m=e=>{var n,t;(t=a==null?void 0:a.current)==null||t.showMessageFor((n=e==null?void 0:e.target)==null?void 0:n.name)},ee=()=>{var n,t;let e=!1;return e=(n=a==null?void 0:a.current)==null?void 0:n.allValid(),e||(h(s=>!s),(t=a==null?void 0:a.current)==null||t.showMessages(),h(s=>!s),!1)},g=e=>{N({...b,[e.target.name]:e.target.value})},ae=e=>{const{name:n,value:t}=e.target;N(typeof t=="object"?s=>{var d;return{...s,[n]:{name:t==null?void 0:t.ifscCode,uid:t==null?void 0:t.uid},bankName:(d=t==null?void 0:t.bank)==null?void 0:d.name,branchName:t==null?void 0:t.branch}}:s=>({...s,[n]:{name:t},bankName:"",branchName:""}))},te=()=>x(i.VIEW),ne=()=>({...{...b},isActive:!1}),oe=()=>{var n;const e=(n=l==null?void 0:l.current)==null?void 0:n.getUploadedData();if(!(!ee()||!e))return N({...b}),ce()},se=()=>{var e;j(),(e=l==null?void 0:l.current)==null||e.resetValidator(),x(i.VIEW)},re=()=>x(i.EDIT),ce=()=>{var n;const e=(n=l==null?void 0:l.current)==null?void 0:n.getUploadedData();return{...b,loanDocumentsProof:e}},j=()=>{var e;a.current=new B({validators:{...F()},...M(),autoForceUpdate:{forceUpdate:()=>h(n=>!n)}}),(e=a==null?void 0:a.current)==null||e.hideMessages()},le=async e=>{let n=[];D(!0);try{await xe.findByIFSCCode(0,10,e.query).then(t=>{t.status===200&&(n=[...t.data.results],D(!1))})}catch{q("top-right"),K(be.ERROR),z(!X)}n.length===0&&n.push({name:void 0,code:void 0,uid:void 0}),Z(n)},de=e=>(e==null?void 0:e.ifscCode)===void 0?o.jsx("div",{className:"flex flex-col items-center justify-center h-39 pointer-events-none cursor-default",children:o.jsx(v,{className:"text-primary-labelColor mt-2",label:"label.noDataFound"})}):o.jsx("div",{className:"flex flex-col",children:o.jsx(v,{className:"text-primary-labelColor",label:e==null?void 0:e.ifscCode})}),ie=()=>{var n,t,s,d;const{isBankProofMandatory:e}=$;return o.jsxs("div",{className:"flex flex-col space-y-4",children:[o.jsx(fe,{label:"label.dde.bankAccountDetails.file.proof",value:"Attach Documents (PDF, JPG, JPEG or PNG)",titleClass:"text-primary-sideBarBgColor text-sm font-bold mb-1"}),o.jsx("div",{children:o.jsx(ge,{mandatoryDocUpload:e,ref:l,savedDocument:(n=f.loanDocuments)!=null&&n[0]?f.loanDocuments[0]:{},mode:u,queryParamForDocList:G,ocrStageName:c==null?void 0:c.ocrStageName,ocrSubstageName:c==null?void 0:c.ocrSubstageName,ocrPayloadData:{loanUid:((t=c==null?void 0:c.ocrPayloadData)==null?void 0:t.loanUid)??"",applicant:{uid:((d=(s=c==null?void 0:c.ocrPayloadData)==null?void 0:s.applicant)==null?void 0:d.uid)??""}}})})]})},ue=()=>{var y,A,I,k,P,O;const{accountHolderName:e,IFSCCode:n,bankName:t,branchName:s,accountType:d,accountNumber:E}=b;return o.jsxs(o.Fragment,{children:[o.jsx(v,{label:"label.dde.bankDetails",className:"text-primary-gray-700 text-sm font-bold mb-1"}),o.jsxs("div",{className:"grid grid-cols-4 gap-x-4 gap-y-5 mt-5",children:[o.jsx("div",{className:"col-span-1",children:o.jsx(C,{variant:p.SECONDARY,label:"label.bankDetails.accountHolderName",placeholder:"Enter Name of Account Holder",name:"accountHolderName",value:e,onChange:g,validation:(y=a==null?void 0:a.current)==null?void 0:y.message("accountHolderName",e,"mandatory"),onBlur:m,disabled:u===i.VIEW})}),o.jsx("div",{className:"col-span-1",children:o.jsx(Ce,{variant:p.PRIMARY,label:"label.bankDetails.IFSCCode",placeholder:"Enter IFSC Code",name:"IFSCCode",value:n.name,suggestions:Q,completeMethod:le,onChange:ae,itemTemplate:de,loader:J,validation:(A=a==null?void 0:a.current)==null?void 0:A.message("IFSCCode",n.uid,"mandatory"),onBlur:m,disabled:u===i.VIEW})}),o.jsx("div",{className:"col-span-1",children:o.jsx(C,{variant:p.SECONDARY,label:"label.bankDetails.bankName",placeholder:"Enter Bank Name",name:"bankName",value:t,onChange:g,validation:(I=a==null?void 0:a.current)==null?void 0:I.message("bankName",t,"mandatory"),onBlur:m,disabled:!0})}),o.jsx("div",{className:"col-span-1",children:o.jsx(C,{variant:p.SECONDARY,label:"label.bankDetails.branchName",placeholder:"Enter Branch Name",name:"branchName",value:s,onChange:g,validation:(k=a==null?void 0:a.current)==null?void 0:k.message("branchName",s,"mandatory"),onBlur:m,disabled:!0})}),o.jsx("div",{className:"col-span-1",children:o.jsx(Ne,{label:"label.bankDetails.accountType",placeholder:"Select Account Type",name:"accountType",value:d,onChange:g,options:W.ACCOUNT_OPTION,validation:(P=a==null?void 0:a.current)==null?void 0:P.message("accountType",d,"mandatory"),onBlur:m,disabled:u===i.VIEW,optionLabel:"name",optionValue:"code"})}),o.jsx("div",{className:"col-span-1",children:o.jsx(C,{variant:p.SECONDARY,label:"label.bankDetails.accountNumber",placeholder:"Enter Account Number",name:"accountNumber",className:"text-right",value:E,onChange:g,validation:(O=a==null?void 0:a.current)==null?void 0:O.message("accountNumber",E,"mandatory|accountNumber"),onBlur:m,disabled:u===i.VIEW})})]}),ie()]})};return o.jsx("div",{className:"",children:w?o.jsx(he,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"}):o.jsx(pe,{disabled:Y,title:"label.dde.bankAccount",titleArgs:{count:T},pageMode:u,onCancel:se,onEdit:re,onSave:L,kebabModel:V,disabledMenu:R,children:ue()})})});export{Me as B};
//# sourceMappingURL=BankAccountDetails-e32209b8.js.map
