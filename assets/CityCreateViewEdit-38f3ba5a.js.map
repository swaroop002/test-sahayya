{"version":3,"file":"CityCreateViewEdit-38f3ba5a.js","sources":["../../src/views/masterData/Location/City/CityCreateViewEdit/CityCreateViewEdit.tsx"],"sourcesContent":["import ButtonBox from \"components/ButtonBox/ButtonBox\";\nimport InputBox from \"components/InputBox/InputBox\";\nimport InputTextArea from \"components/InputTextArea/InputTextArea\";\nimport PageTitle from \"components/PageTitle/PageTitle\";\nimport { RouteProps, withRouter } from \"hoc/withRouter\";\nimport queryString from \"query-string\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { linkCity } from \"routes\";\nimport CityService from \"services/masterdata/Location/City\";\nimport { validateGetAPIResponse } from \"utils/CommonUtil\";\nimport {\n  ACTIVE_TYPE,\n  BUTTON_TYPE, INPUT_STYLE_TYPE, PAGE_MODE\n} from \"utils/Constant\";\n\ninterface IProps extends RouteProps {}\n\nconst CityCreateViewEdit = (props: IProps) => {\n  /*\n      -------------------------------------------------------\n        States\n      -------------------------------------------------------\n    */\n  const [pageObj, setPageObj] = useState({\n    city: \"\",\n    state: \"\",\n    country: \"\",\n    description: \"\",\n    alternative_name: \"\",\n    reason: \"\",\n    isActive: \"\",\n  });\n  const [initialObj, setInitialObj] = useState({\n    city: \"\",\n    state: \"\",\n    country: \"\",\n    description: \"\",\n    alternative_name: \"\",\n    reason: \"\",\n    isActive: \"\",\n  });\n  const [pageMode, setPageMode] = useState(PAGE_MODE.CREATE);\n  const [uid, setUid] = useState<String>(\"\");\n  const toastMessageRef = useRef(null);\n\n  /*\n    -------------------------------------------------------\n      Hooks: useEffect\n    -------------------------------------------------------\n  */\n  useEffect(() => {\n    let parsed: {\n      mode?: string;\n    } = queryString.parse(props.location.search);\n    if (parsed?.mode && parsed?.mode !== undefined) {\n      setPageMode(parsed.mode);\n    }\n  }, []);\n\n  /*\n    -------------------------------------------------------\n      Handlers: Event handler for onChange, onBlur etc\n    -------------------------------------------------------\n  */\n\n  const handleInputChange = (event: any) => {\n    const { name, value } = event.target;\n    setPageObj((prevPageObj) => ({\n      ...prevPageObj,\n      [name]: value,\n    }));\n  };\n\n  useEffect(() => {\n    let parsed: {\n      mode?: string;\n      uid?: string;\n    } = queryString.parse(props.location.search);\n    if (parsed?.mode && parsed?.mode !== undefined) {\n      setPageMode(parsed.mode);\n    }\n    if (parsed?.uid && parsed?.uid !== undefined) {\n      setUid(parsed.uid);\n\n      CityService.findById(parsed.uid)\n        .then((res: any) => {\n          if (validateGetAPIResponse(res)) {\n            console.log(res);\n            if (Object.keys(res.data).length > 0 || res.data.id) {\n              setPageObj({\n                city: res?.data?.name || \"\",\n                state: res?.data?.state?.name || \"\",\n                country: res?.data?.state?.country || \"\",\n                alternative_name: res?.data?.alternateNames || \"\",\n                description: res?.data?.description || \"\",\n                reason: res?.data.reason || \" \",\n                isActive: res?.data?.isActive ? ACTIVE_TYPE.ACTIVE : ACTIVE_TYPE.INACTIVE,\n              });\n              setInitialObj({ ...res?.data });\n            }\n          }\n        })\n        .catch((err) => {\n          // IF API fails to load, show the error message\n        });\n    }\n  }, []);\n\n  /* \n    -------------------------------------------------------\n      ButtonClick Functions:\n    -------------------------------------------------------\n  */\n  const onSaveClick = () => {};\n\n  const onCancelClick = () => {\n    props.navigate(linkCity);\n  };\n\n  const onApproveClick = () => {};\n\n  const onBackClick = () => {\n    props.navigate(linkCity);\n  };\n\n  const onEditClick = () => {\n    setPageMode(PAGE_MODE.EDIT);\n  };\n\n  /* \n    -------------------------------------------------------\n      Helper Functions:\n    -------------------------------------------------------\n  */\n  const getPageTitle = () => {\n    switch (pageMode) {\n      case PAGE_MODE.CREATE:\n        return \"heading.city.create\";\n      case PAGE_MODE.VIEW:\n        return \"heading.city.view\";\n      case PAGE_MODE.EDIT:\n        return \"heading.city.edit\";\n      default:\n        return \"heading.city.create\";\n    }\n  };\n\n  const { city, state, country, description, alternative_name, reason, isActive } = pageObj;\n\n  return (\n    <div className=\"h-full mx-6\">\n      <div className=\"flex w-full justify-between pt-6 items-center\">\n        <div className=\" h-7.5\">\n          <PageTitle title={getPageTitle()} />\n        </div>\n        <div className=\"flex mr-5\">\n          {pageMode === PAGE_MODE.CREATE || pageMode === PAGE_MODE.EDIT ? (\n            <>\n              <div className=\"mr-5\">\n                <ButtonBox\n                  className=\"reset-red\"\n                  buttonType={BUTTON_TYPE.CANCEL_OUTLINE}\n                  onClick={onCancelClick}\n                />\n              </div>\n              <div className=\"mr-10\">\n                <ButtonBox buttonType={BUTTON_TYPE.SAVE_OUTLINE} onClick={onSaveClick} />\n              </div>\n              <div>\n                <ButtonBox\n                  className=\"approve-primary\"\n                  buttonType={BUTTON_TYPE.SEND_FOR_APPROVAL}\n                  onClick={onApproveClick}\n                />\n              </div>\n            </>\n          ) : (\n            <>\n              <div className=\"mr-5\">\n                <ButtonBox buttonType={BUTTON_TYPE.BACK_OUTLINE} onClick={onBackClick} />\n              </div>\n              <div className=\"\">\n                <ButtonBox\n                  buttonType={BUTTON_TYPE.EDIT_OUTLINE}\n                  className=\"blue-primary\"\n                  onClick={onEditClick}\n                />\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n      <div className=\"grid grid-cols-4 gap-3\">\n        <div className=\"col-span-1\">\n          <InputBox\n            label=\"input.city.city\"\n            name=\"state\"\n            variant={INPUT_STYLE_TYPE.SECONDARY}\n            onChange={handleInputChange}\n            value={city}\n            disabled={pageMode === PAGE_MODE.VIEW}\n          />\n        </div>\n        <div className=\"col-span-1\">\n          <InputBox\n            label=\"input.city.state\"\n            name=\"state\"\n            variant={INPUT_STYLE_TYPE.SECONDARY}\n            onChange={handleInputChange}\n            value={state}\n            disabled={pageMode === PAGE_MODE.VIEW}\n          />\n        </div>\n        <div className=\"col-span-1\">\n          <InputBox\n            label=\"input.city.alternative_name\"\n            name=\"country\"\n            variant={INPUT_STYLE_TYPE.SECONDARY}\n            onChange={handleInputChange}\n            value={alternative_name}\n            disabled={pageMode === PAGE_MODE.VIEW}\n          />\n        </div>\n        <div className=\"col-span-1\">\n          <InputBox\n            label=\"input.city.country\"\n            name=\"country\"\n            variant={INPUT_STYLE_TYPE.SECONDARY}\n            onChange={handleInputChange}\n            value={country}\n            disabled={pageMode === PAGE_MODE.VIEW}\n          />\n        </div>\n      </div>\n      <div className=\"grid grid-cols-4 gap-3\">\n        <div className=\"col-span-2\">\n          <InputTextArea\n            label=\"input.city.description\"\n            name=\"description\"\n            variant={INPUT_STYLE_TYPE.SECONDARY}\n            maxCount={200}\n            onChange={handleInputChange}\n            value={description}\n            disabled={pageMode === PAGE_MODE.VIEW}\n          />\n        </div>\n        <div className=\"col-span-2\">\n          <InputTextArea\n            label=\"input.city.reason\"\n            name=\"reason\"\n            variant={INPUT_STYLE_TYPE.SECONDARY}\n            maxCount={200}\n            onChange={handleInputChange}\n            value={reason}\n            disabled={pageMode === PAGE_MODE.VIEW}\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\nexport default withRouter(CityCreateViewEdit);\n"],"names":["CityCreateViewEdit","props","pageObj","setPageObj","useState","initialObj","setInitialObj","pageMode","setPageMode","PAGE_MODE","uid","setUid","useRef","useEffect","parsed","queryString","handleInputChange","event","name","value","prevPageObj","CityService","res","validateGetAPIResponse","_a","_c","_b","_e","_d","_f","_g","_h","ACTIVE_TYPE","err","onSaveClick","onCancelClick","linkCity","onApproveClick","onBackClick","onEditClick","getPageTitle","city","state","country","description","alternative_name","reason","isActive","jsxs","jsx","PageTitle","Fragment","ButtonBox","BUTTON_TYPE","InputBox","INPUT_STYLE_TYPE","InputTextArea","CityCreateViewEdit$1","withRouter"],"mappings":"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"}