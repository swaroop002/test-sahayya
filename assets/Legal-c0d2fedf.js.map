{"version":3,"file":"Legal-c0d2fedf.js","sources":["../../src/views/transaction/PageDDE/Legal/Legal.tsx"],"sourcesContent":["import { updateLoanDetail } from \"actions/LoanDetailActions\";\nimport chatIcon from \"assets/chatSvg/chatIcon.svg\";\nimport AuthValidator from \"components/AuthValidator/AuthValidator\";\nimport ButtonBox from \"components/ButtonBox/ButtonBox\";\nimport MainMessageBody from \"components/ChatComponents/MainMessageBody\";\nimport DialogBox from \"components/Dialog/Dialog\";\nimport ErrorDialog from \"components/ErrorDialog/ErrorDialog\";\nimport Loader from \"components/Loader/Loader\";\nimport SimpleOverlayPanel from \"components/SimpleOverlayPanel/SimpleOverlayPanel\";\nimport Text from \"components/Text/Text\";\nimport TextButton from \"components/TextButton/TextButton\";\nimport ToastCustom from \"components/Toast\";\nimport { ToastPositionType } from \"primereact/toast\";\nimport { Suspense, useEffect, useRef, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { NavLink, Outlet, Route, Routes, useParams } from \"react-router-dom\";\nimport { linkAuthRoute, linkBasePath } from \"routes\";\nimport ACLService from \"services/ACLService\";\nimport LegalService from \"services/transaction/DDE/LegalService\";\nimport LoanService from \"services/transaction/LoanService\";\nimport {\n  formatDate,\n  getEnvVariableValue,\n  getLocalStorage,\n  parseStandardAPIErrorMessage,\n  validatePutAPIResponse,\n} from \"utils/CommonUtil\";\nimport {\n  BUTTON_TYPE,\n  LOAN_STAGE_STATUS,\n  LOCAL_STORAGE,\n  SAHAYYA_USER_TYPE,\n  STATIC_MASTER_TYPE_TOAST_TEXT,\n  TOAST_STYLE_TYPE,\n} from \"utils/Constant\";\nimport {\n  LINK_DDE_STAGE_AND_STATUS,\n  LINK_LEGAL,\n  LINK_LEGAL_DEVIATIONS,\n  LINK_LEGAL_DOCUMENT_EXCHANGE,\n  LINK_LEGAL_REPORT,\n  LINK_LOAN_DETAIL,\n  LINK_PARTNER_TASK_LIST,\n  legalRoutes,\n} from \"../../../../transactionRoutes\";\nimport ChatServices from \"services/ChatServices\";\nimport AclGuard from \"components/AclGuard/AclGuard\";\nconst LEGAL_MENU = [\n  {\n    id: 1,\n    name: \"Report\",\n    path: LINK_LEGAL_REPORT,\n  },\n  {\n    id: 2,\n    name: \"Document Exchange\",\n    path: LINK_LEGAL_DOCUMENT_EXCHANGE,\n  },\n  {\n    id: 3,\n    name: \"Deviations\",\n    path: LINK_LEGAL_DEVIATIONS,\n  },\n];\ninterface IButtonDisabled {\n  stageComplete: boolean;\n  submit: boolean;\n}\n\nconst initialButtonDisabled: IButtonDisabled = {\n  stageComplete: false,\n  submit: false,\n};\n\nconst Legal = () => {\n  const params: { loanUid?: string; stageUid?: string } = useParams();\n  const dispatch = useDispatch();\n\n  const [buttonDisabled, setButtonDisabled] = useState({\n    ...initialButtonDisabled,\n  });\n  const [showDialogAPIError, setShowDialogAPIError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState<any>(\"\");\n  const [position] = useState<ToastPositionType | undefined>(\"bottom-right\");\n  const [toastMessage, setToastMessage] = useState(\"\");\n  const [toastMessageVariant, setToastMessageVariant] = useState(TOAST_STYLE_TYPE.PRIMARY);\n  const [triggerToast, setTriggerToast] = useState(false);\n  const [dataForViewDetails, setDataForViewDetails] = useState({\n    assignedTo: \"\",\n    delegateTo: \"\",\n    initiation: \"\",\n    internalVendor: \"\",\n    externalVendor: \"\",\n    status: \"\",\n  });\n  const [isMessageDialogVisible, setIsMessageDialogVisible] = useState(false);\n  const [isNewMessageAvailable, setIsNewMessageAvailable] = useState(false);\n  const overlayPanelRef = useRef(null);\n  const toastMessageRef = useRef(null);\n\n  const userProfile = useSelector((state: any) => state.UserProfileReducers.profileObj);\n  const isPartnerUser = userProfile?.sahayyaUserType === SAHAYYA_USER_TYPE.PARTNER_USER;\n\n  useEffect(() => {\n    getLoanDetail();\n  }, []);\n  // for message\n  useEffect(() => {\n    console.log(isMessageDialogVisible, \"message \");\n    const pollingTimingForConversation = getEnvVariableValue(\"VITE_MESSAGE_CONVERSATION_TIMING\");\n    const callAPI = async () => {\n      try {\n        const res = await ChatServices.checkNewMessageAvailability(params?.stageUid ?? \"\");\n        setIsNewMessageAvailable(res?.data);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    callAPI();\n    const intervalId = setInterval(callAPI, pollingTimingForConversation);\n    return () => {\n      clearInterval(intervalId);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (params.stageUid) {\n      const stageDetail = JSON.parse(getLocalStorage(LOCAL_STORAGE.STAGE_DETAIL));\n\n      if (\n        stageDetail?.status === LOAN_STAGE_STATUS.COMPLETED ||\n        stageDetail?.status === LOAN_STAGE_STATUS.CANCELLED\n      ) {\n        setButtonDisabled((prevState) => ({ ...prevState, stageComplete: true, submit: true }));\n      } else if (stageDetail?.status === LOAN_STAGE_STATUS.IN_REVIEW) {\n        setButtonDisabled((prevState) => ({ ...prevState, stageComplete: false, submit: true }));\n      } else {\n        setButtonDisabled((prevState) => ({ ...prevState, stageComplete: false, submit: false }));\n      }\n    }\n  }, [params.stageUid]);\n\n  useEffect(() => {\n    if (toastMessageRef?.current && toastMessage !== \"\") {\n      // @ts-ignore: will be fixed in future\n      toastMessageRef?.current?.showFunction();\n    }\n  }, [toastMessage, toastMessageVariant, triggerToast]);\n\n  useEffect(() => {\n    if (errorMessage) {\n      setShowDialogAPIError(true);\n    }\n  }, [errorMessage]);\n\n  const getLoanDetail = () => {\n    const uid = params.loanUid;\n    const search = `&uid=${uid}`;\n    LoanService.getAll(0, 1, search)\n      .then((res) => {\n        const stageDetail = JSON.parse(getLocalStorage(LOCAL_STORAGE.STAGE_DETAIL));\n        const results = res.data.results[0];\n        dispatch(updateLoanDetail(results));\n        if (\n          stageDetail?.status === LOAN_STAGE_STATUS.COMPLETED ||\n          stageDetail?.status === LOAN_STAGE_STATUS.CANCELLED\n        ) {\n          setButtonDisabled((prevState) => ({ ...prevState, stageComplete: true, submit: true }));\n        } else if (stageDetail?.status === LOAN_STAGE_STATUS.IN_REVIEW) {\n          setButtonDisabled((prevState) => ({ ...prevState, stageComplete: false, submit: true }));\n        } else {\n          setButtonDisabled((prevState) => ({ ...prevState, stageComplete: false, submit: false }));\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setErrorMessage(parseStandardAPIErrorMessage(err));\n      });\n  };\n\n  const onStageComplete = async () => {\n    try {\n      const res = await LegalService.stageComplete(params?.stageUid ?? \"\");\n\n      if (validatePutAPIResponse(res)) {\n        setToastMessage(\"Stage completed successfully\");\n        setToastMessageVariant(TOAST_STYLE_TYPE.PRIMARY);\n        setTriggerToast(!triggerToast);\n        if (ACLService.isRouteHasAccess(LINK_DDE_STAGE_AND_STATUS)) {\n          const URL = `${linkBasePath}${linkAuthRoute}${LINK_LOAN_DETAIL}${LINK_DDE_STAGE_AND_STATUS}/${params.loanUid}/`;\n          window.location.href = URL;\n        }\n      }\n    } catch (error) {\n      console.log(error);\n      setShowDialogAPIError(true);\n      setErrorMessage(parseStandardAPIErrorMessage(error));\n    }\n  };\n\n  const onSubmit = async () => {\n    try {\n      const res = await LegalService.submit(params?.stageUid ?? \"\");\n\n      setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.SAVED);\n      setToastMessageVariant(TOAST_STYLE_TYPE.PRIMARY);\n      setTriggerToast(!triggerToast);\n    } catch (error) {\n      console.log(error);\n      setShowDialogAPIError(true);\n      setErrorMessage(parseStandardAPIErrorMessage(error));\n    }\n  };\n  const getClassMenu = ({ isActive }: any) => {\n    const className = `tab text-sm px-2.5 py-1 min-w-fit ${\n      isActive\n        ? \"bg-secondary-steelBlue-900 rounded-sm text-white font-medium shadow-activeBtn \"\n        : \"text-primary-500\"\n    }`;\n    return className;\n  };\n  const onViewDetails = (e: any) => {\n    const viewDetailData: any = localStorage.getItem(\"stageDetail\");\n    setDataForViewDetails({\n      assignedTo: JSON.parse(viewDetailData)?.assignee?.name ?? \"NA\",\n      delegateTo: JSON.parse(viewDetailData)?.delegate?.name ?? \"NA\",\n      initiation: JSON.parse(viewDetailData)?.createdAtSystemDate ?? \"NA\",\n      externalVendor: JSON.parse(viewDetailData)?.partner?.name ?? \"NA\",\n      internalVendor: JSON.parse(viewDetailData)?.internalVendor ?? \"NA\",\n      status: JSON.parse(viewDetailData)?.status ?? \"NA\",\n    });\n    if (overlayPanelRef.current) {\n      // @ts-ignore: Will fix later\n      overlayPanelRef.current?.toggle(e);\n    }\n  };\n  const onToggleMessage = (e: any) => {\n    setIsMessageDialogVisible(!isMessageDialogVisible);\n  };\n  const renderLoanDetail = () => {\n    return (\n      <div className=\"flex flex-col gap-4 p-5 \">\n        <div className=\"flex flex-row items-center justify-between\">\n          <div className=\"text-sm text-secondary-stext-900\">Status :</div>\n          <div className=\"ml-2 text-sm font-bold text-secondary-stext-900\">\n            {dataForViewDetails.status}\n          </div>\n        </div>\n        <div className=\"flex flex-row items-center justify-between\">\n          <div className=\"text-sm text-secondary-stext-900\">Assigned to :</div>\n          <div className=\"ml-2 text-sm font-bold text-secondary-stext-900\">\n            {dataForViewDetails.assignedTo}\n          </div>\n        </div>\n        <div className=\"flex flex-row items-center justify-between\">\n          <div className=\"text-sm text-secondary-stext-900\">Delegated to :</div>\n          <div className=\"ml-2 text-sm font-bold text-secondary-stext-900\">\n            {dataForViewDetails.delegateTo}\n          </div>\n        </div>\n        <div className=\"flex flex-row items-center justify-between\">\n          <div className=\"text-sm text-secondary-stext-900\">Date of Initiation :</div>\n          <div className=\"ml-2 text-sm font-bold text-secondary-stext-900\">\n            {formatDate(dataForViewDetails.initiation)}\n          </div>\n        </div>\n        {dataForViewDetails.internalVendor !== \"NA\" ? (\n          <div className=\"flex flex-row items-center justify-between\">\n            <div className=\"text-sm text-secondary-stext-900\">Internal Vendor :</div>\n            <div className=\"ml-2 text-sm font-bold text-secondary-stext-900\">\n              {dataForViewDetails.internalVendor !== \"NA\"\n                ? dataForViewDetails.internalVendor\n                : \"NA\"}\n            </div>\n          </div>\n        ) : null}\n\n        {dataForViewDetails.externalVendor !== \"NA\" ? (\n          <div className=\"flex flex-row items-center justify-between\">\n            <div className=\"text-sm text-secondary-stext-900\">External Vendor :</div>\n            <div className=\"ml-2 text-sm font-bold text-secondary-stext-900\">\n              {dataForViewDetails.externalVendor !== \"NA\"\n                ? dataForViewDetails.externalVendor\n                : \"NA\"}\n            </div>\n          </div>\n        ) : null}\n      </div>\n    );\n  };\n  return (\n    <div>\n      <div className=\"flex flex-col gap-5 \">\n        <div className=\"flex items-center justify-between w-full gap-5 \">\n          <div className=\"flex items-center w-3/4 gap-5 \">\n            <div className=\"flex items-center gap-2 px-5 py-2 border-r border-secondary-stext-600\">\n              <Text\n                className=\"font-bold text-primary-ptext-1000\"\n                label={\"heading.legal.legalReport\"}\n              ></Text>\n              <TextButton\n                className=\"underline text-xs  !text-black  \"\n                label={\"View Details\"}\n                onClick={onViewDetails}\n                isDisabledByAcl\n              />\n              <button onClick={onToggleMessage} className=\"relative \">\n                <img src={chatIcon} alt=\"ChatIcon\" className=\"\" />{\" \"}\n                {isNewMessageAvailable ? (\n                  <div className=\"absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full\"></div>\n                ) : (\n                  <></>\n                )}\n              </button>\n            </div>\n\n            <div className=\"flex\">\n              {LEGAL_MENU.map((menu) => (\n                <NavLink\n                  key={menu.path}\n                  className={getClassMenu}\n                  to={`${linkAuthRoute}${LINK_LOAN_DETAIL}${LINK_LEGAL}/${params.loanUid}/${params.stageUid}${menu.path}`}\n                >\n                  {menu.name}\n                </NavLink>\n              ))}\n            </div>\n          </div>\n\n          <div className=\"flex justify-end w-1/4 gap-4\">\n            {!isPartnerUser ? (\n              <ButtonBox\n                buttonType={BUTTON_TYPE.STAGE_COMPLETE}\n                onClickWithLoader={onStageComplete}\n                size=\"LOAN_DATA\"\n                disabled={buttonDisabled.stageComplete}\n              />\n            ) : (\n              <></>\n            )}\n\n            <ButtonBox\n              buttonType={BUTTON_TYPE.SUBMIT}\n              onClickWithLoader={onSubmit}\n              size=\"LOAN_DATA\"\n              disabled={buttonDisabled.submit}\n            />\n          </div>\n        </div>\n\n        <div className=\"legal-layout-body-content\">\n          <AclGuard override={{ read: buttonDisabled.stageComplete }}>\n            <Suspense fallback={<Loader />}>\n              <Routes>\n                {legalRoutes.map((route, index) => {\n                  return (\n                    <Route\n                      key={index}\n                      path={route.path}\n                      element={\n                        <AuthValidator\n                          AuthorizedComponent={route.component}\n                          urlPath={route.altPath ? route.altPath : route.path}\n                        />\n                      }\n                    />\n                  );\n                })}\n              </Routes>\n            </Suspense>\n            <Outlet />\n          </AclGuard>\n        </div>\n\n        <ErrorDialog\n          onHide={() => {\n            setShowDialogAPIError(false);\n            setErrorMessage(\"\");\n          }}\n          visible={showDialogAPIError}\n          errorMessage={errorMessage}\n        />\n        <SimpleOverlayPanel\n          className=\"rounded-lg shadow-lg !w-80 p-1.5 \"\n          ref={overlayPanelRef}\n          content={renderLoanDetail()}\n        />\n        <div className=\"relative h-screen\">\n          {/* Background Overlay */}\n          <div className=\"absolute inset-0 z-10 bg-black opacity-50 backdrop-filter backdrop-blur-sm\"></div>\n\n          {isMessageDialogVisible ? (\n            <DialogBox\n              visible={isMessageDialogVisible}\n              closable={false}\n              model={\"false\"}\n              onHide={() => setIsMessageDialogVisible(false)}\n              className=\"rounded-lg shadow-lg !w-240 bg-blend-darken !p-0 !h-162\"\n            >\n              <MainMessageBody params={params} handleCloseOverLay={onToggleMessage} />\n            </DialogBox>\n          ) : null}\n        </div>\n\n        <ToastCustom\n          position={position}\n          ref={toastMessageRef}\n          toastText={toastMessage}\n          variant={toastMessageVariant}\n          onRemove={() => {\n            const URL = linkBasePath + linkAuthRoute + LINK_PARTNER_TASK_LIST;\n            window.location.href = URL;\n          }}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default Legal;\n"],"names":["LEGAL_MENU","LINK_LEGAL_REPORT","LINK_LEGAL_DOCUMENT_EXCHANGE","LINK_LEGAL_DEVIATIONS","initialButtonDisabled","Legal","params","useParams","dispatch","useDispatch","buttonDisabled","setButtonDisabled","useState","showDialogAPIError","setShowDialogAPIError","errorMessage","setErrorMessage","position","toastMessage","setToastMessage","toastMessageVariant","setToastMessageVariant","TOAST_STYLE_TYPE","triggerToast","setTriggerToast","dataForViewDetails","setDataForViewDetails","isMessageDialogVisible","setIsMessageDialogVisible","isNewMessageAvailable","setIsNewMessageAvailable","overlayPanelRef","useRef","toastMessageRef","userProfile","useSelector","state","isPartnerUser","SAHAYYA_USER_TYPE","useEffect","getLoanDetail","pollingTimingForConversation","getEnvVariableValue","callAPI","res","ChatServices","error","intervalId","stageDetail","getLocalStorage","LOCAL_STORAGE","LOAN_STAGE_STATUS","prevState","_a","search","LoanService","results","updateLoanDetail","err","parseStandardAPIErrorMessage","onStageComplete","LegalService","validatePutAPIResponse","ACLService","LINK_DDE_STAGE_AND_STATUS","URL","linkBasePath","linkAuthRoute","LINK_LOAN_DETAIL","onSubmit","STATIC_MASTER_TYPE_TOAST_TEXT","getClassMenu","isActive","onViewDetails","e","viewDetailData","_b","_d","_c","_e","_g","_f","_h","_i","_j","onToggleMessage","renderLoanDetail","jsxs","jsx","formatDate","Text","TextButton","chatIcon","Fragment","menu","NavLink","LINK_LEGAL","ButtonBox","BUTTON_TYPE","AclGuard","Suspense","Loader","Routes","legalRoutes","route","index","Route","AuthValidator","Outlet","ErrorDialog","SimpleOverlayPanel","DialogBox","MainMessageBody","ToastCustom","LINK_PARTNER_TASK_LIST"],"mappings":"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"}