var H=Object.defineProperty;var q=(t,l,r)=>l in t?H(t,l,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[l]=r;var R=(t,l,r)=>(q(t,typeof l!="symbol"?l+"":l,r),r);import{at as X,q as $,r as a,j as e,x as z,aG as O,ag as Q,dl as P,T as Z,N as ee,l as D,i as M,W as se,J as te,ax as ae,K as oe,M as le,dm as ne,Q as ie,V as re,db as ce,dn as de,dp as me,dq as xe,dr as ue,ds as he,dt as pe,du as fe,dv as ge,dw as Ne,L as Le,aH as Ae,cZ as U,b as T,ao as De,f as Te,e as K}from"./index-e8217573.js";import{u as Ee}from"./LoanDetailActions-c6533c8e.js";import{B as Se}from"./ButtonBox-9e46519a.js";import{E as ve}from"./ErrorDialog-d5eef4d7.js";import{S as je}from"./SimpleOverlayPanel-f23b2f6a.js";import{T as _e}from"./TextButton-41b4a67e.js";import{T as we}from"./Toast-ae99ea5b.js";import{L as be}from"./LoanService-d10912e0.js";import{c as Ce,M as Ie,C as ye}from"./MainMessageBody-e15b4437.js";import{D as Re}from"./Dialog-adadaf64.js";import{A as Oe}from"./ACLService-e19daf7c.js";import"./kebab-menu-8835ad2e.js";import"./loader-5f2cfb31.js";import"./TransitionGroup-c8afe0ce.js";import"./Skeleton-7e12d019.js";import"./InputBox-b9e88f52.js";import"./withAuth-6de36ebf.js";import"./StageService-c1c03c89.js";const Pe="/custom/api/login/dde";class Me extends X{constructor(){super(...arguments);R(this,"completeStage",r=>{const m=Pe+`/complete/${r}`;return this.makePutRequestWithAuth(m)})}}const Ue=new Me,Ke=[{id:9,name:"Details",path:ce},{id:1,name:"Applicant",path:de},{id:2,name:"Co-Applicants",path:me},{id:2.1,name:"Corporate Co-Applicant",path:xe},{id:3,name:"Guarantors",path:ue},{id:3.1,name:"Corporate Guarantors",path:he},{id:4,name:"Dependants",path:pe},{id:5,name:"Collateral Property",path:fe},{id:6,name:"Documents",path:ge},{id:7,name:"Fees",path:Ne}],$e=({isActive:t})=>(console.log("===",t),`tab text-sm px-2.5 py-1 min-w-fit ${t?"bg-secondary-steelBlue-900 rounded-sm text-white font-medium shadow-activeBtn ":"text-primary-500"}`);function ke({children:t}){$();const l=a.useRef(null),[r,m]=a.useState(!1),[h,p]=a.useState(!1);a.useEffect(()=>{const o=l.current;if(o){m(o.scrollLeft>0),p(o.scrollLeft+o.clientWidth<o.scrollWidth);const c=()=>{m(o.scrollLeft>0),p(o.scrollLeft+o.clientWidth<o.scrollWidth)};o.addEventListener("scroll",c);const f=g=>{o.scrollLeft+=g.deltaX};return o.addEventListener("wheel",f),()=>{o.removeEventListener("scroll",c),o.removeEventListener("wheel",f)}}},[]);const u=o=>{const c=l.current;c&&c.scrollBy({left:o,behavior:"smooth"})};return e.jsxs("div",{className:"scroll-container",children:[e.jsx("div",{ref:l,className:"content",children:t}),r&&e.jsx("button",{type:"button",className:"p-panelmenu-icon pi pi-chevron-left scroll-button left",onClick:()=>u(-200),title:"Scroll Left"}),h&&e.jsx("button",{type:"button",className:"p-panelmenu-icon pi pi-chevron-right scroll-button right",onClick:()=>u(200),title:"Scroll Right"})]})}const ns=()=>{const t=$(),l=z(),r=a.useRef(null),[m,h]=a.useState(!1),[p,u]=a.useState(""),[o]=a.useState("bottom-right"),[c,f]=a.useState(""),[g,k]=a.useState(O.PRIMARY),[E,G]=a.useState(!1),d=a.useRef(null),[N,S]=a.useState(!1),[B,V]=a.useState(!1),[v,j]=a.useState(!1);a.useEffect(()=>{_()},[]),a.useEffect(()=>{_()},[t.stageUid]),a.useEffect(()=>{console.log(N,"message ");const s=async()=>{try{const n=await ye.checkNewMessageAvailability((t==null?void 0:t.stageUid)??"");V(n==null?void 0:n.data)}catch(n){console.log(n)}};s();const i=setInterval(s,3e4);return()=>{clearInterval(i)}},[]),a.useEffect(()=>{var s;d!=null&&d.current&&c!==""&&((s=d==null?void 0:d.current)==null||s.showFunction())},[c,g,E]);const _=()=>{const i=`&uid=${t.loanUid}`,n=JSON.parse(Q(Le.STAGE_DETAIL));(n==null?void 0:n.status)===P.COMPLETED||(n==null?void 0:n.status)===P.CANCELLED?j(!0):j(!1),be.getAll(0,1,i).then(x=>{const A=x.data.results[0];l(Ee(A))}).catch(x=>{console.log(x)})},w=s=>{S(!N)},W=async()=>Ue.completeStage(t.loanUid).then(s=>{if(console.log(s),f(Ae.STAGE_COMPLETED),k(O.PRIMARY),G(!E),Oe.isRouteHasAccess(U)){const i=`${T}${D}${M}${U}/${t.loanUid}/`;window.location.href=i}else{const i=T+D+K;window.location.href=i}}).catch(s=>{console.log(s),h(!0),u(De(s))}),[L,F]=a.useState({assignedTo:"",delegateTo:"",initiation:"",status:""}),Y=s=>{var n,x,A,b,C,I,y;const i=localStorage.getItem("stageDetail");F({assignedTo:((x=(n=JSON.parse(i))==null?void 0:n.assignee)==null?void 0:x.name)??"NA",delegateTo:((b=(A=JSON.parse(i))==null?void 0:A.delegate)==null?void 0:b.name)??"NA",initiation:((C=JSON.parse(i))==null?void 0:C.createdAtSystemDate)??"NA",status:((I=JSON.parse(i))==null?void 0:I.status)??"NA"}),r.current&&((y=r.current)==null||y.toggle(s))},J=()=>e.jsxs("div",{className:"flex flex-col gap-4 p-5 ",children:[e.jsxs("div",{className:"flex flex-row justify-between items-center",children:[e.jsx("div",{className:"text-sm text-secondary-stext-900",children:"Status :"}),e.jsx("div",{className:"text-sm text-secondary-stext-900  font-bold ml-2",children:L.status})]}),e.jsxs("div",{className:"flex flex-row justify-between items-center",children:[e.jsx("div",{className:"text-sm text-secondary-stext-900",children:"Assigned to :"}),e.jsx("div",{className:"text-sm text-secondary-stext-900  font-bold ml-2",children:L.assignedTo})]}),e.jsxs("div",{className:"flex flex-row justify-between items-center",children:[e.jsx("div",{className:"text-sm text-secondary-stext-900",children:"Delegated to :"}),e.jsx("div",{className:"text-sm text-secondary-stext-900  font-bold ml-2",children:L.delegateTo})]}),e.jsxs("div",{className:"flex flex-row justify-between items-center",children:[e.jsx("div",{className:"text-sm text-secondary-stext-900",children:"Date of Initiation :"}),e.jsx("div",{className:"text-sm text-secondary-stext-900  font-bold ml-2",children:Te(L.initiation)})]})]});return e.jsxs("div",{className:"flex flex-col gap-5 ",children:[e.jsxs("div",{className:"flex items-center justify-between gap-5 w-full",children:[e.jsxs("div",{className:"flex items-center gap-5 w-11/12",children:[e.jsxs("div",{className:"border-r flex  items-center border-secondary-stext-600 px-5 gap-2 py-2",children:[e.jsx(Z,{className:"text-primary-ptext-1000 font-bold",label:"Login"}),e.jsx(_e,{className:"underline text-xs !text-black",label:"View Details",onClick:Y}),e.jsxs("button",{onClick:w,className:" relative",children:[e.jsx("img",{src:Ce,alt:"ChatIcon",className:""})," ",B?e.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full"}):e.jsx(e.Fragment,{})]})]}),e.jsx("div",{className:"w-4/5",children:e.jsx(ke,{children:Ke.map(s=>e.jsx(ee,{className:$e,to:`${D}${M}${se}/${t.loanUid}/${t.stageUid}${s.path}`,children:s.name},s.path))})})]}),e.jsx("div",{className:"w-1/12",children:e.jsx(Se,{buttonType:te.STAGE_COMPLETE,onClickWithLoader:W,size:"LOAN_DATA",disabled:v})})]}),e.jsx("div",{className:"dde-layout-body-content",children:e.jsxs(ae,{override:{read:v},children:[e.jsx(a.Suspense,{fallback:e.jsx(oe,{}),children:e.jsx(le,{children:ne.map((s,i)=>e.jsx(ie,{path:s.path,element:e.jsx(s.component,{})},i))})}),e.jsx(re,{})]})}),e.jsx(ve,{onHide:()=>{h(!1),u("")},visible:m,errorMessage:p}),N?e.jsx(Re,{visible:N,closable:!1,model:"false",onHide:()=>S(!1),className:"rounded-lg shadow-lg !w-[960px] bg-blend-darken !p-0 !h-162",children:e.jsx(Ie,{params:t,handleCloseOverLay:w})}):null,e.jsx(je,{className:"rounded-lg shadow-lg !w-80 p-1.5 ",ref:r,content:J()}),e.jsx(we,{position:o,ref:d,toastText:c,variant:g,onRemove:()=>{const s=T+D+K;window.location.href=s}})]})};export{ke as ScrollableTabs,ns as default,$e as getTabClassName};
//# sourceMappingURL=Login-6e9a8ada.js.map
