import{r as b,aF as s,ad as ue,ae as ge,af as Ne,eD as O,j as a,de as Le,c8 as we,o as c,ey as w,e_ as Me}from"./index-e8217573.js";import{D as _e}from"./DocumentUploader-e2ec1a13.js";import{I as m}from"./InputBox-b9e88f52.js";import{S as ke}from"./SaveComponent-160c5b32.js";import{S as v}from"./SimpleDropDown-061a3470.js";import{S as Fe}from"./Skeleton-7e12d019.js";import{T as He}from"./TextData-06df331b.js";import{E as Je}from"./Helper-03e9d878.js";import{S as be}from"./SystemDatePicker-abe08a29.js";const ve={uid:"",isActive:!0,firmName:"",businessConstitution:"",websiteURL:"",emailId:"",empRegNo:"",udyamRegCertificateNo:"",incorporationDate:"",segment:"",noOfEmployees:"",ownershipOfBusiness:"",regUnderGST:"",GSTExemption:"",GSTReg:"",GSTIN:"",businessYearsInCurrentPremises:"",totalExpInYears:"",businessYearsInCurrentLocation:"",factoryBrances:"",grossMargin:"",netMargin:"",loanDocuments:[Je]},qe=b.forwardRef((Ee,he)=>{const{data:h=ve,isLoading:Se,cardNumber:M,dropDownOptions:S,pageType:xe,disabled:pe,disabledSaveMenu:Ce,documentCategory:Ie=we.DOCUMENT_CATEGORY_BUSINESS_PROOF,ocrRelatedData:g,onSaveOrganisationDetails:fe,onRemoveOrganisationDetails:G}=Ee,[r,R]=b.useState(h),[o,D]=b.useState(s.VIEW);b.useState(void 0);const[Te,ye]=b.useState({GSTINValidationEnabled:!1,GSTRegValidationEnabled:!1}),u=b.useRef(null),[,j]=b.useState(!1),e=b.useRef(new ue({validators:{...ge()},...Ne(),autoForceUpdate:{forceUpdate:()=>j(n=>!n)}})),De=[{className:"",label:"Remove",command:()=>{G==null||G()},disabled:M===0}];b.useEffect(()=>{R(()=>({...h}))},[h]),b.useEffect(()=>{var n;r!=null&&r.regUnderGST&&(r!=null&&r.GSTExemption)&&(ye(t=>({...t,GSTINValidationEnabled:(r==null?void 0:r.regUnderGST)===O.YES&&(r==null?void 0:r.GSTExemption)===O.NO,GSTRegValidationEnabled:(r==null?void 0:r.regUnderGST)===O.YES&&(r==null?void 0:r.GSTExemption)===O.NO})),B(),(n=e==null?void 0:e.current)==null||n.showMessages())},[r==null?void 0:r.regUnderGST,r==null?void 0:r.GSTExemption]);const Y=b.useRef();b.useImperativeHandle(he,()=>({save:Ye,onSaveSuccess:Oe,remove:Re,getData:P,resetData:Pe}));const i=n=>{var t,d;(d=e==null?void 0:e.current)==null||d.showMessageFor((t=n==null?void 0:n.target)==null?void 0:t.name)},je=()=>{var t,d;let n=!1;return n=(t=e==null?void 0:e.current)==null?void 0:t.allValid(),n||(j(N=>!N),(d=e==null?void 0:e.current)==null||d.showMessages(),j(N=>!N),!1)},l=n=>{R(t=>({...t,[n.target.name]:n.target.value}))},Oe=()=>D(s.VIEW),Ge=()=>D(s.EDIT),Re=()=>({...P(),isActive:!1}),Ye=()=>{var t;const n=(t=u==null?void 0:u.current)==null?void 0:t.getUploadedData();if(!(!je()||!(n!=null&&n.documentUid)))return P()},Be=()=>{var n,t;B(),(n=Y==null?void 0:Y.current)==null||n.resetValidator(),(t=u==null?void 0:u.current)==null||t.resetValidator(),D(s.VIEW)},B=()=>{var n;e.current=new ue({validators:{...ge()},...Ne(),autoForceUpdate:{forceUpdate:()=>j(t=>!t)}}),(n=e==null?void 0:e.current)==null||n.hideMessages()},P=()=>{var t,d;const n=(t=u==null?void 0:u.current)==null?void 0:t.getUploadedData();return(d=u==null?void 0:u.current)==null||d.resetValidator(),{...r,loanDocumentsProof:n}},Pe=()=>{R({...ve}),D(s.VIEW),B()},_=()=>{var n,t,d,N;return a.jsxs("div",{className:"flex flex-col space-y-4",children:[a.jsx(He,{label:"label.dde.corporate.businessProof*",value:"Attach Documents (PDF, JPG, JPEG or PNG)",titleClass:"text-primary-sideBarBgColor text-sm font-bold mb-1"}),a.jsx("div",{children:a.jsx(_e,{ref:u,savedDocument:(n=h.loanDocuments)!=null&&n[0]?h.loanDocuments[0]:{},mode:o,queryParamForDocList:Ie,ocrStageName:g==null?void 0:g.ocrStageName,ocrSubstageName:g==null?void 0:g.ocrSubstageName,ocrPayloadData:{loanUid:((t=g==null?void 0:g.ocrPayloadData)==null?void 0:t.loanUid)??"",applicant:{uid:((N=(d=g==null?void 0:g.ocrPayloadData)==null?void 0:d.applicant)==null?void 0:N.uid)??""}},mandatoryDocUpload:!0})})]})},Ue=()=>{var z,K,Q,X,Z,$,V,ee,ae,ne,se,oe,te,re,le,ie,ce,de,me;const{firmName:n,businessConstitution:t,websiteURL:d,emailId:N,empRegNo:x,udyamRegCertificateNo:U,incorporationDate:E,segment:p,noOfEmployees:C,ownershipOfBusiness:I,regUnderGST:f,GSTExemption:T,GSTReg:y,GSTIN:W,businessYearsInCurrentPremises:k,totalExpInYears:F,businessYearsInCurrentLocation:H,factoryBrances:Ae,grossMargin:J,netMargin:q}=r,{GSTINValidationEnabled:A,GSTRegValidationEnabled:L}=Te;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2  md:grid-cols-3 lg:grid-cols-4 gap-x-4 gap-y-5 ",children:[a.jsx("div",{className:"col-span-1",children:a.jsx(m,{disabled:o===s.VIEW,variant:c.SECONDARY,label:"label.organisation.details.nameOf.firm",placeholder:"Enter Name",name:"firmName",className:"",value:n,validation:(z=e==null?void 0:e.current)==null?void 0:z.message("firmName",n,"mandatory|checkString"),onBlur:i,onChange:l})}),a.jsx("div",{className:"col-span-1",children:a.jsx(v,{label:"label.organisation.details.constitution.business",placeholder:"Select Constitution",name:"businessConstitution",value:t,onChange:l,validation:(K=e==null?void 0:e.current)==null?void 0:K.message("businessConstitution",t,"mandatory"),onBlur:i,disabled:o===s.VIEW,options:S.BUSINESS_CONSTITUTION_OPTION,optionLabel:"name",optionValue:"code"})}),a.jsx("div",{className:"col-span-1",children:a.jsx(m,{variant:c.SECONDARY,label:"label.organisation.details.website.URL",placeholder:"Enter Name",name:"websiteURL",className:"",value:d,validation:(Q=e==null?void 0:e.current)==null?void 0:Q.message("websiteURL",d,"TLDCheck"),onBlur:i,disabled:o===s.VIEW,onChange:l})}),a.jsx("div",{className:"col-span-1",children:a.jsx(m,{variant:c.SECONDARY,label:"label.organisation.details.emailId",placeholder:"Enter email Id",name:"emailId",value:N,onChange:l,validation:(X=e==null?void 0:e.current)==null?void 0:X.message("emailId",N,"email"),onBlur:i,disabled:o===s.VIEW})}),a.jsx("div",{className:"col-span-1",children:a.jsx(m,{variant:c.SECONDARY,label:"label.organisation.details.employment.registration/license.No",placeholder:"Enter No.",name:"empRegNo",className:"",value:x,onChange:l,validation:(Z=e==null?void 0:e.current)==null?void 0:Z.message("empRegNo",x,"mandatory"),onBlur:i,disabled:o===s.VIEW})}),a.jsx("div",{className:"col-span-1",children:a.jsx(m,{variant:c.SECONDARY,label:"label.organisation.details.udyam.registration.certificate.No",placeholder:"Enter No.",value:U,name:"udyamRegCertificateNo",className:"",onChange:l,disabled:o===s.VIEW})}),a.jsx("div",{className:"col-span-1",children:a.jsx(be,{disabled:o===s.VIEW,variant:c.SECONDARY,label:"label.organisation.details.incorporation.date",placeholder:"Select Date",name:"incorporationDate",value:E?new Date(E):"",onChange:l,validation:($=e==null?void 0:e.current)==null?void 0:$.message("incorporationDate",E,"mandatory")})}),a.jsx("div",{className:"col-span-1",children:a.jsx(v,{label:"label.organisation.details.segment",placeholder:"Select Segment",name:"segment",value:p,onChange:l,validation:(V=e==null?void 0:e.current)==null?void 0:V.message("segment",p,"mandatory"),onBlur:i,disabled:o===s.VIEW,options:S.SEGMENT_OPTION,optionLabel:"name",optionValue:"code"})}),a.jsx("div",{className:"col-span-1",children:a.jsx(v,{label:"label.organisation.details.noOfEmployees",placeholder:"Enter No of Employees",value:C,name:"noOfEmployees",onChange:l,validation:(ee=e==null?void 0:e.current)==null?void 0:ee.message("noOfEmployees",C,"mandatory"),onBlur:i,disabled:o===s.VIEW,options:S.NO_EMPLOYEE_OPTION,optionLabel:"name",optionValue:"code"})}),a.jsx("div",{className:"col-span-1",children:a.jsx(v,{label:"label.organisation.details.ownership.business",placeholder:"Select",name:"ownershipOfBusiness",value:I,onChange:l,validation:(ae=e==null?void 0:e.current)==null?void 0:ae.message("ownershipOfBusiness",I,"mandatory"),onBlur:i,disabled:o===s.VIEW,options:S.OWNERSHIP_OPTION,optionLabel:"name",optionValue:"code"})}),a.jsx("div",{className:"col-span-1",children:a.jsx(v,{label:"label.organisation.details.registered.GST*",placeholder:"Yes/No",name:"regUnderGST",value:f,onChange:l,disabled:o===s.VIEW,options:w,optionLabel:"label",optionValue:"value",validation:(ne=e==null?void 0:e.current)==null?void 0:ne.message("regUnderGST",f,"mandatory")})}),a.jsx("div",{className:"col-span-1",children:a.jsx(v,{label:"label.organisation.details.GST.exemption.mandatory",placeholder:"Select",name:"GSTExemption",value:T,onChange:l,disabled:o===s.VIEW,options:w,optionLabel:"label",optionValue:"value",onBlur:i,validation:(se=e==null?void 0:e.current)==null?void 0:se.message("GSTExemption",T,"mandatory")})}),a.jsx("div",{className:"col-span-1",children:a.jsx(v,{label:L?"label.organisation.details.GST.registration.mandatory":"label.organisation.details.GST.registration",placeholder:"Select",value:y,name:"GSTReg",onChange:l,disabled:o===s.VIEW,options:Me,optionLabel:"label",optionValue:"value",onBlur:L?i:void 0,validation:L?(oe=e==null?void 0:e.current)==null?void 0:oe.message("GSTReg",y,"mandatory"):void 0})}),a.jsx("div",{className:"col-span-1",children:a.jsx(m,{disabled:o===s.VIEW,variant:c.SECONDARY,label:A?"label.organisation.details.GSTIN.mandatory":"label.organisation.details.GSTIN",placeholder:"Enter GSTIN",name:"GSTIN",className:"",value:W,onChange:l,onBlur:A?i:void 0,validation:A?(te=e==null?void 0:e.current)==null?void 0:te.message("GSTIN",W,"mandatory|alpha_num|min:15|max:15"):(re=e==null?void 0:e.current)==null?void 0:re.message("GSTIN",W,"alpha_num|min:15|max:15")})}),a.jsx("div",{className:"col-span-1",children:a.jsx(m,{disabled:o===s.VIEW,variant:c.SECONDARY,label:"label.organisation.details.years.current.business",placeholder:"Enter No. of years",name:"businessYearsInCurrentPremises",className:"text-right",value:k,onChange:l,onBlur:i,validation:(le=e==null?void 0:e.current)==null?void 0:le.message("businessYearsInCurrentPremises",k,"checkNumber|min:0,num")})}),a.jsx("div",{className:"col-span-1",children:a.jsx(m,{disabled:o===s.VIEW,variant:c.SECONDARY,label:"label.organisation.details.total.work.experience",placeholder:"Enter Total no of years",name:"totalExpInYears",className:"text-right",value:F,onChange:l,validation:(ie=e==null?void 0:e.current)==null?void 0:ie.message("totalExpInYears",F,"mandatory|checkNumber|min:0,num"),onBlur:i})}),a.jsx("div",{className:"col-span-1",children:a.jsx(m,{disabled:o===s.VIEW,variant:c.SECONDARY,label:"label.organisation.details.years.business.city/area",placeholder:"Enter No of Years",name:"businessYearsInCurrentLocation",className:"text-right",value:H,onChange:l,validation:(ce=e==null?void 0:e.current)==null?void 0:ce.message("businessYearsInCurrentLocation",H,"mandatory|checkNumber|min:0,num"),onBlur:i})}),a.jsx("div",{className:"col-span-1",children:a.jsx(v,{label:"label.organisation.details.factory.branches",placeholder:"Select",value:Ae,name:"factoryBrances",onChange:l,disabled:o===s.VIEW,options:w,optionLabel:"label",optionValue:"value"})}),a.jsx("div",{className:"col-span-1",children:a.jsx(m,{disabled:o===s.VIEW,variant:c.SECONDARY,label:"label.organisation.details.estimated.gross.margin",placeholder:"Enter Gross Margin",name:"grossMargin",className:"text-right",value:J,onChange:l,validation:(de=e==null?void 0:e.current)==null?void 0:de.message("grossMargin",J,"mandatory|checkNumber|min:0,num|max:100,num|maxDecimal:2"),onBlur:i})}),a.jsx("div",{className:"col-span-1",children:a.jsx(m,{disabled:o===s.VIEW,variant:c.SECONDARY,label:"label.organisation.details.net.margin",placeholder:"Enter Net Margin",name:"netMargin",className:"text-right",value:q,onChange:l,validation:(me=e==null?void 0:e.current)==null?void 0:me.message("netMargin",q,"mandatory|checkNumber|min:0,num|max:100,num|maxDecimal:2"),onBlur:i})})]}),_()]})},We=()=>{var p,C,I,f,T,y;const{firmName:n,businessConstitution:t,websiteURL:d,emailId:N,empRegNo:x,udyamRegCertificateNo:U,incorporationDate:E}=r;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2  md:grid-cols-3 lg:grid-cols-4 gap-x-4 gap-y-5 ",children:[a.jsx("div",{className:"col-span-1",children:a.jsx(m,{disabled:o===s.VIEW,variant:c.SECONDARY,label:"label.organisation.details.nameOf.firm",placeholder:"Enter Name",name:"firmName",className:"",value:n,validation:(p=e==null?void 0:e.current)==null?void 0:p.message("firmName",n,"mandatory|checkString"),onBlur:i,onChange:l})}),a.jsx("div",{className:"col-span-1",children:a.jsx(v,{label:"label.organisation.details.constitution.business",placeholder:"Select Constitution",name:"businessConstitution",value:t,onChange:l,validation:(C=e==null?void 0:e.current)==null?void 0:C.message("businessConstitution",t,"mandatory"),onBlur:i,disabled:o===s.VIEW,options:S.BUSINESS_CONSTITUTION_OPTION,optionLabel:"name",optionValue:"code"})}),a.jsx("div",{className:"col-span-1",children:a.jsx(m,{variant:c.SECONDARY,label:"label.organisation.details.website.URL",placeholder:"Enter Name",name:"websiteURL",className:"",value:d,validation:(I=e==null?void 0:e.current)==null?void 0:I.message("websiteURL",d,"TLDCheck"),onBlur:i,disabled:o===s.VIEW,onChange:l})}),a.jsx("div",{className:"col-span-1",children:a.jsx(m,{variant:c.SECONDARY,label:"label.organisation.details.emailId",placeholder:"Enter email Id",name:"emailId",value:N,onChange:l,validation:(f=e==null?void 0:e.current)==null?void 0:f.message("emailId",N,"email"),onBlur:i,disabled:o===s.VIEW})}),a.jsx("div",{className:"col-span-1",children:a.jsx(m,{variant:c.SECONDARY,label:"label.organisation.details.employment.registration/license.No",placeholder:"Enter No.",name:"empRegNo",className:"",value:x,onChange:l,validation:(T=e==null?void 0:e.current)==null?void 0:T.message("empRegNo",x,"mandatory"),onBlur:i,disabled:o===s.VIEW})}),a.jsx("div",{className:"col-span-1",children:a.jsx(m,{variant:c.SECONDARY,label:"label.organisation.details.udyam.registration.certificate.No",placeholder:"Enter No.",value:U,name:"udyamRegCertificateNo",className:"",onChange:l,disabled:o===s.VIEW})}),a.jsx("div",{className:"col-span-1",children:a.jsx(be,{disabled:o===s.VIEW,variant:c.SECONDARY,label:"label.organisation.details.incorporation.date",placeholder:"Select Date",name:"incorporationDate",value:E?new Date(E):"",onChange:l,validation:(y=e==null?void 0:e.current)==null?void 0:y.message("incorporationDate",E,"mandatory")})})]}),_()]})};return a.jsx("div",{className:"",children:Se?a.jsx(Fe,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"}):a.jsx(ke,{disabled:pe,disabledMenu:Ce,title:"label.dde.organisation.details.basic.information",titleArgs:{count:M},pageMode:o,onCancel:Be,onEdit:Ge,onSave:fe,kebabModel:De,children:xe===Le.CORPORATE_GUARANTOR?We():Ue()})})});qe.defaultProps={disabled:!1};export{qe as O,ve as i};
//# sourceMappingURL=OrganisationDetails-d4c0c611.js.map
