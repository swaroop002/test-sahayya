import{w as oe,r as s,aF as i,aG as _,ad as ce,ae as re,af as le,y as k,v as de,aP as w,j as a,ax as me,J as u,o as p,az as ue,aQ as ve,cJ as x,aH as ge}from"./index-e8217573.js";import{B as v}from"./ButtonBox-9e46519a.js";import{E as pe}from"./ErrorDialog-d5eef4d7.js";import{I as Y}from"./InputBox-b9e88f52.js";import{I as B}from"./InputTextArea-b90aad1d.js";import{P as Ee}from"./PageTitle-b3bba3d4.js";import{S as Te}from"./SimpleDropDown-061a3470.js";import{T as fe}from"./Toast-ae99ea5b.js";import{O as xe}from"./Department-d5551750.js";import"./kebab-menu-8835ad2e.js";import"./Dialog-adadaf64.js";import"./withAuth-6de36ebf.js";import"./virtualscroller.esm-9939945c.js";import"./TransitionGroup-c8afe0ce.js";const Ce=d=>{var y,O,R;const[U,C]=s.useState({displayName:"",systemCode:"",description:"",reasons:"",isActive:""}),[he,z]=s.useState(),[o,E]=s.useState(i.CREATE),[h,Ne]=s.useState(!1),[N,Ae]=s.useState(!1),[M,V]=s.useState("bottom-right"),[T,F]=s.useState(""),[W,Se]=s.useState(""),[A,G]=s.useState(_.PRIMARY),[H,J]=s.useState(!1),[S,Q]=s.useState(!1),[q,je]=s.useState(!1),l=s.useRef(null),[,f]=s.useState(void 0),n=s.useRef(new ce({validators:{...re()},...le(),autoForceUpdate:{forceUpdate:()=>f(e=>!e)}})),[De,K]=s.useState({displayName:"",systemCode:"",description:"",reasons:"",isActive:""});s.useEffect(()=>{const e=k.parse(d.location.search);e!=null&&e.mode&&(e==null?void 0:e.mode)!==void 0&&E(e.mode)},[]),s.useEffect(()=>{var e;l!=null&&l.current&&T!==""&&((e=l==null?void 0:l.current)==null||e.showFunction())},[T,A,S]),s.useEffect(()=>{const e=k.parse(d.location.search);e!=null&&e.mode&&(e==null?void 0:e.mode)!==void 0&&E(e.mode),e!=null&&e.uid&&(e==null?void 0:e.uid)!==void 0&&(z(e.uid),xe.findById(e.uid).then(t=>{var c,r,b,P,L;de(t)&&(console.log(t),(Object.keys(t.data).length>0||t.data.id)&&(C({displayName:((c=t==null?void 0:t.data)==null?void 0:c.name)??"",systemCode:((r=t==null?void 0:t.data)==null?void 0:r.code)??"",description:((b=t==null?void 0:t.data)==null?void 0:b.description)??"",reasons:((P=t==null?void 0:t.data)==null?void 0:P.reason)??"",isActive:(L=t==null?void 0:t.data)!=null&&L.isActive?w.ACTIVE:w.INACTIVE}),K({...t==null?void 0:t.data})))}).catch(t=>{}))},[]);const g=e=>{var t,c;(c=n==null?void 0:n.current)==null||c.showMessageFor((t=e==null?void 0:e.target)==null?void 0:t.name)},X=async()=>{var t,c;let e=!1;return e=((t=n==null?void 0:n.current)==null?void 0:t.allValid())&&!h&&!N,e||(V("top-right"),G(_.QUATERNARY),F(ge.ERROR),Q(!S),f(r=>!r),(c=n==null?void 0:n.current)==null||c.showMessages(),f(r=>!r),!1)},m=e=>{const{name:t,value:c}=e.target;C(r=>({...r,[t]:c}))},$=async()=>{let e=!1;e=await X()},Z=()=>{d.navigate(x)},ee=()=>{console.log("this is onApproveClick")},ae=()=>{d.navigate(x)},te=()=>{E(i.EDIT)},se=()=>{switch(o){case i.CREATE:return"heading.organizationLevelDepartment.create";case i.VIEW:return"heading.organizationLevelDepartment.view";case i.EDIT:return"heading.organizationLevelDepartment.edit";default:return"heading.organizationLevelDepartment.create"}},{displayName:j,systemCode:D,description:ne,reasons:I,isActive:ie}=U;return a.jsxs(me,{override:{read:i.VIEW===o},children:[a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("div",{className:"flex w-full justify-between items-center",children:[a.jsx(Ee,{title:se()}),a.jsx("div",{className:"flex",children:o===i.CREATE||o===i.EDIT?a.jsx("div",{className:"flex gap-10",children:a.jsxs("div",{className:"flex gap-5",children:[a.jsx(v,{buttonType:u.CANCEL_OUTLINE,onClick:Z}),a.jsx(v,{buttonType:u.SAVE_OUTLINE,onClick:$}),a.jsx("div",{}),a.jsx(v,{buttonType:u.SEND_FOR_APPROVAL,onClick:ee})]})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mr-5",children:a.jsx(v,{buttonType:u.BACK_OUTLINE,onClick:ae})}),a.jsx("div",{className:"",children:a.jsx(v,{buttonType:u.EDIT_OUTLINE,onClick:te})})]})})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[a.jsx("div",{className:"col-span-1",children:a.jsx(Y,{label:"input.organizationLevelDepartment.displayName",name:"displayName",variant:p.SECONDARY,value:j,disabled:o===i.VIEW,onChange:m,onBlur:g,validation:h?"Duplicate Entry Found":(y=n==null?void 0:n.current)==null?void 0:y.message("displayName",j,"mandatory")})}),a.jsx("div",{className:"col-span-1",children:a.jsx(Y,{label:"input.organizationLevelDepartment.systemCode",name:"systemCode",variant:p.SECONDARY,value:D,disabled:o===i.VIEW,onBlur:g,onChange:m,validation:N?"Duplicate Entry Found":(O=n==null?void 0:n.current)==null?void 0:O.message("systemCode",D,"onlyAlphaNumUnderscoreUpperScore|mandatory")})}),o!==i.CREATE?a.jsx("div",{className:"col-span-1",children:a.jsx(Te,{disabled:o===i.VIEW,label:"input.organizationLevelDepartment.isActive",name:"isActive",variant:ue.SECONDARY,value:ie,options:ve,onChange:m})}):a.jsx("div",{className:"col-span-2"}),a.jsx("div",{className:"col-span-2",children:a.jsx(B,{label:"input.organizationLevelDepartment.description",name:"description",value:ne,variant:p.SECONDARY,disabled:o===i.VIEW,onBlur:g,onChange:m})}),o!==i.VIEW&&a.jsx("div",{className:"col-span-2",children:a.jsx(B,{label:"input.organizationLevelDepartment.reasons",name:"reasons",variant:p.SECONDARY,value:I,onChange:m,onBlur:g,validation:(R=n==null?void 0:n.current)==null?void 0:R.message("Reasons",I,"mandatory")})})]})]}),a.jsx("div",{className:"",children:a.jsx(fe,{position:M,ref:l,toastText:T,variant:A,onRemove:()=>{q&&d.navigate(x)}})}),a.jsx(pe,{onHide:()=>J(!1),visible:H,errorMessage:W})]})},Me=oe(Ce);export{Me as default};
//# sourceMappingURL=OrganizationLevelDepartmentCreateViewEdit-7b96faf0.js.map
