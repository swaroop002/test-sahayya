import{w as le,r as s,aF as i,aG as w,ad as re,ae as de,af as ue,y as k,v as me,j as a,ax as ve,J as m,o as E,az as ge,aQ as Ee,cG as C,aH as Te}from"./index-e8217573.js";import{B as v}from"./ButtonBox-9e46519a.js";import{E as pe}from"./ErrorDialog-d5eef4d7.js";import{I as Y}from"./InputBox-b9e88f52.js";import{I as B}from"./InputTextArea-b90aad1d.js";import{P as fe}from"./PageTitle-b3bba3d4.js";import{S as Ce}from"./SimpleDropDown-061a3470.js";import{T as xe}from"./Toast-ae99ea5b.js";import{O as he}from"./OrgStructureLevelTypeService-be42073c.js";import"./kebab-menu-8835ad2e.js";import"./Dialog-adadaf64.js";import"./withAuth-6de36ebf.js";import"./virtualscroller.esm-9939945c.js";import"./TransitionGroup-c8afe0ce.js";const Ne=d=>{var R,D,L;const[U,x]=s.useState({displayName:"",systemCode:"",description:"",reasons:"",isActive:""}),[Se,z]=s.useState({displayName:"",systemCode:"",description:"",reasons:"",isActive:""}),[h,M]=s.useState(!1),[N,F]=s.useState(!1),[o,T]=s.useState(i.CREATE),[V,W]=s.useState(!1),[G,H]=s.useState("bottom-right"),[p,Q]=s.useState(""),[q,Ae]=s.useState(""),[S,J]=s.useState(w.PRIMARY),[A,K]=s.useState(!1),[X,je]=s.useState(!1),[ye,Z]=s.useState(),r=s.useRef(null),[,f]=s.useState(void 0),n=s.useRef(new re({validators:{...de()},...ue(),autoForceUpdate:{forceUpdate:()=>f(e=>!e)}}));s.useEffect(()=>{const e=k.parse(d.location.search);e!=null&&e.mode&&(e==null?void 0:e.mode)!==void 0&&T(e.mode)},[]),s.useEffect(()=>{const e=k.parse(d.location.search);e!=null&&e.mode&&(e==null?void 0:e.mode)!==void 0&&T(e.mode),e!=null&&e.uid&&(e==null?void 0:e.uid)!==void 0&&(Z(e.uid),console.log(e.uid),he.findById(e.uid).then(t=>{var c,l,b,P,_;me(t)&&(console.log(t),t.data&&(x({displayName:((c=t==null?void 0:t.data)==null?void 0:c.name)??"",systemCode:((l=t==null?void 0:t.data)==null?void 0:l.code)??"",description:((b=t==null?void 0:t.data)==null?void 0:b.description)??"",reasons:((P=t==null?void 0:t.data)==null?void 0:P.reason)??"",isActive:(_=t==null?void 0:t.data)!=null&&_.isActive?"ACTIVE":"IN_ACTIVE"}),z({...t==null?void 0:t.data})))}).catch(t=>{console.log(t)}))},[]),s.useEffect(()=>{var e;r!=null&&r.current&&p!==""&&((e=r==null?void 0:r.current)==null||e.showFunction())},[p,S,A]);const g=e=>{var t,c;(c=n==null?void 0:n.current)==null||c.showMessageFor((t=e==null?void 0:e.target)==null?void 0:t.name)},$=async()=>{var t,c;let e=!1;return e=((t=n==null?void 0:n.current)==null?void 0:t.allValid())&&!h&&!N,e||(f(l=>!l),(c=n==null?void 0:n.current)==null||c.showMessages(),f(l=>!l),!1)},u=e=>{const{name:t,value:c}=e.target;x(l=>({...l,[t]:c}))},j=e=>{e.target.name==="name"&&M(!0),e.target.name==="systemCode"&&F(!0)},ee=async()=>{let e=!1;e=await $(),e||(H("top-right"),J(w.QUATERNARY),Q(Te.ERROR),K(!A))},ae=()=>{d.navigate(C)},te=()=>{console.log("this is onApproveClick")},se=()=>{d.navigate(C)},ne=()=>{T(i.EDIT)},ie=()=>{switch(o){case i.CREATE:return"heading.organizationLevel.create";case i.VIEW:return"heading.organizationLevel.view";case i.EDIT:return"heading.organizationLevel.edit";default:return"heading.organizationLevel.create"}},{displayName:y,systemCode:I,description:oe,reasons:O,isActive:ce}=U;return a.jsxs(ve,{override:{read:i.VIEW===o},children:[a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("div",{className:"flex w-full justify-between items-center",children:[a.jsx(fe,{title:ie()}),a.jsx("div",{className:"flex",children:o===i.CREATE||o===i.EDIT?a.jsxs("div",{className:"flex gap-10",children:[a.jsxs("div",{className:"flex gap-5",children:[a.jsx(v,{buttonType:m.CANCEL_OUTLINE,onClick:ae}),a.jsx(v,{buttonType:m.SAVE_OUTLINE,onClick:ee})]}),a.jsx("div",{children:a.jsx(v,{buttonType:m.SEND_FOR_APPROVAL,onClick:te})})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mr-5",children:a.jsx(v,{buttonType:m.BACK_OUTLINE,onClick:se})}),a.jsx("div",{className:"",children:a.jsx(v,{buttonType:m.EDIT_OUTLINE,onClick:ne})})]})})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-3 mt-3",children:[a.jsx("div",{className:"col-span-1",children:a.jsx(Y,{label:"input.organizationLevel.displayName",name:"displayName",variant:E.SECONDARY,value:y,disabled:o===i.VIEW,onChange:u,onBlur:e=>{j(e),g(e)},validation:h?"Duplicate Entry Found":(R=n==null?void 0:n.current)==null?void 0:R.message("DisplayName",y,"mandatory")})}),a.jsx("div",{className:"col-span-1",children:a.jsx(Y,{label:"input.organizationLevel.systemCode",name:"systemCode",variant:E.SECONDARY,disabled:o===i.VIEW,onBlur:e=>{j(e),g(e)},onChange:u,value:I,validation:N?"Duplicate Entry Found":(D=n==null?void 0:n.current)==null?void 0:D.message("systemCode",I,"onlyAlphaNumUnderscoreUpperScore|mandatory")})}),o!==i.CREATE?a.jsx("div",{className:"col-span-1",children:a.jsx(Ce,{disabled:o===i.VIEW,label:"input.organizationLevel.isActive",name:"isActive",variant:ge.SECONDARY,value:ce,options:Ee,onChange:u})}):a.jsx("div",{className:"col-span-2"}),a.jsx("div",{className:"col-span-2",children:a.jsx(B,{label:"input.organizationLevel.description",name:"description",value:oe,variant:E.SECONDARY,disabled:o===i.VIEW,onBlur:g,onChange:u})}),o!==i.VIEW&&a.jsx("div",{className:"col-span-2",children:a.jsx(B,{label:"input.organizationLevel.reasons",name:"reasons",variant:E.SECONDARY,value:O,onChange:u,onBlur:g,validation:(L=n==null?void 0:n.current)==null?void 0:L.message("Reasons",O,"mandatory")})})]})]}),a.jsxs("div",{children:[a.jsx(xe,{position:G,ref:r,toastText:p,variant:S,onRemove:()=>{X&&d.navigate(C)}}),a.jsx(pe,{onHide:()=>W(!1),visible:V,errorMessage:q})," "]})]})},Me=le(Ne);export{Me as default};
//# sourceMappingURL=OrganizationLevelTypeCreateViewEdit-eb455b79.js.map
