import{w as ft,r as n,aG as N,j as e,T as b,J as B,aH as Z,ao as ee,aI as ue,aJ as ve,aK as te,cM as he,aF as fe,o as I,az as gt,aM as At,av as ge,p as Ae,z as yt,aN as ae}from"./index-e8217573.js";import{s as D,a as R,b as M}from"./sortIcon-54357a29.js";import{e as jt}from"./eye_icon-081bddb3.js";import{A as ne}from"./AutoComplete-0bca608a.js";import{B as O}from"./ButtonBox-9e46519a.js";import{D as se}from"./DatePicker-b1c13861.js";import{D as Nt}from"./Dialog-adadaf64.js";import{I as ye}from"./InputBox-b9e88f52.js";import{M as St}from"./MenuBox-defc36b0.js";import{R as Tt}from"./ReadOnlyTable-86accb69.js";import{S as Ct}from"./SectionTitle-9f9277ec.js";import{S as Et}from"./SimpleDropDown-061a3470.js";import{T as bt}from"./Toast-ae99ea5b.js";import{C as S}from"./column.esm-938bad7d.js";import{O as q}from"./Designation-408fa03d.js";import{O as Bt}from"./Department-d5551750.js";import"./search_icon-459d6871.js";import"./withAuth-6de36ebf.js";import"./virtualscroller.esm-9939945c.js";import"./kebab-menu-8835ad2e.js";import"./No_data-1720c54e.js";import"./datatable.esm-f474a654.js";import"./paginator.esm-11c2c115.js";import"./TransitionGroup-c8afe0ce.js";function It(oe){const[de,je]=n.useState(!1),[Ne,Y]=n.useState(!1),[Se,F]=n.useState(!1),[s,ce]=n.useState({}),[w,x]=n.useState(void 0);n.useState(void 0);const[_,u]=n.useState(void 0),[U,v]=n.useState(void 0),[z,h]=n.useState(void 0),[K,f]=n.useState(void 0),[H,g]=n.useState(void 0),[V,A]=n.useState(void 0),[Q,y]=n.useState(void 0),L=n.useRef(null),[ie,T]=n.useState(""),[le,C]=n.useState(N.PRIMARY),[j,E]=n.useState(!1),[P,me]=n.useState(!1),[r,G]=n.useState({department:{name:""},name:"",code:"",description:"",createdFrom:"",createdTo:"",updatedFrom:"",updatedTo:"",isActive:"",createdBy:{name:"",id:""},updatedBy:{name:"",id:""}}),[c,p]=n.useState({limit:10,loading:!1,totalRecords:0,start:0,search:"",runCustomQuery:!1,records:[]}),W=n.useRef(null),[Te,Ce]=n.useState([{items:[{label:"Activate",className:""},{label:"Deactivate",className:""}]}]),Ee=(t,a)=>{var k;console.log("rowData=",t);const i={label:"label.common.deactivate",command:()=>{Re(t)}},o={label:"label.common.active",command:()=>{De(t)}},l=[{items:[t.isActive?i:o]}];Ce(l),(k=W==null?void 0:W.current)==null||k.toggle(a)},[X,be]=n.useState([{name:"Shivam Soni",designation:"Credit, Manager, Karnataka",emailId:"Shivamsoni@sahayya.com"},{name:"Shiva Prakash",designation:"Executive, Chief Executive Officer, Karnataka",emailId:"shiva.prakash@sahayya.com"},{name:"Rohith Balakrishnan",designation:"Head, Country Head, Karnataka",emailId:"Rohith.balakrishnan@sahayya.com"}]),[Be,Ie]=n.useState(),d=n.useRef(null);n.useEffect(()=>{var t;(t=d==null?void 0:d.current)==null||t.search()},[c==null?void 0:c.search]),n.useEffect(()=>{var t;L!=null&&L.current&&ie!==""&&((t=L==null?void 0:L.current)==null||t.showFunction())},[ie,le,j]);const re=t=>{const{name:a,value:i}=t.target;G(typeof i=="object"?o=>({...o,[a]:{name:`${i==null?void 0:i.name} ${i!=null&&i.lastName?i==null?void 0:i.lastName:""}`.trim(),id:i.userId}}):o=>({...o,[a]:i}))},$=t=>{const{name:a,value:i}=t.target;G(o=>({...o,[a]:i}))},De=t=>{ce({...t}),F(!0),me(!0)},Re=t=>{ce({...t}),Y(!0),me(!1)},Me=t=>{let a="";_||_==null?(a='sort={"department" : "DESC"}&',u(!1)):(a='sort={"department" : "ASC"}&',u(!_)),x(void 0),v(void 0),y(void 0),h(void 0),f(void 0),g(void 0),A(void 0),p({...c,search:a})},Oe=t=>{let a="";w||w==null?(a='sort={"name":"DESC"}&',x(!1)):(a='sort={"name":"ASC"}&',x(!w)),u(void 0),v(void 0),y(void 0),h(void 0),f(void 0),g(void 0),A(void 0),p({...c,search:a})},Ye=t=>{let a="";U||U==null?(a='sort={"description":"DESC"}&',v(!1)):(a='description={"name":"ASC"}&',v(!U)),p({...c,search:a}),x(void 0),u(void 0),y(void 0),h(void 0),f(void 0),g(void 0),A(void 0)},Fe=t=>{let a="";z||z==null?(a='sort={"createdAt":"DESC"}&',h(!1)):(a='sort={"createdAt":"ASC"}&',h(!z)),x(void 0),u(void 0),v(void 0),y(void 0),f(void 0),g(void 0),A(void 0),p({...c,search:a})},Le=t=>{let a="";K||K==null?(a='sort={"createdBy":"DESC"}&',f(!1)):(a='sort={"createdBy":"ASC"}&',f(!0)),x(void 0),u(void 0),v(void 0),y(void 0),h(void 0),g(void 0),A(void 0),p({...c,search:a})},Pe=t=>{let a="";H||H==null?(a='sort={"updatedAt":"DESC"}&',g(!1)):(a='sort={"updatedAt":"ASC"}&',g(!H)),x(void 0),u(void 0),v(void 0),y(void 0),h(void 0),f(void 0),A(void 0),p({...c,search:a})},$e=t=>{let a="";Q||Q==null?(a='sort={"isActive":"DESC"}&',y(!1)):(a='sort={"isActive":"ASC"}&',y(!0)),x(void 0),u(void 0),v(void 0),h(void 0),f(void 0),g(void 0),A(void 0),p({...c,search:a})},ke=t=>{let a="";V||V==null?(a='sort={"updatedBy":"DESC"}&',A(!1)):(a='sort={"updatedBy":"ASC"}&',A(!V)),x(void 0),u(void 0),v(void 0),y(void 0),h(void 0),f(void 0),g(void 0),p({...c,search:a})},we=()=>({...s},q.Inactivate(s==null?void 0:s.uid).then(t=>{var a;C(N.PRIMARY),T(Z.DEACTIVATED),E(!j),Y(!1),F(!1),(a=d==null?void 0:d.current)==null||a.search()}).catch(t=>{C(N.QUATERNARY),T(ee(t)),E(!j)})),_e=()=>({...s},q.activate(s==null?void 0:s.uid).then(t=>{var a;C(N.PRIMARY),T(Z.ACTIVATED),E(!j),Y(!1),F(!1),(a=d==null?void 0:d.current)==null||a.search()}).catch(t=>{C(N.QUATERNARY),T(ee(t)),E(!j)})),Ue=()=>{var o;const t={department:(o=s==null?void 0:s.department)==null?void 0:o.name,name:s==null?void 0:s.name,code:s.code,reason:s.reason,description:s.description,createdAt:s.createdAt,createdBy:s.createdBy,id:s.id,isActive:!1,requestId:s.requestId,uid:s.uid,updatedAt:s.updatedAt,updatedBy:s.updatedBy},a={...t,isActive:!0},i={name:s.displayName,operationType:ue.UPDATE,entity:ve.STATIC_MASTER_DATA,initialStateJson:te(t),finalStateJson:te(a),reasonForChange:s.reasons};return q.update(s==null?void 0:s.uid,i).then(m=>{var l;C(N.PRIMARY),T(Z.SENT_FOR_APPROVAL),E(!j),Y(!1),F(!1),(l=d==null?void 0:d.current)==null||l.search()}).catch(m=>{C(N.QUATERNARY),T(ee(m)),E(!j)})},ze=()=>{var o;const t={department:(o=s==null?void 0:s.department)==null?void 0:o.name,name:s==null?void 0:s.name,code:s.code,reason:s.reason,description:s.description,createdAt:s.createdAt,createdBy:s.createdBy,id:s.id,isActive:!0,requestId:s.requestId,uid:s.uid,updatedAt:s.updatedAt,updatedBy:s.updatedBy},a={...t,isActive:!1},i={name:s.displayName,operationType:ue.UPDATE,entity:ve.STATIC_MASTER_DATA,initialStateJson:te(t),finalStateJson:te(a),reasonForChange:s.reasons};return q.update(s==null?void 0:s.uid,i).then(m=>{var l;C(N.PRIMARY),T(Z.SENT_FOR_APPROVAL),E(!j),Y(!1),F(!1),(l=d==null?void 0:d.current)==null||l.search()}).catch(m=>{C(N.QUATERNARY),T(ee(m)),E(!j)})},He=async t=>{let a=[];t.query.trim().length?(await Bt.getAll(0,10,`name:lk=${t.query}&`).then(i=>{i.status===200&&(a=[...i.data.results])}),a.length===0&&a.push({name:void 0,designation:void 0,emailId:void 0})):a=X,Ie(a)},pe=async t=>{let a=[];t.query.trim().length?(await yt.getAll(0,10,`name=${t.query}&`).then(i=>{i.status===200&&(a=[...i.data])}),a.length===0&&a.push({name:void 0,designation:void 0,emailId:void 0})):a=X,be(a)},Ve=()=>{var a,i,o,m,l,k;let t="";if((a=r==null?void 0:r.department)!=null&&a.name&&(t=`${t}department.name=${(i=r==null?void 0:r.department)==null?void 0:i.name}&`),r.name&&(t=`${t}name:lk=${r.name}&`),r.code&&(t=`${t}code:lk=${r.code}&`),r.description&&(t=`${t}description:lk=${r.description}&`),r.createdFrom&&(console.log(r.createdFrom),t=`${t}createdAt:gt=${ae(r.createdFrom)}&`),r.createdTo&&(t=`${t}createdAt:lt=${ae(r.createdTo)}&`),r.updatedFrom&&(t=`${t}updatedAt:gt=${ae(r.updatedFrom)}&`),r.updatedTo&&(t=`${t}updatedAt:lt=${ae(r.updatedTo)}&`),r.isActive){let J=!0;r.isActive==="YES"?J=!0:r.isActive==="NO"&&(J=!1),t=`${t}isActive:lk=${J}&`}(o=r.createdBy)!=null&&o.id&&(t=`${t}&createdBy=${(m=r.createdBy)==null?void 0:m.id}&`),(l=r.updatedBy)!=null&&l.id&&(t=`${t}&updatedBy=${(k=r.updatedBy)==null?void 0:k.id}&`),p({...c,search:t})},Je=()=>{G({department:{name:""},name:"",code:"",description:"",createdFrom:"",createdTo:"",updatedFrom:"",updatedTo:"",isActive:"",createdBy:{name:"",id:""},updatedBy:{name:"",id:""}}),p({...c,search:""})},qe=()=>{je(!de)},Ke=()=>{oe.navigate(`${he}?mode=${fe.CREATE}`)},Qe=()=>{const{department:t,name:a,code:i,description:o,createdFrom:m,createdTo:l,updatedFrom:k,updatedTo:J,isActive:ut,createdBy:vt,updatedBy:ht}=r;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-3 flex flex-col gap-6 bg-primary-sapphireBlue-100 rounded-lg",children:[e.jsx("div",{className:"flex ",children:e.jsx(Ct,{title:"text.masterData.types.search"})}),e.jsxs("div",{className:" grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsx(ne,{label:"input.organizationLevelDesignation.department",name:"department",field:"name",value:t,variant:I.PRIMARY,suggestions:Be,completeMethod:He,onChange:re,itemTemplate:Ge}),e.jsx(ye,{label:"input.organizationLevelDesignation.displayName",name:"name",variant:I.SECONDARY,onChange:$,value:a}),e.jsx(ye,{label:"input.organizationLevelDesignation.description",name:"description",variant:I.SECONDARY,onChange:$,value:o}),e.jsx(Et,{label:"input.organizationLevelDesignation.isActive",name:"isActive",variant:gt.SECONDARY,options:At,onChange:$,value:ut}),e.jsx(se,{label:"input.organizationLevelDesignation.createdFrom",name:"createdFrom",showTime:!0,value:m,placeholder:"DD-MMM-YYYY",onChange:$}),e.jsx(se,{showTime:!0,label:"input.organizationLevelDesignation.createdTo",name:"createdTo",variant:I.PRIMARY,value:l,placeholder:"DD-MMM-YYYY",onChange:$}),e.jsx(ne,{label:"input.organizationLevelDesignation.createdBy",name:"createdBy",field:"name",value:vt,variant:I.PRIMARY,suggestions:X,completeMethod:pe,onChange:re,itemTemplate:xe}),e.jsx(se,{showTime:!0,label:"input.organizationLevelDesignation.updatedFrom",name:"updatedFrom",variant:I.PRIMARY,value:k,placeholder:"DD-MMM-YYYY",onChange:$}),e.jsx(se,{showTime:!0,label:"input.organizationLevelDesignation.updatedTo",name:"updatedTo",variant:I.PRIMARY,value:J,placeholder:"DD-MMM-YYYY",onChange:$}),e.jsx(ne,{field:"name",label:"input.organizationLevelDesignation.updatedBy",name:"updatedBy",variant:I.PRIMARY,value:ht,suggestions:X,completeMethod:pe,onChange:re,itemTemplate:xe}),e.jsxs("div",{className:"flex gap-5",children:[e.jsx(O,{buttonType:B.RESET_OUTLINE,onClick:Je}),e.jsx(O,{buttonType:B.SEARCH_OUTLINE,onClick:Ve})]})]})]})})},Ge=t=>t.name===void 0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-39",children:[e.jsx("img",{src:ge,alt:"search-icon",className:" h-7 w-7"}),e.jsx(b,{className:"text-primary-labelColor mt-2",label:"Loading..."})]}):e.jsxs("div",{className:"flex flex-col",children:[e.jsx(b,{className:"text-primary-labelColor",label:`${t.name}`}),e.jsx(b,{className:"text-secondary-gray-500 text-xxs",label:t.code})]}),xe=t=>t.name===void 0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-39",children:[e.jsx("img",{src:ge,alt:"search-icon",className:" h-7 w-7"}),e.jsx(b,{className:"text-primary-labelColor mt-2",label:"Loading..."})]}):e.jsx("div",{className:"flex flex-col",children:e.jsx(b,{className:"text-primary-labelColor",label:`${t.name}`})}),We=t=>{var a;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:(a=t==null?void 0:t.department)==null?void 0:a.name})})},Xe=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Department"}),e.jsx("img",{src:_==null?D:_==!0?R:M,alt:"Sort Icon",onClick:Me,className:"cursor-pointer"})]}),Ze=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:t.name})}),et=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Display Name"}),e.jsx("img",{src:w==null?D:w==!0?R:M,alt:"Sort Icon",onClick:Oe,className:"cursor-pointer"})]}),tt=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Description"}),e.jsx("img",{src:U==null?D:U==!0?R:M,alt:"Sort Icon",onClick:Ye,className:"cursor-pointer"})]}),at=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Created On"}),e.jsx("img",{src:z==null?D:z==!0?R:M,alt:"Sort Icon",onClick:Fe,className:"cursor-pointer"})]}),st=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Created By"}),e.jsx("img",{src:K==null?D:K==!0?R:M,alt:"Sort Icon",onClick:Le,className:"cursor-pointer"})]}),it=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Updated On"}),e.jsx("img",{src:H==null?D:H==!0?R:M,alt:"Sort Icon",onClick:Pe,className:"cursor-pointer"})]}),rt=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Updated By"}),e.jsx("img",{src:V==null?D:V==!0?R:M,alt:"Sort Icon",onClick:ke,className:"cursor-pointer"})]}),nt=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Is Active"}),e.jsx("img",{src:Q==null?D:Q==!0?R:M,alt:"Sort Icon",onClick:$e,className:"cursor-pointer"})]}),ot=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:t.description})}),dt=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:`${Ae(t.createdAt)}`})}),ct=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:t.createdByUserName})}),lt=t=>e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:`${Ae(t.updatedAt)}`}),mt=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:t.updatedByUserName})}),pt=t=>e.jsx(e.Fragment,{children:t.isActive?e.jsxs("div",{className:"flex items-center ",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-primaryBlue border-none"}),e.jsx("div",{className:"ml-2 ",children:"YES"})]}):e.jsxs("div",{className:"flex items-center ",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-secondary-gray-300 border-none"}),e.jsx("div",{className:"ml-2 ",children:"NO"})]})}),xt=t=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center ",children:[e.jsx("div",{className:"w-4 h-4 flex items-center",children:e.jsx("img",{src:jt,alt:"Sahayya Logo",className:"cursor-pointer",onClick:a=>{oe.navigate(`${he}?mode=${fe.VIEW}&uid=${t.uid}`)}})}),e.jsx("div",{className:"ml ",children:e.jsx(O,{buttonType:B.MENU,onClick:a=>{Ee(t,a)},className:"!rounded-none bg-transparent !hover:bg-primary-gray-300"})})]})});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex w-full justify-between items-center",children:[e.jsx(b,{label:"heading.organizationLevelDesignation",className:"text-primary-ptext-1000 text-h2 font-bold flex"}),e.jsxs("div",{className:"flex gap-10",children:[e.jsx(O,{buttonType:B.FILTER_OUTLINE,onClick:qe}),e.jsx(O,{buttonType:B.CREATE,className:"create-button",onClick:Ke})]})]}),de&&Qe(),e.jsxs(Tt,{standardDataFormatPromise:q.getAll,dataKey:"id",search:c.search,ref:d,children:[e.jsx(S,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:et,body:Ze}),e.jsx(S,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:Xe,body:We}),e.jsx(S,{className:"text-primary-ptext-1000 text-left text-xs w-1/12  p-1 h-12 pl-6",header:tt,body:ot}),e.jsx(S,{className:"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6",header:nt,body:pt}),e.jsx(S,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:at,body:dt}),e.jsx(S,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:st,body:ct}),e.jsx(S,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:it,body:lt}),e.jsx(S,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:rt,body:mt}),e.jsx(S,{className:"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6",header:"Actions",body:xt})]})]}),e.jsxs(Nt,{onHide:P?()=>F(!1):()=>Y(!1),visible:P?Se:Ne,modal:!0,closable:!1,dismissableMask:!0,children:[e.jsx(b,{label:P?"dialog.staticMaster.activate":"dialog.staticMaster.deactivate",className:"text-primary-ptext-1000 text-base font-Roboto font-bold flex items-center justify-center"}),e.jsx(b,{label:P?"dialog.staticMaster.message.activate":"dialog.staticMaster.message",className:"text-primary-ptext-1000 text-xs font-Roboto flex mt text-center justify-center mx-2 mt-4"}),e.jsxs("div",{className:"flex justify-center mt-4",children:[e.jsx("div",{className:"mr-3",children:e.jsx(O,{buttonType:B.CANCEL_OUTLINE,onClick:P?()=>F(!1):()=>Y(!1)})}),e.jsx("div",{className:"mr-3",children:e.jsx(O,{buttonType:B.SAVE_OUTLINE,onClick:P?()=>_e():()=>we()})}),e.jsx("div",{className:"",children:e.jsx(O,{buttonType:B.SEND_FOR_APPROVAL,className:"approve-primary",onClick:P?()=>Ue():()=>ze()})})]})]}),e.jsx(St,{className:"w-20 bg-white font-Roboto text-xs text-primary-pText-1300 pt-2 rounded-lg mt-0.5 flex justify-center align-center shadow-autoCompletePanel",model:Te,ref:W}),e.jsx("div",{className:"",children:e.jsx(bt,{position:"bottom-right",ref:L,toastText:ie,variant:le})})]})}const ea=ft(It);export{ea as default};
//# sourceMappingURL=OrganizationReportingDesignation-79f97fe6.js.map
