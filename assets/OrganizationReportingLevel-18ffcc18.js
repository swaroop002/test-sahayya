import{w as ve,r as s,aF as o,aG as M,ad as xe,ae as fe,af as he,y as Ee,j as t,T as Te,J as m,o as E,az as T,d as Ne,aH as je,cH as k}from"./index-e8217573.js";import{B as u}from"./ButtonBox-9e46519a.js";import{D}from"./DatePicker-b1c13861.js";import{E as Ce}from"./EditableTable-382c73da.js";import{E as ye}from"./ErrorDialog-d5eef4d7.js";import{I as Re}from"./InputBox-b9e88f52.js";import{I as z}from"./InputTextArea-b90aad1d.js";import{S as N}from"./SimpleDropDown-061a3470.js";import{T as be}from"./Toast-ae99ea5b.js";import{C as j}from"./column.esm-938bad7d.js";import{D as Se}from"./DemoService-45a29f0d.js";import"./kebab-menu-8835ad2e.js";import"./withAuth-6de36ebf.js";import"./No_data-1720c54e.js";import"./datatable.esm-f474a654.js";import"./paginator.esm-11c2c115.js";import"./virtualscroller.esm-9939945c.js";import"./Dialog-adadaf64.js";import"./TransitionGroup-c8afe0ce.js";const Ae=p=>{var Y,L,P;const[F,U]=s.useState({displayName:"",org_level_type:"",reasons:"",description:"",isActive:""}),[C,B]=s.useState(!1),[W,w]=s.useState(!1),[y,Oe]=s.useState({parentOrgLevel:"",from:"",to:""}),[v,Ie]=s.useState({limit:10,loading:!1,totalRecords:0,start:0,search:"",runCustomQuery:!1,records:[]}),[l,R]=s.useState(o.CREATE),c=s.useRef(null),b=s.useRef(!0),[,x]=s.useState(void 0),[H,V]=s.useState(!1),[G,K]=s.useState("bottom-right"),[f,Q]=s.useState(""),[X,_e]=s.useState(""),[S,q]=s.useState(M.PRIMARY),[A,J]=s.useState(!1),[Z,Ye]=s.useState(!1),d=s.useRef(null),a=s.useRef(new xe({validators:{...fe()},...he(),autoForceUpdate:{forceUpdate:()=>x(e=>!e)}}));s.useEffect(()=>{const e=Ee.parse(p.location.search);e!=null&&e.mode&&(e==null?void 0:e.mode)!==void 0&&R(e.mode)},[]),s.useEffect(()=>{var e;if(b.current){b.current=!1,(e=c==null?void 0:c.current)==null||e.addRecords(y);return}},[v==null?void 0:v.search]),s.useEffect(()=>{var e;d!=null&&d.current&&f!==""&&((e=d==null?void 0:d.current)==null||e.showFunction())},[f,S,A]);const $=e=>{var r,n;(n=a==null?void 0:a.current)==null||n.showMessageFor((r=e==null?void 0:e.target)==null?void 0:r.name)},ee=async()=>{var r,n;let e=!1;return e=((r=a==null?void 0:a.current)==null?void 0:r.allValid())&&!C&&!W,e||(x(i=>!i),(n=a==null?void 0:a.current)==null||n.showMessages(),x(i=>!i),!1)},te=e=>{if(e!=null&&e.isInactive)return" !bg-primary-red-200";if(e!=null&&e.isAdded)return" !bg-primary-plum-200";if(e!=null&&e.isUpdated)return" !bg-semantic-yellow-200"},h=(e,r,n)=>{var i;(i=c==null?void 0:c.current)==null||i.updateRecords(e,r,n)},ae=()=>{var e;(e=c==null?void 0:c.current)==null||e.addRecords(y)},se=(e,r)=>t.jsx(N,{variant:T.SECONDARY,onChange:n=>{h(r,n.target.value,"parentOrgLevel")},value:e.parentOrgLevel,placeholder:"Parent Organization Level",validation:a.current.message("parentOrgLevel",e.parentOrgLevel,"mandatory")}),ne=(e,r)=>{var n;return t.jsx(D,{onChange:i=>{h(r,i.target.value,"from")},name:"from",value:e.from,placeholder:"DD-MMM-YYYY",validation:(n=a==null?void 0:a.current)==null?void 0:n.message("from",e.from,"mandatory")})},re=(e,r)=>{var n;return t.jsx(D,{onChange:i=>{h(r,i.target.value,"to")},name:"to",value:e.to,placeholder:"DD-MMM-YYYY",validation:e.to<e.from?"Applicable To date cannot be less than applicable from":(n=a==null?void 0:a.current)==null?void 0:n.message("to",e.to,"mandatory")})},g=e=>{const{name:r,value:n}=e.target;U(i=>({...i,[r]:n}))},oe=e=>{e.target.name==="displayName"&&B(!0),e.target.name==="systemCode"&&w(!0)},ie=async()=>{let e=!1;e=await ee(),e||(K("top-right"),q(M.QUATERNARY),Q(je.ERROR),J(!A))},le=()=>{p.navigate(k)},ce=()=>{console.log("Approve")},de=()=>{p.navigate(k)},me=()=>{R(o.EDIT)},ue=()=>{switch(l){case o.CREATE:return"heading.organizationLevelReporting.create";case o.VIEW:return"heading.organizationLevelReporting.view";case o.EDIT:return"heading.organizationLevelReporting.edit";default:return"heading.organizationLevelReporting.create"}},{displayName:O,org_level_type:I,reasons:_,description:ge,isActive:pe}=F;return t.jsxs("div",{className:"h-full mx-6",children:[t.jsxs("div",{className:"flex w-full justify-between pt-6 items-center",children:[t.jsx("div",{className:" h-7.5",children:t.jsx(Te,{label:ue(),className:"text-primary-ptext-1000 text-h2 font-Roboto font-bold flex"})}),t.jsx("div",{className:"flex mr-5",children:l===o.CREATE||l===o.EDIT?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mr-5",children:t.jsx(u,{className:"reset-red",buttonType:m.CANCEL_OUTLINE,onClick:le})}),t.jsx("div",{className:"mr-10",children:t.jsx(u,{buttonType:m.SAVE_OUTLINE,onClick:ie})}),t.jsx("div",{children:t.jsx(u,{className:"approve-primary",buttonType:m.SEND_FOR_APPROVAL,onClick:ce})})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mr-5",children:t.jsx(u,{buttonType:m.BACK_OUTLINE,onClick:de})}),t.jsx("div",{className:"",children:t.jsx(u,{buttonType:m.EDIT_OUTLINE,className:"blue-primary",onClick:me})})]})})]}),t.jsxs("div",{className:"grid grid-cols-4 gap-3 mt-3",children:[t.jsx("div",{className:"col-span-1",children:t.jsx(Re,{label:"input.organizationLevelReporting.displayName",name:"displayName",variant:E.SECONDARY,onChange:g,value:O,onBlur:e=>{oe(e),$(e)},validation:C?"Duplicate Entry Found":(Y=a==null?void 0:a.current)==null?void 0:Y.message("displayName",O,"mandatory"),disabled:l===o.VIEW})}),t.jsx("div",{className:"col-span-1",children:t.jsx(N,{label:"input.organizationLevelReporting.oragnizationLevelType",name:"org_level_type",variant:T.SECONDARY,value:I,disabled:l===o.VIEW,onChange:g,validation:(L=a==null?void 0:a.current)==null?void 0:L.message("org_level_type",I,"mandatory")})}),l!==o.CREATE&&t.jsx("div",{className:"col-span-1",children:t.jsx(N,{label:"input.organizationLevelReporting.isActive",name:"isActive",variant:T.SECONDARY,onChange:g,value:pe,disabled:l===o.VIEW})})]}),t.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[t.jsx("div",{className:"col-span-2",children:t.jsx(z,{label:"input.organizationLevelReporting.description",name:"description",variant:E.SECONDARY,maxCount:200,onChange:g,value:ge,disabled:l===o.VIEW})}),l!==o.VIEW&&t.jsx("div",{className:"col-span-2",children:t.jsx(z,{label:"input.organizationLevelReporting.reasons",name:"reasons",variant:E.SECONDARY,maxCount:200,onChange:g,value:_,validation:(P=a==null?void 0:a.current)==null?void 0:P.message("reasons",_,"mandatory"),disabled:l===o.VIEW})})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"mt-3 flex w-full justify-between",children:[t.jsx("div",{}),t.jsx(u,{buttonType:m.ICON_TEXT_ROW,onClick:ae})]}),t.jsxs(Ce,{standardDataFormatPromise:Se.getAll,dataKey:"id",ref:c,hidePaginator:!0,pageMode:o.CREATE,rowClassName:te,className:"border border-secondary-concrete px-0 overflow-x-auto mt-4 rounded-lg read-only-table !min-h-111 w-full",updatedRecords:[],addedRecords:[],children:[t.jsx(j,{className:"text-primary-ptext-1000 text-left text-xs w-2/12 p-1 h-12 pl-6",header:"Parent Organization Level*",body:se}),t.jsx(j,{className:"text-primary-ptext-1000 text-left text-xs w-2/12 p-1 h-12 pl-6",header:"From *",body:ne}),t.jsx(j,{className:"text-primary-ptext-1000 text-left text-xs w-2/12 p-1 h-12 pl-6",header:"To *",body:re})]})]}),t.jsx("div",{className:"",children:t.jsx(be,{position:G,ref:d,toastText:f,variant:S,onRemove:()=>{Z&&p.navigate(Ne)}})}),t.jsx(ye,{onHide:()=>V(!1),visible:H,errorMessage:X})]})},Ze=ve(Ae);export{Ze as default};
//# sourceMappingURL=OrganizationReportingLevel-18ffcc18.js.map
