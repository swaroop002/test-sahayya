import{at as cn,r as d,aF as c,de as tn,ad as ce,ae as me,af as ue,b3 as pe,b2 as ne,j as n,c8 as Fe,T as he,o as R,eV as Ue,cn as Te,aA as on,a8 as Ie,v as rn,ao as ke,R as Re,eW as mn,J as un,d$ as Ye,q as hn,eU as de,d8 as sn,d9 as an}from"./index-e8217573.js";import{A as Ge}from"./Address-75e58af3.js";import{C as ln}from"./CheckBox-8a0c0e77.js";import{D as we,a as Ce}from"./DocumentUploader-e2ec1a13.js";import{I as U}from"./InputBox-b9e88f52.js";import{R as Pe}from"./RadioButton-86c37166.js";import{S as Me}from"./SaveComponent-160c5b32.js";import{S as q}from"./SimpleDropDown-061a3470.js";import{S as Le}from"./Skeleton-7e12d019.js";import{T as Oe}from"./TextData-06df331b.js";import{d as fn,B as An}from"./Helper-03e9d878.js";import{S as vn}from"./SystemDatePicker-abe08a29.js";import{E as dn}from"./ErrorDialog-d5eef4d7.js";import{I as xn}from"./InputAddon-04f948e7.js";import{S as $e}from"./StaticMasterDataService-689a6eca.js";import{B as En}from"./ButtonBox-9e46519a.js";import{E as Nn,C as De}from"./EditableTableV2-6afcb42b.js";import{I as yn,B as pn}from"./IconButton-36693dd9.js";import{I as In}from"./InputTextArea-b90aad1d.js";import{F as gn}from"./FinancialService-0c38c3ed.js";const We="/custom/api/login";class Sn extends cn{getReferences($=0,v=10,_,A){const T=`${We}/${_}/${A}/reference`;return this.makeGetRequestWithAuth(T)}saveReferences($,v){const _=`${We}/${v}/reference`;return this.makePostRequestWithAuth(_,$)}updateReference($,v){const _=`${We}/${v}/reference`;return this.makePutRequestWithAuth(_,$)}}const Kn=new Sn,bn=d.forwardRef((Z,$)=>{var ge,Se;const{data:v=fn,isLoading:_,cardNumber:A,dropDownOptions:T,pageType:J,documentCategory:z=Fe.DOCUMENT_CATEGORY_BUSINESS_PROOF,addressDetails:H,disabled:M,disabledSaveMenu:K,isLatLong:N,ocrRelatedData:x,onSaveEmploymentDetails:V,onRemoveEmploymentDetails:r}=Z,[s,g]=d.useState(v),[I,k]=d.useState(c.VIEW),[P,L]=d.useState({isBusinessProofMandatory:!J||J!==tn.CO_APPLICANT}),a=d.useRef(null),[,h]=d.useState(!1),l=d.useRef(new ce({validators:{...me()},...ue(),autoForceUpdate:{forceUpdate:()=>h(e=>!e)}})),X=[{className:"",label:"Remove",command:()=>{r==null||r()},disabled:A===0}];d.useEffect(()=>{s!=null&&s.employmentNature&&f()},[s==null?void 0:s.employmentNature]),d.useEffect(()=>{var t;const{residentialAddress:e}=H??{};e&&((t=s==null?void 0:s.employmentAddress)!=null&&t.residentialAddress)&&g(i=>{var m,y,C,F,w,O;return{...i,address:e==null?void 0:e.address,pincode:{pinCode:(m=e==null?void 0:e.pincode)==null?void 0:m.pinCode,uid:(y=e==null?void 0:e.pincode)==null?void 0:y.uid},city:{name:(C=e==null?void 0:e.city)==null?void 0:C.name,uid:(F=e==null?void 0:e.city)==null?void 0:F.uid},state:(O=(w=e==null?void 0:e.city)==null?void 0:w.state)==null?void 0:O.name,latitude:e==null?void 0:e.latitude,longitude:e==null?void 0:e.longitude}})},[(ge=s==null?void 0:s.employmentAddress)==null?void 0:ge.residentialAddress,H==null?void 0:H.residentialAddress]),d.useEffect(()=>{var t;const{permanentAddress:e}=H??{};e&&((t=s==null?void 0:s.employmentAddress)!=null&&t.permanentAddress)&&g(i=>{var m,y,C,F,w,O;return{...i,address:e==null?void 0:e.address,pincode:{pinCode:(m=e==null?void 0:e.pincode)==null?void 0:m.pinCode,uid:(y=e==null?void 0:e.pincode)==null?void 0:y.uid},city:{name:(C=e==null?void 0:e.city)==null?void 0:C.name,uid:(F=e==null?void 0:e.city)==null?void 0:F.uid},state:(O=(w=e==null?void 0:e.city)==null?void 0:w.state)==null?void 0:O.name,latitude:e==null?void 0:e.latitude,longitude:e==null?void 0:e.longitude}})},[(Se=s==null?void 0:s.employmentAddress)==null?void 0:Se.permanentAddress]),d.useEffect(()=>{if(s!=null&&s.monthlyIncome||s!=null&&s.monthlyExpenses||s!=null&&s.otherMonthlyIncome){const{monthlyIncome:e,otherMonthlyIncome:t,monthlyExpenses:i}=s;g(m=>({...m,monthlyNetIncome:pe(ne(e??"")+ne(t??"")-ne(i??""),"en-IN",0),annualNetIncome:pe((ne(e??"")+ne(t??"")-ne(i??""))*12,"en-IN",0)}))}},[s==null?void 0:s.monthlyIncome,s==null?void 0:s.monthlyExpenses,s==null?void 0:s.otherMonthlyIncome]);const j=d.useRef();d.useImperativeHandle($,()=>({save:b,onSaveSuccess:se,remove:E,resetValidator:f}));const S=e=>{var t,i;(i=l==null?void 0:l.current)==null||i.showMessageFor((t=e==null?void 0:e.target)==null?void 0:t.name)},Y=()=>{var t,i;let e=!1;return e=(t=l==null?void 0:l.current)==null?void 0:t.allValid(),e||(h(m=>!m),(i=l==null?void 0:l.current)==null||i.showMessages(),h(m=>!m),!1)},D=e=>{if(e.target.name==="industry"){g(t=>({...t,[e.target.name]:{...t==null?void 0:t.industry,uid:e.target.value}}));return}g(t=>({...t,[e.target.name]:e.target.value}))},W=e=>{S(e),g(t=>({...t,operationStartYear:s.operationStartYear}))},Q=e=>{const t=ne(e.target.value);g(i=>({...i,[e.target.name]:pe(t,"en-IN",0)}))},te=e=>{g(t=>({...t,employmentAddress:{...t==null?void 0:t.employmentAddress,[e.target.name]:e.checked,residentialAddress:e.target.name==="residentialAddress"?e.checked:t.employmentAddress.permanentAddress,permanentAddress:e.target.name==="permanentAddress"?e.checked:t.employmentAddress.residentialAddress}}))},oe=e=>{g(t=>({...t,employmentAddress:{...t==null?void 0:t.employmentAddress,residentialAddress:e.checked}}))},se=()=>k(c.VIEW),re=()=>k(c.EDIT),E=()=>({...{...s},isActive:!1}),b=()=>{var i,m;const e=(i=j==null?void 0:j.current)==null?void 0:i.save(),t=(m=a==null?void 0:a.current)==null?void 0:m.getUploadedData();if(!(!Y()||!e||!t))return g({...s,...e,uid:s==null?void 0:s.uid}),u()},o=()=>{var e;f(),(e=a==null?void 0:a.current)==null||e.resetValidator(),k(c.VIEW)},u=()=>{var i,m;const e=(i=j==null?void 0:j.current)==null?void 0:i.save(),t=(m=a==null?void 0:a.current)==null?void 0:m.getUploadedData();return{...s,...e,uid:s==null?void 0:s.uid,loanDocumentsProof:t}},f=()=>{var e,t;l.current=new ce({validators:{...me()},...ue(),autoForceUpdate:{forceUpdate:()=>h(i=>!i)}}),(e=l==null?void 0:l.current)==null||e.hideMessages(),(t=j==null?void 0:j.current)==null||t.resetValidator()},p=()=>{g(e=>({...e,employmentAddress:{...e.employmentAddress,isSameAsEmploymentAddress:!1,permanentAddress:!1,residentialAddress:!1}}))},G=d.useMemo(()=>{var t,i,m,y;const{isBusinessProofMandatory:e}=P;return n.jsxs("div",{className:"flex flex-col space-y-4",children:[n.jsx(Oe,{label:e?"label.dde.businessProof*":"label.dde.employmentDetails.file.proof",value:"Attach Documents (PDF, JPG, JPEG or PNG)",titleClass:"text-primary-sideBarBgColor text-sm font-bold mb-1"}),n.jsx("div",{children:n.jsx(we,{mandatoryDocUpload:e,ref:a,savedDocument:(t=v.loanDocuments)!=null&&t[0]?v.loanDocuments[0]:{},mode:I,queryParamForDocList:z,ocrStageName:x==null?void 0:x.ocrStageName,ocrSubstageName:x==null?void 0:x.ocrSubstageName,ocrPayloadData:{loanUid:((i=x==null?void 0:x.ocrPayloadData)==null?void 0:i.loanUid)??"",applicant:{uid:((y=(m=x==null?void 0:x.ocrPayloadData)==null?void 0:m.applicant)==null?void 0:y.uid)??""}}})})]})},[s==null?void 0:s.loanDocuments,I]),B=d.useMemo(()=>{const{address:e,pincode:t,city:i,state:m,latitude:y,longitude:C}=s;return{address:e,pincode:t,city:i,state:m,latitude:y,longitude:C}},[s==null?void 0:s.address,s==null?void 0:s.pincode,s==null?void 0:s.city,s==null?void 0:s.state,s==null?void 0:s.latitude,s==null?void 0:s.longitude]),ee=()=>n.jsx(Ge,{pageMode:I,ref:j,data:B,variant:Te.SECONDARY,isLatLong:N,onAddressChange:p,children:G}),ie=()=>{const{residentialAddress:e}=(s==null?void 0:s.employmentAddress)||{};return n.jsx("div",{className:"ml-4 grid grid-cols-2 gap-4",children:n.jsxs("div",{className:"flex col-span-1",children:[n.jsx(ln,{name:"sameAsResidentialAddress",hideLabel:!0,variant:on.PRIMARY,onChange:oe,value:e,checked:e,hideErrorRow:!0,disabled:I===c.VIEW}),n.jsx("div",{className:"ml-2 flex items-center",children:n.jsx(Ie,{label:"label.checkbox.residentialAddress",className:"ml-2"})})]})})},je=e=>n.jsxs("div",{className:"ml-4 grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"flex col-span-1",children:[n.jsx(Pe,{name:"residentialAddress",hideLabel:!0,className:"flex items-center",onChange:te,value:e==null?void 0:e.residentialAddress,checked:e==null?void 0:e.residentialAddress,disabled:I===c.VIEW}),n.jsx("div",{className:"ml-2 flex items-top",children:n.jsx(Ie,{label:"label.checkbox.residentialAddress",className:"ml-2"})})]}),n.jsxs("div",{className:"flex col-span-1",children:[n.jsx(Pe,{name:"permanentAddress",hideLabel:!0,className:"flex items-center",onChange:te,value:e==null?void 0:e.permanentAddress,checked:e==null?void 0:e.permanentAddress,disabled:I===c.VIEW}),n.jsx("div",{className:"ml-2 flex items-top",children:n.jsx(Ie,{label:"label.checkbox.permanentAddress",className:"ml-2"})})]})]}),Be=()=>{var Ee,Ne,ye,He,qe,Je,ze,Ke,Xe,Qe,Ze,Ve,en,nn;const{employmentNature:e,industry:t,occupation:i,organizationName:m,operationStartYear:y,businessExperience:C,monthlyIncome:F,monthlyExpenses:w,otherMonthlyIncome:O,monthlyNetIncome:le,annualNetIncome:fe,managedBy:Ae,seasonality:ve,noOfEmployees:xe,employmentAddress:be}=s;return n.jsxs(n.Fragment,{children:[n.jsx(he,{label:"label.dde.employeeBasicDetails",className:"text-primary-gray-700 text-sm font-bold mb-1"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2  md:grid-cols-3 lg:grid-cols-4 gap-x-4 gap-y-5 ",children:[n.jsx("div",{className:"col-span-1",children:n.jsx(q,{label:"label.employmentInformation.employmentNature",placeholder:"Select",name:"employmentNature",value:e,onChange:D,validation:(Ee=l==null?void 0:l.current)==null?void 0:Ee.message("employmentNature",e,"mandatory"),onBlur:S,disabled:I===c.VIEW,options:T.EMPLOYMENT_NATURE_OPTION,optionLabel:"name",optionValue:"code"})}),n.jsx("div",{className:"col-span-3"}),n.jsx("div",{className:"col-span-1",children:n.jsx(q,{label:"label.employmentInformation.industry",placeholder:"Select Industry",name:"industry",value:t==null?void 0:t.uid,onChange:D,validation:(Ne=l==null?void 0:l.current)==null?void 0:Ne.message("industry",t==null?void 0:t.uid,"mandatory"),onBlur:S,disabled:I===c.VIEW,options:T.INDUSTRY_OPTION,optionLabel:"name",optionValue:"uid"})}),n.jsx("div",{className:"col-span-1",children:n.jsx(q,{label:"label.employmentInformation.occupation",placeholder:"Select Occupation",name:"occupation",value:i,onChange:D,validation:(ye=l==null?void 0:l.current)==null?void 0:ye.message("occupation",i,"mandatory"),onBlur:S,disabled:I===c.VIEW,options:T.OCCUPATION_OPTION,optionLabel:"name",optionValue:"code"})}),n.jsx("div",{className:"col-span-1",children:n.jsx(U,{variant:R.SECONDARY,label:"label.employmentInformation.nameOfOrganization",placeholder:"Enter Name of Organization",name:"organizationName",value:m,onChange:D,validation:(He=l==null?void 0:l.current)==null?void 0:He.message("organizationName",m,"mandatory"),onBlur:S,disabled:I===c.VIEW})}),n.jsx("div",{className:"col-span-1",children:n.jsx(vn,{view:"year",dateFormat:"yy",showMinMaxRange:!0,disabled:I===c.VIEW,variant:R.SECONDARY,label:"label.employmentInformation.yearStartOperation",placeholder:"Select Year",name:"operationStartYear",value:y??"",onChange:D,onBlur:W,validation:(qe=l==null?void 0:l.current)==null?void 0:qe.message("operationStartYear",y,"mandatory")})}),n.jsx("div",{className:"col-span-1",children:n.jsx(U,{variant:R.SECONDARY,label:"label.employmentInformation.totalBusinessExperience",placeholder:"Enter Total No. of Years",name:"businessExperience",className:"text-right",value:C,onChange:D,validation:(Je=l==null?void 0:l.current)==null?void 0:Je.message("businessExperience",C,"mandatory|checkNumber"),onBlur:S,disabled:I===c.VIEW})}),n.jsx("div",{className:"col-span-1",children:n.jsx(U,{variant:R.SECONDARY,label:"label.employmentInformation.totalIncome",placeholder:"Enter Total Income",value:F,name:"monthlyIncome",className:"text-right",onChange:Q,validation:(ze=l==null?void 0:l.current)==null?void 0:ze.message("monthlyIncome",F,"mandatory|onlyInteger"),onBlur:S,disabled:I===c.VIEW})}),n.jsx("div",{className:"col-span-1",children:n.jsx(U,{variant:R.SECONDARY,label:"label.employmentInformation.totalExpenses",placeholder:"Enter Total Expenses",value:w,name:"monthlyExpenses",className:"text-right",onChange:Q,validation:(Ke=l==null?void 0:l.current)==null?void 0:Ke.message("monthlyExpenses",w,"mandatory|onlyInteger"),onBlur:S,disabled:I===c.VIEW})}),n.jsx("div",{className:"col-span-1",children:n.jsx(U,{variant:R.SECONDARY,label:"label.employmentInformation.otherIncome",placeholder:"Enter Other Income",name:"otherMonthlyIncome",className:"text-right",value:O,onChange:Q,validation:(Xe=l==null?void 0:l.current)==null?void 0:Xe.message("otherMonthlyIncome",O,"mandatory|onlyInteger"),onBlur:S,disabled:I===c.VIEW})}),n.jsx("div",{className:"col-span-1",children:n.jsx(U,{variant:R.SECONDARY,label:"label.employmentInformation.netIncome",placeholder:"Enter Monthly Net Income",value:le,name:"monthlyNetIncome",className:"text-right",validation:(Qe=l==null?void 0:l.current)==null?void 0:Qe.message("monthlyNetIncome",le,"mandatory|onlyInteger"),onBlur:S,disabled:!0})}),n.jsx("div",{className:"col-span-1",children:n.jsx(U,{variant:R.SECONDARY,label:"label.employmentInformation.netIncomeAnnual",placeholder:"Enter Annual Net Income",name:"annualNetIncome",className:"text-right",value:fe,validation:(Ze=l==null?void 0:l.current)==null?void 0:Ze.message("annualNetIncome",fe,"mandatory|onlyInteger"),onBlur:S,disabled:!0})}),e===Ue.SELF_EMPLOYED?n.jsx("div",{className:"col-span-1",children:n.jsx(q,{label:"label.employmentInformation.businessManagedBy",placeholder:"Select Business Managed By",name:"managedBy",value:Ae,onChange:D,validation:(Ve=l==null?void 0:l.current)==null?void 0:Ve.message("managedBy",Ae,"mandatory"),onBlur:S,disabled:I===c.VIEW||e===Ue.SALARIED,options:T.BUSINESS_MANAGED_BY_OPTION,optionLabel:"name",optionValue:"code"})}):null,e===Ue.SELF_EMPLOYED?n.jsx("div",{className:"col-span-1",children:n.jsx(q,{label:"label.employmentInformation.businessSeasonality",placeholder:"Select Seasonality",name:"seasonality",value:ve,onChange:D,validation:(en=l==null?void 0:l.current)==null?void 0:en.message("seasonality",ve,"mandatory"),onBlur:S,disabled:I===c.VIEW,options:T.SEASONALITY_OPTION,optionLabel:"name",optionValue:"code"})}):null,n.jsx("div",{className:"col-span-1",children:n.jsx(q,{label:"label.employmentInformation.noOfEmployees",placeholder:"Select No of Employees",value:xe,name:"noOfEmployees",onChange:D,validation:(nn=l==null?void 0:l.current)==null?void 0:nn.message("noOfEmployees",xe,"mandatory"),onBlur:S,disabled:I===c.VIEW,options:T.NO_EMPLOYEE_OPTION,optionLabel:"name",optionValue:"code"})})]}),n.jsxs("div",{className:"flex",children:[n.jsx(he,{className:"text-primary-gray-700 text-sm font-bold mb-1",label:"label.employmentInformation.employmentAddress"}),J===tn.APPLICANT?ie():je(be)]}),ee()]})};return n.jsx("div",{className:"",children:_?n.jsx(Le,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"}):n.jsx(Me,{disabled:M,disabledMenu:K,title:"label.dde.employmentDetails",titleArgs:{count:A},pageMode:I,onCancel:o,onEdit:re,onSave:V,kebabModel:X,children:Be()})})});bn.defaultProps={disabled:!1};const Cn={listId:"ref-card-1",uid:"",parentUid:"",referenceApplicantUid:"",firstName:"",middleName:"",lastName:"",mobileNo:"",relationship:"",address:"",pincode:{uid:"",pinCode:""},city:{uid:"",name:""},state:"",latitude:"",longitude:"",isActive:!1},Xn=d.forwardRef((Z,$)=>{const{pageObjData:v,isLoading:_,listIndex:A,onDeleteFromList:T,onSaveReferences:J,onRemoveReference:z,disabled:H}=Z,[M,K]=d.useState(c.VIEW),[N,x]=d.useState(Cn),[V,r]=d.useState([]),[s,g]=d.useState(""),[I,k]=d.useState(!1),[,P]=d.useState(void 0),L=d.useRef(),a=[{className:"",label:"Remove",command:()=>{T&&A!==void 0&&z&&(N.uid?z():T(A))}}],h=d.useRef(new ce({validators:{...me()},...ue(),autoForceUpdate:{forceUpdate:()=>P(E=>!E)}}));d.useEffect(()=>{l()},[]),d.useEffect(()=>{v&&x({...v})},[v]),d.useEffect(()=>{s&&k(!0)},[s]);const l=async()=>{te()};d.useImperativeHandle($,()=>({save:Y,remove:Q}));const X=E=>{var b,o;(o=h==null?void 0:h.current)==null||o.showMessageFor((b=E==null?void 0:E.target)==null?void 0:b.name)},j=()=>{var b,o;let E=!1;return E=(b=h==null?void 0:h.current)==null?void 0:b.allValid(),E||(P(u=>!u),(o=h==null?void 0:h.current)==null||o.showMessages(),P(u=>!u),!1)},S=E=>{x(b=>({...b,[E.target.name]:E.target.value}))},Y=()=>{var u;const E=(u=L==null?void 0:L.current)==null?void 0:u.save(),{uid:b,...o}=E;if(!(!j()||!E))return K(c.VIEW),{...N,...o}},D=()=>K(c.EDIT),W=()=>{var E,b;h&&(h.current.visibleFields=[]),(E=h==null?void 0:h.current)==null||E.hideMessages(),(b=L==null?void 0:L.current)==null||b.resetValidator(),K(c.VIEW)},Q=()=>({...N,isActive:!1}),te=async()=>{await $e.getAll(0,1e3,"staticMasterType.code=RELATIONSHIP_REFERENCE").then(E=>{var b;if(rn(E)&&((b=E.data)!=null&&b.totalRecords)){const{results:o}=E.data,u=o.map(f=>({uid:f.uid,label:f.name,value:f.code}));r([...u])}else r([])}).catch(E=>{r([]),g(ke(E))})},oe=d.useMemo(()=>{const{address:E,pincode:b,city:o,state:u,latitude:f,longitude:p}=N;return{address:E,pincode:b,city:o,state:u,latitude:f,longitude:p}},[N==null?void 0:N.address,N==null?void 0:N.pincode,N==null?void 0:N.city,N==null?void 0:N.state,N==null?void 0:N.latitude,N==null?void 0:N.longitude]),se=()=>n.jsx(Ge,{pageMode:M,ref:L,data:oe,addressPlaceholder:"Enter Description Here",variant:Te.SECONDARY}),re=()=>{var p,G,B,ee;const{firstName:E,middleName:b,lastName:o,mobileNo:u,relationship:f}=N;return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"flex mt-5",children:n.jsx(he,{className:"text-primary-gray-700 text-sm font-bold mb-1",label:"label.references.referenceDetails"})}),n.jsxs("div",{className:"grid grid-cols-4 gap-x-4 gap-y-5 mt-5",children:[n.jsx("div",{className:"col-span-1",children:n.jsx(U,{variant:R.SECONDARY,label:"label.references.firstName",placeholder:"Enter First Name",name:"firstName",value:E,onChange:S,validation:(p=h==null?void 0:h.current)==null?void 0:p.message("firstName",E,"mandatory"),onBlur:X,disabled:M===c.VIEW})}),n.jsx("div",{className:"col-span-1",children:n.jsx(U,{variant:R.SECONDARY,label:"label.references.middleName",placeholder:"Enter Middle Name",name:"middleName",value:b,onChange:S,disabled:M===c.VIEW})}),n.jsx("div",{className:"col-span-1",children:n.jsx(U,{variant:R.SECONDARY,label:"label.references.lastName",placeholder:"Enter Last Name",name:"lastName",value:o,onChange:S,validation:(G=h==null?void 0:h.current)==null?void 0:G.message("lastName",o,"mandatory"),onBlur:X,disabled:M===c.VIEW})}),n.jsx("div",{className:"col-span-1",children:n.jsx(xn,{label:"input.basicInformation.mobile",placeholder:"Enter Mobile Number",name:"mobileNo",value:u,variant:R.SECONDARY,onChange:S,validation:(B=h==null?void 0:h.current)==null?void 0:B.message("mobileNo",u,"mandatory|onlyInteger|checkNumber|phoneNumber"),onBlur:X,disabled:M===c.VIEW})}),n.jsx("div",{className:"col-span-1",children:n.jsx(q,{name:"relationship",label:"label.employmentInformation.relationship",placeholder:"Select a Relation",value:f,onChange:S,validation:(ee=h==null?void 0:h.current)==null?void 0:ee.message("relationship",f,"mandatory"),options:V,onBlur:X,disabled:M===c.VIEW})})]}),n.jsx("div",{className:"flex",children:n.jsx(he,{className:"text-primary-gray-700 text-sm font-bold mb-1",label:"label.employmentInformation.referenceAddress"})}),se(),n.jsx(dn,{onHide:()=>{k(!1),g("")},visible:I,errorMessage:s})]})};return n.jsx("div",{className:"",children:_?n.jsx(Le,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"}):n.jsx(Me,{title:"label.reference",titleArgs:{listIndex:A!==void 0?A+1:""},pageMode:M,onCancel:W,onEdit:D,onSave:J,kebabModel:a,disabled:H,children:re()})})}),Rn={assets:[],investmentComments:""},Tn={uid:"",smAssetType:"",amount:"",isActive:!0},Qn=d.forwardRef((Z,$)=>{const{loanUid:v,pageId:_,isLoading:A,sectionMode:T,savedInvestmentInfo:J,onSaveInvestmentInfo:z,onCancel:H,onEdit:M,disabled:K}=Z,[N,x]=d.useState(Rn),[V,r]=d.useState([]),[s,g]=d.useState(""),[I,k]=d.useState(!1),P=Re.useRef(null),[,L]=d.useState(!1),a=d.useRef(new ce({validators:{...me()},...ue(),autoForceUpdate:{forceUpdate:()=>L(o=>!o)}}));d.useEffect(()=>{h()},[]),d.useEffect(()=>{J&&x(o=>({...o,investmentComments:J.investmentComments}))},[J]),d.useEffect(()=>{s&&k(!0)},[s]);const h=async()=>{l()},l=async()=>{var o,u;try{const f=await $e.getDropdownList(mn.ASSET_TYPE,!0,"");if(rn(f)&&((o=f.data)!=null&&o.totalRecords)){const{data:p}=f,G=(u=p.results)==null?void 0:u.map(B=>({uid:B.uid??"",label:B.name??"",value:B.code??""}));r([...G])}else r([])}catch(f){r([]),g(ke(f))}};d.useImperativeHandle($,()=>({props:Z,save:Y,editableTableRef:D}));const X=o=>{x(u=>({...u,[o.target.name]:o.target.value}))},j=(o,u)=>{var p;const f={...u};f.smAssetType=o.target.value,(p=P.current)==null||p.reportDataChange(f)},S=()=>{var o;(o=P.current)==null||o.addRow(Tn)},Y=()=>{var f,p,G;if(!te())return;let o={...N,assets:[...((f=P.current)==null?void 0:f.getAddedRecords())??[],...((p=P.current)==null?void 0:p.getDeletedRecords())??[],...((G=P.current)==null?void 0:G.getUpdatedRecords())??[]]};const u=o.assets.map(B=>{var ee,ie;return{...B,amount:(ie=ne((ee=B.amount)==null?void 0:ee.toString()))==null?void 0:ie.toString()}});return o={...o,assets:u},o},D=()=>{var o;(o=P.current)==null||o.search()},W=()=>{H==null||H()},Q=o=>{var u,f;(f=a==null?void 0:a.current)==null||f.showMessageFor((u=o==null?void 0:o.target)==null?void 0:u.name)},te=()=>{var u,f;let o=!1;return o=(u=a==null?void 0:a.current)==null?void 0:u.allValid(),o||(L(p=>!p),(f=a==null?void 0:a.current)==null||f.showMessages(),L(p=>!p),!1)},oe=o=>pe(o,"en-IN",0),se=o=>{var u;return n.jsx(q,{name:`smAssetType${o.uid}`,className:"!w-32",options:V,optionLabel:"label",optionValue:"value",value:o.smAssetType??"",onChange:f=>{j(f,o)},onBlur:Q,validation:(u=a==null?void 0:a.current)==null?void 0:u.message(`smAssetType${o.uid}`,o.smAssetType,"mandatory"),disabled:T===c.VIEW})},re=o=>{var u;return n.jsx(U,{name:`amount${o.uid}`,className:"!w-40 text-right",variant:R.SECONDARY,value:typeof o.amount=="number"?oe(o.amount):o.amount,onChange:f=>{var B;const p={...o},G=ne(f.target.value);p.amount=pe(G,"en-IN",0),(B=P.current)==null||B.reportDataChange(p)},onBlur:Q,validation:(u=a==null?void 0:a.current)==null?void 0:u.message(`amount${o.uid}`,o.amount,"mandatory|onlyInteger"),disabled:T===c.VIEW})},E=o=>n.jsx(yn,{buttonType:pn.DELETE,onClick:()=>{var u;(u=P.current)==null||u.deleteRow(o),a.current=new ce({validators:{...me()},...ue(),autoForceUpdate:{forceUpdate:()=>L(f=>!f)}})},disabled:T===c.VIEW}),b=()=>{const{investmentComments:o}=N;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mt-3 flex flex-col gap-5",children:[n.jsx("div",{className:"self-end",children:n.jsx(En,{buttonType:un.ICON_TEXT_ROW,customLabel:"Add",onClick:S,disabled:T===c.VIEW})}),n.jsx("div",{children:v&&_?n.jsxs(Nn,{ref:P,uniqueKey:"uid",standardDataFormatPromise:gn.getAll,search:`&loan.uid=${v}&applicant.uid=${_}&isActive=${!0}`,mode:"UPDATE",children:[n.jsx(De,{header:Ye.t("label.investmentInfo.table.colTitle.assetType*"),className:"text-primary-ptext-1000 text-left text-xs h-12 pl-6",body:se}),n.jsx(De,{header:Ye.t("label.investmentInfo.table.colTitle.amt*"),className:"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6",body:re}),n.jsx(De,{header:Ye.t("label.investmentInfo.table.colTitle.action"),className:"text-primary-ptext-1000 text-right text-xs h-12 px-6",style:{minWidth:"50px",width:"50px"},body:E})]}):n.jsx(n.Fragment,{})}),n.jsx("div",{className:"flex",children:n.jsx("div",{className:"w-122.5 h-40",children:n.jsx(In,{name:"investmentComments",className:"!h-full",label:"label.investmentInfo.comments",labelClassNames:"font-bold text-xs !text-primary-gray-700",maxCount:200,placeholder:"Enter comments",value:o,onChange:X,variant:R.SECONDARY,disabled:T===c.VIEW})})})]}),n.jsx(dn,{onHide:()=>{k(!1),g("")},visible:I,errorMessage:s})]})};return n.jsx("div",{className:"",children:A?n.jsx(Le,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"}):n.jsx(Me,{title:"label.investmentInfo.assets",pageMode:T,onCancel:W,onEdit:M,onSave:z,disabled:K,children:b()})})}),ae={MARITAL_STATUS:{name:"maritalStatus",enum:"MARITAL_STATUS"},RELIGION:{name:"religion",enum:"RELIGION"},EDUCATION:{name:"education",enum:"EDUCATION"},CATEGORY:{name:"category",enum:"CATEGORY"}},_e={defaultAsResidentialAddress:"defaultAsResidentialAddress",defaultAsPermanentAddress:"defaultAsPermanentAddress",isSameAsResidentialAddress:"isSameAsResidentialAddress"},Zn=d.forwardRef((Z,$)=>{const{data:v,isLoading:_,addressDetails:A,disabled:T,onSaveDetails:J,onError:z,onDeleteDocs:H,page:M,variant:K}=Z,N=hn(),[x,V]=d.useState(c.VIEW),[r,s]=d.useState(v),[g,I]=d.useState({maritalStatus:[],religion:[],education:[],category:[],categoryProofDocs:[]}),[,k]=d.useState(!1),P=d.useRef(null),L=d.useRef(null),a=d.useRef(new ce({validators:{...me()},...ue(),autoForceUpdate:{forceUpdate:()=>k(e=>!e)}}));d.useEffect(()=>{f()},[]),d.useEffect(()=>{s(v)},[v]),d.useEffect(()=>{if(M===de.APPLICANT){const{residentialAddress:e}=A??{};e&&(r!=null&&r.isSameAsResidentialAddress)&&u(e)}},[r==null?void 0:r.isSameAsResidentialAddress,A==null?void 0:A.residentialAddress]),d.useEffect(()=>{M===de.CO_APPLICANT&&(A!=null&&A.residentialAddress&&(r!=null&&r.defaultAsResidentialAddress)?u(A==null?void 0:A.residentialAddress):A!=null&&A.permanentAddress&&(r!=null&&r.defaultAsPermanentAddress)&&u(A==null?void 0:A.permanentAddress))},[r==null?void 0:r.defaultAsResidentialAddress,r==null?void 0:r.defaultAsPermanentAddress]);const h=d.useRef(null);d.useImperativeHandle($,()=>({save:E,onSaveSuccess:b,onCancel:se}));const l=async()=>{p(ae.MARITAL_STATUS.name,ae.MARITAL_STATUS.enum)},X=async()=>{p(ae.EDUCATION.name,ae.EDUCATION.enum)},j=async()=>{p(ae.RELIGION.name,ae.RELIGION.enum)},S=async()=>{p(ae.CATEGORY.name,ae.CATEGORY.enum)},Y=e=>{var t,i;(i=a==null?void 0:a.current)==null||i.showMessageFor((t=e==null?void 0:e.target)==null?void 0:t.name)},D=()=>{var t,i;let e=!1;return e=(t=a==null?void 0:a.current)==null?void 0:t.allValid(),e||(k(m=>!m),(i=a==null?void 0:a.current)==null||i.showMessages(),k(m=>!m),!1)},W=e=>{const{name:t,value:i}=e.target;s(m=>({...m,[t]:i}))},Q=e=>{s(t=>({...t,isSameAsResidentialAddress:e.checked}))},te=e=>{s(t=>({...t,[e.target.name]:e.checked,defaultAsPermanentAddress:!1}))},oe=e=>{s(t=>({...t,[e.target.name]:e.checked,defaultAsResidentialAddress:!1}))},se=()=>{var e,t;a&&(a.current.visibleFields=[]),(e=a==null?void 0:a.current)==null||e.hideMessages(),(t=h==null?void 0:h.current)==null||t.resetValidator(),V(c.VIEW)},re=()=>V(c.EDIT),E=()=>{var m,y,C;const e=(m=h==null?void 0:h.current)==null?void 0:m.save(),t=(y=L==null?void 0:L.current)==null?void 0:y.getUploadedData(),i=(C=P==null?void 0:P.current)==null?void 0:C.getUploadedData();if(!(M===de.CO_APPLICANT&&!(t!=null&&t.documentUid))&&D())return{...r,...e,unSavedPermanentAddressDocuments:t,unSavedCategoryDocuments:i}},b=()=>{V(c.VIEW)},o=async e=>{let t,i;if(M==="CO_APPLICANT"?r.defaultAsResidentialAddress?(t=A==null?void 0:A.residentialAddress,i=_e.defaultAsResidentialAddress):r.defaultAsPermanentAddress&&(t=A==null?void 0:A.permanentAddress,i=_e.defaultAsPermanentAddress):r.isSameAsResidentialAddress&&(t=A==null?void 0:A.residentialAddress,i=_e.isSameAsResidentialAddress),t===void 0)return;const m=u(t,!0);m&&e&&(An(m,e)||s(C=>({...C,[i]:!1})))},u=(e,t)=>{var m,y,C,F,w,O;const i={address:e==null?void 0:e.address,pincode:{pinCode:(m=e==null?void 0:e.pincode)==null?void 0:m.pinCode,uid:(y=e==null?void 0:e.pincode)==null?void 0:y.uid},city:{name:(C=e==null?void 0:e.city)==null?void 0:C.name,uid:(F=e==null?void 0:e.city)==null?void 0:F.uid},state:(O=(w=e==null?void 0:e.city)==null?void 0:w.state)==null?void 0:O.name,latitude:e==null?void 0:e.latitude,longitude:e==null?void 0:e.longitude};if(t)return{...i};s(le=>({...le,...i}))},f=async()=>{l(),X(),j(),S()},p=async(e,t)=>{try{const i=await $e.getDropdownList(t);I(m=>{var y;return{...m,[e]:(y=i==null?void 0:i.data)==null?void 0:y.results}})}catch(i){console.error(i),z==null||z(ke(i))}},G=d.useMemo(()=>{var e,t;return n.jsxs(Re.Fragment,{children:[n.jsx(Oe,{label:M===de.APPLICANT?"label.text.address.proof":"label.text.address.proof*",value:"Attach Documents (PDF, JPG, JPEG or PNG)",titleClass:"text-primary-gray-700 text-sm font-bold mb-1"}),n.jsx("div",{className:"gap-2",children:n.jsx(we,{ref:L,savedDocument:(e=v==null?void 0:v.savedPermanentAddressDocuments)!=null&&e[0]?(t=v==null?void 0:v.savedPermanentAddressDocuments)==null?void 0:t[0]:{},mandatoryDocUpload:M===de.CO_APPLICANT,mode:x===c.VIEW?Ce.VIEW:Ce.EDIT,queryParamForDocList:Fe.DOCUMENT_CATEGORY_ADDRESS_PROOF,ocrStageName:sn.LOGIN,ocrSubstageName:an.DDE,ocrPayloadData:{loanUid:N.loanUid??"",applicant:{uid:v.applicantUid??""}}})})]})},[r==null?void 0:r.savedPermanentAddressDocuments,x,v==null?void 0:v.savedPermanentAddressDocuments]),B=d.useMemo(()=>{const{address:e,pincode:t,city:i,state:m,latitude:y,longitude:C}=r;return{address:e,pincode:t,city:i,state:m,latitude:y,longitude:C}},[r==null?void 0:r.address,r==null?void 0:r.pincode,r==null?void 0:r.city,r==null?void 0:r.state,r==null?void 0:r.latitude,r==null?void 0:r.longitude]),ee=()=>n.jsx(Ge,{pageMode:x,ref:h,data:B,variant:K??Te.SECONDARY,onAddressChange:o,isLatLong:K===Te.SECONDARY,children:G}),ie=()=>{var e,t;return n.jsxs("div",{className:"",children:[n.jsx(Oe,{label:"Category Proof",value:"Attach Documents (PDF, JPG, JPEG or PNG)",titleClass:"text-primary-gray-700 text-sm font-bold mb-1"}),n.jsx("div",{className:"",children:n.jsx(we,{ref:P,savedDocument:(e=v==null?void 0:v.savedCategoryDocuments)!=null&&e[0]?(t=v==null?void 0:v.savedCategoryDocuments)==null?void 0:t[0]:{},mode:x===c.VIEW?Ce.VIEW:Ce.EDIT,queryParamForDocList:Fe.DOCUMENT_CATEGORY_CATEGORY_PROOF,ocrStageName:sn.LOGIN,ocrSubstageName:an.DDE,ocrPayloadData:{loanUid:N.loanUid??"",applicant:{uid:v.applicantUid??""}}})})]})},je=()=>n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-6 h-6 mr-1.5",children:n.jsx(ln,{hideLabel:!0,hideErrorRow:!0,variant:on.PRIMARY,value:r.isSameAsResidentialAddress,checked:r.isSameAsResidentialAddress,onChange:Q,disabled:x===c.VIEW})}),n.jsx("div",{children:n.jsx(he,{className:"text-primary-labelColor text-xs  ",label:"label.dde.permanentAddressCheckboxMessage"})})]}),Be=()=>n.jsxs("div",{className:" mt-1 ml-4 grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"flex col-span-1",children:[n.jsx(Pe,{hideLabel:!0,hideErrorRow:!0,name:"defaultAsResidentialAddress",className:"flex items-center",onChange:te,value:r.defaultAsResidentialAddress,checked:r.defaultAsResidentialAddress,disabled:x===c.VIEW}),n.jsx("div",{className:"ml-2 flex items-top",children:n.jsx(Ie,{label:"label.checkbox.residentialAddress",className:"ml-2"})})]}),n.jsxs("div",{className:"flex col-span-1",children:[n.jsx(Pe,{hideLabel:!0,hideErrorRow:!0,name:"defaultAsPermanentAddress",className:"flex items-center",onChange:oe,value:r.defaultAsPermanentAddress,checked:r.defaultAsPermanentAddress,disabled:x===c.VIEW}),n.jsx("div",{className:"ml-2 flex items-top",children:n.jsx(Ie,{label:"label.checkbox.permanentAddress",className:"ml-2"})})]})]}),ge=()=>n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"mr-5",children:n.jsx(he,{className:"text-primary-gray-700 text-sm font-bold",label:"subHeading.dde.permanentAddress"})}),M===de.APPLICANT?je():Be()]}),Se=()=>{var le,fe,Ae,ve,xe,be,Ee,Ne,ye;const{birthPlace:e,category:t,education:i,emailAddress:m,fatherOrSpouseName:y,institute:C,martialStatus:F,noOfDependants:w,religion:O}=r;return n.jsxs(Re.Fragment,{children:[ee(),n.jsxs("div",{className:"mt-7 grid grid-cols-4 gap-3",children:[n.jsx("div",{children:n.jsx(U,{label:"label.dde.emailAddress",name:"emailAddress",placeholder:"placeholder.dde.emailAddress",variant:R.SECONDARY,onChange:W,onBlur:Y,value:m,validation:(le=a==null?void 0:a.current)==null?void 0:le.message("emailAddress",m,"email"),disabled:x===c.VIEW})}),n.jsx("div",{children:n.jsx(q,{label:"label.dde.martialStatus*",name:"martialStatus",placeholder:"placeholder.dde.martialStatus",value:F,variant:R.PRIMARY,options:g.maritalStatus,optionLabel:"name",optionValue:"code",onChange:W,onBlur:Y,validation:(fe=a==null?void 0:a.current)==null?void 0:fe.message("martialStatus",F,"mandatory"),disabled:x===c.VIEW})}),n.jsx("div",{children:n.jsx(U,{label:"label.dde.father/spouseName",name:"fatherOrSpouseName",placeholder:"placeholder.dde.father/spouseName",variant:R.SECONDARY,onChange:W,onBlur:Y,value:y,validation:(Ae=a==null?void 0:a.current)==null?void 0:Ae.message("fatherOrSpouseName",y,"mandatory"),disabled:x===c.VIEW})}),n.jsx("div",{children:n.jsx(U,{label:"label.dde.noOfDependants",name:"noOfDependants",placeholder:"placeholder.dde.noOfDependants",variant:R.SECONDARY,onChange:W,onBlur:Y,value:w,validation:(ve=a==null?void 0:a.current)==null?void 0:ve.message("noOfDependants",w,"onlyWholeNumber:default"),disabled:x===c.VIEW})}),n.jsx("div",{children:n.jsx(q,{label:"label.dde.education*",name:"education",placeholder:"placeholder.dde.education",value:i,variant:R.PRIMARY,options:g==null?void 0:g.education,optionLabel:"name",optionValue:"code",onChange:W,onBlur:Y,validation:(xe=a==null?void 0:a.current)==null?void 0:xe.message("education",i,"mandatory"),disabled:x===c.VIEW})}),n.jsx("div",{children:n.jsx(U,{label:"label.dde.institute/University*",name:"institute",placeholder:"placeholder.dde.institute/University",variant:R.SECONDARY,onChange:W,onBlur:Y,value:C,validation:(be=a==null?void 0:a.current)==null?void 0:be.message("institute",C,"mandatory"),disabled:x===c.VIEW})}),n.jsx("div",{children:n.jsx(U,{label:"label.dde.birthPlace*",name:"birthPlace",placeholder:"placeholder.dde.birthPlace",variant:R.SECONDARY,onChange:W,onBlur:Y,value:e,validation:(Ee=a==null?void 0:a.current)==null?void 0:Ee.message("birthPlace",e,"mandatory"),disabled:x===c.VIEW})}),n.jsx("div",{children:n.jsx(q,{label:"label.dde.religion",name:"religion",placeholder:"placeholder.dde.religion",value:O,variant:R.PRIMARY,options:g.religion,optionLabel:"name",optionValue:"code",onChange:W,onBlur:Y,validation:(Ne=a==null?void 0:a.current)==null?void 0:Ne.message("religion",O,"mandatory"),disabled:x===c.VIEW})}),n.jsx("div",{children:n.jsx(q,{label:"label.dde.category*",name:"category",placeholder:"placeholder.dde.category",value:t,variant:R.PRIMARY,options:g.category,optionLabel:"name",optionValue:"code",onChange:W,onBlur:Y,validation:(ye=a==null?void 0:a.current)==null?void 0:ye.message("category",t,"mandatory"),disabled:x===c.VIEW})})]}),ie()]})};return n.jsx(Re.Fragment,{children:n.jsx("div",{className:"",children:_?n.jsx(Le,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"}):n.jsx(Me,{disabled:T,renderHeaderContent:ge,pageMode:x,onSave:J,onCancel:se,onEdit:re,children:Se()})})})});export{bn as E,Qn as I,Zn as O,Kn as R,Xn as a,Rn as b,Cn as i};
//# sourceMappingURL=OtherDetails-8b519354.js.map
