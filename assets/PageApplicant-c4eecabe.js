import{q as us,r as i,aF as g,aG as h,v as C,ao as m,d4 as R,j as r,R as at,J as st,eU as ms,da as Et,d9 as L,aw as B,aH as O,d7 as P,c8 as Wt,d8 as Ie,de as ps,dc as St,dd as ge}from"./index-e8217573.js";import{A as fs}from"./Address-75e58af3.js";import{i as Ds,B as As}from"./BasicInformation-f2687bb1.js";import{B as ot}from"./ButtonBox-9e46519a.js";import{c as Oe,D as ys,a as Te,d as hs}from"./DocumentUploader-e2ec1a13.js";import{E as Es}from"./ErrorDialog-d5eef4d7.js";import{a as Y,K as Ss}from"./KYCV3-298daeeb.js";import{L as Q}from"./LazyLoader-70599949.js";import{b as Is}from"./MediaGallery-5884b284.js";import{c as gs,d as zt,f as qt,g as Os,u as Ts,S as Qt,h as Ns,j as Rs,k as Xt,l as Ne,m as Re,O as Ps,L as Pe,n as vs,o as ve,q as Ls,r as Cs,t as _s,v as Le,w as Ce,x as _e,y as Ms,s as ws,z as xs,A as js}from"./Helper-03e9d878.js";import{S as Ht}from"./SaveComponent-160c5b32.js";import{S as U}from"./Section-00ef9f2b.js";import{S as k}from"./Skeleton-7e12d019.js";import{T as Bs}from"./TextData-06df331b.js";import{T as Ys}from"./Toast-ae99ea5b.js";import{A as Us}from"./ApplicantService-924aa5cb.js";import{I as ks}from"./Industry-6ae795a6.js";import{S as J}from"./StaticMasterDataService-689a6eca.js";import{B as It}from"./BankAccountDetailsService-375c75c8.js";import{E as gt}from"./EmploymentDetailsService-b3cd805d.js";import{I as Jt,O as Ot}from"./InvestmentInfoService-9f211f25.js";import{O as $t}from"./OtherDocumentService-d3804bc8.js";import{B as Zt}from"./BasicInformation-dd84bcb0.js";import{R as Tt}from"./Residential-74fb844b.js";import{i as te,R as Nt,O as bs,a as Vs,I as Ks,E as Fs}from"./OtherDetails-8b519354.js";import{B as Gs}from"./BankAccountDetails-e32209b8.js";import"./AutoComplete-0bca608a.js";import"./search_icon-459d6871.js";import"./withAuth-6de36ebf.js";import"./virtualscroller.esm-9939945c.js";import"./InputBox-b9e88f52.js";import"./InputTextArea-b90aad1d.js";import"./Dialog-adadaf64.js";import"./esm-70d64670.js";import"./index-8739acfd.js";import"./SimpleDropDown-061a3470.js";import"./TextButton-41b4a67e.js";import"./loader-5f2cfb31.js";import"./City-7102c574.js";import"./Pincode-a7c9b067.js";import"./InputAddon-04f948e7.js";import"./ProfilePictureUpload-60f86be0.js";import"./Loading-783a01c7.js";import"./FileUploadCustom-5ab7fd25.js";import"./FileUploadMenuBox-f47dc693.js";import"./kebab-menu-8835ad2e.js";import"./MenuBox-defc36b0.js";import"./FileUploadService-1aaf11f7.js";import"./SystemDatePicker-abe08a29.js";import"./DatePicker-b1c13861.js";import"./IconButton-36693dd9.js";import"./sortIcon-54357a29.js";import"./Download_Icon-51fc7f46.js";import"./eye_icon-081bddb3.js";import"./DocumentService-a293b5f4.js";import"./link-0172a3d4.js";import"./TransitionGroup-c8afe0ce.js";import"./CheckBox-8a0c0e77.js";import"./RadioButton-86c37166.js";import"./EditableTableV2-6afcb42b.js";import"./datatable.esm-f474a654.js";import"./paginator.esm-11c2c115.js";import"./FinancialService-0c38c3ed.js";const Ws={assets:[],investmentComments:""},nn=()=>{const l=us().loanUid??"",[c,Me]=i.useState(""),[we,xe]=i.useState({...Ds}),[ee,nt]=i.useState(g.VIEW),[M,je]=i.useState({}),[Be,ae]=i.useState(!0),[Ye,se]=i.useState(!0),[Ue,ke]=i.useState(!1),[j,oe]=i.useState({uid:""}),[Rt,X]=i.useState(g.VIEW),[be,Ve]=i.useState(!1),[ne,b]=i.useState([gs]),[Ke,Fe]=i.useState(1),[Ge,Pt]=i.useState(!0),[We,re]=i.useState([]),[ce,vt]=i.useState({uid:"",success:!1,failed:!1}),[Lt,Ct]=i.useState({verified:!1,failedToVerify:!1}),[ie,rt]=i.useState([te]),[ze,_t]=i.useState(!0),[qe,de]=i.useState(1),[Qe,Xe]=i.useState(Ws),[He,Mt]=i.useState(g.VIEW),[Je,wt]=i.useState(!0),[ct,it]=i.useState([{...zt}]),[$e,dt]=i.useState(!0),[lt,ut]=i.useState([{...qt}]),[Ze,mt]=i.useState(!0),[le,ta]=i.useState(null),[ea,ue]=i.useState(!0),[aa,sa]=i.useState({...Os}),[me,xt]=i.useState([{...Oe}]),[pe,jt]=i.useState(g.VIEW),[oa,$]=i.useState(!0),[na,qs]=i.useState("bottom-right"),[Bt,A]=i.useState(""),[fe,E]=i.useState(h.PRIMARY),[y,S]=i.useState(!1),[Yt,u]=i.useState(""),[ra,De]=i.useState(!1),[Ae,V]=i.useState({EMPLOYMENT_NATURE_OPTION:[],INDUSTRY_OPTION:[],OCCUPATION_OPTION:[],BUSINESS_MANAGED_BY_OPTION:[],SEASONALITY_OPTION:[],NO_EMPLOYEE_OPTION:[],ACCOUNT_OPTION:[]}),K=i.useRef(null),F=i.useRef(null),w=i.useRef([]),x=i.useRef([]),G=i.useRef([]),pt=i.useRef(null),Ut=i.useRef(null),W=i.useRef(null),z=i.useRef(null),ye=i.useRef(null);i.useEffect(()=>{ca()},[]),i.useEffect(()=>{c&&(kt(),la(),At(),bt(),Vt(),Ft(),yt())},[c]),i.useEffect(()=>{var t;K!=null&&K.current&&Bt!==""&&((t=K==null?void 0:K.current)==null||t.showFunction(),A(""))},[Bt,fe,y]),i.useEffect(()=>{Yt&&De(!0)},[Yt]),i.useEffect(()=>{oe(t=>{var e,a;return{...t,address:M==null?void 0:M.address,pincode:{pinCode:(e=M==null?void 0:M.pincode)==null?void 0:e.pinCode,uid:(a=M==null?void 0:M.pincode)==null?void 0:a.uid}}})},[be]);const ca=async()=>{ia()},kt=()=>{Zt.getDde(c).then(t=>{C(t)&&(xe(Ts(t.data)),ae(!1))}).catch(t=>{console.log(t),ae(!1)})},bt=async()=>{try{await Tt.findByUid(l,c).then(t=>{C(t)&&(oe({...t.data}),se(!1))})}catch(t){u(m(t)),se(!1)}},ia=async()=>{var t,e,a,s;try{const o=await Us.getApplicantInfo(0,20,R.PRIMARY,l);C(o)&&((t=o.data)!=null&&t.totalRecords)&&Me((s=(a=(e=o.data)==null?void 0:e.results)==null?void 0:a[0])==null?void 0:s.uid)}catch(o){u(m(o))}},da=async()=>{try{const t=await Y.getKycDocument(l,c);if(C(t)){const{data:e}=t;return e}}catch(t){u(m(t))}},la=async()=>{var t,e,a,s,o,n,p,d,T,f,I,D,N,Z;try{const q=await Y.getKycDocument(l,c);if(C(q)){const{data:_}=q,H=[],tt=[],ht=v=>v.map(et=>({sectionUid:et.uid??"",fileName:et.fileName??"",fileType:et.fileType??"",sectionType:et.smDocSectionType??"",url:et.url}));for(const v in _)H.push({listId:v,uid:v,docName:((a=(e=(t=_[v])==null?void 0:t[0].kyc)==null?void 0:e.docType)==null?void 0:a.code)??"",docNo:((o=(s=_[v])==null?void 0:s[0].kyc)==null?void 0:o.docNo)??"",maskedDocNo:((p=(n=_[v])==null?void 0:n[0].kyc)==null?void 0:p.maskedDocNo)??"",dob:((T=(d=_[v])==null?void 0:d[0].kyc)==null?void 0:T.dob)??"",docSections:ht(_[v]),isVerified:((I=(f=_[v])==null?void 0:f[0].kyc)==null?void 0:I.isVerified)??!1}),tt.push(((Z=(N=(D=_[v])==null?void 0:D[0].kyc)==null?void 0:N.docType)==null?void 0:Z.code)??"");H.length?(b([...H]),Pt(!1),re([...tt])):Pt(!1)}}catch(q){Pt(!1),u(m(q))}},ft=async t=>{var e,a;if(t||dt(!0),l&&c)try{const s=await gt.getEmploymentDetails(l,c);if(C(s))if(((e=s==null?void 0:s.data)==null?void 0:e.length)>0){const o=(a=s==null?void 0:s.data)==null?void 0:a.map(n=>xs(n));it([...o]),dt(!1)}else dt(!1),it([{...zt}])}catch(s){console.log(s),dt(!1)}},Dt=async t=>{var e,a;if(t||mt(!0),l&&c)try{const s=await It.getBankAccountDetails(l,c);if(C(s))if(((e=s==null?void 0:s.data)==null?void 0:e.length)>0){const o=(a=s==null?void 0:s.data)==null?void 0:a.map(n=>js(n));ut([...o]),mt(!1)}else mt(!1),ut([{...qt}])}catch(s){console.log(s),mt(!1)}},At=async()=>{_t(!0);try{const t=await Nt.getReferences(0,20,l,c);if(C(t)){const{data:e}=t,a=e.map(s=>{var o,n,p,d,T,f,I,D,N,Z,q,_,H,tt,ht,v;return{uid:s.uid??"",parentUid:((n=(o=s.applicant)==null?void 0:o.parent)==null?void 0:n.uid)??"",referenceApplicantUid:((p=s.applicant)==null?void 0:p.uid)??"",firstName:((d=s.applicant)==null?void 0:d.firstName)??"",middleName:((T=s.applicant)==null?void 0:T.middleName)??"",lastName:((f=s.applicant)==null?void 0:f.lastName)??"",mobileNo:((I=s.applicant)==null?void 0:I.mobileNo)??"",relationship:((D=s.applicant)==null?void 0:D.smRelationship)??"",address:s.address??"",pincode:{uid:((N=s.pincode)==null?void 0:N.uid)??"",pinCode:((Z=s.pincode)==null?void 0:Z.pinCode)??""},city:{uid:((q=s.city)==null?void 0:q.uid)??"",name:((_=s.city)==null?void 0:_.name)??""},state:((tt=(H=s.city)==null?void 0:H.state)==null?void 0:tt.name)??"",latitude:((ht=s.latitude)==null?void 0:ht.toString())??"",longitude:((v=s.longitude)==null?void 0:v.toString())??"",isActive:s.isActive??!0}});e.length?(rt([...a]),de(e.length)):rt([{...te}]),_t(!1)}}catch(t){_t(!1),u(m(t))}},Vt=async()=>{if(l&&c)try{const t=await Tt.getAddressForDde(l,c);ta(t==null?void 0:t.data)}catch(t){console.log(t),u(m(t))}},Kt=async()=>{var t,e;if(l&&c)try{const a=await Ot.getDetails(c);C(a)&&(sa(vs((t=a==null?void 0:a.data)==null?void 0:t.permanentAddress,(e=a==null?void 0:a.data)==null?void 0:e.applicant)),ue(!1))}catch(a){console.log(a),u(m(a)),ue(!1)}},ua=async()=>{await J.getAll(0,200,"staticMasterType.code=EMPLOYMENT_NATURE").then(a=>{var s,o;(s=a.data)!=null&&s.results&&((o=a.data)==null?void 0:o.results.length)>0?V(n=>({...n,EMPLOYMENT_NATURE_OPTION:[...a.data.results]})):console.log("error")})},ma=async()=>{await ks.getAll(0,200,"").then(a=>{var s,o;(s=a.data)!=null&&s.results&&((o=a.data)==null?void 0:o.results.length)>0?V(n=>({...n,INDUSTRY_OPTION:[...a.data.results??[]]})):console.log("error")})},pa=async()=>{await J.getAll(0,200,"staticMasterType.code=OCCUPATION_TYPE").then(a=>{var s,o;(s=a.data)!=null&&s.results&&((o=a.data)==null?void 0:o.results.length)>0?V(n=>({...n,OCCUPATION_OPTION:[...a.data.results??[]]})):console.log("error")})},fa=async()=>{await J.getAll(0,200,"staticMasterType.code=BUSINESS_MANAGED_BY").then(a=>{var s,o;(s=a.data)!=null&&s.results&&((o=a.data)==null?void 0:o.results.length)>0?V(n=>({...n,BUSINESS_MANAGED_BY_OPTION:[...a.data.results??[]]})):console.log("error")})},Da=async()=>{await J.getAll(0,200,"staticMasterType.code=BUSINESS_SEASONALITY_TYPES").then(a=>{a.data.results&&a.data.results.length>0?V(s=>({...s,SEASONALITY_OPTION:[...a.data.results??[]]})):console.log("error")})},Aa=async()=>{await J.getAll(0,200,"staticMasterType.code=NO_OF_EMPLOYEES").then(a=>{var s,o;(s=a.data)!=null&&s.results&&((o=a.data)==null?void 0:o.results.length)>0?V(n=>({...n,NO_EMPLOYEE_OPTION:[...a.data.results??[]]})):console.log("error")})},ya=async()=>{await J.getAll(0,200,"staticMasterType.code=ACCOUNT_TYPE").then(a=>{a.data.results&&a.data.results.length>0?V(s=>({...s,ACCOUNT_OPTION:[...a.data.results??[]]})):console.log("error")})},Ft=async t=>{wt(!0);try{const e=await Jt.getInvestmentInformation(0,20,l,c);if(C(e)){const{data:a}=e;Xe(s=>({...s,investmentComments:a.commentOnInvestment??""})),wt(!1)}}catch(e){wt(!1),u(m(e))}},ha=(t,e)=>{e?(E(h.QUATERNARY),A(t),S(!y)):u(t)},yt=async()=>{var t,e;try{const a=await $t.getDocsByApplicantType(Qt.LOGIN,l,c);if(C(a))if(((t=a==null?void 0:a.data)==null?void 0:t.length)>0){const s=(e=a==null?void 0:a.data)==null?void 0:e.map(o=>Ns(o));xt([...s]),$(!1)}else $(!1)}catch(a){console.log(a),$(!1),u(m(a))}},Ea=async(t,e)=>{if(t.uid){const a=await Ee(t==null?void 0:t.uid),s=ve(l,c,t,a,R.PRIMARY);try{const o=await Y.updateKycDocument(s,L.DDE);if(P(o)){const{data:n}=o,p=n.meta?JSON.parse(n.meta):null,d=f=>{var I,D;return f===St.DOCUMENT_SECTIONS_FRONT_PAGE?((I=p==null?void 0:p.ocrResponse)==null?void 0:I.frontMaskedImageUrl)??"":f===St.DOCUMENT_SECTIONS_BACK_PAGE?((D=p==null?void 0:p.ocrResponse)==null?void 0:D.backMaskedImageUrl)??"":""},T=f=>{var I;return((I=n.docType)==null?void 0:I.code)===ge.AADHAR_CARD?f.map(N=>({sectionUid:N.uid??"",fileName:N.fileName??"",fileType:N.fileType??"",sectionType:N.smDocSectionType??"",url:p?d(N.smDocSectionType):N.url})):f};b(f=>f.map(D=>{var N;return D.uid===n.uid?{...D,docName:((N=n.docType)==null?void 0:N.code)??"",docNo:n.docNo??"",maskedDocNo:n.maskedDocNo??"",docSections:T(n.kycDocuments),dob:n.dob??""}:D})),E(h.PRIMARY),A(O.SAVED),S(!y)}}catch(o){console.log(o),u(m(o))}}else{const a=Ls(l,c,t,R.PRIMARY);try{const s=await Y.saveKycDocument(a,L.DDE);if(B(s)){const{data:o}=s,n=o.meta?JSON.parse(o.meta):null,p=T=>{var f,I;return T===St.DOCUMENT_SECTIONS_FRONT_PAGE?((f=n==null?void 0:n.ocrResponse)==null?void 0:f.frontMaskedImageUrl)??"":T===St.DOCUMENT_SECTIONS_BACK_PAGE?((I=n==null?void 0:n.ocrResponse)==null?void 0:I.backMaskedImageUrl)??"":""},d=T=>{var f;return((f=o.docType)==null?void 0:f.code)===ge.AADHAR_CARD?T.map(D=>({sectionUid:D.uid??"",fileName:D.fileName??"",fileType:D.fileType??"",sectionType:D.smDocSectionType??"",url:n?p(D.smDocSectionType):D.url})):T};b(T=>T.map((I,D)=>{var N;return D===e?{...I,uid:o.uid??"",docName:((N=o.docType)==null?void 0:N.code)??"",docNo:o.docNo??"",maskedDocNo:o.maskedDocNo??"",docSections:d(o.kycDocuments),dob:o.dob??""}:I})),E(h.PRIMARY),A(O.SAVED),S(!y)}}catch(s){u(m(s))}}},Sa=async(t,e)=>{if(t.uid){const a=ve(l,c,t,await Ee(t==null?void 0:t.uid),R.PRIMARY);try{const s=await Y.updateKycDocument(a,L.DDE);P(s)&&(e!==void 0&&Se(e),E(h.QUATERNARY),A(O.REMOVED),S(!y))}catch(s){console.log(s),u(m(s))}}},Ia=async(t,e)=>{const a=Cs(l,c,ce.uid,t,R.PRIMARY);try{const s=await Y.populateKycDocument(a,L.DDE);if(B(s)){const{data:o}=s;b(n=>n.map((d,T)=>{var f;return T===e?{...d,uid:o.uid,docName:((f=o.docType)==null?void 0:f.code)??"",docNo:o.docNo??"",dob:o.dob??""}:d})),vt(n=>({...n,uid:o.uid??"",success:!0,failed:!1}))}}catch(s){vt(o=>({...o,success:!1,failed:!0})),u(m(s))}},ga=async(t,e,a,s)=>{const o=_s(l,c,t,e,R.PRIMARY,s);try{const n=await Y.validateAadhar(o,L.DDE);if(B(n)){const{data:p}=n;Ct({...Lt,verified:!0}),b(d=>d.map((f,I)=>{var D;return I===a?{...f,uid:p.uid??"",docName:((D=p.docType)==null?void 0:D.code)??"",docNo:p.docNo??"",maskedDocNo:p.maskedDocNo??"",dob:p.dob??""}:f}))}}catch(n){Ct({...Lt,failedToVerify:!0}),u(m(n))}},Oa=()=>{const t={listId:`kyc-card-${Ke+1}`,uid:"",docName:"",docNo:"",maskedDocNo:"",dob:"",docSections:[],isVerified:!1};Fe(e=>e+1),b(e=>[...e,t]),vt(()=>({uid:"",success:!1,failed:!1}))},Ta=()=>{const t={...zt};it(e=>[...e,t])},Na=()=>{const t={...te,listId:`ref-card-${qe+1}`};de(e=>e+1),rt(e=>[...e,t])},Ra=()=>{const t={...qt};ut(e=>[...e,t])},Pa=()=>{const t={...Oe,listKey:Math.random().toString(36).substring(2)};xt(e=>[...e,t])},va=async t=>Tt.saveForDde(t).then(e=>{P(e)&&(bt(),E(h.PRIMARY),A(O.SAVED),S(!y),X(g.VIEW),Vt())}).catch(e=>{u(m(e))}),La=async t=>Tt.save(t).then(e=>{B(e)&&(bt(),E(h.PRIMARY),A(O.SAVED),S(!y),X(g.VIEW),Vt())}).catch(e=>{u(m(e))}),Ca=async()=>{var a,s;const t=(a=W==null?void 0:W.current)==null?void 0:a.save(),e=(s=z==null?void 0:z.current)==null?void 0:s.getUploadedData();if(!(!t||!e)&&t){const o=Rs({...t,uid:j==null?void 0:j.uid,addressDocumentsInfo:e??{}},l,c,R.PRIMARY);return j.uid?va(o):La(o)}},_a=()=>{var t,e;(t=W==null?void 0:W.current)==null||t.resetValidator(),(e=z==null?void 0:z.current)==null||e.resetValidator(),X(g.VIEW)},he=async t=>Y.getPopulateDocumentByKyc(l,c).then(e=>{var a,s;if(C(e)){const[o,n,p]=((a=e==null?void 0:e.data)==null?void 0:a.name.split(" "))??"";e.data={...e.data,address:((s=e==null?void 0:e.data)==null?void 0:s.address)??"",firstName:o,middleName:n,lastName:p},je(e.data),t===Et.ADDRESS&&Ve(d=>!d),t===Et.BASIC_INFO&&ke(d=>!d)}}).catch(e=>{console.log(e),u(m(e))}),Ma=async t=>{const e=Le(t,l,c,R.PRIMARY);return Zt.updateDde(e).then(a=>{P(a)&&(E(h.PRIMARY),A(O.SAVED),S(!y),nt(g.VIEW),X(g.CREATE),kt())}).catch(a=>{u(m(a))})},wa=async t=>{const e=Le(t,l,c,R.PRIMARY);return Zt.saveDde(e).then(a=>{B(a)&&(E(h.PRIMARY),A(O.SAVED),S(!y),nt(g.VIEW),X(g.CREATE),kt())}).catch(a=>{u(m(a))})},xa=async()=>{var e;const t=(e=F==null?void 0:F.current)==null?void 0:e.save();if(!t)return Promise.resolve(!0);if(t)return t.uid?Ma(t):wa(t)},ja=()=>{var t;(t=F==null?void 0:F.current)==null||t.cancel(),nt(g.VIEW)},Ba=async t=>{var a,s,o,n;const e=(s=(a=w==null?void 0:w.current)==null?void 0:a[t])==null?void 0:s.save();if(e){const p=Ce(e,l,c,R.PRIMARY);if(e.uid)try{const d=await gt.updateEmploymentDetail(p);P(d)&&(A(O.SAVED),E(h.PRIMARY),S(!y),(n=(o=w==null?void 0:w.current)==null?void 0:o[t])==null||n.onSaveSuccess(),ft(!0))}catch(d){console.log(d),u(m(d))}else try{const d=await gt.createEmploymentDetail(p);B(d)&&(A(O.SAVED),E(h.PRIMARY),S(!y),ft(!0))}catch(d){console.log(d),u(m(d))}}},Ya=async t=>{var a,s,o,n;const e=(s=(a=x==null?void 0:x.current)==null?void 0:a[t])==null?void 0:s.save();if(e){const p=_e(e,l,c,R.PRIMARY);if(e.uid)try{const d=await It.updateBankAccountDetail(p);P(d)&&(A(O.SAVED),E(h.PRIMARY),S(!y),(n=(o=x==null?void 0:x.current)==null?void 0:o[t])==null||n.onSaveSuccess(),Dt(!0))}catch(d){u(m(d))}else try{const d=await It.createBankAccountDetail(p);B(d)&&(A(O.SAVED),E(h.PRIMARY),S(!y),Dt(!0))}catch(d){console.log(d),u(m(d))}}},Ua=async t=>{var a;const e=(a=G==null?void 0:G.current)==null?void 0:a[t].save();if(e.uid){const s=Xt(l,c,e,c);try{const o=await Nt.updateReference(s,L.DDE);P(o)&&(At(),E(h.PRIMARY),A(O.SAVED),S(!y))}catch(o){u(m(o))}}else{const s=Xt(l,c,e,c);try{const o=await Nt.saveReferences(s,L.DDE);B(o)&&(At(),E(h.PRIMARY),A(O.SAVED),S(!y))}catch(o){u(m(o))}}},ka=async t=>{var s;const e=(s=G==null?void 0:G.current)==null?void 0:s[t].remove(),a=Xt(l,c,e,c);try{const o=await Nt.updateReference(a,L.DDE);P(o)&&(At(),E(h.QUATERNARY),A(O.REMOVED),S(!y))}catch(o){u(m(o))}},ba=async()=>{var e,a;const t=(e=Ut.current)==null?void 0:e.save();if(t){const s=Ne(t,l,c,R.PRIMARY);if(s)try{let o=Ot.create;t.permanentAddressUid&&(o=Ot.update),await o(s),Kt(),A(O.SAVED),E(h.PRIMARY),S(!y),(a=Ut.current)==null||a.onSaveSuccess()}catch(o){u(m(o))}}},Va=async t=>{const e=Ne(t,l,c,R.PRIMARY);if(e)try{const a=await Ot.update(e);P(a)&&Kt()}catch(a){u(m(a))}},Ka=async()=>{var a;const t=(a=pt==null?void 0:pt.current)==null?void 0:a.save(),e=Re(l,c,t,R.PRIMARY);try{const s=await Jt.updateInvestmentInformation(e,L.DDE);P(s)&&(Ft(),E(h.PRIMARY),A(O.SAVED),S(!y),Mt(g.VIEW))}catch(s){u(m(s))}},Fa=async t=>{const e=Re(l,c,t,R.PRIMARY);try{const a=await Jt.updateInvestmentInformation(e,L.DDE);P(a)&&Ft(!0)}catch(a){u(m(a))}},Ga=async t=>{var a,s;const e=(s=(a=w==null?void 0:w.current)==null?void 0:a[t])==null?void 0:s.remove();if(e){const o=Ce(e,l,c,R.PRIMARY);if(e.uid)try{const n=await gt.updateEmploymentDetail(o);P(n)&&(ft(),A(O.REMOVED),E(h.QUATERNARY),S(!y))}catch(n){u(m(n))}else it(()=>[...ct.filter((p,d)=>d!==t)])}},Wa=async t=>{var a,s;const e=(s=(a=x==null?void 0:x.current)==null?void 0:a[t])==null?void 0:s.remove();if(e){const o=_e(e,l,c,R.PRIMARY);if(e.uid)try{const n=await It.updateBankAccountDetail(o);P(n)&&(Dt(),A(O.REMOVED),E(h.QUATERNARY),S(!y))}catch(n){u(m(n))}else ut(()=>[...lt.filter((p,d)=>d!==t)])}},za=t=>{rt(()=>[...ie.filter((a,s)=>s!==t)])},qa=async()=>{var e;const t=(e=ye.current)==null?void 0:e.save();if(t)try{const a=await $t.saveDocument(Qt.LOGIN,L.DDE,t);P(a)&&(jt(g.VIEW),$(!0),yt(),E(h.PRIMARY),A(O.SAVED),S(!y))}catch(a){console.log(a),u(m(a))}},Qa=()=>{yt(),jt(g.VIEW)},Xa=async(t,e)=>{if(t.uid){const a={...t};a.isActive=!1;const s=Ms([a],{loanUid:l,applicantUid:c,loanSectionKey:Pe.applicants});try{const o=await $t.saveDocument(Qt.LOGIN,L.DDE,s);P(o)&&($(!0),yt(),E(h.QUATERNARY),A(O.REMOVED),S(!y))}catch(o){console.log(o),u(m(o))}}e!==void 0&&as(e)},Ha=()=>{const t=[];t.push(Za),c&&t.push(ft);for(const e of t)e()},Ja=()=>{const t=[];t.push(ts),c&&t.push(Dt);for(const e of t)e()},$a=()=>{c&&Kt()},Za=()=>{ua(),ma(),pa(),fa(),Da(),Aa()},ts=()=>{ya()},Ee=async t=>(await da())[t],Se=t=>{b(()=>[...ne.filter((a,s)=>s!==t)])},es=t=>{re([...t])},as=t=>{xt(()=>[...me.filter((a,s)=>s!==t)])},ss=()=>{const t=ws(j==null?void 0:j.loanDocuments);return t!=null&&t.length?t:[]},Gt=()=>({ocrStageName:Ie.LOGIN,ocrSubstageName:L.DDE,ocrPayloadData:{loanUid:l,applicant:{uid:c}}}),os=i.useMemo(()=>M,[Ue]),ns=()=>r.jsx(As,{pageMode:ee,ref:F,prePopulated:os,data:we,type:"DDE",isLoading:Be,ocrRelatedData:Gt()}),rs=()=>{var t;return Ye?r.jsx(k,{height:"19rem",width:"100%",borderRadius:"8px",animation:"wave"}):r.jsx(fs,{pageMode:Rt,ref:W,data:j,children:r.jsxs("div",{className:"flex flex-col gap-3 ",children:[r.jsx(Bs,{label:"label.text.address.proof*",value:"Attach Documents (PDF, JPG, JPEG or PNG)",titleClass:"text-primary-sideBarBgColor text-sm font-bold mb-1"}),r.jsx(ys,{mandatoryDocUpload:!0,ref:z,mode:Rt===g.CREATE?Te.EDIT:Te.VIEW,savedDocument:((t=ss())==null?void 0:t[0])??hs,queryParamForDocList:Wt.DOCUMENT_CATEGORY_ADDRESS_PROOF,ocrStageName:Ie.LOGIN,ocrSubstageName:L.DDE,ocrPayloadData:{loanUid:l,applicant:{uid:c}}})]})})},cs=()=>r.jsx(at.Fragment,{children:ne.map((t,e)=>r.jsx("div",{children:r.jsx(Ss,{mode:"EDIT",isLoading:Ge,uid:t.uid,documentListIndex:e,docName:t.docName,docNo:t.docNo,dateOfBirth:t.dob,docSections:t.docSections,maskedDocNo:t.maskedDocNo,isVerified:t.isVerified,removeDocumentInList:Se,cardNameList:We,handlerCardNameList:es,ocrStatus:ce,onSave:Ea,onRemove:Sa,onPopulate:Ia,onVerifyAadhar:ga,aadharVerificationStatus:Lt,handlerAadharVerificationStatus:()=>{Ct({verified:!1,failedToVerify:!1})},placeOfUpload:Is.LOGIN_APPLICANT})},`document-${t.listId}`))}),is=()=>r.jsx("div",{className:"flex flex-col gap-4",children:ct==null?void 0:ct.map((t,e)=>r.jsx(Fs,{isLatLong:!0,ref:a=>{w.current[e]=a},pageType:ps.APPLICANT,cardNumber:e+1,data:t,documentCategory:Wt.DOCUMENT_CATEGORY_BUSINESS_PROOF,isLoading:$e,dropDownOptions:Ae,addressDetails:{residentialAddress:le},ocrRelatedData:Gt(),onSaveEmploymentDetails:()=>Ba(e),onRemoveEmploymentDetails:()=>Ga(e)},t==null?void 0:t.uid))}),ds=()=>r.jsx("div",{className:"flex flex-col gap-4",children:lt==null?void 0:lt.map((t,e)=>r.jsx(Gs,{ref:a=>{x.current[e]=a},cardNumber:e+1,data:t,documentCategory:Wt.DOCUMENT_CATEGORY_BANK_ACCOUNT_DOCUMENT,isLoading:Ze,dropDownOptions:Ae,ocrRelatedData:Gt(),onSaveBankAccountDetails:()=>Ya(e),onRemoveBankAccountDetails:()=>Wa(e)},t==null?void 0:t.uid))}),ls=()=>r.jsx(at.Fragment,{children:r.jsx(Ps,{ref:ye,isLoading:oa,otherDocumentsData:me,sectionMode:pe,payloadInfo:{loanUid:l,applicantUid:c,loanSectionKey:Pe.applicants},onRemoveDocFromList:Xa})});return r.jsxs(at.Fragment,{children:[r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsx(U,{title:"heading.basicInformation",children:r.jsxs(r.Fragment,{children:[r.jsx(Ht,{title:"heading.kycDocuments.nameContact",pageMode:ee,onSave:xa,onCancel:ja,onEdit:()=>nt(g.CREATE),onPrePopulate:()=>he(Et.BASIC_INFO),children:ns()}),r.jsx(Ht,{title:"label.heading.residential.address",pageMode:Rt,onSave:Ca,onCancel:_a,onEdit:()=>X(g.CREATE),onPrePopulate:()=>he(Et.ADDRESS),children:rs()})]})}),r.jsx(U,{title:"KYC Documents",alertText:"Either PAN or Form - 60 are mandatory",children:c?r.jsx(Q,{children:r.jsxs(at.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-5",children:cs()}),r.jsx("div",{className:"p-5 w-full rounded-xl bg-slate-100 mt-5",children:r.jsx(ot,{buttonType:st.ICON_TEXT_ROW,customLabel:"Add Another Document",onClick:Oa})})]})}):r.jsx(k,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"})}),r.jsx(U,{title:"heading.dde.otherDetails",children:c?r.jsx(Q,{onLazyLoad:$a,children:r.jsx(bs,{ref:Ut,data:aa,isLoading:ea,addressDetails:{residentialAddress:le},onSaveDetails:ba,onError:ha,onDeleteDocs:Va,page:ms.APPLICANT})}):r.jsx(k,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"})}),r.jsx(U,{title:"heading.dde.employmentInformation",alertText:"At least one employment detail is mandatory",children:c?r.jsxs(Q,{onLazyLoad:Ha,children:[is(),r.jsx("div",{className:"p-5 w-full rounded-xl bg-slate-100 mt-5",children:r.jsx(ot,{buttonType:st.ICON_TEXT_ROW,customLabel:"label.dde.add.another.employmentDetail",onClick:Ta})})]}):r.jsx(k,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"})}),r.jsx(U,{title:"heading.dde.bankAccount.details",alertText:"At least one bank account detail is mandatory",children:c?r.jsxs(Q,{onLazyLoad:Ja,children:[ds(),r.jsx("div",{className:"p-5 w-full rounded-xl bg-slate-100 mt-5",children:r.jsx(ot,{buttonType:st.ICON_TEXT_ROW,customLabel:"label.dde.add.another.bankAccount.details",onClick:Ra})})]}):r.jsx(k,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"})}),r.jsx(U,{title:"heading.references",alertText:"At least two references are mandatory",children:c?r.jsxs(Q,{children:[r.jsx("div",{className:"flex flex-col gap-4",children:ie.map((t,e)=>r.jsx(Vs,{listIndex:e,isLoading:ze,pageObjData:t,ref:a=>{G.current[e]=a},onDeleteFromList:za,onSaveReferences:()=>Ua(e),onRemoveReference:()=>ka(e)},`applicant-${t.listId}`))}),r.jsx("div",{className:"p-5 mt-5 w-full rounded-xl bg-slate-100 ",children:r.jsx(ot,{buttonType:st.ICON_TEXT_ROW,customLabel:"Add Another Reference",onClick:Na})})]}):r.jsx(k,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"})}),r.jsx(U,{title:"heading.investmentInformation",children:c?r.jsx(Q,{children:r.jsx(Ks,{isLoading:Je,ref:pt,loanUid:l,pageId:c,sectionMode:He,savedInvestmentInfo:Qe,onSaveInvestmentInfo:Ka,onDeleteInvestmentProof:Fa,onCancel:()=>Mt(g.VIEW),onEdit:()=>Mt(g.CREATE)})}):r.jsx(k,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"})}),r.jsx(U,{title:"label.heading.otherDocuments",children:c?r.jsx(Q,{children:r.jsxs(at.Fragment,{children:[r.jsx(Ht,{title:"",pageMode:pe,onSave:qa,onCancel:Qa,onEdit:()=>jt(g.CREATE),children:ls()}),r.jsx("div",{className:"p-5 w-full rounded-xl bg-slate-100 mt-5",children:r.jsx(ot,{buttonType:st.ICON_TEXT_ROW,customLabel:"Add Another Document",onClick:Pa})})]})}):r.jsx(k,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"})})]}),r.jsx(Ys,{position:na,ref:K,toastText:Bt,variant:fe}),r.jsx(Es,{onHide:()=>{De(!1),u("")},visible:ra,errorMessage:Yt})]})};export{nn as default};
//# sourceMappingURL=PageApplicant-c4eecabe.js.map
