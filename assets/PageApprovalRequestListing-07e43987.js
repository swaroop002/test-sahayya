import{w as Xe,r,aG as p,j as e,T as E,J as M,aH as V,ao as J,aI as te,aJ as ae,aK as K,o as R,az as se,aM as Ze,aT as et,av as tt,aU as at,a8 as b,p as re,aV as st,z as rt,aN as Q}from"./index-e8217573.js";import{s as F,a as P,b as $}from"./sortIcon-54357a29.js";import{e as it}from"./eye_icon-081bddb3.js";import{A as ot}from"./AutoComplete-0bca608a.js";import{B as L}from"./ButtonBox-9e46519a.js";import{D as z}from"./DatePicker-b1c13861.js";import{D as nt}from"./Dialog-adadaf64.js";import{I as X}from"./InputBox-b9e88f52.js";import{R as ct}from"./ReadOnlyTable-86accb69.js";import{S as lt}from"./SectionTitle-9f9277ec.js";import{S as ie}from"./SimpleDropDown-061a3470.js";import{T as dt}from"./Toast-ae99ea5b.js";import{C as h}from"./column.esm-938bad7d.js";import{A as mt}from"./ApprovalRequestService-f8cdf7f8.js";import{S as G}from"./StaticMasterTypeService-480bff1a.js";import"./search_icon-459d6871.js";import"./withAuth-6de36ebf.js";import"./virtualscroller.esm-9939945c.js";import"./kebab-menu-8835ad2e.js";import"./No_data-1720c54e.js";import"./datatable.esm-f474a654.js";import"./paginator.esm-11c2c115.js";import"./TransitionGroup-c8afe0ce.js";function pt(oe){const[Z,ne]=r.useState(!1),[ce,I]=r.useState(!1),[le,D]=r.useState(!1),[s,ht]=r.useState({}),[ut,O]=r.useState(void 0),[w,A]=r.useState(void 0),[q,S]=r.useState(void 0);r.useState(void 0),r.useState(void 0);const[_,j]=r.useState(void 0),[B,y]=r.useState(void 0);r.useState(void 0);const[Y,g]=r.useState(void 0),[U,N]=r.useState(void 0);r.useState(void 0),r.useState(void 0);const T=r.useRef(null),[W,u]=r.useState(""),[ee,x]=r.useState(p.PRIMARY),[d,v]=r.useState(!1),[k,xt]=r.useState(!1),[o,H]=r.useState({entity:"",name:"",maker:"",createdFrom:"",createdTo:"",checkedFrom:"",checkedTo:"",operation:"",checker:{name:"",id:""},status:""});r.useState({title:"",id:"",userId:"",completed:"",concept:"",application:"",emailId:""});const[l,f]=r.useState({limit:10,loading:!1,totalRecords:0,start:0,search:'sort={"createdAt":"DESC"}',runCustomQuery:!1,records:[]});r.useRef(null);const[de,vt]=r.useState([{name:"Shivam Soni",designation:"Credit, Manager, Karnataka",emailId:"Shivamsoni@sahayya.com"},{name:"Shiva Prakash",designation:"Executive, Chief Executive Officer, Karnataka",emailId:"shiva.prakash@sahayya.com"},{name:"Rohith Balakrishnan",designation:"Head, Country Head, Karnataka",emailId:"Rohith.balakrishnan@sahayya.com"}]),[me,pe]=r.useState([{name:"Shivam Soni",designation:"Credit, Manager, Karnataka",emailId:"Shivamsoni@sahayya.com"},{name:"Shiva Prakash",designation:"Executive, Chief Executive Officer, Karnataka",emailId:"shiva.prakash@sahayya.com"},{name:"Rohith Balakrishnan",designation:"Head, Country Head, Karnataka",emailId:"Rohith.balakrishnan@sahayya.com"}]),n=r.useRef(null);r.useEffect(()=>{var t;(t=n==null?void 0:n.current)==null||t.search()},[l==null?void 0:l.search]),r.useEffect(()=>{var t;T!=null&&T.current&&W!==""&&((t=T==null?void 0:T.current)==null||t.showFunction())},[W,ee,d]);const he=t=>{const{name:a,value:i}=t.target;H(typeof i=="object"?c=>({...c,[a]:{name:`${i==null?void 0:i.name} ${i==null?void 0:i.lastName}`,id:i.userId}}):c=>({...c,[a]:i}))},m=t=>{const{name:a,value:i}=t.target;H(c=>({...c,[a]:i}))},ue=t=>{let a="";w||w==null?(a='sort={"entity":"DESC"}&',A(!1)):(a='sort={"entity":"ASC"}&',A(!0)),S(void 0),j(void 0),y(void 0),g(void 0),O(void 0),N(void 0),f({...l,search:a})},xe=t=>{let a="";q||q==null?(a='sort={"name":"DESC"}&',S(!1)):(a='sort={"name":"ASC"}&',S(!0)),f({...l,search:a}),A(void 0),j(void 0),y(void 0),g(void 0),O(void 0),N(void 0)},ve=t=>{let a="";_||_==null?(a='sort={"createdAt":"DESC"}&',j(!1)):(a='sort={"createdAt":"ASC"}&',j(!_)),S(void 0),A(void 0),y(void 0),g(void 0),O(void 0),N(void 0),f({...l,search:a})},fe=t=>{let a="";B||B==null?(a='sort={"operationType":"DESC"}&',y(!1)):(a='sort={"operationType":"ASC"}&',y(!0)),S(void 0),A(void 0),j(void 0),g(void 0),O(void 0),N(void 0),f({...l,search:a})},Ae=t=>{let a="";Y||Y==null?(a='sort={"updatedAt":"DESC"}&',g(!1)):(a='sort={"updatedAt":"ASC"}&',g(!Y)),S(void 0),A(void 0),j(void 0),y(void 0),O(void 0),N(void 0),f({...l,search:a})},Se=t=>{let a="";U||U==null?(a='sort={"status":"DESC"}&',N(!1)):(a='sort={"status":"ASC"}&',N(!Y)),S(void 0),A(void 0),j(void 0),y(void 0),g(void 0),O(void 0),f({...l,search:a})},je=()=>{const t={...s,isActive:!1};return G.update(t,s==null?void 0:s.uid).then(a=>{var i;x(p.PRIMARY),u(V.DEACTIVATED),v(!d),I(!1),D(!1),(i=n==null?void 0:n.current)==null||i.search()}).catch(a=>{x(p.QUATERNARY),u(J(a)),v(!d)})},ye=()=>{const t={...s,isActive:!0};return G.update(t,s==null?void 0:s.uid).then(a=>{var i;x(p.PRIMARY),u(V.ACTIVATED),v(!d),I(!1),D(!1),(i=n==null?void 0:n.current)==null||i.search()}).catch(a=>{x(p.QUATERNARY),u(J(a)),v(!d)})},ge=()=>{const t={entity:s==null?void 0:s.entity,name:s.name,reason:s.reason,maker:s.maker,createdAt:s.createdAt,checker:s.checker,id:s.id,operation:s.operation,requestId:s.requestId,uid:s.uid,updatedAt:s.updatedAt,status:s.status},a={...t,isActive:!0},i={name:s.displayName,operationType:te.UPDATE,entity:ae.STATIC_MASTER_TYPE,initialStateJson:K(t),finalStateJson:K(a),reasonForChange:s.reasons};return G.update(i,s==null?void 0:s.uid).then(c=>{var C;x(p.PRIMARY),u(V.SENT_FOR_APPROVAL),v(!d),I(!1),D(!1),(C=n==null?void 0:n.current)==null||C.search()}).catch(c=>{x(p.QUATERNARY),u(J(c)),v(!d)})},Ne=()=>{const t={entity:s==null?void 0:s.entity,name:s.name,reason:s.reason,maker:s.maker,createdAt:s.createdAt,checker:s.checker,id:s.id,operation:s.operation,requestId:s.requestId,uid:s.uid,updatedAt:s.updatedAt,status:s.status},a={...t,isActive:!1},i={name:s.displayName,operationType:te.UPDATE,entity:ae.STATIC_MASTER_TYPE,initialStateJson:K(t),finalStateJson:K(a),reasonForChange:s.reasons};return G.update(i,s==null?void 0:s.uid).then(c=>{var C;x(p.PRIMARY),u(V.SENT_FOR_APPROVAL),v(!d),I(!1),D(!1),(C=n==null?void 0:n.current)==null||C.search()}).catch(c=>{x(p.QUATERNARY),u(J(c)),v(!d)})},Te=async t=>{let a=[];t.query.trim().length?(await rt.getAll(0,10,`name:lk=${t.query}&`).then(i=>{i.status===200&&(a=[...i.data.results])}),a.length===0&&a.push({name:void 0,designation:void 0,emailId:void 0})):a=de,pe(a)},ke=()=>{var a,i;let t="";o.entity&&(t=`${t}entity:lk=${o.entity}&`),o.name&&(t=`${t}name:lk=${o.name}&`),o.maker&&(t=`${t}maker:lk=${o.maker}&`),o.createdFrom&&(console.log(o.createdFrom),t=`${t}createdAt:gt=${Q(o.createdFrom)}&`),o.createdTo&&(t=`${t}createdAt:lt=${Q(o.createdTo)}&`),o.checkedFrom&&(t=`${t}updatedAt:gt=${Q(o.checkedFrom)}&`),o.checkedTo&&(t=`${t}updatedAt:lt=${Q(o.checkedTo)}&`),o.operation&&(t=`${t}operation:lk=${o.operation}&`),(a=o.checker)!=null&&a.id&&(t=`${t}&checker=${(i=o.checker)==null?void 0:i.id}&`),o.status&&(t=`${t}status:lk=${o.status}&`),f({...l,search:t})},Ce=()=>{H({entity:"",name:"",maker:"",createdFrom:"",createdTo:"",checkedFrom:"",checkedTo:"",operation:"",checker:{name:"",id:""},status:""}),f({...l,search:""})},Ee=()=>{ne(!Z)},Re=()=>{const{entity:t,name:a,maker:i,createdFrom:c,createdTo:C,checkedFrom:Ke,checkedTo:Qe,operation:ze,checker:Ge,status:We}=o;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-3 flex flex-col gap-6 bg-primary-sapphireBlue-100 rounded-lg",children:[e.jsx("div",{className:"flex ",children:e.jsx(lt,{title:"text.masterData.types.search"})}),e.jsxs("div",{className:" grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsx(X,{label:"input.masterData.approvalRequestSearch.entity",name:"entity",variant:R.SECONDARY,onChange:m,value:t}),e.jsx(X,{label:"input.masterData.approvalRequestSearch.name",name:"name",variant:R.SECONDARY,onChange:m,value:a}),e.jsx(X,{label:"input.masterData.approvalRequestSearch.maker",name:"maker",variant:R.SECONDARY,onChange:m,value:i}),e.jsx(ie,{label:"input.masterData.approvalRequestSearch.operation",name:"operation",variant:se.SECONDARY,options:Ze,onChange:m,value:ze}),e.jsx(z,{label:"input.masterData.staticMaster.createdFrom",name:"createdFrom",showTime:!0,value:c,placeholder:"DD-MMM-YYYY",onChange:m}),e.jsx(z,{showTime:!0,label:"input.masterData.staticMaster.createdTo",name:"createdTo",variant:R.PRIMARY,value:C,placeholder:"DD-MMM-YYYY",onChange:m}),e.jsx(ot,{label:"input.masterData.staticMaster.checker",name:"checker",field:"name",value:Ge,variant:R.PRIMARY,suggestions:me,completeMethod:Te,onChange:he,itemTemplate:be}),e.jsx(z,{showTime:!0,label:"input.masterData.staticMaster.checkedFrom",name:"checkedFrom",variant:R.PRIMARY,value:Ke,placeholder:"DD-MMM-YYYY",onChange:m}),e.jsx(z,{showTime:!0,label:"input.masterData.staticMaster.checkedTo",name:"checkedTo",variant:R.PRIMARY,value:Qe,placeholder:"DD-MMM-YYYY",onChange:m}),e.jsx(ie,{label:"input.masterData.approvalRequestSearch.status",name:"status",placeholder:"Select",variant:se.SECONDARY,options:et,onChange:m,value:We}),e.jsxs("div",{className:"flex gap-5",children:[e.jsx(L,{buttonType:M.RESET_OUTLINE,onClick:Ce}),e.jsx(L,{buttonType:M.SEARCH_OUTLINE,onClick:ke})]})]})]})})},be=t=>t.name===void 0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-39",children:[e.jsx("img",{src:tt,alt:"search-icon",className:" h-7 w-7"}),e.jsx(E,{className:"text-primary-labelColor mt-2",label:"Loading..."})]}):e.jsxs("div",{className:"flex flex-col",children:[e.jsx(E,{className:"text-primary-labelColor",label:`${t.name} ${t.lastName}`}),e.jsx(E,{className:"text-secondary-gray-500 text-xxs",label:t.designation.name}),e.jsx(E,{className:"text-secondary-gray-500 text-xxs",label:t.email})]}),Ie=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:at(t.entity)})}),De=()=>e.jsxs("div",{className:"flex",children:[e.jsx(b,{label:"input.masterData.approvalRequestSearch.entity",className:"mr-1"}),e.jsx("img",{src:w==null?F:w==!0?P:$,alt:"Sort Icon",onClick:ue,className:"cursor-pointer"})]}),Oe=()=>e.jsxs("div",{className:"flex",children:[e.jsx(b,{label:"input.masterData.approvalRequestSearch.name",className:"mr-1"}),e.jsx("img",{src:q==null?F:q==!0?P:$,alt:"Sort Icon",onClick:xe,className:"cursor-pointer"})]}),Ye=()=>e.jsx("div",{className:"flex",children:e.jsx(b,{label:"input.masterData.approvalRequestSearch.maker",className:"mr-1"})}),Me=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Created On"}),e.jsx("img",{src:_==null?F:_==!0?P:$,alt:"Sort Icon",onClick:ve,className:"cursor-pointer"})]}),Fe=()=>e.jsxs("div",{className:"flex",children:[e.jsx(b,{label:"input.masterData.approvalRequestSearch.operation",className:"mr-1"}),e.jsx("img",{src:B==null?F:B==!0?P:$,alt:"Sort Icon",onClick:fe,className:"cursor-pointer"})]}),Pe=()=>e.jsxs("div",{className:"flex",children:[e.jsx(b,{label:"tableHeader.masterData.approvalRequestSearch.checkedOn",className:"mr-1"}),e.jsx("img",{src:Y==null?F:Y==!0?P:$,alt:"Sort Icon",onClick:Ae,className:"cursor-pointer"})]}),$e=()=>e.jsxs("div",{className:"flex",children:[e.jsx(b,{label:"tableHeader.masterData.approvalRequestSearch.status",className:"mr-1"}),e.jsx("img",{src:U==null?F:U==!0?P:$,alt:"Sort Icon",onClick:Se,className:"cursor-pointer"})]}),Le=()=>e.jsx("div",{className:"flex",children:e.jsx(b,{label:"input.masterData.staticMaster.checker",className:"mr-1"})}),_e=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:t.name})}),we=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:t.createdByUserName??""})}),qe=t=>e.jsx("div",{className:"w-40",children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:`${re(t.createdAt)}`})}),Be=t=>e.jsx("div",{className:"w-30",children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:t.operationType})}),Ue=t=>e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left w-30",children:`${re(t.checkedOn)}`}),He=t=>e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left w-30",children:t==null?void 0:t.status}),Ve=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:t.checkedByUserName??""})}),Je=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center ",children:e.jsx("div",{className:"w-4 h-4 flex items-center",children:e.jsx("img",{src:it,alt:"Sahayya Logo",className:"cursor-pointer",onClick:a=>{oe.navigate(`${st}?uid=${t.uid}`)}})})})});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex w-full justify-between items-center",children:[e.jsx(E,{label:"heading.masterData.approvalRequests",className:"text-primary-ptext-1000 text-h2 font-bold flex"}),e.jsx("div",{className:"flex gap-10",children:e.jsx(L,{buttonType:M.FILTER_OUTLINE,onClick:Ee})})]}),Z&&Re(),e.jsxs(ct,{standardDataFormatPromise:mt.getAll,dataKey:"id",search:`&${l.search}`,ref:n,children:[e.jsx(h,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:De,body:Ie}),e.jsx(h,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:Oe,body:_e}),e.jsx(h,{className:"text-primary-ptext-1000 text-left text-xs w-1/12  p-1 h-12 pl-6",header:Ye,body:we}),e.jsx(h,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:Me,body:qe}),e.jsx(h,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:Fe,body:Be}),e.jsx(h,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:Le,body:Ve}),e.jsx(h,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:Pe,body:Ue}),e.jsx(h,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:$e,body:He}),e.jsx(h,{className:"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6",header:"Actions",body:Je})]})]}),e.jsxs(nt,{onHide:k?()=>D(!1):()=>I(!1),visible:k?le:ce,modal:!0,closable:!1,dismissableMask:!0,children:[e.jsx(E,{label:k?"dialog.staticMaster.activate":"dialog.staticMaster.deactivate",className:"text-primary-ptext-1000 text-base font-Roboto font-bold flex items-center justify-center"}),e.jsx(E,{label:k?"dialog.staticMaster.message.activate":"dialog.staticMaster.message",className:"text-primary-ptext-1000 text-xs font-Roboto flex mt text-center justify-center mx-2 mt-4"}),e.jsxs("div",{className:"flex justify-center mt-4",children:[e.jsx("div",{className:"mr-3",children:e.jsx(L,{buttonType:M.CANCEL_OUTLINE,onClick:k?()=>D(!1):()=>I(!1)})}),e.jsx("div",{className:"mr-3",children:e.jsx(L,{buttonType:M.SAVE_OUTLINE,onClick:k?()=>ye():()=>je()})}),e.jsx("div",{className:"",children:e.jsx(L,{buttonType:M.SEND_FOR_APPROVAL,className:"approve-primary",onClick:k?()=>ge():()=>Ne()})})]})]}),e.jsx("div",{className:"",children:e.jsx(dt,{position:"bottom-right",ref:T,toastText:W,variant:ee})})]})}const wt=Xe(pt);export{wt as default};
//# sourceMappingURL=PageApprovalRequestListing-07e43987.js.map
