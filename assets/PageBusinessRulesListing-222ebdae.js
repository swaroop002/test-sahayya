import{w as at,r as i,aG as x,j as e,T as V,J as S,aH as G,ao as K,aI as le,aJ as me,aK as W,bc as ue,aF as pe,o as P,az as rt,aM as it,av as ot,p as xe,z as nt,aN as X}from"./index-e8217573.js";import{s as Y,a as O,b as D}from"./sortIcon-54357a29.js";import{e as ct}from"./eye_icon-081bddb3.js";import{A as ve}from"./AutoComplete-0bca608a.js";import{B as b}from"./ButtonBox-9e46519a.js";import{D as Z}from"./DatePicker-b1c13861.js";import{D as dt}from"./Dialog-adadaf64.js";import{I as lt}from"./InputBox-b9e88f52.js";import{M as mt}from"./MenuBox-defc36b0.js";import{R as ut}from"./ReadOnlyTable-86accb69.js";import{S as pt}from"./SectionTitle-9f9277ec.js";import{S as xt}from"./SimpleDropDown-061a3470.js";import{T as vt}from"./Toast-ae99ea5b.js";import{C as B}from"./column.esm-938bad7d.js";import{B as H}from"./BusinessRuleService-e622f5ea.js";import"./search_icon-459d6871.js";import"./withAuth-6de36ebf.js";import"./virtualscroller.esm-9939945c.js";import"./kebab-menu-8835ad2e.js";import"./No_data-1720c54e.js";import"./datatable.esm-f474a654.js";import"./paginator.esm-11c2c115.js";import"./TransitionGroup-c8afe0ce.js";function ht(se){const[ae,he]=i.useState(!1),[fe,E]=i.useState(!1),[Ae,R]=i.useState(!1),[a,re]=i.useState({}),[w,v]=i.useState(void 0);i.useState(void 0),i.useState(void 0);const[_,h]=i.useState(void 0),[$,f]=i.useState(void 0),[U,A]=i.useState(void 0),[L,y]=i.useState(void 0),[J,g]=i.useState(void 0),[k,j]=i.useState(void 0),I=i.useRef(null),[ee,N]=i.useState(""),[ie,T]=i.useState(x.PRIMARY),[u,C]=i.useState(!1),[M,oe]=i.useState(!1),[o,q]=i.useState({name:"",createdFrom:"",createdTo:"",updatedFrom:"",updatedTo:"",isActive:"",createdBy:{name:"",id:""},updatedBy:{name:"",id:""}});i.useState({title:"",id:"",userId:"",completed:"",concept:"",application:"",emailId:""});const[d,p]=i.useState({limit:10,loading:!1,totalRecords:0,start:0,search:"",runCustomQuery:!1,records:[]}),Q=i.useRef(null),[ye,ge]=i.useState([{items:[{label:"Activate",className:""},{label:"Deactivate",className:""}]}]),je=(t,s)=>{var z;console.log("rowData=",t);const r={label:"label.common.deactivate",command:()=>{Ce(t)}},n={label:"label.common.active",command:()=>{Te(t)}},l=[{items:[t.isActive?r:n]}];ge(l),(z=Q==null?void 0:Q.current)==null||z.toggle(s)},[te,Ne]=i.useState([]);i.useState();const c=i.useRef(null);i.useEffect(()=>{var t;(t=c==null?void 0:c.current)==null||t.search()},[d==null?void 0:d.search]),i.useEffect(()=>{var t;I!=null&&I.current&&ee!==""&&((t=I==null?void 0:I.current)==null||t.showFunction())},[ee,ie,u]);const ne=t=>{const{name:s,value:r}=t.target;q(typeof r=="object"?n=>({...n,[s]:{name:`${r==null?void 0:r.name} ${r!=null&&r.lastName?r==null?void 0:r.lastName:""}`.trim(),id:r.userId}}):n=>({...n,[s]:r}))},F=t=>{const{name:s,value:r}=t.target;q(n=>({...n,[s]:r}))},Te=t=>{re({...t}),R(!0),oe(!0)},Ce=t=>{re({...t}),E(!0),oe(!1)},Se=t=>{let s="";w||w==null?(s='sort={"name":"DESC"}&',v(!1)):(s='sort={"name":"ASC"}&',v(!w)),j(void 0),h(void 0),f(void 0),g(void 0),A(void 0),y(void 0),p({...d,search:s})},be=t=>{let s="";_||_==null?(s='sort={"createdAt":"DESC"}&',h(!1)):(s='sort={"createdAt":"ASC"}&',h(!_)),v(void 0),j(void 0),f(void 0),g(void 0),A(void 0),y(void 0),p({...d,search:s})},Be=t=>{let s="";$||$==null?(s='sort={"createdBy":"DESC"}&',f(!1)):(s='sort={"createdBy":"ASC"}&',f(!$)),v(void 0),j(void 0),h(void 0),g(void 0),A(void 0),y(void 0),p({...d,search:s})},Ee=t=>{let s="";U||U==null?(s='sort={"updatedAt":"DESC"}&',A(!1)):(s='sort={"updatedAt":"ASC"}&',A(!U)),v(void 0),j(void 0),h(void 0),f(void 0),g(void 0),y(void 0),p({...d,search:s})},Re=t=>{let s="";J||J==null?(s='sort={"isActive":"DESC"}&',g(!1)):(s='sort={"isActive":"ASC"}&',g(!0)),v(void 0),j(void 0),h(void 0),f(void 0),A(void 0),y(void 0),p({...d,search:s})},Ie=t=>{let s="";k||k==null?(s='sort={"description":"DESC"}&',j(!1)):(s='sort={"description":"ASC"}&',j(!k)),p({...d,search:s}),v(void 0),h(void 0),f(void 0),g(void 0),A(void 0),y(void 0)},Me=t=>{let s="";L||L==null?(s='sort={"updatedBy":"DESC"}&',y(!1)):(s='sort={"updatedBy":"ASC"}&',y(!L)),v(void 0),j(void 0),h(void 0),f(void 0),g(void 0),A(void 0),p({...d,search:s})},Ye=()=>({...a},H.Inactivate(a==null?void 0:a.uid).then(t=>{var s;T(x.PRIMARY),N(G.DEACTIVATED),C(!u),E(!1),R(!1),(s=c==null?void 0:c.current)==null||s.search()}).catch(t=>{T(x.QUATERNARY),N(K(t)),C(!u)})),Oe=()=>({...a},H.activate(a==null?void 0:a.uid).then(t=>{var s;T(x.PRIMARY),N(G.ACTIVATED),C(!u),E(!1),R(!1),(s=c==null?void 0:c.current)==null||s.search()}).catch(t=>{T(x.QUATERNARY),N(K(t)),C(!u)})),De=()=>{var n;const t={staticMasterType:(n=a==null?void 0:a.staticMasterType)==null?void 0:n.name,name:a==null?void 0:a.name,reason:a.reason,createdAt:a.createdAt,createdBy:a.createdBy,id:a.id,isActive:!1,requestId:a.requestId,uid:a.uid,updatedAt:a.updatedAt,updatedBy:a.updatedBy},s={...t,isActive:!0},r={name:a.displayName,operationType:le.UPDATE,entity:me.STATIC_MASTER_DATA,initialStateJson:W(t),finalStateJson:W(s),reasonForChange:a.reasons};return H.update(a==null?void 0:a.uid,r).then(m=>{var l;T(x.PRIMARY),N(G.SENT_FOR_APPROVAL),C(!u),E(!1),R(!1),(l=c==null?void 0:c.current)==null||l.search()}).catch(m=>{T(x.QUATERNARY),N(K(m)),C(!u)})},Fe=()=>{var n;const t={staticMasterType:(n=a==null?void 0:a.staticMasterType)==null?void 0:n.name,name:a==null?void 0:a.name,reason:a.reason,createdAt:a.createdAt,createdBy:a.createdBy,id:a.id,isActive:!0,requestId:a.requestId,uid:a.uid,updatedAt:a.updatedAt,updatedBy:a.updatedBy},s={...t,isActive:!1},r={name:a.displayName,operationType:le.UPDATE,entity:me.STATIC_MASTER_DATA,initialStateJson:W(t),finalStateJson:W(s),reasonForChange:a.reasons};return H.update(a==null?void 0:a.uid,r).then(m=>{var l;T(x.PRIMARY),N(G.SENT_FOR_APPROVAL),C(!u),E(!1),R(!1),(l=c==null?void 0:c.current)==null||l.search()}).catch(m=>{T(x.QUATERNARY),N(K(m)),C(!u)})},ce=async t=>{let s=[];t.query.trim().length?(await nt.getAll(0,10,`name=${t.query}&`).then(r=>{r.status===200&&(s=[...r.data])}),s.length===0&&s.push({name:void 0,designation:void 0,emailId:void 0})):s=te,Ne(s)},Pe=()=>{var s,r,n,m;let t="";if(o.name&&(t=`&${t}&name:lk=${o.name}`),o.createdFrom&&(console.log(o.createdFrom),t=`&${t}&createdAt:gt=${X(o.createdFrom)}`),o.createdTo&&(t=`&${t}&createdAt:lt=${X(o.createdTo)}`),o.updatedFrom&&(t=`&${t}&updatedAt:gt=${X(o.updatedFrom)}`),o.updatedTo&&(t=`&${t}&updatedAt:lt=${X(o.updatedTo)}`),o.isActive){let l=!0;o.isActive==="YES"?l=!0:o.isActive==="NO"&&(l=!1),t=`&${t}&isActive:lk=${l}`}(s=o.createdBy)!=null&&s.id&&(t=`&${t}&createdBy=${(r=o.createdBy)==null?void 0:r.id}`),(n=o.updatedBy)!=null&&n.id&&(t=`&${t}&updatedBy=${(m=o.updatedBy)==null?void 0:m.id}`),p({...d,search:t})},we=()=>{q({name:"",createdFrom:"",createdTo:"",updatedFrom:"",updatedTo:"",isActive:"",createdBy:{name:"",id:""},updatedBy:{name:"",id:""}}),p({...d,search:""})},_e=()=>{he(!ae)},$e=()=>{se.navigate(`${ue}?mode=${pe.CREATE}`)},Ue=()=>{const{name:t,createdFrom:s,createdTo:r,updatedFrom:n,updatedTo:m,isActive:l,createdBy:z,updatedBy:st}=o;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-3 flex flex-col gap-6 bg-primary-sapphireBlue-100 rounded-lg",children:[e.jsx("div",{className:"flex ",children:e.jsx(pt,{title:"text.masterData.types.search"})}),e.jsxs("div",{className:" grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsx(lt,{label:"input.productConfiguration.businessRule.name",name:"name",variant:P.SECONDARY,onChange:F,value:t}),e.jsx(xt,{label:"input.productConfiguration.businessRule.isActive",name:"isActive",variant:rt.SECONDARY,options:it,onChange:F,value:l}),e.jsx(Z,{label:"input.productConfiguration.businessRule.createdFrom",name:"createdFrom",showTime:!0,value:s,placeholder:"DD-MMM-YYYY",onChange:F}),e.jsx(Z,{showTime:!0,label:"input.productConfiguration.businessRule.createdTo",name:"createdTo",variant:P.PRIMARY,value:r,placeholder:"DD-MMM-YYYY",onChange:F}),e.jsx(ve,{label:"input.productConfiguration.businessRule.createdBy",name:"createdBy",field:"name",value:z,variant:P.PRIMARY,suggestions:te,completeMethod:ce,onChange:ne,itemTemplate:de}),e.jsx(Z,{showTime:!0,label:"input.productConfiguration.businessRule.updatedFrom",name:"updatedFrom",variant:P.PRIMARY,value:n,placeholder:"DD-MMM-YYYY",onChange:F}),e.jsx(Z,{showTime:!0,label:"input.productConfiguration.businessRule.updatedTo",name:"updatedTo",variant:P.PRIMARY,value:m,placeholder:"DD-MMM-YYYY",onChange:F}),e.jsx(ve,{field:"name",label:"input.productConfiguration.businessRule.updatedBy",name:"updatedBy",variant:P.PRIMARY,value:st,suggestions:te,completeMethod:ce,onChange:ne,itemTemplate:de}),e.jsxs("div",{className:"flex gap-5",children:[e.jsx(b,{buttonType:S.RESET_OUTLINE,onClick:we}),e.jsx(b,{buttonType:S.SEARCH_OUTLINE,onClick:Pe})]})]})]})})},de=t=>t.name===void 0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-39",children:[e.jsx("img",{src:ot,alt:"search-icon",className:" h-7 w-7"}),e.jsx(V,{className:"text-primary-labelColor mt-2",label:"Loading..."})]}):e.jsx("div",{className:"flex flex-col",children:e.jsx(V,{className:"text-primary-labelColor",label:`${t.name}`})}),Le=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:t.name})}),ke=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:t.reason??"null"})}),Ve=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Rule Name"}),e.jsx("img",{src:w==null?Y:w==!0?O:D,alt:"Sort Icon",onClick:Se,className:"cursor-pointer"})]}),He=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Created On"}),e.jsx("img",{src:_==null?Y:_==!0?O:D,alt:"Sort Icon",onClick:be,className:"cursor-pointer"})]}),Je=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Created By"}),e.jsx("img",{src:$==null?Y:$==!0?O:D,alt:"Sort Icon",onClick:Be,className:"cursor-pointer"})]}),qe=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Updated On"}),e.jsx("img",{src:U==null?Y:U==!0?O:D,alt:"Sort Icon",onClick:Ee,className:"cursor-pointer"})]}),Qe=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Updated By"}),e.jsx("img",{src:L==null?Y:L==!0?O:D,alt:"Sort Icon",onClick:Me,className:"cursor-pointer"})]}),ze=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Is Active"}),e.jsx("img",{src:J==null?Y:J==!0?O:D,alt:"Sort Icon",onClick:Re,className:"cursor-pointer"})]}),Ge=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Description"}),e.jsx("img",{src:k==null?Y:k==!0?O:D,alt:"Sort Icon",onClick:Ie,className:"cursor-pointer"})]}),Ke=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:`${xe(t.createdAt)}`})}),We=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:t.createdByUserName})}),Xe=t=>e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:`${xe(t.updatedAt)}`}),Ze=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:t.updatedByUserName})}),et=t=>e.jsx(e.Fragment,{children:t.isActive?e.jsxs("div",{className:"flex items-center ",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-primaryBlue border-none"}),e.jsx("div",{className:"ml-2 ",children:"YES"})]}):e.jsxs("div",{className:"flex items-center ",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-secondary-gray-300 border-none"}),e.jsx("div",{className:"ml-2 ",children:"NO"})]})}),tt=t=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center ",children:[e.jsx("div",{className:"w-4 h-4 flex items-center",children:e.jsx("img",{src:ct,alt:"Sahayya Logo",className:"cursor-pointer",onClick:s=>{se.navigate(`${ue}?mode=${pe.VIEW}&uid=${t.uid}`)}})}),e.jsx("div",{className:"ml ",children:e.jsx(b,{buttonType:S.MENU,onClick:s=>{je(t,s)},className:"!rounded-none bg-transparent !hover:bg-primary-gray-300"})})]})});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex w-full justify-between items-center",children:[e.jsx(V,{label:"heading.productConfiguration.businessRule",className:"text-primary-ptext-1000 text-h2 font-bold flex"}),e.jsxs("div",{className:"flex gap-10",children:[e.jsx(b,{buttonType:S.FILTER_OUTLINE,onClick:_e}),e.jsx(b,{buttonType:S.CREATE,className:"create-button",onClick:$e})]})]}),ae&&Ue(),e.jsxs(ut,{standardDataFormatPromise:H.getAll,dataKey:"id",search:`&${d.search}`,ref:c,children:[e.jsx(B,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6 w-1/4",header:Ve,body:Le}),e.jsx(B,{className:"text-primary-ptext-1000 text-left text-xs w-1/12  p-1 h-12 pl-6",header:Ge,body:ke}),e.jsx(B,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:He,body:Ke}),e.jsx(B,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:Je,body:We}),e.jsx(B,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:qe,body:Xe}),e.jsx(B,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:Qe,body:Ze}),e.jsx(B,{className:"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6",header:ze,body:et}),e.jsx(B,{className:"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6",header:"Actions",body:tt})]})]}),e.jsxs(dt,{onHide:M?()=>R(!1):()=>E(!1),visible:M?Ae:fe,modal:!0,closable:!1,dismissableMask:!0,children:[e.jsx(V,{label:M?"dialog.staticMaster.activate":"dialog.staticMaster.deactivate",className:"text-primary-ptext-1000 text-base font-Roboto font-bold flex items-center justify-center"}),e.jsx(V,{label:M?"dialog.staticMaster.message.activate":"dialog.staticMaster.message",className:"text-primary-ptext-1000 text-xs font-Roboto flex mt text-center justify-center mx-2 mt-4"}),e.jsxs("div",{className:"flex justify-center mt-4",children:[e.jsx("div",{className:"mr-3",children:e.jsx(b,{buttonType:S.CANCEL_OUTLINE,onClick:M?()=>R(!1):()=>E(!1)})}),e.jsx("div",{className:"mr-3",children:e.jsx(b,{buttonType:S.SAVE_OUTLINE,onClick:M?()=>Oe():()=>Ye()})}),e.jsx("div",{className:"",children:e.jsx(b,{buttonType:S.SEND_FOR_APPROVAL,className:"approve-primary",onClick:M?()=>De():()=>Fe()})})]})]}),e.jsx(mt,{className:"w-20 bg-white font-Roboto text-xs text-primary-pText-1300 pt-2 rounded-lg mt-0.5 flex justify-center align-center shadow-autoCompletePanel",model:ye,ref:Q}),e.jsx("div",{className:"",children:e.jsx(vt,{position:"bottom-right",ref:I,toastText:ee,variant:ie})})]})}const Ut=at(ht);export{Ut as default};
//# sourceMappingURL=PageBusinessRulesListing-222ebdae.js.map
