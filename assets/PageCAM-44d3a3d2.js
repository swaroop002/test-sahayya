import{q as _,x as v,r as s,aG as I,dl as x,j as e,T as M,N as y,l as O,i as R,a3 as w,K,M as P,ed as U,Q as k,V as $,ee as Y,ef as B,eg as J,eh as Q,ei as G,ej as H,f as q}from"./index-e8217573.js";import{u as V}from"./LoanDetailActions-c6533c8e.js";import{E as W}from"./ErrorDialog-d5eef4d7.js";import{L as X}from"./LoanService-d10912e0.js";import{ScrollableTabs as z,getTabClassName as Z}from"./Login-6e9a8ada.js";import{T as F}from"./TextButton-41b4a67e.js";import{S as ee}from"./SimpleOverlayPanel-f23b2f6a.js";import"./ButtonBox-9e46519a.js";import"./kebab-menu-8835ad2e.js";import"./Dialog-adadaf64.js";import"./Toast-ae99ea5b.js";import"./TransitionGroup-c8afe0ce.js";import"./MainMessageBody-e15b4437.js";import"./Skeleton-7e12d019.js";import"./InputBox-b9e88f52.js";import"./withAuth-6de36ebf.js";import"./StageService-c1c03c89.js";import"./ACLService-e19daf7c.js";import"./loader-5f2cfb31.js";const te=[{id:1,name:"Document Check",path:Y},{id:2,name:"Loan Details",path:B},{id:3,name:"Income & Expense Details",path:J},{id:4,name:"Recommendation",path:Q},{id:5,name:"Credit Document",path:G},{id:6,name:"Query",path:H}],se={stageComplete:!1,submit:!1},Ce=()=>{const c=_(),N=v(),m=s.useRef(null),[h,j]=s.useState(!1),[E,T]=s.useState("");s.useState("bottom-right");const[ae,d]=s.useState({...se}),[o,S]=s.useState({assignedTo:"",delegateTo:"",initiation:""}),[p,oe]=s.useState(""),[b,le]=s.useState(I.PRIMARY),[A,ie]=s.useState(!1),r=s.useRef(null);s.useEffect(()=>{D()},[]),s.useEffect(()=>{var a;r!=null&&r.current&&p!==""&&((a=r==null?void 0:r.current)==null||a.showFunction())},[p,b,A]);const D=()=>{const i=`&uid=${c.loanUid}`;X.getAll(0,1,i).then(n=>{console.log("res===",n.data.results[0]);const t=n.data.results[0];N(V(t)),(t==null?void 0:t.legalStatus)===x.COMPLETED||(t==null?void 0:t.legalStatus)===x.CANCELLED?d(l=>({...l,stageComplete:!0,submit:!0})):(t==null?void 0:t.legalStatus)===x.IN_REVIEW?d(l=>({...l,stageComplete:!1,submit:!0})):d(l=>({...l,stageComplete:!1,submit:!1}))}).catch(n=>{console.log(n)})},C=a=>{var n,t,l,u,f,g;const i=localStorage.getItem("stageDetail");S({assignedTo:((t=(n=JSON.parse(i))==null?void 0:n.assignee)==null?void 0:t.name)??"NA",delegateTo:((u=(l=JSON.parse(i))==null?void 0:l.delegate)==null?void 0:u.name)??"NA",initiation:((f=JSON.parse(i))==null?void 0:f.createdAtSystemDate)??"NA"}),m.current&&((g=m.current)==null||g.toggle(a))},L=()=>e.jsxs("div",{className:"flex flex-col gap-4 p-5 ",children:[e.jsxs("div",{className:"flex flex-row justify-between items-center",children:[e.jsx("div",{className:"text-sm text-secondary-stext-900",children:"Assigned to :"}),e.jsx("div",{className:"text-sm text-secondary-stext-900  font-bold ml-2",children:o==null?void 0:o.assignedTo})]}),e.jsxs("div",{className:"flex flex-row justify-between items-center",children:[e.jsx("div",{className:"text-sm text-secondary-stext-900",children:"Delegated to :"}),e.jsx("div",{className:"text-sm text-secondary-stext-900  font-bold ml-2",children:o==null?void 0:o.delegateTo})]}),e.jsxs("div",{className:"flex flex-row justify-between items-center",children:[e.jsx("div",{className:"text-sm text-secondary-stext-900",children:"Date of Initiation :"}),e.jsx("div",{className:"text-sm text-secondary-stext-900  font-bold ml-2",children:q(o==null?void 0:o.initiation)})]})]});return e.jsx("div",{children:e.jsxs("div",{className:"flex flex-col gap-5 ",children:[e.jsxs("div",{className:"flex items-center justify-between gap-5 w-full",children:[e.jsxs("div",{className:"flex items-center gap-5 ",children:[e.jsxs("div",{className:"border-r flex gap-3 items-center border-secondary-stext-600 px-5 py-2  flex-shrink-0 ",children:[e.jsx(M,{className:"text-primary-ptext-1000 font-bold",label:"label.cam.cam&Recommendation"}),e.jsx(F,{className:"underline text-xs  !text-black  ",label:"View Details",onClick:C})]}),e.jsx(z,{children:te.map(a=>e.jsx(y,{className:Z,to:`${O}${R}${w}/${c.loanUid}/${c.stageUid}${a.path}`,children:a.name},a.path))})]}),e.jsx("div",{className:"w-1/12 flex gap-4 justify-end"})]}),e.jsxs("div",{className:"legal-layout-body-content",children:[e.jsx(s.Suspense,{fallback:e.jsx(K,{}),children:e.jsx(P,{children:U.map((a,i)=>e.jsx(k,{path:a.path,element:e.jsx(a.component,{})},i))})}),e.jsx($,{})]}),e.jsx(W,{onHide:()=>{j(!1),T("")},visible:h,errorMessage:E}),e.jsx(ee,{className:"rounded-lg shadow-lg !w-80 p-1.5 ",ref:m,content:L()})]})})};export{Ce as default};
//# sourceMappingURL=PageCAM-44d3a3d2.js.map
