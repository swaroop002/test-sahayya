var pt=Object.defineProperty;var xt=(h,p,n)=>p in h?pt(h,p,{enumerable:!0,configurable:!0,writable:!0,value:n}):h[p]=n;var y=(h,p,n)=>(xt(h,typeof p!="symbol"?p+"":p,n),n);import{at as vt,w as ht,r,aG as j,j as e,T as B,J as R,aH as se,ao as ae,aI as he,aJ as fe,aK as ie,b6 as Ae,aF as ge,o as M,az as ft,aM as At,av as ye,p as je,z as gt,aN as re}from"./index-e8217573.js";import{s as L,a as q,b as H}from"./sortIcon-54357a29.js";import{e as yt}from"./eye_icon-081bddb3.js";import{A as le}from"./AutoComplete-0bca608a.js";import{B as k}from"./ButtonBox-9e46519a.js";import{D as oe}from"./DatePicker-b1c13861.js";import{D as jt}from"./Dialog-adadaf64.js";import{I as Ne}from"./InputBox-b9e88f52.js";import{M as Nt}from"./MenuBox-defc36b0.js";import{R as Ct}from"./ReadOnlyTable-86accb69.js";import{S as Tt}from"./SectionTitle-9f9277ec.js";import{S as St}from"./SimpleDropDown-061a3470.js";import{T as bt}from"./Toast-ae99ea5b.js";import{C as $}from"./column.esm-938bad7d.js";import{I as Et}from"./IncomeSchemeService-d239ebaf.js";import"./search_icon-459d6871.js";import"./withAuth-6de36ebf.js";import"./virtualscroller.esm-9939945c.js";import"./kebab-menu-8835ad2e.js";import"./No_data-1720c54e.js";import"./datatable.esm-f474a654.js";import"./paginator.esm-11c2c115.js";import"./TransitionGroup-c8afe0ce.js";const V="/custom/api/checklist";class It extends vt{constructor(){super(...arguments);y(this,"getAll",(n=0,d=10,x="")=>{let ne=`${V}/search?${x}&start=${n}&limit=${d}`;return this.makeGetRequestWithAuth(ne)});y(this,"getProductInfo",n=>{let d=`${V}/manage/uid/${n}`;return this.makeGetRequestWithAuth(d)});y(this,"save",n=>{let d=`${V}/manage`;return this.makePostRequestWithAuth(d,n)});y(this,"update",(n,d)=>{let x=`${V}/manage/${n}`;return this.makePutRequestWithAuth(x,d)});y(this,"findById",n=>{let d=`${V}/uid/${n}`;return this.makeGetRequestWithAuth(d)});y(this,"activate",n=>{let d=`${V}/activate/${n}`;return this.makePutRequestWithAuth(d)});y(this,"Inactivate",n=>{let d=`${V}/inactivate/${n}`;return this.makePutRequestWithAuth(d)});y(this,"modelToAPIParam",()=>{})}}const X=new It;function Bt(h){const[p,n]=r.useState(!1),[d,x]=r.useState(!1),[ne,Y]=r.useState(!1),[a,de]=r.useState({}),[J,P]=r.useState(void 0),[D,N]=r.useState(void 0),[O,f]=r.useState(void 0),[z,F]=r.useState(void 0),[W,C]=r.useState(void 0),[G,T]=r.useState(void 0),[K,S]=r.useState(void 0),_=r.useRef(null),[ce,b]=r.useState(""),[me,E]=r.useState(j.PRIMARY),[A,I]=r.useState(!1),[w,ue]=r.useState(!1),[c,Q]=r.useState({deviation:"",name:"",createdFrom:"",createdTo:"",updatedFrom:"",updatedTo:"",isActive:"",createdBy:{name:"",id:""},updatedBy:{name:"",id:""}}),[m,g]=r.useState({limit:10,loading:!1,totalRecords:0,start:0,search:"",runCustomQuery:!1,records:[]}),Z=r.useRef(null),[Ce,Te]=r.useState([{items:[{label:"Activate",className:""},{label:"Deactivate",className:""}]}]),Se=(t,s)=>{var te;console.log("rowData=",t);const i={label:"label.common.deactivate",command:()=>{$e(t)}},o={label:"label.common.active",command:()=>{ke(t)}},u=[{items:[t.isActive?i:o]}];Te(u),(te=Z==null?void 0:Z.current)==null||te.toggle(s)},[ee,be]=r.useState([]),[Ee,Ie]=r.useState(),l=r.useRef(null);r.useEffect(()=>{var t;(t=l==null?void 0:l.current)==null||t.search()},[m==null?void 0:m.search]),r.useEffect(()=>{var t;_!=null&&_.current&&ce!==""&&((t=_==null?void 0:_.current)==null||t.showFunction())},[ce,me,A]);const pe=t=>{const{name:s,value:i}=t.target;Q(typeof i=="object"?o=>({...o,[s]:{name:`${i==null?void 0:i.name} ${i!=null&&i.lastName?i==null?void 0:i.lastName:""}`.trim(),id:i.userId}}):o=>({...o,[s]:i}))},Be=t=>{const{name:s,value:i}=t.target;Q(typeof i=="object"?o=>({...o,[s]:i.name}):o=>({...o,[s]:i}))},U=t=>{const{name:s,value:i}=t.target;Q(o=>({...o,[s]:i}))},Re=t=>{let s="";D||D==null?s='sort={"deviationCategory":{"name" : "ASC"}}&':s='sort={"deviationCategory":{"name" : "DESC"}}&',D==null,N(!D),f(void 0),F(void 0),S(void 0),C(void 0),T(void 0),g({...m,search:s})},Me=t=>{let s="";J||J==null?s='sort={"name":"ASC"}&':s='sort={"name":"DESC"}&',J==null?P(!1):P(!J),N(void 0),f(void 0),F(void 0),S(void 0),C(void 0),T(void 0),g({...m,search:s})},ke=t=>{de({...t}),Y(!0),ue(!0)},$e=t=>{de({...t}),x(!0),ue(!1)},Ye=t=>{let s="";O||O==null?s='sort={"createdAt":"ASC"}&':s='sort={"createdAt":"DESC"}&',O==null?f(!1):f(!O),P(void 0),N(void 0),F(void 0),S(void 0),C(void 0),T(void 0),g({...m,search:s})},Pe=t=>{let s="";z||z==null?s='sort={"createdBy":"ASC"}&':s='sort={"createdBy":"DESC"}&',z==null?F(!1):f(!O),P(void 0),N(void 0),f(void 0),S(void 0),C(void 0),T(void 0),g({...m,search:s})},De=t=>{let s="";W||W==null?s='sort={"updatedAt":"ASC"}&':s='sort={"updatedAt":"DESC"}&',W==null?C(!1):C(!W),P(void 0),N(void 0),f(void 0),S(void 0),F(void 0),T(void 0),g({...m,search:s})},Oe=t=>{let s="";K||K==null?s='sort={"isActive":"ASC"}&':s='sort={"isActive":"DESC"}&',K==null?S(!1):S(!0),P(void 0),N(void 0),f(void 0),C(void 0),F(void 0),T(void 0),g({...m,search:s})},Fe=t=>{let s="";G||G==null?s='sort={"updatedBy":"ASC"}&':s='sort={"updatedBy":"DESC"}&',G==null?T(!1):T(!G),P(void 0),N(void 0),f(void 0),C(void 0),F(void 0),S(void 0),g({...m,search:s})},_e=()=>({...a},X.Inactivate(a==null?void 0:a.uid).then(t=>{var s;E(j.PRIMARY),b(se.DEACTIVATED),I(!A),x(!1),Y(!1),(s=l==null?void 0:l.current)==null||s.search()}).catch(t=>{E(j.QUATERNARY),b(ae(t)),I(!A)})),we=()=>({...a},X.activate(a==null?void 0:a.uid).then(t=>{var s;E(j.PRIMARY),b(se.ACTIVATED),I(!A),x(!1),Y(!1),(s=l==null?void 0:l.current)==null||s.search()}).catch(t=>{E(j.QUATERNARY),b(ae(t)),I(!A)})),Ue=()=>{var o;const t={staticMasterType:(o=a==null?void 0:a.staticMasterType)==null?void 0:o.name,name:a==null?void 0:a.name,reason:a.reason,createdAt:a.createdAt,createdBy:a.createdBy,id:a.id,isActive:!1,requestId:a.requestId,uid:a.uid,updatedAt:a.updatedAt,updatedBy:a.updatedBy},s={...t,isActive:!0},i={name:a.displayName,operationType:he.UPDATE,entity:fe.STATIC_MASTER_DATA,initialStateJson:ie(t),finalStateJson:ie(s),reasonForChange:a.reasons};return X.update(a==null?void 0:a.uid,i).then(v=>{var u;E(j.PRIMARY),b(se.SENT_FOR_APPROVAL),I(!A),x(!1),Y(!1),(u=l==null?void 0:l.current)==null||u.search()}).catch(v=>{E(j.QUATERNARY),b(ae(v)),I(!A)})},Le=()=>{var o;const t={staticMasterType:(o=a==null?void 0:a.staticMasterType)==null?void 0:o.name,name:a==null?void 0:a.name,reason:a.reason,createdAt:a.createdAt,createdBy:a.createdBy,id:a.id,isActive:!0,requestId:a.requestId,uid:a.uid,updatedAt:a.updatedAt,updatedBy:a.updatedBy},s={...t,isActive:!1},i={name:a.displayName,operationType:he.UPDATE,entity:fe.STATIC_MASTER_DATA,initialStateJson:ie(t),finalStateJson:ie(s),reasonForChange:a.reasons};return X.update(a==null?void 0:a.uid,i).then(v=>{var u;E(j.PRIMARY),b(se.SENT_FOR_APPROVAL),I(!A),x(!1),Y(!1),(u=l==null?void 0:l.current)==null||u.search()}).catch(v=>{E(j.QUATERNARY),b(ae(v)),I(!A)})},qe=async t=>{let s=[];t.query.trim().length?(await Et.getAll(0,10,`name:lk=${t.query}&`).then(i=>{i.status===200&&(s=[...i.data.results])}),s.length===0&&s.push({name:void 0,designation:void 0,emailId:void 0})):s=ee,Ie(s)},xe=async t=>{let s=[];t.query.trim().length?(await gt.getAll(0,10,`name=${t.query}&`).then(i=>{i.status===200&&(s=[...i.data])}),s.length===0&&s.push({name:void 0,designation:void 0,emailId:void 0})):s=ee,be(s)},He=()=>{var s,i,o,v;let t="";if(c.deviation&&(t=`${t}deviationCategory.name:lk=${c.deviation}&`),c.name&&(t=`${t}name:lk=${c.name}&`),c.createdFrom&&(console.log(c.createdFrom),t=`${t}createdAt:gt=${re(c.createdFrom)}&`),c.createdTo&&(t=`${t}createdAt:lt=${re(c.createdTo)}&`),c.updatedFrom&&(t=`${t}updatedAt:gt=${re(c.updatedFrom)}&`),c.updatedTo&&(t=`${t}updatedAt:lt=${re(c.updatedTo)}&`),c.isActive){let u=!0;c.isActive==="YES"?u=!0:c.isActive==="NO"&&(u=!1),t=`${t}isActive:lk=${u}&`}(s=c.createdBy)!=null&&s.id&&(t=`${t}&createdBy=${(i=c.createdBy)==null?void 0:i.id}&`),(o=c.updatedBy)!=null&&o.id&&(t=`${t}&updatedBy=${(v=c.updatedBy)==null?void 0:v.id}&`),g({...m,search:t})},Ve=()=>{Q({deviation:"",name:"",createdFrom:"",createdTo:"",updatedFrom:"",updatedTo:"",isActive:"",createdBy:{name:"",id:""},updatedBy:{name:"",id:""}}),g({...m,search:""})},Je=()=>{n(!p)},We=()=>{h.navigate(`${Ae}?mode=${ge.CREATE}`)},Ge=()=>{const{deviation:t,name:s,createdFrom:i,createdTo:o,updatedFrom:v,updatedTo:u,isActive:te,createdBy:mt,updatedBy:ut}=c;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-3 flex flex-col gap-6 bg-primary-sapphireBlue-100 rounded-lg",children:[e.jsx("div",{className:"flex ",children:e.jsx(Tt,{title:"text.masterData.types.search"})}),e.jsxs("div",{className:" grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsx(le,{label:"input.productConfiguration.checklist.product",name:"deviation",field:"name",value:t,variant:M.PRIMARY,suggestions:Ee,completeMethod:qe,onChange:Be,itemTemplate:Qe}),e.jsx(Ne,{label:"input.productConfiguration.checklist.name",name:"name",variant:M.SECONDARY,onChange:U,value:s}),e.jsx(Ne,{label:"input.productConfiguration.checklist.systemCode",name:"name",variant:M.SECONDARY,onChange:U,value:s}),e.jsx(St,{label:"input.productConfiguration.checklist.isActive",name:"isActive",variant:ft.SECONDARY,options:At,onChange:U,value:te}),e.jsx(oe,{label:"input.productConfiguration.checklist.createdFrom",name:"createdFrom",showTime:!0,value:i,placeholder:"DD-MMM-YYYY",onChange:U}),e.jsx(oe,{showTime:!0,label:"input.productConfiguration.checklist.createdTo",name:"createdTo",variant:M.PRIMARY,value:o,placeholder:"DD-MMM-YYYY",onChange:U}),e.jsx(le,{label:"input.productConfiguration.checklist.createdBy",name:"createdBy",field:"name",value:mt,variant:M.PRIMARY,suggestions:ee,completeMethod:xe,onChange:pe,itemTemplate:ve}),e.jsx(oe,{showTime:!0,label:"input.productConfiguration.checklist.updatedFrom",name:"updatedFrom",variant:M.PRIMARY,value:v,placeholder:"DD-MMM-YYYY",onChange:U}),e.jsx(oe,{showTime:!0,label:"input.productConfiguration.checklist.updatedTo",name:"updatedTo",variant:M.PRIMARY,value:u,placeholder:"DD-MMM-YYYY",onChange:U}),e.jsx(le,{field:"name",label:"input.productConfiguration.checklist.updatedBy",name:"updatedBy",variant:M.PRIMARY,value:ut,suggestions:ee,completeMethod:xe,onChange:pe,itemTemplate:ve}),e.jsxs("div",{className:"flex gap-5",children:[e.jsx(k,{buttonType:R.RESET_OUTLINE,onClick:Ve}),e.jsx(k,{buttonType:R.SEARCH_OUTLINE,onClick:He})]})]})]})})},Qe=t=>t.name===void 0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-39",children:[e.jsx("img",{src:ye,alt:"search-icon",className:" h-7 w-7"}),e.jsx(B,{className:"text-primary-labelColor mt-2",label:"Loading..."})]}):e.jsxs("div",{className:"flex flex-col",children:[e.jsx(B,{className:"text-primary-labelColor",label:`${t.name}`}),e.jsx(B,{className:"text-secondary-gray-500 text-xxs",label:t.name})]}),ve=t=>t.name===void 0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-39",children:[e.jsx("img",{src:ye,alt:"search-icon",className:" h-7 w-7"}),e.jsx(B,{className:"text-primary-labelColor mt-2",label:"Loading..."})]}):e.jsx("div",{className:"flex flex-col",children:e.jsx(B,{className:"text-primary-labelColor",label:`${t.name}`})}),ze=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Deviation"}),e.jsx("img",{src:D==null?L:D==!0?q:H,alt:"Sort Icon",onClick:Re,className:"cursor-pointer"})]}),Ke=t=>{var s;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:(s=t==null?void 0:t.deviationCategory)==null?void 0:s.name})})},Xe=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:t.name})}),Ze=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Display Name"}),e.jsx("img",{src:J==null?L:J==!0?q:H,alt:"Sort Icon",onClick:Me,className:"cursor-pointer"})]}),et=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Created On"}),e.jsx("img",{src:O==null?L:O==!0?q:H,alt:"Sort Icon",onClick:Ye,className:"cursor-pointer"})]}),tt=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Created By"}),e.jsx("img",{src:z==null?L:z==!0?q:H,alt:"Sort Icon",onClick:Pe,className:"cursor-pointer"})]}),st=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Updated On"}),e.jsx("img",{src:W==null?L:W==!0?q:H,alt:"Sort Icon",onClick:De,className:"cursor-pointer"})]}),at=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Updated By"}),e.jsx("img",{src:G==null?L:G==!0?q:H,alt:"Sort Icon",onClick:Fe,className:"cursor-pointer"})]}),it=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Is Active"}),e.jsx("img",{src:K==null?L:K==!0?q:H,alt:"Sort Icon",onClick:Oe,className:"cursor-pointer"})]}),rt=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:`${je(t.createdAt)}`})}),ot=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:t.createdByUserName})}),nt=t=>e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:`${je(t.updatedAt)}`}),ct=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:t.updatedByUserName})}),lt=t=>e.jsx(e.Fragment,{children:t.isActive?e.jsxs("div",{className:"flex items-center ",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-primaryBlue border-none"}),e.jsx("div",{className:"ml-2 ",children:"YES"})]}):e.jsxs("div",{className:"flex items-center ",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-secondary-gray-300 border-none"}),e.jsx("div",{className:"ml-2 ",children:"NO"})]})}),dt=t=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center ",children:[e.jsx("div",{className:"w-4 h-4 flex items-center",children:e.jsx("img",{src:yt,alt:"Sahayya Logo",className:"cursor-pointer",onClick:s=>{h.navigate(`${Ae}?mode=${ge.VIEW}&uid=${t.uid}`)}})}),e.jsx("div",{className:"ml ",children:e.jsx(k,{buttonType:R.MENU,onClick:s=>{Se(t,s)},className:"!rounded-none bg-transparent !hover:bg-primary-gray-300"})})]})});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex w-full justify-between items-center",children:[e.jsx(B,{label:"heading.productConfiguration.checklist",className:"text-primary-ptext-1000 text-h2 font-bold flex"}),e.jsxs("div",{className:"flex gap-10",children:[e.jsx(k,{buttonType:R.FILTER_OUTLINE,onClick:Je}),e.jsx(k,{buttonType:R.CREATE,className:"create-button",onClick:We})]})]}),p&&Ge(),e.jsxs(Ct,{standardDataFormatPromise:X.getAll,dataKey:"id",search:m.search,ref:l,children:[e.jsx($,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:ze,body:Ke}),e.jsx($,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:Ze,body:Xe}),e.jsx($,{className:"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6",header:it,body:lt}),e.jsx($,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:et,body:rt}),e.jsx($,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:tt,body:ot}),e.jsx($,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:st,body:nt}),e.jsx($,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:at,body:ct}),e.jsx($,{className:"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6",header:"Actions",body:dt})]})]}),e.jsxs(jt,{onHide:w?()=>Y(!1):()=>x(!1),visible:w?ne:d,modal:!0,closable:!1,dismissableMask:!0,children:[e.jsx(B,{label:w?"dialog.staticMaster.activate":"dialog.staticMaster.deactivate",className:"text-primary-ptext-1000 text-base font-Roboto font-bold flex items-center justify-center"}),e.jsx(B,{label:w?"dialog.staticMaster.message.activate":"dialog.staticMaster.message",className:"text-primary-ptext-1000 text-xs font-Roboto flex mt text-center justify-center mx-2 mt-4"}),e.jsxs("div",{className:"flex justify-center mt-4",children:[e.jsx("div",{className:"mr-3",children:e.jsx(k,{buttonType:R.CANCEL_OUTLINE,onClick:w?()=>Y(!1):()=>x(!1)})}),e.jsx("div",{className:"mr-3",children:e.jsx(k,{buttonType:R.SAVE_OUTLINE,onClick:w?()=>we():()=>_e()})}),e.jsx("div",{className:"",children:e.jsx(k,{buttonType:R.SEND_FOR_APPROVAL,className:"approve-primary",onClick:w?()=>Ue():()=>Le()})})]})]}),e.jsx(Nt,{className:"w-20 bg-white font-Roboto text-xs text-primary-pText-1300 pt-2 rounded-lg mt-0.5 flex justify-center align-center shadow-autoCompletePanel",model:Ce,ref:Z}),e.jsx("div",{className:"",children:e.jsx(bt,{position:"bottom-right",ref:_,toastText:ce,variant:me})})]})}const es=ht(Bt);export{es as default};
//# sourceMappingURL=PageChecklist-762a8e08.js.map
