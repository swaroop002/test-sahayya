import{w as ft,r,aG as j,j as t,T as E,J as B,aH as Z,ao as w,aI as fe,aJ as ye,aK as ee,cB as Ae,aF as ge,o as I,az as yt,aM as At,av as je,p as Ne,z as gt,aN as te}from"./index-e8217573.js";import{s as R,a as M,b as Y}from"./sortIcon-54357a29.js";import{e as jt}from"./eye_icon-081bddb3.js";import{A as se}from"./AutoComplete-0bca608a.js";import{B as O}from"./ButtonBox-9e46519a.js";import{D as ae}from"./DatePicker-b1c13861.js";import{D as Nt}from"./Dialog-adadaf64.js";import{I as Tt}from"./InputBox-b9e88f52.js";import{M as St}from"./MenuBox-defc36b0.js";import{R as Ct}from"./ReadOnlyTable-86accb69.js";import{S as bt}from"./SectionTitle-9f9277ec.js";import{S as Et}from"./SimpleDropDown-061a3470.js";import{T as Bt}from"./Toast-ae99ea5b.js";import{C as N}from"./column.esm-938bad7d.js";import{S as It}from"./State-681554db.js";import{C as Q}from"./City-7102c574.js";import"./search_icon-459d6871.js";import"./withAuth-6de36ebf.js";import"./virtualscroller.esm-9939945c.js";import"./kebab-menu-8835ad2e.js";import"./No_data-1720c54e.js";import"./datatable.esm-f474a654.js";import"./paginator.esm-11c2c115.js";import"./TransitionGroup-c8afe0ce.js";function Rt(re){const[oe,Te]=r.useState(!1),[Se,F]=r.useState(!1),[Ce,P]=r.useState(!1),[a,ne]=r.useState({}),[U,x]=r.useState(void 0),[L,v]=r.useState(void 0),[H,h]=r.useState(void 0),[$,p]=r.useState(void 0),[z,T]=r.useState(void 0),[V,f]=r.useState(void 0),[q,y]=r.useState(void 0),[G,A]=r.useState(void 0),_=r.useRef(null),[ie,S]=r.useState(""),[ce,C]=r.useState(j.PRIMARY),[g,b]=r.useState(!1),[k,de]=r.useState(!1),[o,J]=r.useState({name:"",state:"",description:"",createdFrom:"",createdTo:"",updatedFrom:"",updatedTo:"",isActive:"",createdBy:{name:"",id:""},updatedBy:{name:"",id:""}}),[d,u]=r.useState({limit:10,loading:!1,totalRecords:0,start:0,search:"",runCustomQuery:!1,records:[]}),W=r.useRef(null),[be,Ee]=r.useState([{items:[{label:"Activate",className:""},{label:"Deactivate",className:""}]}]),Be=(e,s)=>{var X;console.log("rowData=",e);const i={label:"label.common.deactivate",command:()=>{Ye(e)}},n={label:"label.common.active",command:()=>{Me(e)}},l=[{items:[e!=null&&e.isActive?i:n]}];Ee(l),(X=W==null?void 0:W.current)==null||X.toggle(s)},[K,Ie]=r.useState([]),[le,me]=r.useState(),c=r.useRef(null);r.useEffect(()=>{var e;(e=c==null?void 0:c.current)==null||e.search()},[d==null?void 0:d.search]),r.useEffect(()=>{var e;_!=null&&_.current&&ie!==""&&((e=_==null?void 0:_.current)==null||e.showFunction())},[ie,ce,g]);const pe=e=>{const{name:s,value:i}=e.target;J(typeof i=="object"?n=>({...n,[s]:i.name}):n=>({...n,[s]:i}))},ue=e=>{const{name:s,value:i}=e.target;J(typeof i=="object"?n=>({...n,[s]:{name:`${i==null?void 0:i.name} ${i!=null&&i.lastName?i==null?void 0:i.lastName:""}`.trim(),id:i.userId}}):n=>({...n,[s]:i}))},D=e=>{const{name:s,value:i}=e.target;J(n=>({...n,[s]:i}))},Re=e=>{let s="";U||U==null?s='sort={"name":"ASC"}&':s='sort={"name":"DESC"}&',U==null?x(!1):x(!U),v(void 0),p(void 0),T(void 0),A(void 0),f(void 0),y(void 0),h(void 0),u({...d,search:s})},Me=e=>{ne({...e}),P(!0),de(!0)},Ye=e=>{ne({...e}),F(!0),de(!1)},Oe=e=>{let s="";L||L==null?s='sort={"state":{"name":"ASC"}}&':s='sort={"state":{"name":"DESC"}}&',L==null?v(!1):v(!L),u({...d,search:s}),x(void 0),h(void 0),p(void 0),T(void 0),A(void 0),f(void 0),y(void 0)},Fe=e=>{let s="";H||H==null?s='sort={"description":"ASC"}&':s='description={"name":"DESC"}&',H==null?h(!1):h(!H),u({...d,search:s}),x(void 0),v(void 0),p(void 0),T(void 0),A(void 0),f(void 0),y(void 0)},Pe=e=>{let s="";$||$==null?s='sort={"createdAt":"ASC"}&':s='sort={"createdAt":"DESC"}&',$==null?p(!1):p(!$),x(void 0),v(void 0),h(void 0),T(void 0),A(void 0),f(void 0),y(void 0),u({...d,search:s})},$e=e=>{let s="";z||z==null?s='sort={"createdBy":"ASC"}&':s='sort={"createdBy":"DESC"}&',z==null?T(!1):p(!$),x(void 0),v(void 0),h(void 0),p(void 0),A(void 0),f(void 0),y(void 0),u({...d,search:s})},_e=e=>{let s="";V||V==null?s='sort={"updatedAt":"ASC"}&':s='sort={"updatedAt":"DESC"}&',V==null?f(!1):f(!V),x(void 0),v(void 0),h(void 0),p(void 0),A(void 0),T(void 0),y(void 0),u({...d,search:s})},ke=e=>{let s="";G||G==null?s='sort={"isActive":"ASC"}&':s='sort={"isActive":"DESC"}&',G==null?A(!1):A(!0),x(void 0),v(void 0),h(void 0),p(void 0),f(void 0),T(void 0),y(void 0),u({...d,search:s})},Ue=e=>{let s="";q||q==null?s='sort={"updatedBy":"ASC"}&':s='sort={"updatedBy":"DESC"}&',q==null?y(!1):y(!q),x(void 0),v(void 0),h(void 0),p(void 0),f(void 0),T(void 0),A(void 0),u({...d,search:s})},Le=()=>({...a},Q.Inactivate(a==null?void 0:a.uid).then(e=>{var s;C(j.PRIMARY),S(Z.DEACTIVATED),b(!g),F(!1),P(!1),(s=c==null?void 0:c.current)==null||s.search()}).catch(e=>{C(j.QUATERNARY),S(w(e)),b(!g)})),He=()=>({...a},Q.activate(a==null?void 0:a.uid).then(e=>{var s;C(j.PRIMARY),S(Z.ACTIVATED),b(!g),F(!1),P(!1),(s=c==null?void 0:c.current)==null||s.search()}).catch(e=>{C(j.QUATERNARY),S(w(e)),b(!g)})),Ve=()=>{var n;const e={staticMasterType:(n=a==null?void 0:a.staticMasterType)==null?void 0:n.name,name:a==null?void 0:a.name,code:a.code,reason:a.reason,description:a.description,createdAt:a.createdAt,createdBy:a.createdBy,id:a.id,isActive:!1,requestId:a.requestId,uid:a.uid,updatedAt:a.updatedAt,updatedBy:a.updatedBy},s={...e,isActive:!0},i={name:a.displayName,operationType:fe.UPDATE,entity:ye.STATIC_MASTER_DATA,initialStateJson:ee(e),finalStateJson:ee(s),reasonForChange:a.reasons};return Q.update(a==null?void 0:a.uid,i).then(m=>{var l;C(j.PRIMARY),S(Z.SENT_FOR_APPROVAL),b(!g),F(!1),P(!1),(l=c==null?void 0:c.current)==null||l.search()}).catch(m=>{C(j.QUATERNARY),S(w(m)),b(!g)})},qe=()=>{var n;const e={staticMasterType:(n=a==null?void 0:a.staticMasterType)==null?void 0:n.name,name:a==null?void 0:a.name,code:a.code,reason:a.reason,description:a.description,createdAt:a.createdAt,createdBy:a.createdBy,id:a.id,isActive:!0,requestId:a.requestId,uid:a.uid,updatedAt:a.updatedAt,updatedBy:a.updatedBy},s={...e,isActive:!1},i={name:a.displayName,operationType:fe.UPDATE,entity:ye.STATIC_MASTER_DATA,initialStateJson:ee(e),finalStateJson:ee(s),reasonForChange:a.reasons};return Q.update(a==null?void 0:a.uid,i).then(m=>{var l;C(j.PRIMARY),S(Z.SENT_FOR_APPROVAL),b(!g),F(!1),P(!1),(l=c==null?void 0:c.current)==null||l.search()}).catch(m=>{C(j.QUATERNARY),S(w(m)),b(!g)})},Je=async e=>{let s=[];e.query.trim().length?(await It.getAll(0,10,`name:lk=${e.query}&`).then(i=>{i.status===200&&(s=[...i.data.results])}),s.length===0&&s.push({name:void 0,designation:void 0,emailId:void 0})):s=K,me(s)},De=async e=>{let s=[];e.query.trim().length?(await Q.getAll(0,10,`name:lk=${e.query}&`).then(i=>{i.status===200&&(s=[...i.data.results])}),s.length===0&&s.push({name:void 0,designation:void 0,emailId:void 0})):s=K,me(s)},xe=async e=>{let s=[];e.query.trim().length?(await gt.getAll(0,10,`name=${e.query}&`).then(i=>{i.status===200&&(s=[...i.data])}),s.length===0&&s.push({name:void 0,designation:void 0,emailId:void 0})):s=K,Ie(s)},Qe=()=>{var s,i,n,m;let e="";if(o.name&&(e=`${e}name:lk=${o.name}&`),o.state&&(e=`${e}state.name:lk=${o.state}&`),o.description&&(e=`${e}description:lk=${o.description}&`),o.createdFrom&&(console.log(o.createdFrom),e=`${e}createdAt:gt=${te(o.createdFrom)}&`),o.createdTo&&(e=`${e}createdAt:lt=${te(o.createdTo)}&`),o.updatedFrom&&(e=`${e}updatedAt:gt=${te(o.updatedFrom)}&`),o.updatedTo&&(e=`${e}updatedAt:lt=${te(o.updatedTo)}&`),o.isActive){let l=!0;o.isActive==="YES"?l=!0:o.isActive==="NO"&&(l=!1),e=`${e}isActive:lk=${l}&`}(s=o.createdBy)!=null&&s.id&&(e=`${e}&createdBy=${(i=o.createdBy)==null?void 0:i.id}&`),(n=o.updatedBy)!=null&&n.id&&(e=`${e}&updatedBy=${(m=o.updatedBy)==null?void 0:m.id}&`),u({...d,search:e})},ze=()=>{J({name:"",state:"",description:"",createdFrom:"",createdTo:"",updatedFrom:"",updatedTo:"",isActive:"",createdBy:{name:"",id:""},updatedBy:{name:"",id:""}}),u({...d,search:""})},Ge=()=>{Te(!oe)},Ke=()=>{re.navigate(`${Ae}?mode=${ge.CREATE}`)},We=()=>{const{name:e,state:s,description:i,createdFrom:n,createdTo:m,updatedFrom:l,updatedTo:X,isActive:xt,createdBy:vt,updatedBy:ht}=o;return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"p-3 flex flex-col gap-6 bg-primary-sapphireBlue-100 rounded-lg",children:[t.jsx("div",{className:"flex ",children:t.jsx(bt,{title:"text.masterData.types.search"})}),t.jsxs("div",{className:" grid grid-cols-1 md:grid-cols-4 gap-3",children:[t.jsx(se,{label:"input.city.state",name:"state",variant:I.PRIMARY,value:s,suggestions:le,completeMethod:Je,onChange:pe,itemTemplate:ve}),t.jsx(se,{label:"input.city.displayName",name:"name",variant:I.PRIMARY,value:e,suggestions:le,completeMethod:De,onChange:pe,itemTemplate:ve}),t.jsx(Tt,{label:"input.city.description",name:"description",variant:I.SECONDARY,onChange:D,value:i}),t.jsx(Et,{label:"input.city.isActive",name:"isActive",variant:yt.SECONDARY,options:At,onChange:D,value:xt}),t.jsx(ae,{label:"input.city.createdFrom",name:"createdFrom",showTime:!0,value:n,placeholder:"MM/DD/YYYY",onChange:D}),t.jsx(ae,{showTime:!0,label:"input.city.createdTo",name:"createdTo",variant:I.PRIMARY,value:m,placeholder:"MM/DD/YYYY",onChange:D}),t.jsx(se,{label:"input.city.createdBy",name:"createdBy",field:"name",value:vt,variant:I.PRIMARY,suggestions:K,completeMethod:xe,onChange:ue,itemTemplate:he}),t.jsx(ae,{showTime:!0,label:"input.city.updatedFrom",name:"updatedFrom",variant:I.PRIMARY,value:l,placeholder:"MM/DD/YYYY",onChange:D}),t.jsx(ae,{showTime:!0,label:"input.city.updatedTo",name:"updatedTo",variant:I.PRIMARY,value:X,placeholder:"MM/DD/YYYY",onChange:D}),t.jsx(se,{field:"name",label:"input.city.updatedBy",name:"updatedBy",variant:I.PRIMARY,value:ht,suggestions:K,completeMethod:xe,onChange:ue,itemTemplate:he}),t.jsxs("div",{className:"flex gap-5",children:[t.jsx(O,{buttonType:B.RESET_OUTLINE,onClick:ze}),t.jsx(O,{buttonType:B.SEARCH_OUTLINE,onClick:Qe})]})]})]})})},ve=e=>(e==null?void 0:e.name)===void 0?t.jsxs("div",{className:"flex flex-col items-center justify-center h-39",children:[t.jsx("img",{src:je,alt:"search-icon",className:" h-7 w-7"}),t.jsx(E,{className:"text-primary-labelColor mt-2",label:"Loading..."})]}):t.jsxs("div",{className:"flex flex-col",children:[t.jsx(E,{className:"text-primary-labelColor",label:`${e.name}`}),t.jsx(E,{className:"text-secondary-gray-500 text-xxs",label:e.name})]}),he=e=>e.name===void 0?t.jsxs("div",{className:"flex flex-col items-center justify-center h-39",children:[t.jsx("img",{src:je,alt:"search-icon",className:" h-7 w-7"}),t.jsx(E,{className:"text-primary-labelColor mt-2",label:"Loading..."})]}):t.jsx("div",{className:"flex flex-col",children:t.jsx(E,{className:"text-primary-labelColor",label:`${e.name}`})}),Xe=e=>t.jsx(t.Fragment,{children:t.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:e==null?void 0:e.name})}),Ze=()=>t.jsxs("div",{className:"flex",children:[t.jsx("p",{className:"mr-1",children:"Display Name"}),t.jsx("img",{src:U==null?R:U==!0?M:Y,alt:"Sort Icon",onClick:Re,className:"cursor-pointer"})]}),we=()=>t.jsxs("div",{className:"flex",children:[t.jsx("p",{className:"mr-1",children:"State"}),t.jsx("img",{src:L==null?R:L==!0?M:Y,alt:"Sort Icon",onClick:Oe,className:"cursor-pointer"})]}),et=()=>t.jsxs("div",{className:"flex",children:[t.jsx("p",{className:"mr-1",children:"Description"}),t.jsx("img",{src:H==null?R:H==!0?M:Y,alt:"Sort Icon",onClick:Fe,className:"cursor-pointer"})]}),tt=()=>t.jsxs("div",{className:"flex",children:[t.jsx("p",{className:"mr-1",children:"Created On"}),t.jsx("img",{src:$==null?R:$==!0?M:Y,alt:"Sort Icon",onClick:Pe,className:"cursor-pointer"})]}),st=()=>t.jsxs("div",{className:"flex",children:[t.jsx("p",{className:"mr-1",children:"Created By"}),t.jsx("img",{src:z==null?R:z==!0?M:Y,alt:"Sort Icon",onClick:$e,className:"cursor-pointer"})]}),at=()=>t.jsxs("div",{className:"flex",children:[t.jsx("p",{className:"mr-1",children:"Updated On"}),t.jsx("img",{src:V==null?R:V==!0?M:Y,alt:"Sort Icon",onClick:_e,className:"cursor-pointer"})]}),it=()=>t.jsxs("div",{className:"flex",children:[t.jsx("p",{className:"mr-1",children:"Updated By"}),t.jsx("img",{src:q==null?R:q==!0?M:Y,alt:"Sort Icon",onClick:Ue,className:"cursor-pointer"})]}),rt=()=>t.jsxs("div",{className:"flex",children:[t.jsx("p",{className:"mr-1",children:"Is Active"}),t.jsx("img",{src:G==null?R:G==!0?M:Y,alt:"Sort Icon",onClick:ke,className:"cursor-pointer"})]}),ot=e=>{var s;return t.jsx(t.Fragment,{children:t.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:(s=e==null?void 0:e.state)==null?void 0:s.name})})},nt=e=>t.jsx(t.Fragment,{children:t.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:e==null?void 0:e.description})}),ct=e=>t.jsx(t.Fragment,{children:t.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:`${Ne(e==null?void 0:e.createdAt)}`})}),dt=e=>t.jsx(t.Fragment,{children:t.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:e==null?void 0:e.createdByUserName})}),lt=e=>t.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:`${Ne(e==null?void 0:e.updatedAt)}`}),mt=e=>t.jsx(t.Fragment,{children:t.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:e==null?void 0:e.updatedByUserName})}),pt=e=>t.jsx(t.Fragment,{children:e!=null&&e.isActive?t.jsxs("div",{className:"flex items-center ",children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-primaryBlue border-none"}),t.jsx("div",{className:"ml-2 ",children:"YES"})]}):t.jsxs("div",{className:"flex items-center ",children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-secondary-gray-300 border-none"}),t.jsx("div",{className:"ml-2 ",children:"NO"})]})}),ut=e=>t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex items-center ",children:[t.jsx("div",{className:"w-4 h-4 flex items-center",children:t.jsx("img",{src:jt,alt:"Sahayya Logo",className:"cursor-pointer",onClick:s=>{re.navigate(`${Ae}?mode=${ge.VIEW}&uid=${e==null?void 0:e.uid}`)}})}),t.jsx("div",{className:"ml ",children:t.jsx(O,{buttonType:B.MENU,onClick:s=>{Be(e,s)},className:"!rounded-none bg-transparent !hover:bg-primary-gray-300"})})]})});return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex flex-col gap-3",children:[t.jsxs("div",{className:"flex w-full justify-between items-center",children:[t.jsx(E,{label:"heading.city",className:"text-primary-ptext-1000 text-h2 font-bold flex"}),t.jsxs("div",{className:"flex gap-10",children:[t.jsx(O,{buttonType:B.FILTER_OUTLINE,onClick:Ge}),t.jsx(O,{buttonType:B.CREATE,className:"create-button",onClick:Ke})]})]}),oe&&We(),t.jsxs(Ct,{standardDataFormatPromise:Q.getAll,dataKey:"id",search:d.search,ref:c,children:[t.jsx(N,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:Ze,body:Xe}),t.jsx(N,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:we,body:ot}),t.jsx(N,{className:"text-primary-ptext-1000 text-left text-xs w-1/12  p-1 h-12 pl-6",header:et,body:nt}),t.jsx(N,{className:"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6",header:rt,body:pt}),t.jsx(N,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:tt,body:ct}),t.jsx(N,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:st,body:dt}),t.jsx(N,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:at,body:lt}),t.jsx(N,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:it,body:mt}),t.jsx(N,{className:"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6",header:"Actions",body:ut})]})]}),t.jsxs(Nt,{onHide:k?()=>P(!1):()=>F(!1),visible:k?Ce:Se,modal:!0,closable:!1,dismissableMask:!0,children:[t.jsx(E,{label:k?"dialog.staticMaster.activate":"dialog.staticMaster.deactivate",className:"text-primary-ptext-1000 text-base font-Roboto font-bold flex items-center justify-center"}),t.jsx(E,{label:k?"dialog.staticMaster.message.activate":"dialog.staticMaster.message",className:"text-primary-ptext-1000 text-xs font-Roboto flex mt text-center justify-center mx-2 mt-4"}),t.jsxs("div",{className:"flex justify-center mt-4",children:[t.jsx("div",{className:"mr-3",children:t.jsx(O,{buttonType:B.CANCEL_OUTLINE,onClick:k?()=>P(!1):()=>F(!1)})}),t.jsx("div",{className:"mr-3",children:t.jsx(O,{buttonType:B.SAVE_OUTLINE,onClick:k?()=>He():()=>Le()})}),t.jsx("div",{className:"",children:t.jsx(O,{buttonType:B.SEND_FOR_APPROVAL,className:"approve-primary",onClick:k?()=>Ve():()=>qe()})})]})]}),t.jsx(St,{className:"w-20 bg-white font-Roboto text-xs text-primary-pText-1300 pt-2 rounded-lg mt-0.5 flex justify-center align-center shadow-autoCompletePanel",model:be,ref:W}),t.jsx("div",{className:"",children:t.jsx(Bt,{position:"bottom-right",ref:_,toastText:ie,variant:ce})})]})}const ts=ft(Rt);export{ts as default};
//# sourceMappingURL=PageCity-a670b8ff.js.map
