import{aF as R,q as Ln,cj as Sn,r as m,aG as O,dg as Ps,ao as y,v as V,eX as Pn,j as r,K as Cn,R as ne,J as oe,d4 as w,d7 as j,aH as b,T as Oe,aw as $,da as Te,c8 as Ue,d8 as Cs,d9 as B,cn as bn,eU as kn,de as Rn,dc as Le,dd as bs}from"./index-e8217573.js";import{A as xn}from"./Address-75e58af3.js";import{i as _n,B as Mn}from"./BasicInformation-f2687bb1.js";import{B as ae}from"./ButtonBox-9e46519a.js";import{c as Vs,D as jn}from"./DocumentUploader-e2ec1a13.js";import{E as wn}from"./ErrorDialog-d5eef4d7.js";import{a as X,K as vn}from"./KYCV3-298daeeb.js";import{L as re}from"./LazyLoader-70599949.js";import{b as Bn}from"./MediaGallery-5884b284.js";import{c as An,g as Vn,d as $e,f as Xe,u as Un,C as Yn,D as Kn,v as Fn,j as Wn,O as Gn,L as ks,n as zn,S as Ye,h as qn,o as Rs,q as Hn,r as $n,t as Xn,l as xs,w as _s,x as Ms,k as Ke,m as js,y as Qn,z as Jn,A as Zn}from"./Helper-03e9d878.js";import{R as ws}from"./RadioButton-86c37166.js";import{S as Fe}from"./SaveComponent-160c5b32.js";import{S as H}from"./Section-00ef9f2b.js";import{S as pn}from"./SimpleTab-27fa8860.js";import{S as eo}from"./Skeleton-7e12d019.js";import{T as so}from"./TextData-06df331b.js";import{T as to}from"./Toast-ae99ea5b.js";import{W as vs}from"./WarningDialog-77a1cb18.js";import{A as We}from"./ApplicantService-924aa5cb.js";import{I as no}from"./Industry-6ae795a6.js";import{S as de}from"./StaticMasterDataService-689a6eca.js";import{A as Bs}from"./AddressService-27926b64.js";import{B as Se}from"./BankAccountDetailsService-375c75c8.js";import{E as Pe}from"./EmploymentDetailsService-b3cd805d.js";import{O as Ce,I as Ge}from"./InvestmentInfoService-9f211f25.js";import{O as ze}from"./OtherDocumentService-d3804bc8.js";import{B as qe}from"./BasicInformation-dd84bcb0.js";import{R as He}from"./Residential-74fb844b.js";import{i as Qe,b as oo,O as ao,E as ro,a as io,I as co,R as be}from"./OtherDetails-8b519354.js";import{B as uo}from"./BankAccountDetails-e32209b8.js";import"./AutoComplete-0bca608a.js";import"./search_icon-459d6871.js";import"./withAuth-6de36ebf.js";import"./virtualscroller.esm-9939945c.js";import"./InputBox-b9e88f52.js";import"./InputTextArea-b90aad1d.js";import"./Dialog-adadaf64.js";import"./esm-70d64670.js";import"./index-8739acfd.js";import"./SimpleDropDown-061a3470.js";import"./TextButton-41b4a67e.js";import"./loader-5f2cfb31.js";import"./City-7102c574.js";import"./Pincode-a7c9b067.js";import"./InputAddon-04f948e7.js";import"./ProfilePictureUpload-60f86be0.js";import"./Loading-783a01c7.js";import"./FileUploadCustom-5ab7fd25.js";import"./FileUploadMenuBox-f47dc693.js";import"./kebab-menu-8835ad2e.js";import"./MenuBox-defc36b0.js";import"./FileUploadService-1aaf11f7.js";import"./SystemDatePicker-abe08a29.js";import"./DatePicker-b1c13861.js";import"./IconButton-36693dd9.js";import"./sortIcon-54357a29.js";import"./Download_Icon-51fc7f46.js";import"./eye_icon-081bddb3.js";import"./DocumentService-a293b5f4.js";import"./link-0172a3d4.js";import"./TransitionGroup-c8afe0ce.js";import"./CheckBox-8a0c0e77.js";import"./EditableTableV2-6afcb42b.js";import"./datatable.esm-f474a654.js";import"./paginator.esm-11c2c115.js";import"./FinancialService-0c38c3ed.js";const As={basicInformation:{isBasicInfoLoading:!1,basicInfo:{..._n},basicInfoPageMode:R.VIEW},addressInfo:{isAddressLoading:!1,address:{},addressInfoPageMode:R.VIEW,isSameAsResidentialAddress:!1,isSameAsPermanentAddress:!1},kycDocuments:{isKycLoading:!1,kycDocList:[An],uniqueKycCardTracker:[],populateOcr:{uid:"",success:!1,failed:!1},aadharVerificationStatus:{verified:!1,failedToVerify:!1},savedDocuments:[]},otherDetails:{isOtherDetailsLoading:!1,otherDetailsData:{...Vn}},employmentInformation:{isEmploymentInfoLoading:!1,employmentInfoList:[$e]},bankAccount:{isBankAccountInfoLoading:!1,bankAccountInfoList:[Xe]},reference:{isReferenceDetailsLoading:!1,referenceInfoList:[Qe],savedReferencesCount:0},investmentInfo:{isInvestmentInfoLoading:!1,investmentInfoData:oo,sectionMode:R.VIEW},otherDocInfo:{isOtherDocInfoLoading:!1,otherDocInfoList:[Vs],sectionMode:R.VIEW}},ba=()=>{var Os,Ts,Ls,Ss;const l=Ln().loanUid??"",ke=new Sn({length:5}),[Re,Je]=m.useState(!0),[q,Us]=m.useState({coApplicant:{name:"New Tab",key:""},index:null}),[U,Ys]=m.useState(""),[k,Q]=m.useState(0),[Ks,Fs]=m.useState(0),[Ws,Gs]=m.useState(!1),[P,fe]=m.useState([{firstName:"New Tab",key:ke()}]),[fo,le]=m.useState(!1),[zs,qs]=m.useState(!1),[Y,Hs]=m.useState({}),[$s,Xs]=m.useState(!1),[Qs,Js]=m.useState(!1),[Ze,J]=m.useState({EMPLOYMENT_NATURE_OPTION:[],INDUSTRY_OPTION:[],OCCUPATION_OPTION:[],BUSINESS_MANAGED_BY_OPTION:[],SEASONALITY_OPTION:[],NO_EMPLOYEE_OPTION:[]}),[_,pe]=m.useState({residential:null,permanent:null}),[f,c]=m.useState({...As}),[Zs,ps]=m.useState({basicInfoAPICall:!1}),[et,st]=m.useState(1),[tt,es]=m.useState(1),[nt,lo]=m.useState("bottom-right"),[xe,T]=m.useState(""),[ss,L]=m.useState(O.PRIMARY),[N,S]=m.useState(!1),[_e,I]=m.useState(""),[ot,Z]=m.useState(!1),[at,Me]=m.useState(!1),[rt,ts]=m.useState(!1),it=m.useRef(null),p=m.useRef(null),K=m.useRef(null),ee=m.useRef(null),je=m.useRef(null),F=m.useRef([]),W=m.useRef([]),se=m.useRef([]),Ie=m.useRef(null),G=m.useRef(null),ns=m.useRef(null),dt=(e,s)=>[{className:"",label:"Remove Co-Applicant",command:()=>{Us({coApplicant:e,index:s}),Z(!0)}}];m.useEffect(()=>{un()},[]),m.useEffect(()=>{var e;(e=P[k])!=null&&e.uid&&(Dn(),os())},[k,Ws]),m.useEffect(()=>{var e,s,t;(s=(e=f==null?void 0:f.basicInformation)==null?void 0:e.basicInfo)!=null&&s.uid&&((t=P[k])!=null&&t.uid)&&ye()},[(Os=f.basicInformation)==null?void 0:Os.basicInfo]),m.useEffect(()=>{_e&&ts(!0)},[_e]),m.useEffect(()=>{var e;p!=null&&p.current&&xe!==""&&((e=p==null?void 0:p.current)==null||e.showFunction())},[xe,ss,N]),m.useEffect(()=>{U&&(ct(),ut())},[U]),m.useEffect(()=>{var e;(e=P[k])!=null&&e.uid&&!Re&&os()},[Re,Zs.basicInfoAPICall]),m.useEffect(()=>{var e,s;(e=f==null?void 0:f.addressInfo)!=null&&e.isSameAsResidentialAddress&&(_!=null&&_.residential)&&ls(_==null?void 0:_.residential),(s=f==null?void 0:f.addressInfo)!=null&&s.isSameAsPermanentAddress&&(_!=null&&_.permanent)&&ls(_==null?void 0:_.permanent)},[(Ts=f==null?void 0:f.addressInfo)==null?void 0:Ts.isSameAsResidentialAddress,(Ls=f==null?void 0:f.addressInfo)==null?void 0:Ls.isSameAsPermanentAddress]),m.useEffect(()=>{as({index:P.length-1})},[zs]),m.useEffect(()=>{c(e=>{var s,t;return{...e,addressInfo:{...e.addressInfo,address:{...e.addressInfo.address,address:Y==null?void 0:Y.address,pincode:{pinCode:(s=Y==null?void 0:Y.pincode)==null?void 0:s.pinCode,uid:(t=Y==null?void 0:Y.pincode)==null?void 0:t.uid}}}}})},[Qs]);const ct=async()=>{if(l&&U)try{const e=await Bs.getAddressWithoutDocForDde(l,U,Ps.RESIDENTIAL);pe(s=>{var t,o;return{...s,residential:(o=(t=e==null?void 0:e.data)==null?void 0:t.results)==null?void 0:o[0]}})}catch(e){console.log(e),I(y(e))}},ut=async()=>{if(l&&U)try{const e=await Bs.getAddressWithoutDocForDde(l,U,Ps.PERMANENT);pe(s=>{var t,o;return{...s,permanent:(o=(t=e==null?void 0:e.data)==null?void 0:t.results)==null?void 0:o[0]}})}catch(e){console.log(e),I(y(e))}},mt=async()=>{var e,s,t,o,n,a,d;try{const i=await We.getApplicantInfo(0,20,w.PRIMARY,l);if(V(i)&&((e=i.data)!=null&&e.totalRecords))return Ys((o=(t=(s=i.data)==null?void 0:s.results)==null?void 0:t[0])==null?void 0:o.uid),((d=(a=(n=i.data)==null?void 0:n.results)==null?void 0:a[0])==null?void 0:d.uid)??""}catch(i){I(y(i))}},te=async(e,s)=>{var t,o,n;try{const a=await We.getApplicantInfo(0,20,w.CO_APPLICANT,l);if(V(a)&&((t=a.data)!=null&&t.totalRecords)){const d=(n=(o=a.data)==null?void 0:o.results)==null?void 0:n.map((i,u)=>!(i!=null&&i.firstName)&&!i.lastName?{...i,firstName:`Co-App ${u+1}`}:{...i});fe(d),Je(!1),e==="BASIC_INFO"&&ps(i=>({...i,basicInfoAPICall:!i.basicInfoAPICall})),s&&s(d)}else Ae(),Je(!1)}catch(a){I(y(a))}},os=async e=>{const s=P[k];e||c(t=>({...t,basicInformation:{...t.basicInformation,isBasicInfoLoading:!0}}));try{const t=await qe.getDde(s==null?void 0:s.uid);V(t)?c(o=>({...o,basicInformation:{...o.basicInformation,basicInfo:Un(t==null?void 0:t.data),isBasicInfoLoading:!1,basicInfoPageMode:R.VIEW}})):c(o=>({...o,basicInformation:{...o.basicInformation,isBasicInfoLoading:!1,basicInfoPageMode:R.VIEW}}))}catch(t){I(y(t))}},ft=async(e,s)=>{var t,o,n,a,d,i,u,g,E,h,D,C,M,A;s||c(z=>({...z,kycDocuments:{...z.kycDocuments,isKycLoading:!0}}));try{const z=await X.getKycDocument(l,e);if(V(z)){const{data:v}=z,ie=[],ue=[],Ne=x=>x.map(me=>({sectionUid:me.uid??"",fileName:me.fileName??"",fileType:me.fileType??"",sectionType:me.smDocSectionType??"",url:me.url}));for(const x in v)ie.push({listId:x,uid:x,docName:((n=(o=(t=v[x])==null?void 0:t[0].kyc)==null?void 0:o.docType)==null?void 0:n.code)??"",docNo:((d=(a=v[x])==null?void 0:a[0].kyc)==null?void 0:d.docNo)??"",maskedDocNo:((u=(i=v[x])==null?void 0:i[0].kyc)==null?void 0:u.maskedDocNo)??"",dob:((E=(g=v[x])==null?void 0:g[0].kyc)==null?void 0:E.dob)??"",docSections:Ne(v[x]),isVerified:((D=(h=v[x])==null?void 0:h[0].kyc)==null?void 0:D.isVerified)??!1}),ue.push(((A=(M=(C=v[x])==null?void 0:C[0].kyc)==null?void 0:M.docType)==null?void 0:A.code)??"");ie.length?c(x=>({...x,kycDocuments:{...x.kycDocuments,kycDocList:[...ie],uniqueKycCardTracker:[...ue],isKycLoading:!1}})):c(x=>({...x,kycDocuments:{...x.kycDocuments,isKycLoading:!1}}))}}catch(z){c(v=>({...v,kycDocuments:{...v.kycDocuments,isKycLoading:!1}})),I(y(z))}},ye=async e=>{const s=P[k];if(e||c(t=>({...t,addressInfo:{...t.addressInfo,isAddressLoading:!0}})),l&&(s!=null&&s.uid))try{const t=await He.getAddressForDde(l,s==null?void 0:s.uid);V(t)?c(o=>{var n,a;return{...o,addressInfo:{...o.addressInfo,isAddressLoading:!1,address:Yn(t.data),isSameAsPermanentAddress:!!((n=t==null?void 0:t.data)!=null&&n.isSameAsApplicantPermanentAddress),isSameAsResidentialAddress:!!((a=t==null?void 0:t.data)!=null&&a.isSameAsApplicantResAddress)}}}):c(o=>({...o,addressInfo:{...o.addressInfo,isAddressLoading:!1}}))}catch(t){I(y(t))}},we=async e=>{if(l&&e)try{const s=await Ce.getDetails(e);c(t=>{var o,n;return{...t,otherDetails:{...t.otherDetails,isOtherDetailsLoading:!1,otherDetailsData:zn((o=s==null?void 0:s.data)==null?void 0:o.permanentAddress,(n=s==null?void 0:s.data)==null?void 0:n.applicant)}}})}catch(s){I(y(s)),c(t=>({...t,otherDetails:{...t.otherDetails,isOtherDetailsLoading:!1}}))}},lt=async()=>{await de.getAll(0,200,"staticMasterType.code=EMPLOYMENT_NATURE&").then(t=>{var o,n;(o=t.data)!=null&&o.results&&((n=t.data)==null?void 0:n.results.length)>0?J(a=>({...a,EMPLOYMENT_NATURE_OPTION:[...t.data.results]})):console.log("error")})},It=async()=>{await no.getAll(0,200,"").then(t=>{var o,n;(o=t.data)!=null&&o.results&&((n=t.data)==null?void 0:n.results.length)>0?J(a=>({...a,INDUSTRY_OPTION:[...t.data.results??[]]})):console.log("error")})},yt=async()=>{await de.getAll(0,200,"staticMasterType.code=OCCUPATION_TYPE&").then(t=>{var o,n;(o=t.data)!=null&&o.results&&((n=t.data)==null?void 0:n.results.length)>0?J(a=>({...a,OCCUPATION_OPTION:[...t.data.results??[]]})):console.log("error")})},Dt=async()=>{await de.getAll(0,200,"staticMasterType.code=BUSINESS_MANAGED_BY&").then(t=>{var o,n;(o=t.data)!=null&&o.results&&((n=t.data)==null?void 0:n.results.length)>0?J(a=>({...a,BUSINESS_MANAGED_BY_OPTION:[...t.data.results??[]]})):console.log("error")})},ht=async()=>{await de.getAll(0,200,"staticMasterType.code=BUSINESS_SEASONALITY_TYPES&").then(t=>{t.data.results&&t.data.results.length>0?J(o=>({...o,SEASONALITY_OPTION:[...t.data.results??[]]})):console.log("error")})},gt=async()=>{await de.getAll(0,200,"staticMasterType.code=NO_OF_EMPLOYEES&").then(t=>{var o,n;(o=t.data)!=null&&o.results&&((n=t.data)==null?void 0:n.results.length)>0?J(a=>({...a,NO_EMPLOYEE_OPTION:[...t.data.results??[]]})):console.log("error")})},Et=async()=>{await de.getAll(0,200,"staticMasterType.code=ACCOUNT_TYPE&").then(t=>{t.data.results&&t.data.results.length>0?J(o=>({...o,ACCOUNT_OPTION:[...t.data.results??[]]})):console.log("error")})},De=async(e,s)=>{var t,o;if(s||c(n=>({...n,employmentInformation:{...n.employmentInformation,isEmploymentInfoLoading:!0}})),l&&e)try{const n=await Pe.getEmploymentDetails(l,e);if(V(n))if(((t=n==null?void 0:n.data)==null?void 0:t.length)>0){const a=(o=n==null?void 0:n.data)==null?void 0:o.map(d=>Jn(d));c(d=>({...d,employmentInformation:{employmentInfoList:[...a],isEmploymentInfoLoading:!1}}))}else c(a=>({...a,employmentInformation:{...a.employmentInformation,employmentInfoList:[{...$e}],isEmploymentInfoLoading:!1}}))}catch(n){console.log(n),c(a=>({...a,employmentInformation:{...a.employmentInformation,isEmploymentInfoLoading:!1}}))}},he=async(e,s)=>{var t,o;if(s||c(n=>({...n,bankAccount:{...n.bankAccount,isBankAccountInfoLoading:!0}})),l&&e)try{const n=await Se.getBankAccountDetails(l,e);if(V(n))if(((t=n==null?void 0:n.data)==null?void 0:t.length)>0){const a=(o=n==null?void 0:n.data)==null?void 0:o.map(d=>Zn(d));c(d=>({...d,bankAccount:{bankAccountInfoList:[...a],isBankAccountInfoLoading:!1}}))}else c(a=>({...a,bankAccount:{...a.bankAccount,isBankAccountInfoLoading:!1,bankAccountInfoList:[{...Xe}]}}))}catch{c(a=>({...a,bankAccount:{...a.bankAccount,isBankAccountInfoLoading:!1}}))}},ge=async e=>{c(s=>({...s,reference:{...s.reference,isReferenceDetailsLoading:!0}}));try{const s=await be.getReferences(0,20,l,e);if(V(s)){const{data:t}=s,o=t.map(n=>{var a,d,i,u,g,E,h,D,C,M,A,z,v,ie,ue,Ne;return{uid:n.uid??"",parentUid:((d=(a=n.applicant)==null?void 0:a.parent)==null?void 0:d.uid)??"",referenceApplicantUid:((i=n.applicant)==null?void 0:i.uid)??"",firstName:((u=n.applicant)==null?void 0:u.firstName)??"",middleName:((g=n.applicant)==null?void 0:g.middleName)??"",lastName:((E=n.applicant)==null?void 0:E.lastName)??"",mobileNo:((h=n.applicant)==null?void 0:h.mobileNo)??"",relationship:((D=n.applicant)==null?void 0:D.smRelationship)??"",address:n.address??"",pincode:{uid:((C=n.pincode)==null?void 0:C.uid)??"",pinCode:((M=n.pincode)==null?void 0:M.pinCode)??""},city:{uid:((A=n.city)==null?void 0:A.uid)??"",name:((z=n.city)==null?void 0:z.name)??""},state:((ie=(v=n.city)==null?void 0:v.state)==null?void 0:ie.name)??"",latitude:((ue=n.latitude)==null?void 0:ue.toString())??"",longitude:((Ne=n.longitude)==null?void 0:Ne.toString())??"",isActive:n.isActive??!0}});t.length?(c(n=>({...n,reference:{...n.reference,referenceInfoList:[...o],savedReferencesCount:o.length,isReferenceDetailsLoading:!1}})),es(t.length)):c(n=>({...n,reference:{...n.reference,referenceInfoList:[Qe],isReferenceDetailsLoading:!1}}))}}catch(s){c(t=>({...t,reference:{...t.reference,isReferenceDetailsLoading:!1}})),I(y(s))}},ve=async(e,s)=>{s||c(t=>({...t,investmentInfo:{...t.investmentInfo,isInvestmentInfoLoading:!0}}));try{const t=await Ge.getInvestmentInformation(0,20,l,e);if(V(t)){const{data:o}=t;c(n=>({...n,investmentInfo:{...n.investmentInfo,investmentInfoData:{...n.investmentInfo.investmentInfoData,investmentComments:o.commentOnInvestment??""},isInvestmentInfoLoading:!1}}))}}catch(t){c(o=>({...o,investmentInfo:{...o.investmentInfo,isInvestmentInfoLoading:!1}})),I(y(t))}},Ee=async e=>{var s,t;try{const o=await ze.getDocsByApplicantType(Ye.LOGIN,l,e);if(c(n=>({...n,otherDocInfo:{...n.otherDocInfo,isOtherDocInfoLoading:!0}})),V(o))if(((s=o==null?void 0:o.data)==null?void 0:s.length)>0){const n=(t=o==null?void 0:o.data)==null?void 0:t.map(a=>qn(a));c(a=>({...a,otherDocInfo:{...a.otherDocInfo,otherDocInfoList:[...n],isOtherDocInfoLoading:!1}}))}else c(n=>({...n,otherDocInfo:{...n.otherDocInfo,isOtherDocInfoLoading:!1}}))}catch(o){console.log(o),c(n=>({...n,otherDocInfo:{...n.otherDocInfo,isOtherDocInfoLoading:!1}})),I(y(o))}},as=e=>{var t,o;let s=(t=K==null?void 0:K.current)==null?void 0:t.getData();s=Kn(s),e.index!==k&&!((o=P==null?void 0:P[k])!=null&&o.uid)&&Pn(s)?(Me(!0),Fs(e.index)):e.index!==k&&(ce(),Q(e.index))},Nt=()=>{ce(),Q(Ks),Me(!1)},Ot=()=>{c(e=>({...e,kycDocuments:{...e.kycDocuments,aadharVerificationStatus:{verified:!1,failedToVerify:!1}}}))},rs=e=>{c(s=>({...s,addressInfo:{...s==null?void 0:s.addressInfo,[e.target.name]:e.checked,isSameAsResidentialAddress:e.target.name==="isSameAsResidentialAddress"?e.checked:s.addressInfo.isSameAsPermanentAddress,isSameAsPermanentAddress:e.target.name==="isSameAsPermanentAddress"?e.checked:s.addressInfo.isSameAsResidentialAddress}}))},Tt=async(e,s,t)=>{const{kycDocuments:{kycDocList:o}}=f;if(e!=null&&e.uid){const n=await us(e==null?void 0:e.uid,s),a=Rs(l,s,e,n,w.CO_APPLICANT);try{const d=await X.updateKycDocument(a,B.DDE);if(j(d)){const{data:i}=d,u=i.meta?JSON.parse(i.meta):null,g=D=>{var C,M;return D===Le.DOCUMENT_SECTIONS_FRONT_PAGE?((C=u==null?void 0:u.ocrResponse)==null?void 0:C.frontMaskedImageUrl)??"":D===Le.DOCUMENT_SECTIONS_BACK_PAGE?((M=u==null?void 0:u.ocrResponse)==null?void 0:M.backMaskedImageUrl)??"":""},E=D=>{var C;return((C=i.docType)==null?void 0:C.code)===bs.AADHAR_CARD?D.map(A=>({sectionUid:A.uid??"",fileName:A.fileName??"",fileType:A.fileType??"",sectionType:A.smDocSectionType??"",url:u?g(A.smDocSectionType):A.url})):D},h=o.map(D=>{var C;return D.uid===i.uid?{...D,docName:((C=i.docType)==null?void 0:C.code)??"",docNo:i.docNo,maskedDocNo:i.maskedDocNo??"",docSections:E(i.kycDocuments),dob:i.dob??""}:D});c(D=>({...D,kycDocuments:{...D.kycDocuments,kycDocList:[...h]}})),L(O.PRIMARY),T(b.SAVED),S(!N),te("BASIC_INFO",D=>{D.length-1<k&&Q((D==null?void 0:D.length)-1)})}}catch(d){I(y(d))}}else{const n=Hn(l,s,e,w.CO_APPLICANT);try{const a=await X.saveKycDocument(n,B.DDE);if($(a)){const{data:d}=a,i=d.meta?JSON.parse(d.meta):null,u=h=>{var D,C;return h===Le.DOCUMENT_SECTIONS_FRONT_PAGE?((D=i==null?void 0:i.ocrResponse)==null?void 0:D.frontMaskedImageUrl)??"":h===Le.DOCUMENT_SECTIONS_BACK_PAGE?((C=i==null?void 0:i.ocrResponse)==null?void 0:C.backMaskedImageUrl)??"":""},g=h=>{var D;return((D=d.docType)==null?void 0:D.code)===bs.AADHAR_CARD?h.map(M=>({sectionUid:M.uid??"",fileName:M.fileName??"",fileType:M.fileType??"",sectionType:M.smDocSectionType??"",url:i?u(M.smDocSectionType):M.url})):h},E=o.map((h,D)=>{var C;return D===t?{...h,uid:d.uid??"",docName:((C=d.docType)==null?void 0:C.code)??"",docNo:d.docNo??"",maskedDocNo:d.maskedDocNo??"",docSections:g(d.kycDocuments),dob:d.dob??""}:h});c(h=>{var D;return{...h,kycDocuments:{...h.kycDocuments,kycDocList:[...E],savedDocuments:[...h.kycDocuments.savedDocuments,(D=d.docType)==null?void 0:D.code],uniqueKycCardTracker:Be()}}}),L(O.PRIMARY),T(b.SAVED),S(!N),te("BASIC_INFO",h=>{h.length-1<k&&Q((h==null?void 0:h.length)-1)})}}catch(a){I(y(a))}}},Lt=async(e,s,t)=>{if(e.uid){const o=Rs(l,s,e,us(e==null?void 0:e.uid,s),w.CO_APPLICANT);try{const n=await X.updateKycDocument(o,B.DDE);j(n)&&(t!==void 0&&ms(t),L(O.QUATERNARY),T(b.REMOVED),S(!N))}catch(n){I(y(n))}}},St=async(e,s,t)=>{const{kycDocuments:{kycDocList:o,populateOcr:n}}=f,a=$n(l,s,n.uid,e,w.CO_APPLICANT);try{const d=await X.populateKycDocument(a,B.DDE);if($(d)){const{data:i}=d,u=o.map((g,E)=>{var h;return E===t?{...g,uid:i.uid,docName:((h=i.docType)==null?void 0:h.code)??"",docNo:i.docNo??"",dob:i.dob??""}:g});te("BASIC_INFO",g=>{g.length-1<k&&Q((g==null?void 0:g.length)-1)}),c(g=>({...g,kycDocuments:{...g.kycDocuments,kycDocList:[...u],uniqueKycCardTracker:Be(),populateOcr:{...g.kycDocuments.populateOcr,uid:i.uid??"",success:!0,failed:!1}}}))}}catch(d){c(i=>({...i,kycDocuments:{...i.kycDocuments,populateOcr:{...i.kycDocuments.populateOcr,success:!1,failed:!0}}})),I(y(d))}},Pt=async(e,s,t,o,n)=>{const a=Xn(l,t,e,s,w.CO_APPLICANT,n),{kycDocuments:{kycDocList:d}}=f;try{const i=await X.validateAadhar(a,B.DDE);if($(i)){const{data:u}=i,g=d.map((E,h)=>{var D;return h===o?{...E,uid:u.uid??"",docName:((D=u.docType)==null?void 0:D.code)??"",docNo:u.docNo??"",maskedDocNo:u.maskedDocNo??"",dob:u.dob??""}:E});te("BASIC_INFO",E=>{E.length-1<k&&Q((E==null?void 0:E.length)-1)}),c(E=>({...E,kycDocuments:{...E.kycDocuments,kycDocList:[...g],uniqueKycCardTracker:Be(),aadharVerificationStatus:{...E.kycDocuments.aadharVerificationStatus,verified:!0}}}))}}catch(i){c(u=>({...u,kycDocuments:{...u.kycDocuments,aadharVerificationStatus:{...u.kycDocuments.aadharVerificationStatus,failedToVerify:!0}}})),I(y(i))}},Ct=async e=>{var t,o;const s=(t=je.current)==null?void 0:t.save();if(s){const n=xs(s,l,e);try{let a=Ce.create;s.permanentAddressUid&&(a=Ce.update),await a(n),T(b.SAVED),L(O.PRIMARY),S(!N),we(e),(o=je.current)==null||o.onSaveSuccess()}catch(a){I(y(a))}}},bt=async(e,s)=>{var o,n,a,d;const t=(n=(o=F==null?void 0:F.current)==null?void 0:o[e])==null?void 0:n.save();if(t){const i=_s(t,l,s,w.CO_APPLICANT);if(t.uid)try{const u=await Pe.updateEmploymentDetail(i);j(u)&&(T(b.SAVED),L(O.PRIMARY),S(!N),(d=(a=F==null?void 0:F.current)==null?void 0:a[e])==null||d.onSaveSuccess(),De(s))}catch(u){I(y(u))}else try{const u=await Pe.createEmploymentDetail(i);$(u)&&(T(b.SAVED),L(O.PRIMARY),S(!N),De(s))}catch(u){console.log(u),I(y(u))}}},kt=async(e,s)=>{var o,n,a,d;const t=(n=(o=W==null?void 0:W.current)==null?void 0:o[e])==null?void 0:n.save();if(t){const i=Ms(t,l,s,w.CO_APPLICANT);if(t.uid)try{const u=await Se.updateBankAccountDetail(i);j(u)&&(T(b.SAVED),L(O.PRIMARY),S(!N),(d=(a=W==null?void 0:W.current)==null?void 0:a[e])==null||d.onSaveSuccess(),he(s))}catch(u){I(y(u))}else try{const u=await Se.createBankAccountDetail(i);$(u)&&(T(b.SAVED),L(O.PRIMARY),S(!N),he(s))}catch(u){console.log(u),I(y(u))}}},Rt=()=>{fe(e=>[...e,{firstName:"New Tab",key:ke()}]),qs(e=>!e)},xt=async(e,s)=>{if(e!=null&&e.uid)try{const t=await We.deleteApplicantInfo(e==null?void 0:e.uid);if(j(t)){if(T(b.SAVED),L(O.PRIMARY),S(!N),P.length===1){Ae(),Z(!1),ce();return}fs(s),Z(!1)}}catch(t){I(y(t)),Z(!1)}else{if(P.length===1){Ae(),Z(!1),ce();return}fs(s),Z(!1)}},_t=e=>{var t;const s=(t=K==null?void 0:K.current)==null?void 0:t.save();if(!s)return Promise.resolve(!0);if(s){!s.uid&&(e!=null&&e.uid)&&(s.uid=e==null?void 0:e.uid);const o=Fn(s,l,U,w.CO_APPLICANT);s.uid?qe.updateDde(o).then(n=>{j(n)&&(L(O.PRIMARY),T(b.SAVED),S(!N),le(!0),te("BASIC_INFO"))}).catch(n=>{I(y(n))}):qe.createBasicInformation(o).then(n=>{$(n)&&(L(O.PRIMARY),T(b.SAVED),S(!N),le(!0),is(),te("BASIC_INFO"))}).catch(n=>{I(y(n))})}},Mt=async e=>He.saveForDde(e).then(s=>{j(s)&&(ye(),L(O.PRIMARY),T(b.SAVED),S(!N),le(!0),c(t=>({...t,addressInfo:{...t.addressInfo,addressInfoPageMode:R.VIEW}})))}).catch(s=>{I(y(s))}),jt=async e=>He.save(e).then(s=>{$(s)&&(ye(),L(O.PRIMARY),T(b.SAVED),S(!N),le(!0),c(t=>({...t,addressInfo:{...t.addressInfo,addressInfoPageMode:R.VIEW}})))}).catch(s=>{I(y(s))}),wt=e=>{var o,n,a,d,i,u,g,E;const s=(o=ee==null?void 0:ee.current)==null?void 0:o.save(),t=(n=G==null?void 0:G.current)==null?void 0:n.getUploadedData();if(!s||!(t!=null&&t.documentUid))return Promise.resolve(!0);if(s&&t){const h=Wn({...s,uid:(d=(a=f.addressInfo)==null?void 0:a.address)==null?void 0:d.uid,isSameAsApplicantResAddress:(i=f.addressInfo)==null?void 0:i.isSameAsResidentialAddress,isSameAsApplicantPermanentAddress:(u=f.addressInfo)==null?void 0:u.isSameAsPermanentAddress,addressDocumentsInfo:t??{}},l,e,w.CO_APPLICANT);(E=(g=f.addressInfo)==null?void 0:g.address)!=null&&E.uid?Mt(h):jt(h)}},vt=()=>{c(e=>({...e,basicInformation:{...e.basicInformation,basicInfoPageMode:R.CREATE}}))},Bt=()=>{var e;(e=K==null?void 0:K.current)==null||e.cancel(),c(s=>({...s,basicInformation:{...s.basicInformation,basicInfoPageMode:R.VIEW}}))},is=()=>{c(e=>({...e,addressInfo:{...e.addressInfo,addressInfoPageMode:R.CREATE}}))},At=()=>{var e,s,t;(e=ee==null?void 0:ee.current)==null||e.resetValidator(),(s=G==null?void 0:G.current)==null||s.resetValidator(),(t=G==null?void 0:G.current)==null||t.resetDocUpload(),ye(!0),c(o=>({...o,addressInfo:{...o.addressInfo,addressInfoPageMode:R.VIEW}}))},Vt=e=>{const s=[];s.push(mn),e&&s.push(()=>De(e)),s.forEach(t=>t())},Ut=e=>{const s=[];s.push(fn),e&&s.push(()=>he(e)),s.forEach(t=>t())},Yt=async(e,s)=>{var o;const t=(o=se==null?void 0:se.current)==null?void 0:o[e].save();if(t.uid){const n=Ke(l,s,t,U);try{const a=await be.updateReference(n,B.DDE);j(a)&&(ge(s),L(O.PRIMARY),T(b.SAVED),S(!N))}catch(a){I(y(a))}}else{const n=Ke(l,s,t,U);try{const a=await be.saveReferences(n,B.DDE);$(a)&&(ge(s),L(O.PRIMARY),T(b.SAVED),S(!N))}catch(a){I(y(a))}}},Kt=async(e,s)=>{var n;const t=(n=se==null?void 0:se.current)==null?void 0:n[e].remove(),o=Ke(l,s,t,U);try{const a=await be.updateReference(o,B.DDE);j(a)&&(ge(s),L(O.QUATERNARY),T(b.REMOVED),S(!N))}catch(a){I(y(a))}},Ft=()=>{const e={...$e};c(s=>({...s,employmentInformation:{...s.employmentInformation,employmentInfoList:[...s.employmentInformation.employmentInfoList,e]}}))},Wt=async e=>{var o;const s=(o=Ie==null?void 0:Ie.current)==null?void 0:o.save(),t=js(l,e,s,w.CO_APPLICANT);try{const n=await Ge.updateInvestmentInformation(t,B.DDE);j(n)&&(ve(e),L(O.PRIMARY),T(b.SAVED),S(!N),c(a=>({...a,investmentInfo:{...a.investmentInfo,sectionMode:R.VIEW}})))}catch(n){I(y(n))}},Gt=async(e,s)=>{const t=js(l,s,e,w.CO_APPLICANT);try{const o=await Ge.updateInvestmentInformation(t,B.DDE);j(o)&&ve(s,!0)}catch(o){I(y(o))}},zt=()=>{c(e=>({...e,investmentInfo:{...e.investmentInfo,sectionMode:R.VIEW}}))},qt=()=>{const e={...Xe};c(s=>({...s,bankAccount:{...s.bankAccount,bankAccountInfoList:[...s.bankAccount.bankAccountInfoList,e]}}))},Ht=()=>{c(e=>({...e,investmentInfo:{...e.investmentInfo,sectionMode:R.CREATE}}))},$t=(e,s)=>{s?(L(O.QUATERNARY),T(e),S(!N)):I(e)},Xt=e=>{e&&ge(e)},Qt=e=>{e&&we(e)},Jt=e=>{e&&ve(e)},Zt=e=>{e&&ft(e)},pt=e=>{e&&Ee(e)},en=async(e,s)=>{var o,n;const t=(n=(o=F==null?void 0:F.current)==null?void 0:o[e])==null?void 0:n.remove();if(t){const a=_s(t,l,s,w.CO_APPLICANT);if(t.uid)try{const d=await Pe.updateEmploymentDetail(a);j(d)&&(De(s),T(b.REMOVED),L(O.QUATERNARY),S(!N))}catch(d){I(y(d))}else{const d=f.employmentInformation.employmentInfoList.filter((i,u)=>u!==e);c(i=>({...i,employmentInformation:{...i.employmentInformation,employmentInfoList:[...d]}}))}}},sn=async(e,s)=>{var o,n;const t=(n=(o=W==null?void 0:W.current)==null?void 0:o[e])==null?void 0:n.remove();if(t){const a=Ms(t,l,s,w.CO_APPLICANT);if(t.uid)try{const d=await Se.updateBankAccountDetail(a);j(d)&&(he(s),T(b.REMOVED),L(O.QUATERNARY),S(!N))}catch(d){I(y(d))}else{const d=f.bankAccount.bankAccountInfoList.filter((i,u)=>u!==e);c(i=>({...i,bankAccount:{...i.bankAccount,employmentInfoList:[...d]}}))}}},tn=async(e,s)=>{const t=xs(e,l,s);if(t)try{const o=await Ce.update(t);j(o)&&we(s)}catch(o){I(y(o))}},nn=e=>{const{reference:{referenceInfoList:s}}=f,t=s.filter((o,n)=>n!==e);c(o=>({...o,reference:{...o.reference,referenceInfoList:[...t]}}))},ds=async(e,s)=>X.getPopulateDocumentByKyc(l,e).then(t=>{var o;if(V(t)){const[n,a,d]=((o=t==null?void 0:t.data)==null?void 0:o.name.split(" "))??"";t.data={...t.data,firstName:n,middleName:a,lastName:d},Hs(t.data),s===Te.ADDRESS&&Js(i=>!i),s===Te.BASIC_INFO&&Xs(i=>!i)}}).catch(t=>{I(y(t))}),on=()=>{const{reference:{referenceInfoList:e}}=f,s={...Qe,listId:`ref-card-${tt+1}`};es(t=>t+1),c(t=>({...t,reference:{...t.reference,referenceInfoList:[...e,s]}}))},cs=()=>{const e={listId:`kyc-card-${et+1}`,uid:"",docName:"",docNo:"",maskedDocNo:"",dob:"",docSections:[],isVerified:!1};st(s=>s+1),c(s=>({...s,kycDocuments:{...s.kycDocuments,kycDocList:[...s.kycDocuments.kycDocList,e],populateOcr:{uid:"",success:!1,failed:!1}}}))},an=()=>{const e={...Vs,listKey:Math.random().toString(36).substring(2)};c(s=>({...s,otherDocInfo:{...s.otherDocInfo,otherDocInfoList:[...s.otherDocInfo.otherDocInfoList,e]}}))},rn=async e=>{var t;const s=(t=ns.current)==null?void 0:t.save();if(s)try{const o=await ze.saveDocument(Ye.LOGIN,B.DDE,s);j(o)&&(c(n=>({...n,otherDocInfo:{...n.otherDocInfo,isOtherDocInfoLoading:!0,sectionMode:R.VIEW}})),Ee(e),L(O.PRIMARY),T(b.SAVED),S(!N))}catch(o){console.log(o),I(y(o))}},dn=e=>{Ee(e),c(s=>({...s,otherDocInfo:{...s.otherDocInfo,sectionMode:R.VIEW}}))},cn=async(e,s,t)=>{if(s.uid){const o={...s};o.isActive=!1;const n=Qn([o],{loanUid:l,applicantUid:e,loanSectionKey:ks.applicants});try{const a=await ze.saveDocument(Ye.LOGIN,B.DDE,n);j(a)&&(c(d=>({...d,otherDocInfo:{...d.otherDocInfo,isOtherDocInfoLoading:!0}})),Ee(e),L(O.QUATERNARY),T(b.REMOVED),S(!N))}catch(a){console.log(a),I(y(a))}}t!==void 0&&yn(t)},un=()=>{mt(),te()},mn=()=>{lt(),It(),yt(),Dt(),ht(),gt()},fn=()=>{Et()},ln=async e=>{try{const s=await X.getKycDocument(l,e);if(V(s)){const{data:t}=s;return t}}catch(s){I(y(s))}},us=async(e,s)=>(await ln(s))[e],Be=()=>{const{kycDocuments:{uniqueKycCardTracker:e}}=f,s=[...e];return s.splice(s.length-1,1),[...s]},In=e=>{c(s=>({...s,kycDocuments:{...s.kycDocuments,uniqueKycCardTracker:[...e]}}))},ms=e=>{const{kycDocuments:{kycDocList:s}}=f,t=s.filter((o,n)=>n!==e);c(o=>({...o,kycDocuments:{...o.kycDocuments,kycDocList:[...t]}}))},yn=e=>{c(s=>{const t=f.otherDocInfo.otherDocInfoList.filter((o,n)=>n!==e);return{...s,otherDocInfo:{...s.otherDocInfo,otherDocInfoList:[...t]}}})},fs=e=>{const s=[...P];e>=0&&e<P.length&&(s.splice(e,1),fe(s),e+1===P.length-1&&k===e+1||(e===P.length-1&&k===e||e!==P.length-1&&k===P.length-1||e<k?setTimeout(()=>{Q(k-1)},5):e===k&&(ce(),Gs(t=>!t))))},Ae=()=>{fe([{firstName:"New Tab",key:ke()}])},ls=e=>{c(s=>{var t,o,n,a,d,i;return{...s,addressInfo:{...s.addressInfo,address:{...s.addressInfo.address,address:e==null?void 0:e.address,pincode:{pinCode:(t=e==null?void 0:e.pincode)==null?void 0:t.pinCode,uid:(o=e==null?void 0:e.pincode)==null?void 0:o.uid},city:{name:(n=e==null?void 0:e.city)==null?void 0:n.name,uid:(a=e==null?void 0:e.city)==null?void 0:a.uid},state:(i=(d=e==null?void 0:e.city)==null?void 0:d.state)==null?void 0:i.name,latitude:e==null?void 0:e.latitude,longitude:e==null?void 0:e.longitude,smAddressType:e==null?void 0:e.smAddressType}}}})},ce=()=>{c({...As})},Dn=()=>{c(e=>({...e,basicInformation:{...e.basicInformation,isBasicInfoLoading:!0},addressInfo:{...e.addressInfo,isAddressLoading:!0},kycDocuments:{...e.kycDocuments,isKycLoading:!0},otherDetails:{...e.otherDetails,isOtherDetailsLoading:!0},employmentInformation:{...e.employmentInformation,isEmploymentInfoLoading:!0},bankAccount:{...e.bankAccount,isBankAccountInfoLoading:!0},reference:{...e.reference,isReferenceDetailsLoading:!0},investmentInfo:{...e.investmentInfo,isInvestmentInfoLoading:!0},otherDocInfo:{...e.otherDocInfo,isOtherDocInfoLoading:!0}}))},Ve=e=>({ocrStageName:Cs.LOGIN,ocrSubstageName:B.DDE,ocrPayloadData:{loanUid:l,applicant:{uid:e}}}),hn=m.useMemo(()=>Y,[$s]),gn=e=>{const{basicInfoPageMode:s,basicInfo:t,isBasicInfoLoading:o}=f.basicInformation;return r.jsx(Mn,{ref:K,relationship:!0,type:"DDE",pageMode:s,data:t,isLoading:o,prePopulated:hn,ocrRelatedData:Ve(e==null?void 0:e.uid)})},En=()=>{const{addressInfoPageMode:e,isSameAsPermanentAddress:s,isSameAsResidentialAddress:t}=f.addressInfo;return console.log("addressInfo ",f.addressInfo),r.jsxs("div",{className:"flex space-x-4 items-center",children:[r.jsx("div",{className:"",children:r.jsx(Oe,{className:"text-primary-sideBarBgColor text-sm font-bold",label:"label.heading.residential.address"})}),r.jsx("div",{className:"flex items-center space-x-2",children:r.jsxs("div",{className:"ml-4 grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"flex col-span-1",children:[r.jsx(ws,{hideLabel:!0,hideErrorRow:!0,name:"isSameAsResidentialAddress",className:"flex items-center",onChange:rs,value:t,checked:t===!0,disabled:e===R.VIEW}),r.jsx("div",{className:"ml-2 flex items-top",children:r.jsx(Oe,{className:"text-xs",label:"label.checkbox.residentialAddress"})})]}),r.jsxs("div",{className:"flex col-span-1",children:[r.jsx(ws,{hideLabel:!0,hideErrorRow:!0,name:"isSameAsPermanentAddress",className:"flex items-center",onChange:rs,value:s,checked:s===!0,disabled:e===R.VIEW}),r.jsx("div",{className:"ml-2 flex items-top",children:r.jsx(Oe,{className:"text-xs",label:"label.checkbox.permanentAddress"})})]})]})})]})},Nn=e=>{var n;const{addressInfoPageMode:s,address:t,isAddressLoading:o}=f.addressInfo;return o?r.jsx(eo,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"}):r.jsxs(xn,{ref:ee,variant:"PRIMARY",pageMode:s,data:t,children:[r.jsx(so,{label:"label.text.address.proof*",value:"Attach Documents (PDF, JPG, JPEG or PNG)",titleClass:"text-primary-sideBarBgColor text-sm font-bold mb-1"}),r.jsx(jn,{ref:G,mode:s,mandatoryDocUpload:!0,savedDocument:(n=t.loanDocuments)!=null&&n[0]?t.loanDocuments[0]:{},queryParamForDocList:Ue.DOCUMENT_CATEGORY_ADDRESS_PROOF,ocrStageName:Cs.LOGIN,ocrSubstageName:B.DDE,ocrPayloadData:{loanUid:l,applicant:{uid:e==null?void 0:e.uid}}})]})},Is=e=>{const{isKycLoading:s,kycDocList:t,uniqueKycCardTracker:o,populateOcr:n,aadharVerificationStatus:a}=f.kycDocuments;return r.jsx("div",{className:"grid grid-cols-2 gap-5",children:t.map((d,i)=>r.jsx("div",{children:r.jsx(vn,{mode:"EDIT",isLoading:s,uid:d.uid,documentListIndex:i,docName:d.docName,docNo:d.docNo,dateOfBirth:d.dob,docSections:d.docSections,maskedDocNo:d.maskedDocNo,isVerified:d.isVerified,removeDocumentInList:ms,cardNameList:o,handlerCardNameList:In,ocrStatus:n,onSave:(u,g)=>Tt(u,e==null?void 0:e.uid,g),onRemove:(u,g)=>{Lt(u,e==null?void 0:e.uid,g)},onPopulate:(u,g)=>St(u,e==null?void 0:e.uid,g),onVerifyAadhar:(u,g,E,h)=>Pt(u,g,e==null?void 0:e.uid,E,h),aadharVerificationStatus:a,handlerAadharVerificationStatus:Ot,placeOfUpload:Bn.LOGIN_APPLICANT})},`document-${d.listId}`))})},ys=e=>{const{otherDetailsData:s,isOtherDetailsLoading:t}=f.otherDetails;return r.jsx(ao,{variant:bn.SECONDARY,disabled:!(e!=null&&e.uid),ref:je,data:s,isLoading:t,addressDetails:{residentialAddress:_.residential,permanentAddress:_.permanent},onSaveDetails:()=>Ct(e==null?void 0:e.uid),onError:$t,onDeleteDocs:o=>tn(o,e==null?void 0:e.uid),page:kn.CO_APPLICANT})},Ds=e=>{const{employmentInfoList:s,isEmploymentInfoLoading:t}=f.employmentInformation;return r.jsx("div",{className:"flex flex-col gap-4",children:s==null?void 0:s.map((o,n)=>r.jsx(ro,{disabled:!(e!=null&&e.uid),ref:a=>{F.current[n]=a},pageType:Rn.CO_APPLICANT,cardNumber:n+1,data:o,documentCategory:Ue.DOCUMENT_CATEGORY_BUSINESS_PROOF,isLoading:t,dropDownOptions:Ze,addressDetails:{residentialAddress:_.residential,permanentAddress:_.permanent},ocrRelatedData:Ve(e==null?void 0:e.uid),onRemoveEmploymentDetails:()=>en(n,e==null?void 0:e.uid),onSaveEmploymentDetails:()=>bt(n,e==null?void 0:e.uid)},o==null?void 0:o.uid))})},hs=e=>{const{bankAccountInfoList:s,isBankAccountInfoLoading:t}=f.bankAccount;return r.jsx("div",{className:"flex flex-col gap-4",children:s==null?void 0:s.map((o,n)=>r.jsx(uo,{disabled:!(e!=null&&e.uid),ref:a=>{W.current[n]=a},cardNumber:n+1,data:o,documentCategory:Ue.DOCUMENT_CATEGORY_BANK_ACCOUNT_DOCUMENT,dropDownOptions:Ze,isLoading:t,ocrRelatedData:Ve(e==null?void 0:e.uid),onRemoveBankAccountDetails:()=>sn(n,e==null?void 0:e.uid),onSaveBankAccountDetails:()=>kt(n,e==null?void 0:e.uid)},o==null?void 0:o.uid))})},gs=e=>{const{reference:{referenceInfoList:s,isReferenceDetailsLoading:t}}=f;return s.map((o,n)=>r.jsx(io,{listIndex:n,isLoading:t,pageObjData:o,ref:a=>{se.current[n]=a},onDeleteFromList:nn,onSaveReferences:()=>Yt(n,e==null?void 0:e.uid),onRemoveReference:()=>Kt(n,e==null?void 0:e.uid),disabled:!(e!=null&&e.uid)},`applicant-${o.listId}`))},Es=e=>{const{investmentInfo:{investmentInfoData:s,isInvestmentInfoLoading:t,sectionMode:o}}=f;return r.jsx(co,{ref:Ie,loanUid:l,pageId:e==null?void 0:e.uid,isLoading:t,sectionMode:o,savedInvestmentInfo:s,onSaveInvestmentInfo:()=>Wt(e==null?void 0:e.uid),onDeleteInvestmentProof:n=>{Gt(n,e==null?void 0:e.uid)},onCancel:zt,onEdit:Ht,disabled:!(e!=null&&e.uid)})},Ns=e=>r.jsx(Fe,{title:"",pageMode:f.otherDocInfo.sectionMode,onSave:()=>rn(e==null?void 0:e.uid),onCancel:()=>{dn(e==null?void 0:e.uid)},onEdit:()=>c(s=>({...s,otherDocInfo:{...s.otherDocInfo,sectionMode:R.CREATE}})),disabled:!(e!=null&&e.uid),children:r.jsx(Gn,{ref:ns,isLoading:f.otherDocInfo.isOtherDocInfoLoading,otherDocumentsData:f.otherDocInfo.otherDocInfoList,sectionMode:f.otherDocInfo.sectionMode,payloadInfo:{loanUid:l,applicantUid:e==null?void 0:e.uid,loanSectionKey:ks.applicants},onRemoveDocFromList:(s,t)=>{cn(e==null?void 0:e.uid,s,t)}})}),On=(e,s)=>r.jsxs("div",{className:"flex flex-col gap-4",children:[!(e!=null&&e.uid)&&r.jsx(H,{title:"KYC Documents",alertText:"Either PAN or Form - 60 are mandatory",className:"mt-5 ",children:r.jsxs(ne.Fragment,{children:[Is(e),r.jsx("div",{className:"p-5 w-full rounded-xl bg-slate-100 mt-5",children:r.jsx(ae,{buttonType:oe.ICON_TEXT_ROW,customLabel:"Add Another Document",onClick:cs})})]})}),r.jsx(H,{title:"heading.basicInformation",children:r.jsxs(r.Fragment,{children:[r.jsx(Fe,{pageMode:f.basicInformation.basicInfoPageMode,onEdit:vt,onSave:()=>_t(e),onCancel:Bt,onPrePopulate:()=>ds(e==null?void 0:e.uid,Te.BASIC_INFO),disablePrePopulate:!(e!=null&&e.uid),disabled:!(e!=null&&e.uid),children:gn(e)}),r.jsx(Fe,{disabled:!(e!=null&&e.uid),pageMode:f.addressInfo.addressInfoPageMode,onEdit:is,onSave:()=>wt(e==null?void 0:e.uid),onCancel:At,renderHeaderContent:En,onPrePopulate:()=>ds(e==null?void 0:e.uid,Te.ADDRESS),children:Nn(e)})]})}),(e==null?void 0:e.uid)&&r.jsx(H,{title:"KYC Documents",alertText:"Either PAN or Form - 60 are mandatory",children:r.jsxs(re,{onLazyLoad:()=>Zt(e==null?void 0:e.uid),children:[Is(e),r.jsx("div",{className:"p-5 w-full rounded-xl bg-slate-100 mt-5",children:r.jsx(ae,{buttonType:oe.ICON_TEXT_ROW,customLabel:"Add Another Document",onClick:cs})})]})}),r.jsx(H,{title:"heading.dde.otherDetails",children:e!=null&&e.uid?r.jsx(re,{onLazyLoad:()=>Qt(e==null?void 0:e.uid),children:ys(e)}):r.jsx(ne.Fragment,{children:ys(e)})}),r.jsx(H,{title:"heading.dde.employmentInformation",children:e!=null&&e.uid?r.jsxs(re,{onLazyLoad:()=>Vt(e==null?void 0:e.uid),children:[Ds(e),r.jsx("div",{className:"p-5 w-full rounded-xl bg-slate-100 mt-5",children:r.jsx(ae,{buttonType:oe.ICON_TEXT_ROW,customLabel:"label.dde.add.another.employmentDetail",onClick:Ft})})]}):r.jsx(ne.Fragment,{children:Ds(e)})}),r.jsx(H,{title:"heading.dde.bankAccount.details",children:e!=null&&e.uid?r.jsxs(re,{onLazyLoad:()=>Ut(e==null?void 0:e.uid),children:[hs(e),r.jsx("div",{className:"p-5 w-full rounded-xl bg-slate-100 mt-5",children:r.jsx(ae,{buttonType:oe.ICON_TEXT_ROW,customLabel:"label.dde.add.another.bankAccount.details",onClick:qt})})]}):r.jsx(ne.Fragment,{children:hs(e)})}),r.jsx(H,{title:"heading.references",alertText:"At least two references are mandatory",children:e!=null&&e.uid?r.jsxs(re,{onLazyLoad:()=>Xt(e==null?void 0:e.uid),children:[r.jsx("div",{className:"flex flex-col gap-4",children:gs(e)}),r.jsx("div",{className:"p-5 mt-5 w-full rounded-xl bg-slate-100 ",children:r.jsx(ae,{buttonType:oe.ICON_TEXT_ROW,customLabel:"Add Another Reference",onClick:on})})]}):r.jsx("div",{className:"flex flex-col gap-4",children:gs(e)})}),r.jsx(H,{title:"heading.investmentInformation",children:e!=null&&e.uid?r.jsx(re,{onLazyLoad:()=>Jt(e==null?void 0:e.uid),children:Es(e)}):r.jsx(ne.Fragment,{children:Es(e)})}),r.jsx(H,{title:"label.heading.otherDocuments",children:e!=null&&e.uid?r.jsxs(re,{onLazyLoad:()=>pt(e==null?void 0:e.uid),children:[Ns(e),r.jsx("div",{className:"p-5 w-full rounded-xl bg-slate-100 mt-5",children:r.jsx(ae,{buttonType:oe.ICON_TEXT_ROW,customLabel:"Add Another Document",onClick:an})})]}):r.jsx(ne.Fragment,{children:Ns(e)})})]},e==null?void 0:e.key),Tn=()=>r.jsx(Oe,{className:"",label:`( ${P.length>1?`${P.length} Co-Applicants`:`${P.length} Co-Applicant`} )`});return Re?r.jsx(Cn,{}):r.jsxs(ne.Fragment,{children:[r.jsxs("div",{className:"scrollable-tab dynamic-tab relative deleteable-header ",children:[r.jsx(pn,{showTooltip:!0,enableTabMenu:!0,scrollable:!0,tabHeaderMenuModel:(e,s)=>dt(e,s),optionLabel:["firstName","middleName","lastName"],optionKey:["uid","key"],headerClassName:"dynamic-header",ref:it,activeIndex:k,tabs:P,onTabChange:as,renderContent:On}),r.jsxs("div",{className:"absolute top-0 right-0 text-[#A3A3A3] text-xs flex justify-evenly items-center w-[15%] space-x-4 pb-2.5 border-b",children:[Tn(),r.jsx("div",{className:"",children:r.jsx(ae,{buttonType:oe.ICON_BUTTON_ADD,onClick:Rt})})]})]}),r.jsx(to,{position:nt,ref:p,toastText:xe,variant:ss}),r.jsx(wn,{onHide:()=>{ts(!1),I("")},visible:rt,errorMessage:_e}),r.jsx(vs,{visible:ot,className:"w-76 !px-14",title:"Remove Co-Applicant ?",warningMessage:`Co-Applicant ${(Ss=q==null?void 0:q.coApplicant)==null?void 0:Ss.firstName} will be removed`,onCancel:()=>Z(!1),onConfirm:()=>{xt(q==null?void 0:q.coApplicant,q==null?void 0:q.index)},onHide:()=>{}}),r.jsx(vs,{visible:at,className:"w-76 !px-14",title:"Discard added data ?",warningMessage:"Your data will be lost if not saved before navigating to a different tab",onCancel:()=>Me(!1),onConfirm:Nt,onHide:()=>{}})]})};export{ba as default};
//# sourceMappingURL=PageCoApplicants-1358c0b9.js.map
