var qs=Object.defineProperty;var zs=(ce,x,B)=>x in ce?qs(ce,x,{enumerable:!0,configurable:!0,writable:!0,value:B}):ce[x]=B;var Pt=(ce,x,B)=>(zs(ce,typeof x!="symbol"?x+"":x,B),B);import{at as Js,r as o,aG as q,R as ke,ad as Ce,ae as qe,af as ze,eW as Is,v as Z,ao as k,eY as Xs,b2 as Ke,j as t,J as Xe,aF as b,T as fe,d$ as He,o as Re,b3 as it,q as ys,c8 as gt,d9 as Fe,d7 as De,dc as Lt,dd as cs,aH as ne,aw as Qe,eZ as Qs,cn as bs,d4 as Ie,cj as Zs,eX as ps,K as ea,de as ta,d8 as ls}from"./index-e8217573.js";import{B as Ze}from"./ButtonBox-9e46519a.js";import{L as ht}from"./LazyLoader-70599949.js";import{R as Gt}from"./RichTextEditor-a03bd2fb.js";import{S as ot}from"./SaveComponent-160c5b32.js";import{S as sa}from"./SimpleTab-27fa8860.js";import{S as pe}from"./Skeleton-7e12d019.js";import{T as xs}from"./TextData-06df331b.js";import{T as wt}from"./Toast-ae99ea5b.js";import{A as Ns}from"./Address-75e58af3.js";import{D as Ss,c as Ts}from"./DocumentUploader-e2ec1a13.js";import{E as Dt}from"./ErrorDialog-d5eef4d7.js";import{S as rt}from"./Section-00ef9f2b.js";import{W as us}from"./WarningDialog-77a1cb18.js";import{A as Ht}from"./ApplicantService-924aa5cb.js";import{S as Ge}from"./StaticMasterDataService-689a6eca.js";import{A as $t}from"./AddressService-27926b64.js";import{B as Rt}from"./BankAccountDetailsService-375c75c8.js";import{O as ms,I as jt}from"./InvestmentInfoService-9f211f25.js";import{B as Ct}from"./BasicInformation-dd84bcb0.js";import{E as aa,r as na,t as ra,f as Qt,F as ia,C as oa,O as da,L as fs,S as qt,h as ca,G as la,H as ua,x as hs,I as ma,J as fa,K as ha,M as gs,y as ga,A as Da,N as Ia}from"./Helper-03e9d878.js";import{B as ya}from"./BankAccountDetails-e32209b8.js";import{O as zt}from"./OtherDocumentService-d3804bc8.js";import{E as Os,C as $e}from"./EditableTableV2-6afcb42b.js";import{I as Es,B as vs}from"./IconButton-36693dd9.js";import{I as et}from"./InputBox-b9e88f52.js";import{S as Zt}from"./SimpleDropDown-061a3470.js";import{F as Ps}from"./FinancialService-0c38c3ed.js";import{I as Ls}from"./InputTextArea-b90aad1d.js";import{i as ba,O as xa}from"./OrganisationDetails-d4c0c611.js";import{a as Na}from"./CustomHooks-0ce50620.js";import{P as Sa}from"./Pincode-a7c9b067.js";import{I as Ta}from"./InputAddon-04f948e7.js";import{a as Ve,K as Oa}from"./KYCV3-298daeeb.js";import{b as Ea}from"./MediaGallery-5884b284.js";import{S as va}from"./SystemDatePicker-abe08a29.js";import"./kebab-menu-8835ad2e.js";import"./index-8739acfd.js";import"./link-0172a3d4.js";import"./loader-5f2cfb31.js";import"./FileUploadMenuBox-f47dc693.js";import"./MenuBox-defc36b0.js";import"./TransitionGroup-c8afe0ce.js";import"./AutoComplete-0bca608a.js";import"./search_icon-459d6871.js";import"./withAuth-6de36ebf.js";import"./virtualscroller.esm-9939945c.js";import"./Dialog-adadaf64.js";import"./esm-70d64670.js";import"./TextButton-41b4a67e.js";import"./City-7102c574.js";import"./DatePicker-b1c13861.js";import"./FileUploadCustom-5ab7fd25.js";import"./Loading-783a01c7.js";import"./FileUploadService-1aaf11f7.js";import"./DocumentService-a293b5f4.js";import"./datatable.esm-f474a654.js";import"./paginator.esm-11c2c115.js";import"./sortIcon-54357a29.js";import"./Download_Icon-51fc7f46.js";import"./eye_icon-081bddb3.js";const Jt="/custom/api/login";class Pa extends Js{constructor(){super(...arguments);Pt(this,"getCorporatePartnerDirectors",(B,re)=>{const Oe=Jt+`/${B}/${re}/corporate/director`;return this.makeGetRequestWithAuth(Oe)});Pt(this,"createCorporatePartnerDirectors",B=>{const re=Jt+"/dde/corporate/director";return this.makePostRequestWithAuth(re,B)});Pt(this,"updateCorporatePartnerDirectors",B=>{const re=Jt+"/dde/corporate/director";return this.makePutRequestWithAuth(re,B)})}}const Xt=new Pa,La={uid:"",smFinancialYear:"",turnOver:"",profitAsPerPandL:"",capitalNetWorth:"",isActive:!0},Ra=o.forwardRef((ce,x)=>{const{loanUid:B,pageId:re,isLoading:Oe,sectionMode:Y,onSaveHistoricalFinInfo:je,onCancel:z,onEdit:Me,disabled:H}=ce,[Ee,ye]=o.useState([]),[we,he]=o.useState("bottom-right"),[E,M]=o.useState(""),[p,ve]=o.useState(q.PRIMARY),[ee,Pe]=o.useState(!1),[be,te]=o.useState(""),[Q,ie]=o.useState(!1),R=o.useRef(null),N=ke.useRef(null),[,m]=o.useState(!1),w=o.useRef(new Ce({validators:{...qe()},...ze(),autoForceUpdate:{forceUpdate:()=>m(r=>!r)}}));o.useEffect(()=>{Ue()},[]),o.useEffect(()=>{var r;R!=null&&R.current&&E!==""&&((r=R==null?void 0:R.current)==null||r.showFunction(),M(""))},[E,ee]),o.useEffect(()=>{be&&ie(!0)},[be]);const Ue=async()=>{await Be(),xe()},Be=async()=>{var r;try{const l=await Ge.getDropdownList(Is.FINANCIAL_YEAR,!0);if(Z(l)&&l.data.totalRecords){const{data:T}=l,j=(r=T.results)==null?void 0:r.map(f=>({uid:f.uid??"",label:f.name??"",value:f.name??""}));ye([...j])}else ye([])}catch(l){ye([]),te(k(l))}};o.useImperativeHandle(x,()=>({props:ce,save:$,editableTableRef:xe,resetTable:J}));const tt=(r,l)=>{var j;const T={...l};T.smFinancialYear=r.target.value,(j=N.current)==null||j.reportDataChange(T)},Ye=()=>{var r;(r=N.current)==null||r.addRow(La),de()},$=()=>{var j,f,A;if(!F())return;let r={hfd:[...((j=N.current)==null?void 0:j.getAddedRecords())??[],...((f=N.current)==null?void 0:f.getDeletedRecords())??[],...((A=N.current)==null?void 0:A.getUpdatedRecords())??[]]};if(!(()=>{for(let L=0;L<r.hfd.length;L++)if(r.hfd[L].turnOver===""&&r.hfd[L].profitAsPerPandL===""&&r.hfd[L].capitalNetWorth==="")return!1;return!0})()){ve(q.SECONDARY),M(Xs.HISTORICALFINDETAILS_VALIDATION),Pe(!ee);return}return r={hfd:r.hfd.map(L=>{var Ne,ae,ue;return{...L,turnOver:`${Ke((Ne=L.turnOver)==null?void 0:Ne.toString())}`,profitAsPerPandL:`${Ke((ae=L.profitAsPerPandL)==null?void 0:ae.toString())}`,capitalNetWorth:`${Ke((ue=L.capitalNetWorth)==null?void 0:ue.toString())}`}})},r},xe=()=>{var r;(r=N.current)==null||r.search()},J=()=>{var r,l;(r=N.current)==null||r.clearAll(),(l=N.current)==null||l.reset()},K=()=>{var r,l;de(),(r=N.current)==null||r.clearAll(),(l=N.current)==null||l.search(),z==null||z()},C=r=>{var l;(l=N.current)==null||l.deleteRow(r),w.current=new Ce({validators:{...qe()},...ze(),autoForceUpdate:{forceUpdate:()=>m(T=>!T)}})},me=r=>{var l,T;(T=w==null?void 0:w.current)==null||T.showMessageFor((l=r==null?void 0:r.target)==null?void 0:l.name)},F=()=>{var l,T;let r=!1;return r=(l=w==null?void 0:w.current)==null?void 0:l.allValid(),r||(m(j=>!j),(T=w==null?void 0:w.current)==null||T.showMessages(),m(j=>!j),!1)},de=()=>{var r;w.current=new Ce({validators:{...qe()},...ze(),autoForceUpdate:{forceUpdate:()=>m(l=>!l)}}),(r=w==null?void 0:w.current)==null||r.hideMessages()},le=r=>it(r,"en-IN",0),D=()=>t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"mt-3 flex flex-col gap-5",children:[t.jsx("div",{className:"self-end",children:t.jsx(Ze,{buttonType:Xe.ICON_TEXT_ROW,customLabel:"Add",onClick:Ye,disabled:Y===b.VIEW})}),t.jsx("div",{children:B&&re?t.jsxs(Os,{ref:N,uniqueKey:"uid",standardDataFormatPromise:Ps.getAllCorporateHistorical,search:`&loan.uid=${B}&applicant.uid=${re}&isActive=${!0}&smAssetType:null`,mode:"UPDATE",children:[t.jsx($e,{header:()=>t.jsx("div",{className:"flex items-center",children:t.jsx(fe,{label:He.t("label.hfd.fy")})}),className:"pl-6 py-3 text-left text-primary-ptext-1000 text-xs",body:r=>{var l;return t.jsx(Zt,{name:`smFinancialYear${r.uid}`,className:"!w-32",options:Ee,optionLabel:"label",optionValue:"value",value:r.smFinancialYear??"",onChange:T=>{tt(T,r)},onBlur:me,validation:(l=w==null?void 0:w.current)==null?void 0:l.message(`smFinancialYear${r.uid}`,r.smFinancialYear,"mandatory"),hideLabel:!0,disabled:Y===b.VIEW})},style:{}}),t.jsx($e,{header:()=>t.jsx("div",{className:"flex items-center",children:t.jsx(fe,{label:He.t("label.hfd.turnOver")})}),className:"pl-6 py-3 text-left text-primary-ptext-1000 text-xs",body:r=>{var l;return t.jsx(et,{name:`turnOver${r.uid}`,className:"!w-40 text-right",placeholder:"0",variant:Re.SECONDARY,value:typeof r.turnOver=="number"?le(r.turnOver):r.turnOver,onChange:T=>{var A;const j={...r},f=Ke(T.target.value);j.turnOver=it(f,"en-IN",0),(A=N.current)==null||A.reportDataChange(j)},onBlur:me,validation:(l=w==null?void 0:w.current)==null?void 0:l.message(`turnOver${r.uid}`,r.turnOver,"onlyInteger|onlyPositive"),hideLabel:!0,disabled:Y===b.VIEW})},style:{}}),t.jsx($e,{header:()=>t.jsx("div",{className:"flex items-center",children:t.jsx(fe,{label:He.t("label.hfd.profit")})}),className:"pl-6 py-3 text-left text-primary-ptext-1000 text-xs",body:r=>{var l;return t.jsx(et,{name:`profitAsPerPandL${r.uid}`,className:"!w-40 text-right",placeholder:"0",variant:Re.SECONDARY,value:typeof r.profitAsPerPandL=="number"?le(r.profitAsPerPandL):r.profitAsPerPandL,onChange:T=>{var A;const j={...r},f=Ke(T.target.value);j.profitAsPerPandL=it(f,"en-IN",0),(A=N.current)==null||A.reportDataChange(j)},onBlur:me,validation:(l=w==null?void 0:w.current)==null?void 0:l.message(`profitAsPerPandL${r.uid}`,r.profitAsPerPandL,"onlyInteger|onlyPositive"),hideLabel:!0,disabled:Y===b.VIEW})},style:{}}),t.jsx($e,{header:()=>t.jsx("div",{className:"flex items-center",children:t.jsx(fe,{label:He.t("label.hfd.netWorth")})}),className:"pl-6 py-3 text-left text-primary-ptext-1000 text-xs",body:r=>{var l;return t.jsx(et,{name:`capitalNetWorth${r.uid}`,className:"!w-40 text-right",placeholder:"0",variant:Re.SECONDARY,value:typeof r.capitalNetWorth=="number"?le(r.capitalNetWorth):r.capitalNetWorth,onChange:T=>{var A;const j={...r},f=Ke(T.target.value);j.capitalNetWorth=it(f,"en-IN",0),(A=N.current)==null||A.reportDataChange(j)},onBlur:me,validation:(l=w==null?void 0:w.current)==null?void 0:l.message(`capitalNetWorth${r.uid}`,r.capitalNetWorth,"onlyInteger|onlyPositive"),hideLabel:!0,disabled:Y===b.VIEW})},style:{}}),t.jsx($e,{header:He.t("label.hfd.action"),className:"px-6 py-3 text-primary-ptext-1000 text-center text-xs align-super",style:{minWidth:"50px",width:"50px"},body:r=>t.jsx("div",{className:"",children:t.jsx(Es,{buttonType:vs.DELETE,onClick:()=>C(r),tooltipOptions:{position:"left",className:"text-xs font-Roboto bg-black text-white !p-1 rounded-md ",showDelay:"1000,",hideDelay:"300"},disabled:Y===b.VIEW})})})]}):t.jsx(t.Fragment,{})})]}),t.jsx(wt,{position:we,ref:R,toastText:E,variant:p}),t.jsx(Dt,{onHide:()=>{ie(!1),te("")},visible:Q,errorMessage:be})]});return t.jsx(o.Fragment,{children:t.jsx("div",{className:"",children:Oe?t.jsx(pe,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"}):t.jsx(t.Fragment,{children:t.jsx(ot,{title:"label.dde.financial.historicalDetails",pageMode:Y,onCancel:K,onEdit:Me,onSave:je,disabled:H,children:D()})})})})}),ja={assets:[],comments:""},Ma={uid:"",smAssetType:"",amount:"",isActive:!0},wa=o.forwardRef((ce,x)=>{const{loanUid:B,pageId:re,isLoading:Oe,sectionMode:Y,savedInvestmentInfo:je,onSaveInvestmentInfo:z,onCancel:Me,onEdit:H,disabled:Ee}=ce,[ye,we]=o.useState(ja),[he,E]=o.useState([]);o.useState("bottom-right");const[M,p]=o.useState("");o.useState(!1),o.useState(q.PRIMARY);const[ve,ee]=o.useState(""),[Pe,be]=o.useState(!1),te=o.useRef(null),Q=ke.useRef(null),[,ie]=o.useState(!1),R=o.useRef(new Ce({validators:{...qe()},...ze(),autoForceUpdate:{forceUpdate:()=>ie(D=>!D)}}));o.useEffect(()=>{N()},[]),o.useEffect(()=>{ve&&be(!0)},[ve]),o.useEffect(()=>{F()},[je]);const N=async()=>{await m(),$()},m=async()=>{var D,r;try{const l=await Ge.getDropdownList(Is.ASSET_TYPE,!0,"");if(Z(l)&&((D=l.data)!=null&&D.totalRecords)){const{data:T}=l,j=(r=T.results)==null?void 0:r.map(f=>({uid:f.uid??"",label:f.name??"",value:f.code??""}));E([...j])}else E([])}catch(l){E([]),ee(k(l))}};o.useImperativeHandle(x,()=>({props:ce,save:Ye,editableTableRef:$,resetTable:xe}));const w=D=>{we(r=>({...r,[D.target.name]:D.target.value}))},Ue=(D,r)=>{var T;const l={...r};l.smAssetType=D.target.value,(T=Q.current)==null||T.reportDataChange(l)},Be=()=>{var D;(D=Q.current)==null||D.addRow(Ma)},tt=D=>{var r;(r=Q.current)==null||r.deleteRow(D),R.current=new Ce({validators:{...qe()},...ze(),autoForceUpdate:{forceUpdate:()=>ie(l=>!l)}})},Ye=()=>{var l,T,j;if(!C())return;let D={...ye,assets:[...((l=Q.current)==null?void 0:l.getAddedRecords())??[],...((T=Q.current)==null?void 0:T.getDeletedRecords())??[],...((j=Q.current)==null?void 0:j.getUpdatedRecords())??[]]};const r=D.assets.map(f=>{var A,L;return{...f,amount:(L=Ke((A=f.amount)==null?void 0:A.toString()))==null?void 0:L.toString()}});return D={...D,assets:r},D},$=()=>{var D;(D=Q.current)==null||D.search()},xe=()=>{var D,r;(D=Q.current)==null||D.clearAll(),(r=Q.current)==null||r.reset()},J=()=>{var D,r;me(),(D=Q.current)==null||D.clearAll(),(r=Q.current)==null||r.search(),Me==null||Me()},K=D=>{var r,l;(l=R==null?void 0:R.current)==null||l.showMessageFor((r=D==null?void 0:D.target)==null?void 0:r.name)},C=()=>{var r,l;let D=!1;return D=(r=R==null?void 0:R.current)==null?void 0:r.allValid(),D||(ie(T=>!T),(l=R==null?void 0:R.current)==null||l.showMessages(),ie(T=>!T),!1)},me=()=>{var D;R.current=new Ce({validators:{...qe()},...ze(),autoForceUpdate:{forceUpdate:()=>ie(r=>!r)}}),(D=R==null?void 0:R.current)==null||D.hideMessages()},F=async()=>{je&&we({...je,assets:[],comments:je.comments})},de=D=>it(D,"en-IN",0),le=()=>{const{comments:D}=ye;return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"mt-3 flex flex-col gap-5",children:[t.jsx("div",{className:"self-end",children:t.jsx(Ze,{buttonType:Xe.ICON_TEXT_ROW,customLabel:"Add",onClick:Be,disabled:Y===b.VIEW})}),t.jsx("div",{children:B&&re?t.jsxs(Os,{ref:Q,uniqueKey:"uid",standardDataFormatPromise:Ps.getAllCorporateInvestment,search:`&loan.uid=${B}&applicant.uid=${re}&isActive=${!0}&smAssetType:notnull`,mode:"UPDATE",children:[t.jsx($e,{header:()=>t.jsx("div",{className:"flex items-center",children:t.jsx(fe,{label:He.t("label.investmentInfo.table.colTitle.assetType*")})}),className:"text-primary-ptext-1000 text-left text-xs py-3 pl-6",body:r=>{var l;return t.jsx(t.Fragment,{children:t.jsx(Zt,{name:`smAssetType${r.uid}`,className:"!w-32",options:he,optionLabel:"label",optionValue:"value",value:r.smAssetType??"",onChange:T=>{Ue(T,r)},onBlur:K,validation:(l=R==null?void 0:R.current)==null?void 0:l.message(`smAssetType${r.uid}`,r.smAssetType,"mandatory"),hideLabel:!0,disabled:Y===b.VIEW})})},style:{}}),t.jsx($e,{header:()=>t.jsx("div",{className:"flex items-center",children:t.jsx(fe,{label:He.t("label.investmentInfo.table.colTitle.amt*")})}),className:"table-header-right text-primary-ptext-1000 text-xs py-3 pl-6",body:r=>{var l;return t.jsx(et,{name:`amount${r.uid}`,className:"!w-40 text-right",placeholder:"0",variant:Re.SECONDARY,value:typeof r.amount=="number"?de(r.amount):r.amount,onChange:T=>{var A;const j={...r},f=Ke(T.target.value);j.amount=it(f,"en-IN",0),(A=Q.current)==null||A.reportDataChange(j)},onBlur:K,validation:(l=R==null?void 0:R.current)==null?void 0:l.message(`amount${r.uid}`,r.amount,"mandatory|onlyInteger"),hideLabel:!0,disabled:Y===b.VIEW})},style:{}}),t.jsx($e,{header:()=>t.jsx("div",{className:"flex items-center",children:t.jsx(fe,{label:He.t("label.investmentInfo.table.colTitle.action")})}),className:"text-primary-ptext-1000 text-center text-xs py-3 px-6 align-super",style:{minWidth:"50px",width:"50px"},body:r=>t.jsx("div",{className:"",children:t.jsx(Es,{buttonType:vs.DELETE,onClick:()=>tt(r),tooltipOptions:{position:"left",className:"text-xs font-Roboto bg-black text-white !p-1 rounded-md ",showDelay:"1000,",hideDelay:"300"},disabled:Y===b.VIEW})})})]}):t.jsx(t.Fragment,{})}),t.jsx("div",{className:"flex",children:t.jsx("div",{className:"w-122.5 h-40",children:t.jsx(Ls,{name:"comments",className:"!h-full",label:"label.investmentInfo.comments",labelClassNames:"font-bold text-xs !text-primary-gray-700",maxCount:200,placeholder:"Enter comments",value:D,onChange:w,variant:Re.SECONDARY,disabled:Y===b.VIEW})})})]}),t.jsx(Dt,{onHide:()=>{be(!1),ee("")},visible:Pe,errorMessage:ve})]})};return t.jsx(o.Fragment,{children:t.jsxs("div",{className:"",children:[Oe?t.jsx(pe,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"}):t.jsx(t.Fragment,{children:t.jsx(ot,{title:"label.dde.financial.investmentDetails",pageMode:Y,onCancel:J,onEdit:H,onSave:z,disabled:Ee,children:le()})}),t.jsx(wt,{position:"bottom-right",ref:te,toastText:M,variant:q.PRIMARY}),t.jsx(Dt,{onHide:()=>{be(!1),ee("")},visible:Pe,errorMessage:ve})]})})}),Mt={listId:Math.random().toString(30).substring(2),uid:"",directorUid:"",partnerName:"",relationShip:"",dobDate:"",DIN:"",profitSharing:"",mobileNo:"",remarks:"",address:"",smAddressType:"",pincode:{pinCode:"",uid:""},city:{name:"",uid:""},state:"",latitude:"",longitude:"",loanDocuments:aa,isActive:!0},_a={listId:Math.random().toString(30).substring(2),uid:"",docName:"",docNo:"",maskedDocNo:"",dob:"",docSections:[],isVerified:!1},Rs=o.forwardRef((ce,x)=>{const{data:B=Mt,isLoading:re,cardNumber:Oe,dropDownOptions:Y,documentCategory:je=gt.DOCUMENT_CATEGORY_ADDRESS_PROOF,ocrRelatedData:z,disabled:Me,disabledSaveMenu:H,onSavePartnerDirectorDetails:Ee,onRemovePartnerDirectorDetails:ye}=ce,we=ys(),he=(we==null?void 0:we.loanUid)??"",[E,M]=o.useState(B),[p,ve]=o.useState(b.VIEW),[ee,Pe]=o.useState(""),[be,te]=o.useState([_a]),[Q,ie]=o.useState(!0),[R,N]=o.useState([]),[m,w]=o.useState({uid:"",success:!1,failed:!1}),[Ue,Be]=o.useState({verified:!1,failedToVerify:!1}),[tt,Ye]=o.useState("bottom-right"),[$,xe]=o.useState(""),[J,K]=o.useState(q.PRIMARY),[C,me]=o.useState(!1),[F,de]=o.useState(""),[le,D]=o.useState(!1),r=o.useRef(null),l=o.useRef(null),T=Na(),[,j]=o.useState(!1),f=o.useRef(new Ce({validators:{...qe()},...ze(),autoForceUpdate:{forceUpdate:()=>j(d=>!d)}})),A=[{className:"",label:"Remove",command:()=>{ye==null||ye()},disabled:!1}];o.useEffect(()=>{M(()=>({...B})),Pe(B.directorUid)},[B]),o.useEffect(()=>{E.directorUid?Ne():ie(!1)},[he,E.directorUid]),o.useEffect(()=>{var d;r!=null&&r.current&&$!==""&&((d=r==null?void 0:r.current)==null||d.showFunction(),xe(""))},[$,J,C]),o.useEffect(()=>{F&&D(!0)},[F]);const L=o.useRef();o.useImperativeHandle(x,()=>({save:kt,onSaveSuccess:dt,remove:ct,resetValidator:Nt}));const Ne=async()=>{var d,u,I,O,P,g,S,v,X,G,U,_,V,se;try{const nt=await Ve.getKycDocument(he,E.directorUid);if(Z(nt)){const{data:Ae}=nt,mt=[],vt=[],Yt=ge=>ge.map(Je=>({sectionUid:Je.uid??"",fileName:Je.fileName??"",fileType:Je.fileType??"",sectionType:Je.smDocSectionType??"",url:Je.url}));for(const ge in Ae)mt.push({listId:ge,uid:ge,docName:((I=(u=(d=Ae[ge])==null?void 0:d[0].kyc)==null?void 0:u.docType)==null?void 0:I.code)??"",docNo:((P=(O=Ae[ge])==null?void 0:O[0].kyc)==null?void 0:P.docNo)??"",maskedDocNo:((S=(g=Ae[ge])==null?void 0:g[0].kyc)==null?void 0:S.maskedDocNo)??"",dob:((X=(v=Ae[ge])==null?void 0:v[0].kyc)==null?void 0:X.dob)??"",docSections:Yt(Ae[ge]),isVerified:((U=(G=Ae[ge])==null?void 0:G[0].kyc)==null?void 0:U.isVerified)??!1}),vt.push(((se=(V=(_=Ae[ge])==null?void 0:_[0].kyc)==null?void 0:V.docType)==null?void 0:se.code)??"");mt.length?(te([...mt]),ie(!1),N([...vt])):ie(!1)}}catch(nt){ie(!1),de(k(nt))}},ae=async()=>{try{const d=await Ve.getKycDocument(he,ee);if(Z(d)){const{data:u}=d;return u}}catch(d){de(k(d))}},ue=async(d,u)=>{var I;if(d.uid){const O=await xt(d.uid),P=St(d,O);try{const g=await Ve.updateKycDocument(P,Fe.DDE);if(De(g)){const{data:S}=g,v=S.meta?JSON.parse(S.meta):null,X=U=>{var _,V;return U===Lt.DOCUMENT_SECTIONS_FRONT_PAGE?((_=v==null?void 0:v.ocrResponse)==null?void 0:_.frontMaskedImageUrl)??"":U===Lt.DOCUMENT_SECTIONS_BACK_PAGE?((V=v==null?void 0:v.ocrResponse)==null?void 0:V.backMaskedImageUrl)??"":""},G=U=>{var _;return((_=S.docType)==null?void 0:_.code)===cs.AADHAR_CARD?U.map(se=>({sectionUid:se.uid??"",fileName:se.fileName??"",fileType:se.fileType??"",sectionType:se.smDocSectionType??"",url:v?X(se.smDocSectionType):se.url})):U};te(U=>U.map(V=>{var se;return V.uid===S.uid?{...V,docName:((se=S.docType)==null?void 0:se.code)??"",docNo:S.docNo??"",maskedDocNo:S.maskedDocNo??"",docSections:G(S.kycDocuments),dob:S.dob??""}:V})),xe(ne.SAVED),K(q.PRIMARY),me(!C)}}catch(g){console.log(g),de(k(g))}}else{const O=Bt(d);try{const P=await Ve.savePartnerOrDirectorKycDocument(O);if(Qe(P)){const{data:g}=P,S=g.meta?JSON.parse(g.meta):null,v=G=>{var U,_;return G===Lt.DOCUMENT_SECTIONS_FRONT_PAGE?((U=S==null?void 0:S.ocrResponse)==null?void 0:U.frontMaskedImageUrl)??"":G===Lt.DOCUMENT_SECTIONS_BACK_PAGE?((_=S==null?void 0:S.ocrResponse)==null?void 0:_.backMaskedImageUrl)??"":""},X=G=>{var U;return((U=g.docType)==null?void 0:U.code)===cs.AADHAR_CARD?G.map(V=>({sectionUid:V.uid??"",fileName:V.fileName??"",fileType:V.fileType??"",sectionType:V.smDocSectionType??"",url:S?v(V.smDocSectionType):V.url})):G};te(G=>G.map((_,V)=>{var se;return V===u?{..._,uid:g.uid??"",docName:((se=g.docType)==null?void 0:se.code)??"",docNo:g.docNo??"",maskedDocNo:g.maskedDocNo??"",docSections:X(g.kycDocuments),dob:g.dob??""}:_})),Pe((I=g==null?void 0:g.applicant)==null?void 0:I.uid),xe(ne.SAVED),K(q.PRIMARY),me(!C)}}catch(P){console.log(P),de(k(P))}}},Se=async(d,u)=>{if(d.uid){const I=await xt(d.uid),O=St(d,I);try{const P=await Ve.updateKycDocument(O,Fe.DDE);De(P)&&(u!==void 0&&lt(u),K(q.QUATERNARY),xe(ne.REMOVED),me(!C))}catch(P){console.log(P),de(k(P))}}},It=async(d,u)=>{var O;const I=na(he,ee,m.uid,d,Ie.DIRECTOR);try{const P=await Ve.populateKycDocument(I,Fe.DDE);if(Qe(P)){const{data:g}=P;te(S=>S.map((X,G)=>{var U;return G===u?{...X,uid:g.uid,docName:((U=g.docType)==null?void 0:U.code)??"",docNo:g.docNo??"",dob:g.dob??""}:X})),Pe(((O=g==null?void 0:g.applicant)==null?void 0:O.uid)??""),w(S=>({...S,uid:g.uid??"",success:!0,failed:!1}))}}catch(P){w(g=>({...g,success:!1,failed:!0})),de(k(P))}},yt=async(d,u,I,O)=>{var g;const P=ra(he,ee,d,u,Ie.DIRECTOR,O);try{const S=await Ve.validateAadhar(P,Fe.DDE);if(Qe(S)){const{data:v}=S;Be({...Ue,verified:!0}),te(X=>X.map((U,_)=>{var V;return _===I?{...U,uid:v.uid??"",docName:((V=v.docType)==null?void 0:V.code)??"",docNo:v.docNo??"",maskedDocNo:v.maskedDocNo??"",dob:v.dob??""}:U})),Pe(((g=v==null?void 0:v.applicant)==null?void 0:g.uid)??"")}}catch(S){Be({...Ue,failedToVerify:!0}),de(k(S))}},Te=d=>{var u,I;(I=f==null?void 0:f.current)==null||I.showMessageFor((u=d==null?void 0:d.target)==null?void 0:u.name)},We=()=>{var u,I;let d=!1;return d=(u=f==null?void 0:f.current)==null?void 0:u.allValid(),d||(j(O=>!O),(I=f==null?void 0:f.current)==null||I.showMessages(),j(O=>!O),!1)},_e=d=>{if(d.target.name==="aadharNo"){const u=Qs(d.target.value);M(I=>({...I,[d.target.name]:u.trim()}));return}if(d.target.name==="PAN"){M(u=>({...u,[d.target.name]:d.target.value.toUpperCase()}));return}M(u=>({...u,[d.target.name]:d.target.value}))},_t=async()=>{var d;try{const u=await Ve.getPopulateDocumentByKyc(he,ee);if(Z(u)){M(O=>{var P,g,S,v;return{...O,partnerName:((P=u==null?void 0:u.data)==null?void 0:P.name)??"",dobDate:((g=u==null?void 0:u.data)==null?void 0:g.dob)??"",mobileNo:((S=u==null?void 0:u.data)==null?void 0:S.mobile)??"",address:((v=u==null?void 0:u.data)==null?void 0:v.address)??""}});const I=await Sa.findByName(0,1,(d=u==null?void 0:u.data)==null?void 0:d.pincode);M(O=>{var P,g,S,v,X,G;return{...O,pincode:{pinCode:((S=(g=(P=I==null?void 0:I.data)==null?void 0:P.results)==null?void 0:g[0])==null?void 0:S.pinCode)??"",uid:((G=(X=(v=I==null?void 0:I.data)==null?void 0:v.results)==null?void 0:X[0])==null?void 0:G.uid)??""}}})}}catch(u){console.log(u),de(k(u))}},At=()=>{const d={listId:Math.random().toString(30).substring(2),uid:"",docName:"",docNo:"",maskedDocNo:"",dob:"",docSections:[],isVerified:!1};te(u=>[...u,d]),w(()=>({uid:"",success:!1,failed:!1}))},dt=()=>ve(b.VIEW),bt=()=>ve(b.EDIT),ct=()=>({...{...E},isActive:!1}),kt=()=>{var I,O;const d=(I=L==null?void 0:L.current)==null?void 0:I.save(),u=(O=l==null?void 0:l.current)==null?void 0:O.getUploadedData();if(!(!We()||!d||!u))return M({...E,...d,uid:E.uid}),Ut()},st=()=>{Nt(),ve(b.VIEW)},xt=async d=>(await ae())[d],lt=d=>{te(()=>[...be.filter((I,O)=>O!==d)])},Ft=d=>{N([...d])},Ut=()=>{var I,O;const d=(I=L==null?void 0:L.current)==null?void 0:I.save(),u=(O=l==null?void 0:l.current)==null?void 0:O.getUploadedData();return{...E,...d,uid:E.uid,loanDocumentsProof:u,directorUid:ee}},Nt=()=>{var d,u;f.current=new Ce({validators:{...qe()},...ze(),autoForceUpdate:{forceUpdate:()=>j(I=>!I)}}),(d=f==null?void 0:f.current)==null||d.hideMessages(),(u=L==null?void 0:L.current)==null||u.resetValidator()},Bt=d=>{const{documentUid:u,documentUrl:I,documentNumber:O,dob:P}=d,g=I.map(v=>({loan:{},kyc:{},smDocSectionType:v.code,fileName:v.fileName,fileType:v.contentType,thumbUrl:v.thumbUrl?v.thumbUrl:"",url:v.url,meta:""}));return{loan:{uid:he},applicant:{uid:ee||"",applicantType:Ie.DIRECTOR},docType:{uid:u},dob:P||null,docNo:O,meta:"",kycDocuments:g}},St=(d,u)=>{const{uid:I,documentUid:O,documentUrl:P,documentNumber:g,dob:S,isActive:v}=d,X=_=>u.find(se=>se.smDocSectionType===_).uid,G=P.map(_=>({uid:X(_.code),loan:{},kyc:{},smDocSectionType:_.code,fileName:_.fileName,fileType:_.contentType,thumbUrl:_.thumbUrl?_.thumbUrl:"",url:_.url,meta:""}));return{uid:I,loan:{uid:he},applicant:{uid:ee,applicantType:Ie.DIRECTOR},docType:{uid:O},dob:S||null,docNo:g,meta:"",stage:null,kycDocuments:G,isActive:v}},Tt=()=>t.jsx(ke.Fragment,{children:be.map((d,u)=>t.jsx("div",{children:t.jsx(Oa,{mode:"EDIT",isLoading:Q,disableKycCardMenu:Me,uid:d.uid,documentListIndex:u,docName:d.docName,docNo:d.docNo,dateOfBirth:d.dob,docSections:d.docSections,maskedDocNo:d.maskedDocNo,isVerified:d.isVerified,removeDocumentInList:lt,cardNameList:R,handlerCardNameList:Ft,ocrStatus:m,onSave:ue,onRemove:Se,onPopulate:It,onVerifyAadhar:yt,aadharVerificationStatus:Ue,handlerAadharVerificationStatus:()=>{Be({verified:!1,failedToVerify:!1})},placeOfUpload:Ea.LOGIN_CORPORATE_COAPPLICANT})},d.listId))}),ut=o.useMemo(()=>{var d,u,I,O;return t.jsxs("div",{className:"flex flex-col space-y-4",children:[t.jsx(xs,{label:"label.text.address.proof",value:"Attach Documents (PDF, JPG, JPEG or PNG)",titleClass:"text-primary-ptext-900 text-sm font-bold mb-1"}),t.jsx("div",{children:t.jsx(Ss,{ref:l,savedDocument:(d=B.loanDocuments)!=null&&d[0]?B.loanDocuments[0]:{},mode:p,queryParamForDocList:je,ocrStageName:z==null?void 0:z.ocrStageName,ocrSubstageName:z==null?void 0:z.ocrSubstageName,ocrPayloadData:{loanUid:((u=z==null?void 0:z.ocrPayloadData)==null?void 0:u.loanUid)??"",applicant:{uid:((O=(I=z==null?void 0:z.ocrPayloadData)==null?void 0:I.applicant)==null?void 0:O.uid)??""}}})})]})},[E==null?void 0:E.loanDocuments,p]),Ot=o.useMemo(()=>{const{address:d,pincode:u,city:I,state:O,latitude:P,longitude:g}=E;return{address:d,pincode:u,city:I,state:O,latitude:P,longitude:g}},[E==null?void 0:E.address,E==null?void 0:E.pincode,E==null?void 0:E.city,E==null?void 0:E.state,E==null?void 0:E.latitude,E==null?void 0:E.longitude]),at=()=>t.jsxs(ke.Fragment,{children:[t.jsx("div",{className:"flex",children:t.jsx(fe,{className:"text-primary-ptext-900 text-sm font-bold mb-1",label:"label.title.address"})}),t.jsx(Ns,{pageMode:p,ref:L,data:Ot,variant:bs.SECONDARY,children:ut})]}),Et=()=>{const{remarks:d}=E;return t.jsx("div",{className:"",children:t.jsxs("div",{className:"flex flex-col justify-start items-start space-y-4 w-full col-span-2",children:[t.jsx(fe,{className:"text-primary-ptext-900 text-sm font-bold",label:"label.dde.partner.director.remarks"}),t.jsx("div",{className:"w-full",children:t.jsx(Ls,{className:"!h-40",name:"remarks",label:"input.text.title.remark",placeholder:"",variant:Re.SECONDARY,maxCount:200,autoResize:!0,onChange:_e,value:d,disabled:p===b.VIEW})})]})})},Wt=()=>{var S,v,X,G,U,_;const{partnerName:d,relationShip:u,dobDate:I,DIN:O,profitSharing:P,mobileNo:g}=E;return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2  md:grid-cols-3 lg:grid-cols-4 gap-x-4 gap-y-5 ",children:[t.jsx("div",{className:"col-span-1",children:t.jsx(et,{variant:Re.SECONDARY,label:"label.partner.director.partner.name",placeholder:"Enter Name of Partner",name:"partnerName",className:"",value:d,onChange:_e,validation:(S=f==null?void 0:f.current)==null?void 0:S.message("partnerName",d,"mandatory|checkString"),onBlur:Te,disabled:p===b.VIEW})}),t.jsx("div",{className:"col-span-1",children:t.jsx(Zt,{label:"label.partner.director.relationship",placeholder:"Select Relationship",name:"relationShip",value:u,onChange:_e,validation:(v=f==null?void 0:f.current)==null?void 0:v.message("relationShip",u,"mandatory"),onBlur:Te,disabled:p===b.VIEW,options:Y.RELATION_SHIP_OPTION,optionLabel:"name",optionValue:"code"})}),t.jsx("div",{className:"col-span-1",children:t.jsx(va,{disabled:p===b.VIEW,variant:Re.SECONDARY,label:"label.partner.director.dob",placeholder:"Select Date",name:"dobDate",value:new Date(I),onChange:_e,onBlur:Te,validation:(X=f==null?void 0:f.current)==null?void 0:X.message("dobDate",I,"mandatory|dob")})}),t.jsx("div",{className:"col-span-1",children:t.jsx(et,{variant:Re.SECONDARY,label:"label.partner.director.DIN",placeholder:"Enter DIN",name:"DIN",className:"",value:O,onChange:_e,disabled:p===b.VIEW,onBlur:Te,validation:(G=f==null?void 0:f.current)==null?void 0:G.message("DIN",O,"checkNumber|min:8|onlyPositive|onlyInteger")})}),t.jsx("div",{className:"col-span-1",children:t.jsx(et,{variant:Re.SECONDARY,label:"label.partner.director.profitSharing",placeholder:"Enter Percentage",name:"profitSharing",className:"text-right",value:P,onChange:_e,onBlur:Te,validation:(U=f==null?void 0:f.current)==null?void 0:U.message("profitSharing",P,"checkNumber|onlyPositive|maxDecimal:2"),disabled:p===b.VIEW})}),t.jsx("div",{className:"col-span-1",children:t.jsx(Ta,{label:"label.partner.director.mobileNo",disabled:p===b.VIEW,name:"mobileNo",value:g,variant:Re.SECONDARY,onChange:_e,onBlur:Te,validation:(_=f==null?void 0:f.current)==null?void 0:_.message("mobileNo",g,"mandatory|onlyInteger|checkNumber|max:10|min:10")})})]}),at(),Et()]})};return t.jsxs("div",{className:"",children:[re?t.jsx(pe,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"}):t.jsxs("div",{className:"flex flex-col gap-5",children:[t.jsx("div",{className:"border border-primary-ptext-500 rounded-xl",children:t.jsx(rt,{title:"",alertText:"Either PAN or Form - 60 are mandatory",children:t.jsxs("div",{className:"",children:[t.jsx("div",{children:t.jsx(fe,{label:"label.dde.partner.director.detail",args:{count:`${Oe} - ${T("label.dde.partner.director.kycDetails")}`},className:"text-primary-sideBarBgColor text-sm font-bold mb-1"})}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-5",children:Tt()}),t.jsx("div",{className:"p-5 w-full rounded-xl bg-slate-100 mt-5",children:t.jsx(Ze,{buttonType:Xe.ICON_TEXT_ROW,customLabel:"Add Another Document",onClick:At})})]})})}),t.jsx(ot,{title:"label.dde.partner.director.detail",titleArgs:{count:`${Oe} - ${T("label.dde.partner.director.BasicDetails")}`},pageMode:p,onCancel:st,onEdit:bt,onSave:Ee,onPrePopulate:()=>_t(),kebabModel:A,disabled:Me&&!ee.length,disabledMenu:H,children:Wt()})]}),t.jsx(wt,{position:tt,ref:r,toastText:$,variant:J}),t.jsx(Dt,{onHide:()=>{D(!1),de("")},visible:le,errorMessage:F})]})});Rs.defaultProps={disabled:!1};const Ds={organisationDetails:{isOrganisationDetailsLoading:!1,organisationDetailsData:{...ba}},addressInfo:{isAddressLoading:!1,address:{},addressInfoPageMode:b.VIEW,isSameAsRegGSTAddress:!1},otherDetails:{isOtherDetailsLoading:!1,otherSectionMode:b.VIEW,productServiceData:"",rawMaterialData:"",businessModelData:"",uid:""},partnerDirector:{isPartnerDirectorInfoLoading:!1,partnerDirectorInfoList:[Mt]},bankAccount:{isBankAccountInfoLoading:!1,bankAccountInfoList:[Qt]},historicalFinDetails:{isLoading:!1,sectionMode:b.VIEW,hfd:[{uid:"",smFinancialYear:"",turnOver:"",profit:"",netWorth:""}]},investmentDetails:{isLoading:!1,sectionMode:b.VIEW,comments:"",assets:[{uid:"",amount:"",smAssetType:"",isActive:!0}]},otherDocInfo:{isOtherDocInfoLoading:!1,otherDocInfoList:[Ts],sectionMode:b.VIEW}},Gn=()=>{var is,os;const x=ys().loanUid??"",B=new Zs({length:5}),[re,Oe]=o.useState(!0),[Y,je]=o.useState({corporateCoApplicant:{name:"New Tab",key:""},index:null}),[z,Me]=o.useState(""),[H,Ee]=o.useState(0),[ye,we]=o.useState(0),[he,E]=o.useState(!1),[M,p]=o.useState([{firstName:"New Tab",key:B()}]),[ve,ee]=o.useState(!1),[Pe,be]=o.useState(!1),[te,Q]=o.useState({businessModelValidation:{errorMessage:""}}),[ie,R]=o.useState({SEGMENT_OPTION:[],BUSINESS_CONSTITUTION_OPTION:[],OWNERSHIP_OPTION:[],NO_EMPLOYEE_OPTION:[],RELATION_SHIP_OPTION:[]}),[N,m]=o.useState({...Ds}),[w,Ue]=o.useState({orgBasicInfoAPICall:!1}),[Be,tt]=o.useState("bottom-right"),[Ye,$]=o.useState(""),[xe,J]=o.useState(q.PRIMARY),[K,C]=o.useState(!1),[me,F]=o.useState(""),[de,le]=o.useState(!1),[D,r]=o.useState(!1),[l,T]=o.useState(!1),j=o.useRef(null),f=o.useRef(null),A=o.useRef(null),L=o.useRef([]),Ne=o.useRef(null),ae=o.useRef([]),ue=o.useRef(null),Se=o.useRef(null),It=o.useRef(null),yt=o.useRef(null),Te=o.useRef(null),We=o.useRef(null),_e=o.useRef(null),_t=(e,a)=>[{className:"",label:"Remove Corporate Co-Applicant",command:()=>{je({corporateCoApplicant:e,index:a}),le(!0)}}];o.useEffect(()=>{Us()},[]),o.useEffect(()=>{var e;(e=M[H])!=null&&e.uid&&(Ks(),bt())},[H,he]),o.useEffect(()=>{var e,a,s;(a=(e=N==null?void 0:N.organisationDetails)==null?void 0:e.organisationDetailsData)!=null&&a.uid&&((s=M[H])!=null&&s.uid)&&ct()},[(is=N==null?void 0:N.organisationDetails)==null?void 0:is.organisationDetailsData]),o.useEffect(()=>{me&&T(!0)},[me]),o.useEffect(()=>{var e;f!=null&&f.current&&Ye!==""&&((e=f==null?void 0:f.current)==null||e.showFunction())},[Ye,xe,K]),o.useEffect(()=>{var e;(e=M[H])!=null&&e.uid&&!re&&bt()},[re,w.orgBasicInfoAPICall]),o.useEffect(()=>{Et({index:M.length-1})},[Pe]);const At=async()=>{var e,a,s,n,i,c,h;try{const y=await Ht.getApplicantInfo(0,20,Ie.PRIMARY,x);if(Z(y)&&((e=y.data)!=null&&e.totalRecords))return Me((n=(s=(a=y.data)==null?void 0:a.results)==null?void 0:s[0])==null?void 0:n.uid),((h=(c=(i=y.data)==null?void 0:i.results)==null?void 0:c[0])==null?void 0:h.uid)??""}catch(y){F(k(y))}},dt=async(e,a)=>{var s,n,i;try{const c=await Ht.getApplicantInfo(0,20,Ie.CORPORATE_CO_APPLICANT,x);if(Z(c)&&((s=c.data)!=null&&s.totalRecords)){const h=(i=(n=c.data)==null?void 0:n.results)==null?void 0:i.map((y,W)=>!(y!=null&&y.firstName)&&!y.lastName?{...y,firstName:`Cor-CO-APP... ${W+1}`}:{...y});p(h),Oe(!1),e==="ORG_BASIC_INFO"&&Ue(y=>({...y,orgBasicInfoAPICall:!y.orgBasicInfoAPICall})),a&&a(h)}else Vt(),Oe(!1)}catch(c){F(k(c))}},bt=async e=>{const a=M[H];e||m(s=>({...s,organisationDetails:{...s.organisationDetails,isOrganisationDetailsLoading:!0}}));try{const s=await Ct.getCorporateBasicInfo(a==null?void 0:a.uid);Z(s)?m(n=>({...n,organisationDetails:{...n.organisationDetails,organisationDetailsData:ia(s==null?void 0:s.data),isOrganisationDetailsLoading:!1}})):m(n=>({...n,organisationDetails:{...n.organisationDetails,isOrganisationDetailsLoading:!1}}))}catch(s){F(k(s))}},ct=async e=>{const a=M[H];if(e||m(s=>({...s,addressInfo:{...s.addressInfo,isAddressLoading:!0}})),x&&(a!=null&&a.uid))try{const s=await $t.getOrgRegisteredAddress(x,a==null?void 0:a.uid);Z(s)?m(n=>{var i;return{...n,addressInfo:{...n.addressInfo,isAddressLoading:!1,address:oa(s.data),isSameAsRegGSTAddress:((i=s==null?void 0:s.data)==null?void 0:i.isSameAsRegisteredGstAddress)??!1}}}):m(n=>({...n,addressInfo:{...n.addressInfo,isAddressLoading:!1}}))}catch(s){F(k(s))}},kt=async()=>{await Ge.getAll(0,200,"staticMasterType.code=ACCOUNT_TYPE&").then(s=>{s.data.results&&s.data.results.length>0?R(n=>({...n,ACCOUNT_OPTION:[...s.data.results??[]]})):console.log("error")})},st=async(e,a)=>{var s,n;if(a||m(i=>({...i,bankAccount:{...i.bankAccount,isBankAccountInfoLoading:!0}})),x&&e)try{const i=await Rt.getCorporateBankAccountDetails(x,e);if(Z(i))if(((s=i==null?void 0:i.data)==null?void 0:s.length)>0){const c=(n=i==null?void 0:i.data)==null?void 0:n.map(h=>Da(h));m(h=>({...h,bankAccount:{bankAccountInfoList:[...c],isBankAccountInfoLoading:!1}}))}else m(c=>({...c,bankAccount:{...c.bankAccount,isBankAccountInfoLoading:!1,bankAccountInfoList:[{...Qt}]}}))}catch(i){console.log(i),m(c=>({...c,bankAccount:{...c.bankAccount,isBankAccountInfoLoading:!1}}))}},xt=async(e,a)=>{if(a||m(s=>({...s,historicalFinDetails:{...s.historicalFinDetails,isLoading:!0}})),x&&e)try{const s=await jt.getCorpHistoricalFinancialInfo(0,20,x,e);Z(s)&&m(n=>({...n,historicalFinDetails:{...n.historicalFinDetails,hfd:[],isLoading:!1}}))}catch{m(n=>({...n,historicalFinDetails:{...n.historicalFinDetails,isLoading:!1}}))}},lt=async(e,a)=>{if(a||m(s=>({...s,investmentDetails:{...s.investmentDetails,isLoading:!0}})),x&&e)try{const s=await jt.getCorpInvestmentInfo(0,20,x,e);if(Z(s)){const{data:n}=s;m(i=>({...i,investmentDetails:{...i.investmentDetails,assets:[],comments:n.commentOnInvestment??"",isLoading:!1}}))}}catch{m(n=>({...n,investmentDetails:{...n.investmentDetails,isLoading:!1}}))}},Ft=async()=>{await Ge.getAll(0,200,"staticMasterType.code=CORPORATE_SEGMENT&").then(s=>{Z(s)?R(n=>({...n,SEGMENT_OPTION:[...s.data.results??[]]})):console.log("error")})},Ut=async()=>{await Ge.getAll(0,200,"staticMasterType.code=BUSINESS_CONSTITUTION&").then(s=>{Z(s)?R(n=>({...n,BUSINESS_CONSTITUTION_OPTION:[...s.data.results??[]]})):console.log("error")})},Nt=async()=>{await Ge.getAll(0,200,"staticMasterType.code=OWNERSHIP_OF_BUSINESS_PREMISES&").then(s=>{Z(s)?R(n=>({...n,OWNERSHIP_OPTION:[...s.data.results??[]]})):console.log("error")})},Bt=async()=>{await Ge.getAll(0,200,"staticMasterType.code=NO_OF_EMPLOYEES&").then(s=>{Z(s)?R(n=>({...n,NO_EMPLOYEE_OPTION:[...s.data.results??[]]})):console.log("error")})},St=()=>{Ge.getAll(0,200,"staticMasterType.code=CORPORATE_RELATION_TYPE&&").then(s=>{Z(s)?R(n=>({...n,RELATION_SHIP_OPTION:[...s.data.results??[]]})):console.log("error")})},Tt=async(e,a)=>{if(a||m(s=>({...s,otherDetails:{...s.otherDetails,isOtherDetailsLoading:!0}})),x&&e)try{const s=await ms.getOrgOtherDetails(e);Z(s)&&m(n=>{var i,c,h,y;return{...n,otherDetails:{...n.otherDetails,isOtherDetailsLoading:!1,productServiceData:(i=s==null?void 0:s.data)==null?void 0:i.productServiceOffered,rawMaterialData:(c=s==null?void 0:s.data)==null?void 0:c.rawMaterial,businessModelData:(h=s==null?void 0:s.data)==null?void 0:h.businessModelDetailedWriteup,uid:(y=s==null?void 0:s.data)==null?void 0:y.uid}}})}catch{m(n=>({...n,otherDetails:{...n.otherDetails,isOtherDetailsLoading:!1}}))}},ut=async(e,a)=>{var s,n;if(a||m(i=>({...i,partnerDirector:{...i.partnerDirector,isPartnerDirectorInfoLoading:!0}})),x&&e)try{const i=await Xt.getCorporatePartnerDirectors(x,e);if(Z(i))if(((s=i==null?void 0:i.data)==null?void 0:s.length)>0){const c=(n=i==null?void 0:i.data)==null?void 0:n.map(h=>Ia(h));m(h=>({...h,partnerDirector:{...h.partnerDirector,partnerDirectorInfoList:[...c],isPartnerDirectorInfoLoading:!1}}))}else m(c=>({...c,partnerDirector:{...c.partnerDirector,partnerDirectorInfoList:[{...Mt}],isPartnerDirectorInfoLoading:!1}}))}catch(i){console.log(i),m(c=>({...c,partnerDirector:{...c.partnerDirector,isPartnerDirectorInfoLoading:!1}}))}},Ot=(e,a,s)=>{var i,c,h,y;const n=(y=(h=(c=(i=e==null?void 0:e.current)==null?void 0:i.editor)==null?void 0:c.plugins)==null?void 0:h.wordcount)==null?void 0:y.body.getCharacterCount();return s.includes("Mandatory")&&n<1?(Q(W=>({...W,[a]:{...W[a],errorMessage:"Mandatory"}})),!1):!0},at=async e=>{var a,s;try{const n=await zt.getDocsByApplicantType(qt.LOGIN,x,e);if(m(i=>({...i,otherDocInfo:{...i.otherDocInfo,isOtherDocInfoLoading:!0}})),Z(n))if(((a=n==null?void 0:n.data)==null?void 0:a.length)>0){const i=(s=n==null?void 0:n.data)==null?void 0:s.map(c=>ca(c));m(c=>({...c,otherDocInfo:{...c.otherDocInfo,otherDocInfoList:[...i],isOtherDocInfoLoading:!1}}))}else m(i=>({...i,otherDocInfo:{...i.otherDocInfo,isOtherDocInfoLoading:!1}}))}catch(n){console.log(n),m(i=>({...i,otherDocInfo:{...i.otherDocInfo,isOtherDocInfoLoading:!1}})),F(k(n))}},Et=e=>{var s,n;let a=(s=A==null?void 0:A.current)==null?void 0:s.getData();a&&(a={...a,isActive:void 0,uid:void 0,loanDocuments:[],loanDocumentsProof:{}}),e.index!==H&&!((n=M==null?void 0:M[H])!=null&&n.uid)&&ps(a)?(r(!0),we(e.index)):e.index!==H&&(ft(),Ee(e.index))},Wt=()=>{ft(),Ee(ye),r(!1)},d=(e,a)=>{var s;Ot(a,"businessModelValidation",["Mandatory"])&&(s=te==null?void 0:te.businessModelValidation)!=null&&s.errorMessage&&Q(n=>({...n,businessModelValidation:{...n.businessModelValidation,errorMessage:""}}))},u=async()=>{var a,s;const e=(a=A==null?void 0:A.current)==null?void 0:a.save();if(e){const n=la(e,x,z,Ie.CORPORATE_CO_APPLICANT);if(e.uid)try{const i=await Ct.updateCorporateBasicInfo(n);De(i)&&($(ne.SAVED),J(q.PRIMARY),C(!K),(s=A==null?void 0:A.current)==null||s.onSaveSuccess(),dt("ORG_BASIC_INFO",c=>{c.length-1<H&&Ee((c==null?void 0:c.length)-1)}))}catch(i){F(k(i))}else try{const i=await Ct.createCorporateBasicInfo(n);Qe(i)&&($(ne.SAVED),J(q.PRIMARY),C(!K),dt("ORG_BASIC_INFO",c=>{c.length-1<H&&Ee((c==null?void 0:c.length)-1)}))}catch(i){console.log(i),F(k(i))}}},I=()=>{m(e=>({...e,addressInfo:{...e.addressInfo,addressInfoPageMode:b.CREATE}}))},O=()=>{var e,a;(e=Ne==null?void 0:Ne.current)==null||e.resetValidator(),(a=We==null?void 0:We.current)==null||a.resetValidator(),m(s=>({...s,addressInfo:{...s.addressInfo,addressInfoPageMode:b.VIEW}}))},P=async e=>{var n,i,c,h,y,W,Le;const a=(n=Ne==null?void 0:Ne.current)==null?void 0:n.save(),s=(i=We==null?void 0:We.current)==null?void 0:i.getUploadedData();if(!a||!s)return Promise.resolve(!0);if(a&&s){const oe=ua({...a,uid:(h=(c=N.addressInfo)==null?void 0:c.address)==null?void 0:h.uid,isSameAsRegGSTAddress:(y=N.addressInfo)==null?void 0:y.isSameAsRegGSTAddress,addressDocumentsInfo:s??{}},x,e,Ie.CORPORATE_CO_APPLICANT);return(Le=(W=N.addressInfo)==null?void 0:W.address)!=null&&Le.uid?g(oe):S(oe)}},g=async e=>$t.updateOrgRegisteredAddress(e).then(a=>{De(a)&&(ct(),J(q.PRIMARY),$(ne.SAVED),C(!K),ee(!0),m(s=>({...s,addressInfo:{...s.addressInfo,addressInfoPageMode:b.VIEW}})))}).catch(a=>{F(k(a))}),S=async e=>$t.createOrgRegisteredAddress(e).then(a=>{Qe(a)&&(ct(),J(q.PRIMARY),$(ne.SAVED),C(!K),ee(!0),m(s=>({...s,addressInfo:{...s.addressInfo,addressInfoPageMode:b.VIEW}})))}).catch(a=>{F(k(a))}),v=()=>{const e={...Mt,listId:Math.random().toString(30).substring(2)};m(a=>({...a,partnerDirector:{...a.partnerDirector,partnerDirectorInfoList:[...a.partnerDirector.partnerDirectorInfoList,e]}}))},X=()=>{const e={...Qt};m(a=>({...a,bankAccount:{...a.bankAccount,bankAccountInfoList:[...a.bankAccount.bankAccountInfoList,e]}}))},G=async(e,a)=>{var n,i,c,h,y,W;const s=(i=(n=L==null?void 0:L.current)==null?void 0:n[e])==null?void 0:i.save();if(s){const Le=hs(s,x,a,Ie.CORPORATE_CO_APPLICANT);if(s.uid)try{const oe=await Rt.updateCorporateBankAccountDetail(Le);De(oe)&&($(ne.SAVED),J(q.PRIMARY),C(!K),(h=(c=L==null?void 0:L.current)==null?void 0:c[e])==null||h.onSaveSuccess(),st(a))}catch(oe){F(k(oe))}else try{const oe=await Rt.createCorporateBankAccountDetail(Le);Qe(oe)&&($(ne.SAVED),J(q.PRIMARY),C(!K),(W=(y=L==null?void 0:L.current)==null?void 0:y[e])==null||W.onSaveSuccess(),st(a))}catch(oe){console.log(oe),F(k(oe))}}},U=()=>{p(e=>[...e,{firstName:"New Tab",key:B()}]),be(e=>!e)},_=async(e,a)=>{if(e!=null&&e.uid)try{const s=await Ht.deleteApplicantInfo(e==null?void 0:e.uid);if(De(s)){if($(ne.SAVED),J(q.PRIMARY),C(!K),M.length===1){Vt(),le(!1),ft();return}es(a),le(!1)}}catch(s){F(k(s)),le(!1)}else{if(M.length===1){Vt(),le(!1),ft();return}es(a),le(!1)}},V=e=>{const a=[];a.push(Bs),e!=null&&e.uid&&a.push(()=>st(e==null?void 0:e.uid));for(const s of a)s()},se=e=>{const a=[];e!=null&&e.uid&&a.push(()=>Tt(e==null?void 0:e.uid));for(const s of a)s()},nt=e=>{const a=[];a.push(St),e!=null&&e.uid&&a.push(()=>ut(e==null?void 0:e.uid)),a.forEach(s=>s())},Ae=async(e,a)=>{var n,i;const s=(i=(n=L==null?void 0:L.current)==null?void 0:n[e])==null?void 0:i.remove();if(s){const c=hs(s,x,a,Ie.CORPORATE_CO_APPLICANT);if(s.uid)try{const h=await Rt.updateBankAccountDetail(c);De(h)&&(st(a),$(ne.REMOVED),J(q.PRIMARY),C(!K))}catch(h){F(k(h))}else{const h=N.bankAccount.bankAccountInfoList.filter((y,W)=>W!==e);m(y=>({...y,bankAccount:{...y.bankAccount,employmentInfoList:[...h]}}))}}},mt=async e=>{var a,s,n,i,c,h,y,W;if(Ot(Te,"businessModelValidation",["Mandatory"])&&(s=(a=Te.current)==null?void 0:a.editor)!=null&&s.getContent()){const Le=ma({...N.otherDetails,productServiceData:(i=(n=It.current)==null?void 0:n.editor)==null?void 0:i.getContent(),rawMaterialData:(h=(c=yt.current)==null?void 0:c.editor)==null?void 0:h.getContent(),businessModelData:(W=(y=Te.current)==null?void 0:y.editor)==null?void 0:W.getContent()},x);try{const oe=await ms.saveOrgOtherDetails(Le);Qe(oe)&&($(ne.SAVED),J(q.PRIMARY),C(!K),m(ds=>({...ds,otherDetails:{...ds.otherDetails,otherSectionMode:b.VIEW}})),Tt(e))}catch(oe){F(k(oe))}}},vt=()=>{m(e=>({...e,otherDetails:{...e.otherDetails,otherSectionMode:b.VIEW}})),Q(e=>({...e,businessModelValidation:{errorMessage:""}}))},Yt=()=>{m(e=>({...e,otherDetails:{...e.otherDetails,otherSectionMode:b.EDIT}}))},ge=e=>{const a=[];a.push(Ws),e&&(a.push(()=>xt(e)),a.push(()=>lt(e))),a.forEach(s=>s())},pt=e=>{e&&at(e)},Je=async e=>{var n,i,c;const a=(n=ue==null?void 0:ue.current)==null?void 0:n.save(),s=fa(x,e,a,Ie.CORPORATE_CO_APPLICANT);try{const h=await jt.updateCorpHistoricalFinancialInfo(s,Fe.DDE);De(h)&&((i=ue==null?void 0:ue.current)==null||i.editableTableRef(),(c=ue==null?void 0:ue.current)==null||c.resetTable(),J(q.PRIMARY),$(ne.SAVED),C(!K),m(y=>({...y,historicalFinDetails:{...y.historicalFinDetails,sectionMode:b.VIEW}})))}catch(h){F(k(h))}},js=async e=>{var n,i,c;const a=(n=Se==null?void 0:Se.current)==null?void 0:n.save(),s=ha(x,e,a);try{const h=await jt.updateCorpInvestmentInfo(s,Fe.DDE);De(h)&&(lt(e),(i=Se==null?void 0:Se.current)==null||i.editableTableRef(),(c=Se==null?void 0:Se.current)==null||c.resetTable(),J(q.PRIMARY),$(ne.SAVED),C(!K),m(y=>({...y,investmentDetails:{...y.investmentDetails,sectionMode:b.VIEW}})))}catch(h){F(k(h))}},Ms=async(e,a)=>{var n,i,c,h;const s=(i=(n=ae==null?void 0:ae.current)==null?void 0:n[e])==null?void 0:i.save();if(s){const y=gs(s,x,z,a,Ie.DIRECTOR);try{const W=await Xt.updateCorporatePartnerDirectors(y);De(W)&&($(ne.SAVED),J(q.PRIMARY),C(!K),(h=(c=ae==null?void 0:ae.current)==null?void 0:c[e])==null||h.onSaveSuccess(),ut(a))}catch(W){F(k(W))}}else return new Promise((y,W)=>W())},ws=async(e,a)=>{var n,i,c,h;const s=(i=(n=ae==null?void 0:ae.current)==null?void 0:n[e])==null?void 0:i.remove();if(s){const y=gs(s,x,z,a,Ie.DIRECTOR);if(s.uid)try{const W=await Xt.updateCorporatePartnerDirectors(y);De(W)&&($(ne.SAVED),J(q.PRIMARY),C(!K),(h=(c=ae==null?void 0:ae.current)==null?void 0:c[e])==null||h.onSaveSuccess(),ut(a))}catch(W){F(k(W))}else{const W=N.partnerDirector.partnerDirectorInfoList.filter((Le,oe)=>oe!==e);m(Le=>({...Le,partnerDirector:{...Le.partnerDirector,partnerDirectorInfoList:[...W]}}))}}},_s=()=>{const e={...Ts,listKey:Math.random().toString(36).substring(2)};m(a=>({...a,otherDocInfo:{...a.otherDocInfo,otherDocInfoList:[...a.otherDocInfo.otherDocInfoList,e]}}))},As=async e=>{var s;const a=(s=_e.current)==null?void 0:s.save();if(a)try{const n=await zt.saveDocument(qt.LOGIN,Fe.DDE,a);De(n)&&(m(i=>({...i,otherDocInfo:{...i.otherDocInfo,isOtherDocInfoLoading:!0,sectionMode:b.VIEW}})),at(e),J(q.PRIMARY),$(ne.SAVED),C(!K))}catch(n){console.log(n),F(k(n))}},ks=e=>{at(e),m(a=>({...a,otherDocInfo:{...a.otherDocInfo,sectionMode:b.VIEW}}))},Fs=async(e,a,s)=>{if(a.uid){const n={...a};n.isActive=!1;const i=ga([n],{loanUid:x,applicantUid:e,loanSectionKey:fs.applicants});try{const c=await zt.saveDocument(qt.LOGIN,Fe.DDE,i);De(c)&&(m(h=>({...h,otherDocInfo:{...h.otherDocInfo,isOtherDocInfoLoading:!0}})),at(e),J(q.QUATERNARY),$(ne.REMOVED),C(!K))}catch(c){console.log(c),F(k(c))}}s!==void 0&&Ys(s)},Us=()=>{At(),dt(),Vs()},Bs=()=>{kt()},Ws=()=>{},Ys=e=>{m(a=>{const s=N.otherDocInfo.otherDocInfoList.filter((n,i)=>i!==e);return{...a,otherDocInfo:{...a.otherDocInfo,otherDocInfoList:[...s]}}})},es=e=>{const a=[...M];e>=0&&e<M.length&&(a.splice(e,1),p(a),e+1===M.length-1&&H===e+1||(e===M.length-1&&H===e||e!==M.length-1&&H===M.length-1||e<H?setTimeout(()=>{Ee(H-1)},5):e===H&&(ft(),E(s=>!s))))},Vt=()=>{p([{firstName:"New Tab 1",key:B()}])},Vs=()=>{Ft(),Ut(),Nt(),Bt()},ft=()=>{m({...Ds})},Ks=()=>{m(e=>({...e,addressInfo:{...e.addressInfo,isAddressLoading:!0},otherDetails:{...e.otherDetails,isOtherDetailsLoading:!0},partnerDirector:{...e.partnerDirector,isPartnerDirectorInfoLoading:!0},bankAccount:{...e.bankAccount,isBankAccountInfoLoading:!0},otherDocInfo:{...e.otherDocInfo,isOtherDocInfoLoading:!0},historicalFinDetails:{...e.historicalFinDetails,isLoading:!0},investmentDetails:{...e.investmentDetails,isLoading:!0}}))},Kt=e=>({ocrStageName:ls.LOGIN,ocrSubstageName:Fe.DDE,ocrPayloadData:{loanUid:x,applicant:{uid:e}}}),Gs=e=>{const{isOrganisationDetailsLoading:a,organisationDetailsData:s}=N.organisationDetails;return t.jsx(xa,{data:s,dropDownOptions:ie,ref:A,documentCategory:gt.DOCUMENT_CATEGORY_BUSINESS_PROOF,isLoading:a,pageType:ta.CORPORATE_CO_APPLICANT,ocrRelatedData:Kt(e),onSaveOrganisationDetails:u})},Hs=e=>{var i;const{isAddressLoading:a,addressInfoPageMode:s,address:n}=N.addressInfo;return a?t.jsx(pe,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"}):t.jsx(ot,{disabled:!(e!=null&&e.uid),title:"subHeading.dde.red.address.organisation",pageMode:s,onEdit:I,onSave:()=>P(e==null?void 0:e.uid),onCancel:O,children:t.jsxs(Ns,{ref:Ne,variant:bs.SECONDARY,pageMode:s,data:n,isLatLong:!0,children:[t.jsx(xs,{label:"label.text.address.proof*",value:"Attach Documents (PDF, JPG, JPEG or PNG)",titleClass:"text-primary-sideBarBgColor text-sm font-bold mb-1"}),t.jsx(Ss,{mandatoryDocUpload:!0,ref:We,mode:s,savedDocument:(i=n.loanDocuments)!=null&&i[0]?n.loanDocuments[0]:{},queryParamForDocList:gt.DOCUMENT_CATEGORY_ADDRESS_PROOF,ocrStageName:ls.LOGIN,ocrSubstageName:Fe.DDE,ocrPayloadData:{loanUid:x,applicant:{uid:e==null?void 0:e.uid}}})]})})},ts=e=>{const{isOtherDetailsLoading:a,otherSectionMode:s,productServiceData:n,rawMaterialData:i,businessModelData:c}=N.otherDetails;return a?t.jsxs("div",{className:"rounded-xl  bg-white  flex flex-col justify-start items-center space-y-4 p-6",children:[t.jsx(pe,{height:"10.375rem",width:"100%",borderRadius:"8px",animation:"wave"}),t.jsx(pe,{height:"10.375rem",width:"100%",borderRadius:"8px",animation:"wave"}),t.jsx(pe,{height:"10.375rem",width:"100%",borderRadius:"8px",animation:"wave"})]}):t.jsx(ot,{disabledMenu:!0,disabled:!(e!=null&&e.uid),className:"bg-white",title:"heading.dde.otherDetails",pageMode:s,onCancel:vt,onEdit:Yt,onSave:()=>mt(e==null?void 0:e.uid),children:t.jsxs("div",{className:"flex flex-col justify-start items-start space-y-4",children:[t.jsxs("div",{className:"flex flex-col justify-start items-start space-y-1 w-full",children:[t.jsx(fe,{className:"text-primary-labelColor text-xs",label:"label.dde.otherDetails.product.service.editor"}),t.jsx(Gt,{hideErrorRow:!0,ref:It,height:200,initialValue:n,disabled:s===b.VIEW})]}),t.jsxs("div",{className:"flex flex-col justify-start items-start space-y-1 w-full",children:[t.jsx(fe,{className:"text-primary-labelColor text-xs",label:"label.dde.otherDetails.raw.material.editor"}),t.jsx(Gt,{hideErrorRow:!0,ref:yt,height:200,initialValue:i,disabled:s===b.VIEW})]}),t.jsxs("div",{className:"flex flex-col justify-start items-start space-y-1 w-full",children:[t.jsx(fe,{className:"text-primary-labelColor text-xs",label:"label.dde.otherDetails.business.model.editor"}),t.jsx(Gt,{ref:Te,height:200,initialValue:c,disabled:s===b.VIEW,onChange:h=>d(h,Te),validation:te==null?void 0:te.businessModelValidation})]})]})})},ss=e=>{const{isPartnerDirectorInfoLoading:a,partnerDirectorInfoList:s}=N.partnerDirector;return t.jsx("div",{className:"flex flex-col gap-4",children:s==null?void 0:s.map((n,i)=>t.jsx(Rs,{data:n,dropDownOptions:ie,ref:c=>{ae.current[i]=c},documentCategory:gt.DOCUMENT_CATEGORY_ADDRESS_PROOF,ocrRelatedData:Kt(e==null?void 0:e.uid),cardNumber:i+1,isLoading:a,onSavePartnerDirectorDetails:()=>Ms(i,e==null?void 0:e.uid),onRemovePartnerDirectorDetails:()=>ws(i,e==null?void 0:e.uid),disabled:!(e!=null&&e.uid),disabledSaveMenu:!(e!=null&&e.uid)},n!=null&&n.uid?n==null?void 0:n.uid:n.listId))})},as=e=>{const{bankAccountInfoList:a,isBankAccountInfoLoading:s}=N.bankAccount;return t.jsx("div",{className:"flex flex-col gap-4",children:a==null?void 0:a.map((n,i)=>t.jsx(ya,{disabled:!(e!=null&&e.uid),ref:c=>{L.current[i]=c},cardNumber:i+1,data:n,documentCategory:gt.DOCUMENT_CATEGORY_BANK_ACCOUNT_DOCUMENT,ocrRelatedData:Kt(e==null?void 0:e.uid),dropDownOptions:ie,isLoading:s,onRemoveBankAccountDetails:()=>Ae(i,e==null?void 0:e.uid),onSaveBankAccountDetails:()=>G(i,e==null?void 0:e.uid)},n==null?void 0:n.uid))})},ns=e=>{const{historicalFinDetails:a,investmentDetails:s}=N;return t.jsxs("div",{className:"flex flex-col gap-5",children:[t.jsx(Ra,{isLoading:a.isLoading,ref:ue,loanUid:x,pageId:e==null?void 0:e.uid,sectionMode:a.sectionMode,onSaveHistoricalFinInfo:()=>Je(e==null?void 0:e.uid),onCancel:()=>{m(n=>({...n,historicalFinDetails:{...n.historicalFinDetails,sectionMode:b.VIEW}}))},onEdit:()=>{m(n=>({...n,historicalFinDetails:{...n.historicalFinDetails,sectionMode:b.CREATE}}))},disabled:!(e!=null&&e.uid)}),t.jsx(wa,{isLoading:s.isLoading,ref:Se,loanUid:x,pageId:e==null?void 0:e.uid,sectionMode:s.sectionMode,savedInvestmentInfo:s,onSaveInvestmentInfo:()=>js(e==null?void 0:e.uid),onCancel:()=>{m(n=>({...n,investmentDetails:{...n.investmentDetails,sectionMode:b.VIEW}}))},onEdit:()=>{m(n=>({...n,investmentDetails:{...n.investmentDetails,sectionMode:b.CREATE}}))},disabled:!(e!=null&&e.uid)})]})},rs=e=>t.jsx(ot,{title:"",pageMode:N.otherDocInfo.sectionMode,onSave:()=>As(e==null?void 0:e.uid),onCancel:()=>{ks(e==null?void 0:e.uid)},onEdit:()=>m(a=>({...a,otherDocInfo:{...a.otherDocInfo,sectionMode:b.CREATE}})),disabled:!(e!=null&&e.uid),children:t.jsx(da,{ref:_e,isLoading:N.otherDocInfo.isOtherDocInfoLoading,otherDocumentsData:N.otherDocInfo.otherDocInfoList,sectionMode:N.otherDocInfo.sectionMode,payloadInfo:{loanUid:x,applicantUid:e==null?void 0:e.uid,loanSectionKey:fs.applicants},onRemoveDocFromList:(a,s)=>{Fs(e==null?void 0:e.uid,a,s)}})}),$s=(e,a)=>t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsx(rt,{title:"heading.dde.organisation.details",children:t.jsxs(t.Fragment,{children:[Gs(e==null?void 0:e.uid),Hs(e),e!=null&&e.uid?t.jsx(ht,{onLazyLoad:()=>se(e),children:ts(e)}):t.jsx(ke.Fragment,{children:ts(e)})]})}),t.jsx(rt,{title:"heading.dde.partner.director.details",children:e!=null&&e.uid?t.jsxs(ht,{onLazyLoad:()=>{nt(e)},children:[ss(e),t.jsx("div",{className:"p-5 w-full rounded-xl bg-slate-100 mt-5",children:t.jsx(Ze,{buttonType:Xe.ICON_TEXT_ROW,customLabel:"label.dde.add.another.partner.director.details",onClick:v})})]}):t.jsx(ke.Fragment,{children:ss(e)})}),t.jsx(rt,{title:"heading.dde.bankAccount.details",alertText:"At least one bank account detail is mandatory",children:e!=null&&e.uid?t.jsxs(ht,{onLazyLoad:()=>V(e),children:[as(e),t.jsx("div",{className:"p-5 w-full rounded-xl bg-slate-100 mt-5",children:t.jsx(Ze,{buttonType:Xe.ICON_TEXT_ROW,customLabel:"label.dde.add.another.bankAccount.details",onClick:X})})]}):t.jsx(ke.Fragment,{children:as(e)})}),t.jsx(rt,{title:"heading.dde.financial.details",children:e!=null&&e.uid?t.jsx(ht,{onLazyLoad:()=>ge(e==null?void 0:e.uid),children:ns(e)}):t.jsx(ke.Fragment,{children:ns(e)})}),t.jsx(rt,{title:"label.heading.otherDocuments",children:e!=null&&e.uid?t.jsxs(ht,{onLazyLoad:()=>pt(e==null?void 0:e.uid),children:[rs(e),t.jsx("div",{className:"p-5 w-full rounded-xl bg-slate-100 mt-5",children:t.jsx(Ze,{buttonType:Xe.ICON_TEXT_ROW,customLabel:"Add Another Document",onClick:_s})})]}):t.jsx(ke.Fragment,{children:rs(e)})})]},e==null?void 0:e.key),Cs=()=>t.jsx(fe,{className:"",label:`( ${M.length>1?`${M.length} Members`:`${M.length} Member`} )`});return re?t.jsx(ea,{}):t.jsxs(ke.Fragment,{children:[t.jsxs("div",{className:"scrollable-tab dynamic-tab relative deleteable-header",children:[t.jsx(sa,{showTooltip:!0,enableTabMenu:!0,scrollable:!0,tabHeaderMenuModel:(e,a)=>_t(e,a),optionLabel:["firstName","middleName","lastName"],optionKey:["uid","key"],headerClassName:"dynamic-header",ref:j,activeIndex:H,tabs:M,onTabChange:Et,renderContent:$s}),t.jsxs("div",{className:"absolute top-0 right-0 text-[#A3A3A3] text-xs flex justify-evenly items-center w-[15%] space-x-4 pb-2.5 border-b",children:[Cs(),t.jsx("div",{className:"",children:t.jsx(Ze,{buttonType:Xe.ICON_BUTTON_ADD,onClick:U})})]})]}),t.jsx(wt,{position:Be,ref:f,toastText:Ye,variant:xe}),t.jsx(Dt,{onHide:()=>{T(!1),F("")},visible:l,errorMessage:me}),t.jsx(us,{visible:de,className:"w-76 !px-14",title:"Remove Corporate Co-Applicant ?",warningMessage:`Corporate Co-Applicant ${(os=Y==null?void 0:Y.corporateCoApplicant)==null?void 0:os.firstName} will be removed`,onCancel:()=>le(!1),onConfirm:()=>{_(Y==null?void 0:Y.corporateCoApplicant,Y==null?void 0:Y.index)},onHide:()=>{}}),t.jsx(us,{visible:D,className:"w-76 !px-14",title:"Discard added data ?",warningMessage:"Your data will be lost if not saved before navigating to a different tab",onCancel:()=>r(!1),onConfirm:Wt,onHide:()=>{}})]})};export{Gn as default};
//# sourceMappingURL=PageCorporateCoApplicants-c125109e.js.map
