import{w as Oe,r,aG as w,x as et,j as s,T as c,J as M,dP as xe,aH as pe,ao as Te,o as f,b as tt,l as st,b3 as Ne,f as ye,c$ as L}from"./index-e8217573.js";import{A as at,M as lt,i as Re}from"./AddNewReceiptDialog-69862c63.js";import{A as B}from"./AutoComplete-0bca608a.js";import{B as P}from"./ButtonBox-9e46519a.js";import{E as ot}from"./ErrorDialog-d5eef4d7.js";import{I as Ee}from"./InputBox-b9e88f52.js";import{M as nt}from"./MenuBox-defc36b0.js";import{R as rt}from"./ReadOnlyTable-86accb69.js";import{S as it}from"./SectionTitle-9f9277ec.js";import{S as ct}from"./SharePaymentDetails-7d6fd6f2.js";import{W as dt}from"./WarningDialog-77a1cb18.js";import{u as h}from"./CustomHooks-0ce50620.js";import{C as x}from"./column.esm-938bad7d.js";import{S as ut}from"./StaticMasterDataService-689a6eca.js";import{D as Ae}from"./DepositAccountService-fb3e0018.js";import{F}from"./FeeService-43f7dd78.js";import{L as mt}from"./LoanService-d10912e0.js";import{e as ft}from"./Helper-03e9d878.js";import{S as k}from"./SystemDatePicker-abe08a29.js";import"./Dialog-adadaf64.js";import"./DocumentUploader-e2ec1a13.js";import"./loader-5f2cfb31.js";import"./DatePicker-b1c13861.js";import"./withAuth-6de36ebf.js";import"./FileUploadCustom-5ab7fd25.js";import"./Loading-783a01c7.js";import"./MediaGallery-5884b284.js";import"./Download_Icon-51fc7f46.js";import"./index-8739acfd.js";import"./Skeleton-7e12d019.js";import"./FileUploadService-1aaf11f7.js";import"./FileUploadMenuBox-f47dc693.js";import"./kebab-menu-8835ad2e.js";import"./SimpleDropDown-061a3470.js";import"./virtualscroller.esm-9939945c.js";import"./Toast-ae99ea5b.js";import"./TransitionGroup-c8afe0ce.js";import"./IconButton-36693dd9.js";import"./sortIcon-54357a29.js";import"./eye_icon-081bddb3.js";import"./DocumentService-a293b5f4.js";import"./TextData-06df331b.js";import"./Helper-54d1e873.js";import"./search_icon-459d6871.js";import"./No_data-1720c54e.js";import"./datatable.esm-f474a654.js";import"./paginator.esm-11c2c115.js";import"./EditableTableV2-6afcb42b.js";import"./LinkButton-92540c18.js";import"./link-0172a3d4.js";const Ce={deposit:{uid:"",name:""},depositAmountGreaterThenEqualTo:"",depositAmountLessThenEqualTo:"",dateOfDepositGreaterThenEqualTo:"",dateOfDepositLessThenEqualTo:"",sahayyaBankAccount:{name:"",accountNumber:""},loan:{uid:"",name:""},status:"",updatedOnGreaterThenEqualTo:"",updatedOnLessThenEqualTo:""},ht={showFilter:!0,filter:{...Ce},tableSearch:"&isActive=true",dropdownOptions:{instrumentType:[]},deleteReceipt:{showPopUp:!1,uid:""},sharePaymentDialog:!1,editReceiptDialog:!1,editReceipt:{...Re}},xt=Se=>{var O,ee;const[t,i]=r.useState({...ht}),[De,H]=r.useState(!1),[b,_]=r.useState(""),[V,Y]=r.useState(""),[ve,W]=r.useState(w.PRIMARY),[G,K]=r.useState(!1),[$,J]=r.useState([{name:""}]),[Ie,pt]=r.useState([{className:"px-1.5 text-xs text-primary-labelColor h-6.5 hover:bg-primary-sapphireBlue-100",label:"Delete",receiptUid:"",command:function(){console.log("delete")}}]),d=r.useRef(null),qe=r.useRef(null),p=r.useRef(null),X=r.useRef(null);et(),r.useEffect(()=>{var e;(e=d==null?void 0:d.current)==null||e.search(),Ye()},[]),r.useEffect(()=>{b&&H(!0)},[b]),r.useEffect(()=>{var e;p!=null&&p.current&&V!==""&&((e=p==null?void 0:p.current)==null||e.showFunction(),Y(""))},[V,ve,G]),r.useEffect(()=>{var e;(e=d==null?void 0:d.current)==null||e.search()},[t==null?void 0:t.tableSearch]);const g=e=>{const{name:a,value:l}=e.target;i(o=>({...o,filter:{...o.filter,[a]:l}}))},z=e=>{const{name:a,value:l}=e.target,o=L(l??"");i(n=>({...n,filter:{...n.filter,[a]:typeof o=="number"?Ne(o,"en-IN",0):""}}))},Le=e=>{const{value:a}=e.target;i(typeof a=="object"?l=>({...l,filter:{...l.filter,[e.target.name]:{name:a.depositRefNo}}}):l=>({...l,filter:{...l.filter,[e.target.name]:{name:a}}}))},Q=(e,a)=>{const{value:l}=e.target;if(typeof l=="object")i(o=>({...o,filter:{...o.filter,[e.target.name]:{name:l.holderName,accountNumber:l.accountNumber}}}));else{let o={};a?o={...o,name:"",accountNumber:l}:o={...o,name:l,accountNumber:""},i(n=>({...n,filter:{...n.filter,[e.target.name]:{...o}}}))}},Fe=e=>{const{value:a}=e.target;i(typeof a=="object"?l=>({...l,filter:{...l.filter,[e.target.name]:{name:a.lanId,uid:a.uid}}}):l=>({...l,filter:{...l.filter,[e.target.name]:{name:a,uid:""}}}))},$e=()=>{i(e=>({...e,filter:{...e.filter,...Ce}}))},ge=()=>{var a,l,o,n,u,T,N,y,E,A,R,C,S,D,v,I,q,m,te,se,ae,le,oe,ne,re,ie,ce,de,ue,me,fe,he;let e="";(l=(a=t==null?void 0:t.filter)==null?void 0:a.deposit)!=null&&l.name&&(e=`${e}&depositRefNo=${(n=(o=t==null?void 0:t.filter)==null?void 0:o.deposit)==null?void 0:n.name}`),L((u=t==null?void 0:t.filter)==null?void 0:u.depositAmountGreaterThenEqualTo)&&(e=`${e}&totalAmount:ge=${L((T=t==null?void 0:t.filter)==null?void 0:T.depositAmountGreaterThenEqualTo)}`),L((N=t==null?void 0:t.filter)==null?void 0:N.depositAmountLessThenEqualTo)&&(e=`${e}&totalAmount:le=${L((y=t==null?void 0:t.filter)==null?void 0:y.depositAmountLessThenEqualTo)}`),(E=t==null?void 0:t.filter)!=null&&E.dateOfDepositGreaterThenEqualTo&&(e=`${e}&depositDate:ge=${(R=new Date((A=t==null?void 0:t.filter)==null?void 0:A.dateOfDepositGreaterThenEqualTo))==null?void 0:R.toISOString()}`),(C=t==null?void 0:t.filter)!=null&&C.dateOfDepositLessThenEqualTo&&(e=`${e}&depositDate:le=${(D=new Date((S=t==null?void 0:t.filter)==null?void 0:S.dateOfDepositLessThenEqualTo))==null?void 0:D.toISOString()}`),(I=(v=t==null?void 0:t.filter)==null?void 0:v.sahayyaBankAccount)!=null&&I.name&&(e=`${e}&holderName=${(m=(q=t==null?void 0:t.filter)==null?void 0:q.sahayyaBankAccount)==null?void 0:m.name}`),(se=(te=t==null?void 0:t.filter)==null?void 0:te.sahayyaBankAccount)!=null&&se.accountNumber&&(e=`${e}&accountNumber=${(le=(ae=t==null?void 0:t.filter)==null?void 0:ae.sahayyaBankAccount)==null?void 0:le.accountNumber}`),(ne=(oe=t==null?void 0:t.filter)==null?void 0:oe.loan)!=null&&ne.name&&(e=`${e}&lanId=${(ie=(re=t==null?void 0:t.filter)==null?void 0:re.loan)==null?void 0:ie.name}`),(ce=t==null?void 0:t.filter)!=null&&ce.updatedOnGreaterThenEqualTo&&(e=`${e}&updatedAtSystemDate:ge=${(ue=new Date((de=t==null?void 0:t.filter)==null?void 0:de.updatedOnGreaterThenEqualTo))==null?void 0:ue.toISOString()}`),(me=t==null?void 0:t.filter)!=null&&me.updatedOnLessThenEqualTo&&(e=`${e}&updatedAtSystemDate:le=${(he=new Date((fe=t==null?void 0:t.filter)==null?void 0:fe.updatedOnLessThenEqualTo))==null?void 0:he.toISOString()}`),i(je=>({...je,tableSearch:e}))},Me=()=>{i(e=>({...e,showFilter:!e.showFilter}))},Be=()=>{i(e=>({...e,sharePaymentDialog:!e.sharePaymentDialog}))},Pe=()=>{Se.navigate(xe)},Z=()=>{i(e=>({...e,deleteReceipt:{...e.deleteReceipt,showPopUp:!1,uid:""}}))},ke=async()=>{var e;try{await F.deleteDdeReceipt(t.deleteReceipt.uid),W(w.PRIMARY),Y(pe.SAVED),K(!G),(e=d==null?void 0:d.current)==null||e.search(),Z()}catch(a){console.log(a),_(Te(a))}},j=()=>{i(e=>({...e,editReceipt:{...e==null?void 0:e.editReceipt,...Re},editReceiptDialog:!1}))},be=async e=>{var l,o;const a=ft(e);if(a)try{let n;a!=null&&a.uid?n=F.updateDdeReceipt:n=F.createDdeReceipt,await(n==null?void 0:n(a)),W(w.PRIMARY),Y(pe.SAVED),K(!G),(l=d==null?void 0:d.current)==null||l.search(),(o=X.current)==null||o.onCloseAndClearData(),j()}catch(n){console.log(n),_(Te(n))}},_e=async e=>{let a=[];try{await Ae.getBankAccount(0,50,e.query).then(l=>{var n;const o=(n=l.data.results)==null?void 0:n.map(u=>({holderName:u.bank.name,accountNumber:u.accountNumber,branch:u.ifsc.branch,uid:u.uid}));l.status===200&&(a=[...o??[]])})}catch(l){console.log(l)}a.length===0&&a.push({name:"",uid:""}),J(a)},U=async(e,a)=>{var o;let l=[];await((o=a==null?void 0:a.service)==null?void 0:o.call(a,0,50,`${a.field}:lk=${e.query}${a==null?void 0:a.search}`).then(n=>{n.status===200&&(l=[...n.data.results])})),l.length===0&&l.push({name:""}),J(l)},Ye=async()=>{var e;try{const a=await ut.getDropdownList("FEE_MODE"),l=[];(e=a==null?void 0:a.data)==null||e.results.forEach(o=>{l.push({name:(o==null?void 0:o.name)??"",value:o==null?void 0:o.code})}),i(o=>({...o,dropdownOptions:{...o.dropdownOptions,instrumentType:l}}))}catch(a){console.error(a)}},Ge=e=>(e==null?void 0:e.depositRefNo)===void 0||(e==null?void 0:e.depositRefNo)===""?s.jsx("div",{className:"flex flex-col items-center justify-center h-39 pointer-events-none cursor-default",children:s.jsx(c,{className:"text-primary-labelColor mt-2",label:"label.noDataFound"})}):s.jsx("div",{className:"flex flex-col",children:s.jsx(c,{className:"text-primary-labelColor",label:`${e.depositRefNo}`})}),Ue=e=>(e==null?void 0:e.holderName)===void 0||(e==null?void 0:e.holderName)===""?s.jsx("div",{className:"flex flex-col items-center justify-center h-39 pointer-events-none cursor-default",children:s.jsx(c,{className:"text-primary-labelColor mt-2",label:"label.noDataFound"})}):s.jsx("div",{className:"flex flex-col",children:s.jsx(c,{className:"text-primary-labelColor",label:`${e.holderName}`})}),we=e=>(e==null?void 0:e.accountNumber)===void 0||(e==null?void 0:e.accountNumber)===""?s.jsx("div",{className:"flex flex-col items-center justify-center h-39 pointer-events-none cursor-default",children:s.jsx(c,{className:"text-primary-labelColor mt-2",label:"label.noDataFound"})}):s.jsx("div",{className:"flex flex-col",children:s.jsx(c,{className:"text-primary-labelColor",label:`${e.accountNumber}`})}),He=e=>(e==null?void 0:e.uid)===void 0||(e==null?void 0:e.uid)===""?s.jsx("div",{className:"flex flex-col items-center justify-center h-39 pointer-events-none cursor-default",children:s.jsx(c,{className:"text-primary-labelColor mt-2",label:"label.noDataFound"})}):s.jsx("div",{className:"flex flex-col",children:s.jsx(c,{className:"text-primary-labelColor",label:`${e==null?void 0:e.lanId}`})}),Ve=()=>{var e,a,l,o,n,u,T,N,y,E,A,R,C,S,D,v,I,q;return s.jsxs("div",{className:"p-3 flex flex-col gap-6 bg-primary-sapphireBlue-100 rounded-lg",children:[s.jsx("div",{className:"flex ",children:s.jsx(it,{title:"text.masterData.types.search"})}),s.jsxs("div",{className:" grid grid-cols-1 md:grid-cols-4 gap-3",children:[s.jsx("div",{children:s.jsx(B,{label:"label.fees.depositsId",name:"deposit",field:"name",value:(a=(e=t==null?void 0:t.filter)==null?void 0:e.deposit)==null?void 0:a.name,variant:f.PRIMARY,suggestions:$,completeMethod:m=>U(m,{field:"&depositRefNo",search:"",service:F.getFeeCollectionDepositList}),onChange:Le,itemTemplate:Ge})}),s.jsx("div",{children:s.jsx(Ee,{label:"label.fees.depositAmount>=",name:"depositAmountGreaterThenEqualTo",value:(l=t==null?void 0:t.filter)==null?void 0:l.depositAmountGreaterThenEqualTo,variant:f.SECONDARY,onChange:z})}),s.jsxs("div",{className:"grid-group",children:[s.jsx("div",{className:"mb-1 h-4.75 flex",children:s.jsx("span",{className:"font-sans text-primary-labelColor text-xs",children:"Deposit Amount <="})}),s.jsx(Ee,{hideLabel:!0,name:"depositAmountLessThenEqualTo",value:(o=t==null?void 0:t.filter)==null?void 0:o.depositAmountLessThenEqualTo,variant:f.SECONDARY,onChange:z})]}),s.jsx("div",{className:"grid-group",children:s.jsx(k,{label:"label.fees.dateOfDeposit>=",name:"instrumentDateGreaterThenEqualTo",onChange:g,value:(n=t==null?void 0:t.filter)!=null&&n.dateOfDepositGreaterThenEqualTo?new Date((u=t==null?void 0:t.filter)==null?void 0:u.dateOfDepositGreaterThenEqualTo):null,variant:f.SECONDARY})}),s.jsxs("div",{className:"grid-group",children:[s.jsx("div",{className:"mb-1 h-4.75 flex",children:s.jsx("span",{className:"font-sans text-primary-labelColor text-xs",children:"Date of Deposit <="})}),s.jsx(k,{hideLabel:!0,name:"instrumentDateGreaterThenEqualTo",onChange:g,value:(T=t==null?void 0:t.filter)!=null&&T.dateOfDepositLessThenEqualTo?new Date((N=t==null?void 0:t.filter)==null?void 0:N.dateOfDepositLessThenEqualTo):null,variant:f.SECONDARY})]}),s.jsx("div",{children:s.jsx(B,{label:"label.fees.sahayyaBankAccount",name:"sahayyaBankAccount",field:"name",value:(E=(y=t==null?void 0:t.filter)==null?void 0:y.sahayyaBankAccount)==null?void 0:E.name,variant:f.PRIMARY,suggestions:$,completeMethod:_e,onChange:Q,itemTemplate:Ue})}),s.jsx("div",{children:s.jsx(B,{label:"label.fees.accountNo",name:"sahayyaBankAccount",field:"name",value:(R=(A=t==null?void 0:t.filter)==null?void 0:A.sahayyaBankAccount)==null?void 0:R.accountNumber,variant:f.PRIMARY,suggestions:$,completeMethod:m=>U(m,{field:"&accountNumber",search:"",service:Ae.getBankDetails}),onChange:m=>Q(m,!0),itemTemplate:we})}),s.jsx("div",{children:s.jsx(B,{label:"label.fees.loanApplicationNo.",name:"loan",field:"name",value:(S=(C=t==null?void 0:t.filter)==null?void 0:C.loan)==null?void 0:S.name,variant:f.PRIMARY,suggestions:$,completeMethod:m=>U(m,{field:"&lanId",search:"&loanStatus:nq=DRAFT",service:mt.getAll}),onChange:Fe,itemTemplate:He})}),s.jsx("div",{className:"grid-group",children:s.jsx(k,{label:"label.fees.updatedOn>=",name:"updatedOnGreaterThenEqualTo",onChange:g,value:(D=t==null?void 0:t.filter)!=null&&D.updatedOnGreaterThenEqualTo?new Date((v=t==null?void 0:t.filter)==null?void 0:v.updatedOnGreaterThenEqualTo):null,variant:f.SECONDARY})}),s.jsxs("div",{className:"grid-group",children:[s.jsx("div",{className:"mb-1 h-4.75 flex",children:s.jsx("span",{className:"font-sans text-primary-labelColor text-xs",children:"Updated On <="})}),s.jsx(k,{hideLabel:!0,name:"updatedOnLessThenEqualTo",onChange:g,value:(I=t==null?void 0:t.filter)!=null&&I.updatedOnLessThenEqualTo?new Date((q=t==null?void 0:t.filter)==null?void 0:q.updatedOnLessThenEqualTo):null,variant:f.SECONDARY})]}),s.jsxs("div",{className:"col-span-4 flex gap-5 justify-end",children:[s.jsx(P,{buttonType:M.RESET_OUTLINE,onClick:$e}),s.jsx(P,{buttonType:M.SEARCH_OUTLINE,onClick:ge})]})]})]})},We=e=>{const a=tt+st+xe+"/"+e.depositUid;return s.jsx("a",{className:"flex items-center underline text-primary-sapphireBlue-900",href:a,children:e==null?void 0:e.depositRefNo})},Ke=e=>s.jsx(c,{className:" text-xs text-secondary-labelColor ",label:Ne(e==null?void 0:e.totalAmount,"en-IN",0)}),Je=e=>s.jsx(c,{className:" text-xs text-secondary-labelColor ",label:ye(e==null?void 0:e.depositDate)}),Xe=e=>s.jsx(c,{className:" text-xs text-secondary-labelColor ",label:`${e==null?void 0:e.holderName} - ${e==null?void 0:e.accountNumber}`}),ze=e=>s.jsx(c,{className:" text-xs text-secondary-labelColor ",label:e==null?void 0:e.receiptCount}),Qe=e=>s.jsx(c,{className:" text-xs text-secondary-labelColor ",label:e==null?void 0:e.lanId}),Ze=e=>s.jsx(c,{className:" text-xs text-secondary-labelColor ",label:ye(e==null?void 0:e.updatedAtSystemDate)});return s.jsxs("div",{className:"p-3 rounded-masterDataPageRadius bg-white flex flex-col gap-3 loan-listing-layout-body-content",children:[s.jsxs("div",{className:"flex w-full justify-between items-center",children:[s.jsx(c,{label:"label.fees.deposits",className:"text-primary-ptext-1000 text-h2 font-bold flex"}),s.jsxs("div",{className:"flex gap-10",children:[s.jsx(P,{buttonType:M.FILTER_OUTLINE,onClick:Me}),s.jsx(P,{buttonType:M.CREATE_NEW_DEPOSIT,className:"create-button",onClick:Pe})]})]}),(t==null?void 0:t.showFilter)&&Ve(),s.jsxs(rt,{standardDataFormatPromise:F.getFeeCollectionDepositList,dataKey:"id",search:t.tableSearch,ref:d,children:[s.jsx(x,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6 min-w-35",header:h("label.fees.depositsId"),body:We}),s.jsx(x,{className:"text-primary-ptext-1000 text-right text-xs  p-1 h-12 pl-6 ",header:h("label.fees.depositAmount"),body:Ke}),s.jsx(x,{className:"text-primary-ptext-1000 text-left text-xs w-1/12  p-1 h-12 pl-6",header:h("label.fees.dateOfDeposit"),body:Je}),s.jsx(x,{className:"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6",header:h("label.fees.sahayyaBankAccountAccountNo"),body:Xe}),s.jsx(x,{className:"text-primary-ptext-1000 text-right text-xs  p-1 h-12 pl-6",header:h("label.fees.noOfReceipt"),body:ze}),s.jsx(x,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:h("label.fees.loanApplicationNo(s)"),body:Qe}),s.jsx(x,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6 min-w-35 ",header:h("label.fees.updatedOn"),body:Ze})]}),s.jsx(ct,{visible:t==null?void 0:t.sharePaymentDialog,onHide:Be,instrumentTypeOptions:t.dropdownOptions.instrumentType}),s.jsx(at,{visible:!!(t!=null&&t.editReceiptDialog||(O=t==null?void 0:t.editReceipt)!=null&&O.uid),onHide:j,instrumentTypeOptions:t.dropdownOptions.instrumentType,module:lt.FEES,data:{updateReceiptDetails:t==null?void 0:t.editReceipt},onSubmit:be,ref:X}),s.jsx(nt,{ref:qe,model:Ie,variant:"SECONDARY",buttonClassName:"!bg-transparent",className:"width-full-menubox bg-white  w-max p-1.5 rounded-xl mt-0.5 border shadow-autoCompletePanel"}),s.jsx(dt,{visible:(ee=t==null?void 0:t.deleteReceipt)==null?void 0:ee.showPopUp,className:"w-76 !px-14",title:"heading.dde.fees.receiptDelete",warningMessage:"description.dde.fees.receiptDelete",onCancel:Z,onConfirm:()=>ke(),onHide:()=>{}}),s.jsx(ot,{onHide:()=>{H(!1),_("")},visible:De,errorMessage:b})]})},fs=Oe(xt);export{fs as default};
//# sourceMappingURL=PageDeposit-1245c5db.js.map
