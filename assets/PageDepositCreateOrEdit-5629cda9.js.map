{"version":3,"file":"PageDepositCreateOrEdit-5629cda9.js","sources":["../../src/views/transaction/fees/PageDepositCreateOrEdit/PageDepositCreateOrEdit.tsx"],"sourcesContent":["import AclGuard from \"components/AclGuard/AclGuard\";\nimport AutoComplete from \"components/AutoComplete/AutoComplete\";\nimport ButtonBox from \"components/ButtonBox/ButtonBox\";\nimport DocumentUploader, {\n  DOC_UPLOADER_MODE,\n  IDocumentUploaderRef,\n} from \"components/DocumentUploader/DocumentUploader\";\nimport ErrorDialog from \"components/ErrorDialog/ErrorDialog\";\nimport IconButton, { BUTTON_TYPES } from \"components/IconButton/IconButton\";\nimport InputBox from \"components/InputBox/InputBox\";\nimport InputError from \"components/InputError/InputError\";\nimport ReadOnlyTable, { IReadonlyTableRef } from \"components/ReadOnlyTable/ReadOnlyTable\";\nimport SkeletonCustom from \"components/Skeleton/Skeleton\";\nimport SystemDatePicker from \"components/SystemDatePicker/SystemDatePicker\";\nimport Text from \"components/Text/Text\";\nimport TextData from \"components/TextData/TextData\";\nimport ToastCustom from \"components/Toast\";\nimport WarningDialog from \"components/WarningDialog/WarningDialog\";\nimport { RouteProps, withRouter } from \"hoc/withRouter\";\nimport { useTranslateText } from \"hook/CustomHooks\";\nimport { numberFormatter } from \"locale\";\nimport { Column } from \"primereact/column\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport DepositAccountService from \"services/transaction/DDE/DepositAccountService\";\nimport FeeService from \"services/transaction/FeeService\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport {\n  LINK_FEES_DEPOSIT,\n  LINK_FEES_DEPOSIT_CREATE_EDIT_FROM_RECONCILIATION,\n  LINK_RECONCILIATION,\n} from \"transactionRoutes\";\nimport {\n  convertToIndianNumbering,\n  formatDate,\n  getStandardValidator,\n  messageReplace,\n  parseStandardAPIErrorMessage,\n} from \"utils/CommonUtil\";\nimport {\n  BUTTON_TYPE,\n  DOCUMENT_CATEGORY,\n  FEE_MODE,\n  FEE_MODE_LABEL,\n  FEE_RECEIPT_STATUS,\n  INPUT_STYLE_TYPE,\n  LOAN_SECTION_KEY,\n  PAGE_MODE,\n  STATIC_MASTER_TYPE_TOAST_TEXT,\n  TOAST_STYLE_TYPE,\n} from \"utils/Constant\";\nimport { getNumber } from \"views/transaction/PageCAM/Helper\";\nimport {\n  IDropDownOptions,\n  prepareAttributes,\n  prepareDocSections,\n  structLoanDocumentsFromAPIResponse,\n} from \"views/transaction/PageDDE/Login/Helper\";\nimport { IFeeCollectionReceiptRowData } from \"../PageReceipts/PageReceipts\";\n\ninterface IAutocomplete {\n  name: string;\n  uid: string;\n}\n\ninterface IPageObj {\n  sahayyaBankAccount: {\n    name: string;\n    uid: string;\n    branch: string;\n    accountNumber?: string;\n  };\n  loan: IAutocomplete;\n  tableData: IFeeCollectionReceiptRowData[];\n  dateOfDeposits: string;\n  deleteReceipt: {\n    showPopUp: boolean;\n    uid: string;\n  };\n  dropdownOptions: {\n    instrumentType: IDropDownOptions[];\n    // instrumentType:IDropDownOptions[];\n  };\n  depositAmount: number | string;\n  depositAmountInWords: string;\n  savedDocuments: any[];\n  pageMode: string;\n  isLoading: boolean;\n}\n\nconst initialPageObj: IPageObj = {\n  sahayyaBankAccount: {\n    uid: \"\",\n    name: \"\",\n    branch: \"\",\n    accountNumber: \"\",\n  },\n  loan: {\n    uid: \"\",\n    name: \"\",\n  },\n  tableData: [],\n  dateOfDeposits: \"\",\n  dropdownOptions: {\n    instrumentType: [],\n  },\n  deleteReceipt: {\n    showPopUp: false,\n    uid: \"\",\n  },\n  depositAmount: \"\",\n  depositAmountInWords: \"\",\n  savedDocuments: [],\n  pageMode: PAGE_MODE.EDIT,\n  isLoading: true,\n};\n\nconst PageDepositCreateOrEdit = (props: RouteProps) => {\n  const params: { depositUid?: string } = useParams();\n  /*\n    -------------------------------------------------------\n      State\n    -------------------------------------------------------\n    */\n\n  const [pageObj, setPageObj] = useState<IPageObj>({\n    ...initialPageObj,\n    pageMode: params?.depositUid ? PAGE_MODE.VIEW : PAGE_MODE.EDIT,\n  });\n  const [showDialogAPIError, setShowDialogAPIError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [toastMessage, setToastMessage] = useState(\"\");\n  const [toastMessageVariant, setToastMessageVariant] = useState(TOAST_STYLE_TYPE.PRIMARY);\n  const [triggerToast, setTriggerToast] = useState(false);\n  const [suggestionsTemplate, setSuggestionsTemplate] = useState<any>([{ name: \"\" }]);\n  const [, forceUpdate] = useState<boolean>(false);\n\n  const dataTableRef = useRef<IReadonlyTableRef>(null);\n  const receiptDeleteMenuRef = useRef<any>(null);\n  const toastMessageRef = useRef(null);\n\n  const simpleValidator = useRef(\n    new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    })\n  );\n  const documentUploaderRef = useRef<IDocumentUploaderRef | null>(null);\n\n  // --------------------------- global variables ---------------------- //\n\n  /*\n     -------------------------------------------------------\n       useEffect\n     -------------------------------------------------------\n   */\n  useEffect(() => {\n    dataTableRef?.current?.search();\n    // getInstrumentType();\n  }, []);\n\n  useEffect(() => {\n    if (errorMessage) {\n      setShowDialogAPIError(true);\n    }\n  }, [errorMessage]);\n\n  useEffect(() => {\n    if (toastMessageRef?.current && toastMessage !== \"\") {\n      // @ts-ignore: will be fixed in future\n      toastMessageRef?.current?.showFunction();\n      setToastMessage(\"\");\n    }\n  }, [toastMessage, toastMessageVariant, triggerToast]);\n\n  useEffect(() => {\n    setPageObj((prevPageObj) => {\n      const updatedPageObj = { ...prevPageObj };\n      let depositAmount = 0;\n      if (Array.isArray(updatedPageObj.tableData)) {\n        for (const row of updatedPageObj.tableData) {\n          depositAmount += getNumber(row.amount);\n        }\n        updatedPageObj.depositAmount = depositAmount;\n        updatedPageObj.depositAmountInWords = convertToIndianNumbering(depositAmount);\n      }\n      return updatedPageObj;\n    });\n  }, [pageObj?.tableData]);\n\n  useEffect(() => {\n    if (params?.depositUid) {\n      getDepositDetails();\n    }\n  }, [params?.depositUid]);\n\n  const getDepositDetails = async () => {\n    setPageObj((prevObj) => ({\n      ...prevObj,\n      isLoading: true,\n    }));\n    try {\n      const res: any = await FeeService.getOneFeeCollectionDeposit(params?.depositUid);\n      const receiptRecords: any[] = [];\n      if (res?.data?.depositReceipts) {\n        for (const record of res.data.depositReceipts) {\n          if (record?.receipt) {\n            receiptRecords.push(record?.receipt);\n          }\n        }\n      }\n      setPageObj((prevObj) => ({\n        ...prevObj,\n        dateOfDeposits: res?.data?.depositDate,\n        depositAmount: res?.data?.totalAmount,\n        totalAmountInWords: res?.data?.totalAmountInWords,\n        savedDocuments: structLoanDocumentsFromAPIResponse(res?.data?.loanDocuments),\n        tableData: receiptRecords,\n        sahayyaBankAccount: {\n          ...prevObj.sahayyaBankAccount,\n          name: res?.data?.depositAccount?.holderName,\n          branch: res?.data?.depositAccount?.ifsc?.branch,\n          accountNumber: res?.data?.depositAccount?.accountNumber,\n        },\n        isLoading: false,\n      }));\n    } catch (err) {\n      console.log(err);\n      setErrorMessage(parseStandardAPIErrorMessage(err));\n      setPageObj((prevObj) => ({\n        ...prevObj,\n        isLoading: false,\n      }));\n    }\n  };\n\n  /*\n    -------------------------------------------------------\n      Service Calls\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n      Handlers\n    -------------------------------------------------------\n  */\n\n  const handleChange = (event: any) => {\n    setPageObj((prevPageObj) => ({\n      ...prevPageObj,\n      [event.target.name]: event.target.value,\n    }));\n  };\n\n  const handleAutoCompleteBankChange = (event: any) => {\n    const { value } = event.target;\n    if (typeof value === \"object\") {\n      setPageObj((prevPageObj) => ({\n        ...prevPageObj,\n        [event.target.name]: {\n          name: value?.bank?.name,\n          uid: value.uid,\n          branch: value?.ifsc?.branch,\n          accountNumber: value?.accountNumber,\n        },\n      }));\n    } else {\n      setPageObj((prevPageObj) => ({\n        ...prevPageObj,\n        [event.target.name]: { name: value, uid: \"\", branch: \"\", accountNumber: \"\" },\n      }));\n    }\n  };\n\n  const handleAutoCompleteReceiptChange =async (event: any) => {\n    const { value } = event.target;\n\n    if (typeof value === \"object\") {\n      let res;\n      try {\n         res =await  FeeService.getFeeCollectionReceipt(0, 1000, `&loan.uid=${value?.uid}&smInstrumentType:nq=${FEE_MODE?.UPI}&status=${FEE_RECEIPT_STATUS.PENDING_DEPOSIT}`)\n      } catch (err) {\n         setErrorMessage(parseStandardAPIErrorMessage(err))\n      }\n     \n      // let\n      let receipts:any[] =[]\n      if(res?.data?.results){\n        receipts=[...res.data.results]\n      }\n      setPageObj((prevPageObj) => {\n        const updatedPageObj = { ...prevPageObj };\n        const rowData = event.target.value;\n        updatedPageObj.tableData = [...updatedPageObj.tableData,...receipts ];\n        updatedPageObj.loan.name = \"\";\n        return updatedPageObj;\n      });\n    } else {\n      setPageObj((prevPageObj) => ({\n        ...prevPageObj,\n        loan: { ...prevPageObj.loan, name: value },\n      }));\n    }\n  };\n\n  /* \n    --------------------------------------------------------\n    Validators:\n    --------------------------------------------------------\n  */\n\n  const validate = (e: any) => {\n    simpleValidator?.current?.showMessageFor(e?.target?.name);\n  };\n\n  const validateForm = () => {\n    let isValid = false;\n    isValid = simpleValidator?.current?.allValid() ?? false;\n    if (isValid) {\n      return isValid;\n    } else {\n      forceUpdate((prev) => !prev);\n      simpleValidator?.current?.showMessages();\n      forceUpdate((prev) => !prev);\n      return false;\n    }\n  };\n\n  /*\n    -------------------------------------------------------\n      Button Click Handlers\n    -------------------------------------------------------\n  */\n\n  const onResetWarningPop = () => {\n    setPageObj((prevPageObj) => ({\n      ...prevPageObj,\n      deleteReceipt: {\n        ...prevPageObj.deleteReceipt,\n        showPopUp: false,\n        uid: \"\",\n      },\n    }));\n  };\n\n  const onDeleteReceiptConfirm = async () => {\n    // call delete api\n    try {\n      await FeeService.deleteDdeReceipt(pageObj.deleteReceipt.uid);\n      setToastMessageVariant(TOAST_STYLE_TYPE.PRIMARY);\n      setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.SAVED);\n      setTriggerToast(!triggerToast);\n      dataTableRef?.current?.search();\n      onResetWarningPop();\n      // addReceiptRef.current?.onCloseAndClearData();\n    } catch (err) {\n      console.log(err);\n      setErrorMessage(parseStandardAPIErrorMessage(err));\n    }\n  };\n\n  const onSave = async () => {\n    const uploaderData = documentUploaderRef?.current?.getUploadedData();\n    // if(!uploaderData){\n    //   documentUploaderRef?.current?.\n    // }\n    if (!validateForm() || !uploaderData) {\n      return;\n    }\n    const payload = enrichForSave(uploaderData);\n    if (payload) {\n      try {\n        await FeeService.createFeeCollectionDeposit(payload);\n        setToastMessageVariant(TOAST_STYLE_TYPE.PRIMARY);\n        setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.SAVED);\n        setTriggerToast(!triggerToast);\n        props.navigate(LINK_FEES_DEPOSIT);\n      } catch (err) {\n        console.log(err);\n        setErrorMessage(parseStandardAPIErrorMessage(err));\n      }\n    }\n    console.log(\"on save\");\n  };\n\n  const onEdit = () => {\n    setPageObj((prevPageObj) => ({\n      ...prevPageObj,\n      pageMode: PAGE_MODE.EDIT,\n    }));\n  };\n\n  const onCancel = () => {\n    if (props?.location?.pathname.includes(LINK_FEES_DEPOSIT_CREATE_EDIT_FROM_RECONCILIATION)) {\n      props.navigate(LINK_FEES_DEPOSIT);\n      props.navigate(LINK_RECONCILIATION);\n    } else {\n      props.navigate(LINK_FEES_DEPOSIT);\n    }\n  };\n\n  /*\n    -------------------------------------------------------\n      Helper Functions\n    -------------------------------------------------------\n  */\n  const enrichForSave = (uploaderData: any) => {\n    const depositReceipts: any[] = [];\n    pageObj.tableData.forEach((rowData) => {\n      depositReceipts.push({\n        loan: {\n          uid: rowData?.loan?.uid,\n        },\n        receipt: {\n          uid: rowData?.uid,\n        },\n        deposit: null,\n      });\n    });\n    return {\n      totalAmount: pageObj?.depositAmount,\n      totalAmountInWords: pageObj?.depositAmountInWords,\n      depositDate: pageObj?.dateOfDeposits,\n      depositAccount: {\n        uid: pageObj?.sahayyaBankAccount?.uid,\n      },\n      loanDocuments: uploaderData?.documentUid\n        ? [\n            {\n              uid: uploaderData?.uid,\n              docType: {\n                uid: uploaderData?.documentUid,\n              },\n              isActive: uploaderData?.isActive,\n              docNo: uploaderData?.[`${uploaderData.primaryKeyAttributeName}`] ?? \"\",\n              dob: uploaderData.dob ? uploaderData?.unsavedDocuments.dob : null,\n              loanSectionKey: LOAN_SECTION_KEY.RECEIPT,\n              docCategory: uploaderData?.documentCategory,\n              attributes: prepareAttributes(uploaderData),\n              documentSections: prepareDocSections(uploaderData?.documentSectionUrls),\n            },\n          ]\n        : [],\n      depositReceipts: depositReceipts,\n    };\n  };\n  const resetValidator = () => {\n    simpleValidator.current = new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    });\n    simpleValidator?.current?.hideMessages();\n  };\n\n  const onDeleteRow = (receiptUid: string) => {\n    setPageObj((prevObj) => {\n      const updatedObj = { ...prevObj };\n      updatedObj.tableData = updatedObj.tableData.filter((receipt) => receipt.uid !== receiptUid);\n      return updatedObj;\n    });\n    // if (receiptUid) {\n    //   setPageObj((prevObj) => ({\n    //     ...prevObj,\n    //     deleteReceipt: {\n    //       ...prevObj.deleteReceipt,\n    //       showPopUp: true,\n    //       uid: receiptUid,\n    //     },\n    //   }));\n    // }\n  };\n\n  const searchAutoComplete = async (\n    event: any,\n    options: {\n      service: any;\n      field: string;\n      search: string;\n    }\n  ) => {\n    let suggestionsTemplate = [];\n    await options?.service?.(0, 10, event.query).then((res: any) => {\n      if (res.data.results) {\n        if (res?.status === 200) {\n          suggestionsTemplate = [...res.data.results];\n          // setIsLoading(false);\n        }\n      }\n    });\n    if (suggestionsTemplate.length === 0) {\n      suggestionsTemplate.push({ name: \"\" });\n    }\n    setSuggestionsTemplate(suggestionsTemplate);\n  };\n\n  const searchAutoCompleteReceipt = async (event: any) => {\n    let suggestionsTemplate = [];\n    //  event.query\n    // if(sourcingDetails?.sourceAndBranch?.branch?.uid){\n    const digitsRegex = /^[0-9]$/;\n    let search = \"\";\n    if (event?.query?.toLowerCase()?.includes(\"lan\") || digitsRegex?.test(event?.query)) {\n      search = `&lanId:lk=${event?.query}`;\n    } else {\n      search = `&applicantName:lk=${event?.query}`;\n    }\n    try {\n      await FeeService.getLoans(0, 100, search).then((res) => {\n        if (res.status === 200 && res?.data?.results) {\n          suggestionsTemplate = [...res.data.results];\n\n          // setIsLoading(false);\n        }\n      });\n    } catch (error) {\n      console.log(error);\n    }\n\n    if (suggestionsTemplate.length === 0) {\n      suggestionsTemplate.push({ name: \"\", uid: \"\" });\n    }\n\n    setSuggestionsTemplate(suggestionsTemplate);\n    // }\n  };\n\n  /*\n    -------------------------------------------------------\n      Sectional Rendering\n    -------------------------------------------------------\n  */\n\n  const itemTemplateSahayyaBankAccount = (item: any) => {\n    if (item?.uid === undefined || item?.uid === \"\") {\n      return (\n        <div className=\"flex flex-col items-center justify-center h-39 pointer-events-none cursor-default\">\n          <Text className=\"text-primary-labelColor mt-2\" label=\"label.noDataFound\" />\n        </div>\n      );\n    }\n    return (\n      <div className=\"flex flex-col\">\n        <Text className=\"text-primary-labelColor\" label={`${item?.bank?.name}`} />\n      </div>\n    );\n  };\n\n  const itemTemplateReceipt = (item: any) => {\n    if (item?.uid === undefined || item?.uid === \"\") {\n      return (\n        <div className=\"flex flex-col items-center justify-center h-39 pointer-events-none cursor-default\">\n          <Text className=\"text-primary-labelColor mt-2\" label=\"label.noDataFound\" />\n        </div>\n      );\n    }\n    return (\n      <div className=\"flex flex-col\">\n        <Text\n          className=\"text-primary-labelColor\"\n          label={`${item?.lanId} | ${item?.applicantName} | ${\n            item?.branch\n          }`}\n        />\n      </div>\n    );\n  };\n\n  const renderLoanApplicationNo = (rowData: IFeeCollectionReceiptRowData) => {\n    return <Text className=\" text-xs text-secondary-labelColor \" label={rowData?.loan?.lanId} />;\n  };\n\n  const renderApplicantName = (rowData: IFeeCollectionReceiptRowData) => {\n    return (\n      <Text className=\" text-xs text-secondary-labelColor \" label={rowData?.loan?.applicantName} />\n    );\n  };\n\n  const renderBranch = (rowData: IFeeCollectionReceiptRowData) => {\n    return (\n      <Text className=\" text-xs text-secondary-labelColor \" label={rowData?.loan?.branch?.name} />\n    );\n  };\n\n  const renderInstrumentType = (rowData: IFeeCollectionReceiptRowData) => {\n    return (\n      <Text\n        className=\" text-xs text-secondary-labelColor \"\n        label={FEE_MODE_LABEL?.[rowData?.smInstrumentType] ?? \"\"}\n      />\n    );\n  };\n\n  const renderInstrumentDate = (rowData: IFeeCollectionReceiptRowData) => {\n    return (\n      <Text\n        className=\" text-xs text-secondary-labelColor \"\n        label={formatDate(rowData?.instrumentDate)}\n      />\n    );\n  };\n\n  const renderUtrOrCheckNo = (rowData: IFeeCollectionReceiptRowData) => {\n    return <Text className=\" text-xs text-secondary-labelColor \" label={rowData?.txnRefNo} />;\n  };\n\n  const renderAmount = (rowData: IFeeCollectionReceiptRowData) => {\n    //  let amount =params?.depositUid ? rowData?. :rowData?.amount;\n    return (\n      <Text\n        className=\" text-xs text-secondary-labelColor \"\n        label={numberFormatter(rowData?.amount, \"en-IN\", 0)}\n      />\n    );\n  };\n\n  const renderCollectedBy = (rowData: IFeeCollectionReceiptRowData) => {\n    return (\n      <Text className=\" text-xs text-secondary-labelColor \" label={rowData?.createdByUserName} />\n    );\n  };\n\n  const renderUpdatedOn = (rowData: IFeeCollectionReceiptRowData) => {\n    return (\n      <Text\n        className=\" text-xs text-secondary-labelColor \"\n        label={formatDate(rowData?.updatedAtSystemDate)}\n      />\n    );\n  };\n\n  const renderActions = (rowData: IFeeCollectionReceiptRowData) => {\n    return (\n      <div className=\"grid grid-cols-2\">\n        <div className=\"\">\n          <IconButton\n            buttonType={BUTTON_TYPES.DELETE}\n            onClick={() => onDeleteRow(rowData?.uid)}\n            // disabled={pageMode === PAGE_MODE.VIEW}\n            tooltipOptions={{\n              position: \"left\",\n              className: \"text-xs font-Roboto bg-black text-white !p-1 rounded-md \",\n              showDelay: \"1000,\",\n              hideDelay: \"300\",\n            }}\n          />\n        </div>\n      </div>\n    );\n  };\n\n  const renderTable = () => {\n    return (\n      <div className=\"col-span-4\">\n        <ReadOnlyTable\n          // standardDataFormatPromise={FeeService.getFeeList}\n          value={pageObj.tableData}\n          dataKey=\"uid\"\n          ref={dataTableRef}\n          className={`  make-deposit-table `}\n        >\n          <Column\n            className=\"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6\"\n            header={useTranslateText(\"label.fees.loanApplicationNo(s)\")}\n            body={renderLoanApplicationNo}\n          />\n          <Column\n            className=\"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6 \"\n            header={useTranslateText(\"label.fees.applicantName\")}\n            body={renderApplicantName}\n          />\n          <Column\n            className=\"text-primary-ptext-1000 text-left text-xs w-1/12  p-1 h-12 pl-6\"\n            header={useTranslateText(\"label.fees.branch\")}\n            body={renderBranch}\n          />\n          <Column\n            className=\"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6\"\n            header={useTranslateText(\"label.fees.instrumentType\")}\n            body={renderInstrumentType}\n          />\n          <Column\n            className=\"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6\"\n            header={useTranslateText(\"label.fees.instrumentDate\")}\n            body={renderInstrumentDate}\n          />\n          <Column\n            className=\"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6\"\n            header={useTranslateText(\"label.fees.utr/Chq.No.\")}\n            body={renderUtrOrCheckNo}\n          />\n          <Column\n            className=\"text-primary-ptext-1000 text-right text-xs  p-1 h-12 pl-6\"\n            header={useTranslateText(\"label.fees.amount\")}\n            body={renderAmount}\n          />\n          <Column\n            className=\"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6\"\n            header={useTranslateText(\"label.fees.collectedBy\")}\n            body={renderCollectedBy}\n          />\n          <Column\n            className=\"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6\"\n            header={useTranslateText(\"label.fees.updatedOn\")}\n            body={renderUpdatedOn}\n          />\n          <Column\n            className=\"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6\"\n            header={useTranslateText(\"label.fees.action\")}\n            body={renderActions}\n          />\n        </ReadOnlyTable>\n        <InputError\n          validation={simpleValidator?.current?.message(\n            `receipts`,\n            pageObj?.tableData?.length,\n            \"arrayMinOneReceipt\"\n          )}\n        />\n      </div>\n    );\n  };\n\n  const renderContent = () => {\n    return (\n      <div className=\" grid grid-cols-4 gap-3\">\n        <div>\n          <AutoComplete\n            label=\"label.fees.sahayyaBankAccount*\"\n            name=\"sahayyaBankAccount\"\n            field=\"name\"\n            value={pageObj?.sahayyaBankAccount?.name}\n            variant={INPUT_STYLE_TYPE.PRIMARY}\n            suggestions={suggestionsTemplate}\n            completeMethod={(e: any) =>\n              searchAutoComplete(e, {\n                field: \"\",\n                search: \"\",\n                service: DepositAccountService.getBankAccount,\n              })\n            }\n            onBlur={validate}\n            validation={simpleValidator?.current?.message(\n              `sahayyaBankAccount`,\n              pageObj?.sahayyaBankAccount?.uid,\n              \"mandatory\"\n            )}\n            onChange={handleAutoCompleteBankChange}\n            itemTemplate={itemTemplateSahayyaBankAccount}\n          />\n        </div>\n        <div>\n          <InputBox\n            label=\"label.fees.accountBranch\"\n            name=\"\"\n            value={pageObj?.sahayyaBankAccount?.branch}\n            variant={INPUT_STYLE_TYPE.SECONDARY}\n            disabled\n          />\n        </div>\n        <div>\n          <InputBox\n            label=\"label.fees.branchAccountNumber\"\n            name=\"\"\n            value={pageObj?.sahayyaBankAccount?.accountNumber}\n            variant={INPUT_STYLE_TYPE.SECONDARY}\n            disabled\n          />\n        </div>\n        <div></div>\n        <div className=\"col-span-4\">\n          <AutoComplete\n            label=\"label.fees.applicantNameOrApplicationNo\"\n            name=\"receipt\"\n            field=\"name\"\n            value={pageObj?.loan?.name}\n            variant={INPUT_STYLE_TYPE.PRIMARY}\n            suggestions={suggestionsTemplate}\n            completeMethod={searchAutoCompleteReceipt}\n            // onBlur={validate}\n            // validation={simpleValidator?.current?.message(\n            //   `applicant`,\n            //   pageObj?.applicant?.uid,\n            //   \"mandatory\"\n            // )}\n            onChange={handleAutoCompleteReceiptChange}\n            itemTemplate={itemTemplateReceipt}\n          />\n        </div>\n        {renderTable()}\n        <div>\n          <TextData\n            label=\"label.fees.depositAmount(â‚¹)*\"\n            value={`${numberFormatter(getNumber(pageObj?.depositAmount), \"en-IN\", 0)}`}\n          />\n        </div>\n        <div>\n          <TextData label=\"label.fees.amountInWords\" value={`${pageObj?.depositAmountInWords}`} />\n        </div>\n        <div></div>\n        <div className=\"grid-group\">\n          <SystemDatePicker\n            label={\"label.fees.dateOfDeposit*\"}\n            name=\"dateOfDeposits\"\n            onChange={handleChange}\n            value={pageObj?.dateOfDeposits ? new Date(pageObj?.dateOfDeposits) : null}\n            variant={INPUT_STYLE_TYPE.SECONDARY}\n            onBlur={validate}\n            validation={simpleValidator?.current?.message(\n              `dateOfDeposits`,\n              pageObj?.dateOfDeposits,\n              \"mandatory\"\n            )}\n          />\n        </div>\n        <div className=\"col-span-4\">\n          <div className=\"col-span-4\">\n            <DocumentUploader\n              ref={documentUploaderRef}\n              savedDocument={pageObj.savedDocuments?.[0] ? pageObj.savedDocuments?.[0] : {}}\n              mode={params?.depositUid ? DOC_UPLOADER_MODE.VIEW : DOC_UPLOADER_MODE.EDIT}\n              queryParamForDocList={DOCUMENT_CATEGORY.DOCUMENT_CATEGORY_FEE_DEPOSIT}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  /*\n    -------------------------------------------------------\n    Main Rendering\n    -------------------------------------------------------\n  */\n\n  return (\n    <div className=\"p-3 rounded-masterDataPageRadius bg-white flex flex-col gap-3 overflow-scroll h-screen\">\n      <div className=\"flex w-full justify-between items-center\">\n        <Text\n          label={params?.depositUid ? \"label.fees.editDeposit\" : \"label.fees.makeDeposit\"}\n          className=\"text-primary-ptext-1000 text-h2 font-bold flex\"\n        />\n\n        <div className=\"flex gap-10\">\n          <ButtonBox\n            buttonType={BUTTON_TYPE.CANCEL_OUTLINE}\n            className=\"create-button\"\n            onClick={onCancel}\n          />\n          {pageObj.pageMode === PAGE_MODE.VIEW ? null : (\n            // <ButtonBox buttonType={BUTTON_TYPE.EDIT_OUTLINE} onClick={onEdit} />\n            <ButtonBox buttonType={BUTTON_TYPE.MAKE_DEPOSIT} onClickWithLoader={onSave} />\n          )}\n        </div>\n      </div>\n\n      <AclGuard override={{ read: pageObj.pageMode === PAGE_MODE.VIEW }}>\n        {pageObj.isLoading === undefined ? (\n          <SkeletonCustom height=\"19.375rem\" width=\"100%\" borderRadius=\"8px\" animation=\"wave\" />\n        ) : (\n          // \"Hi\"\n          renderContent()\n        )}\n      </AclGuard>\n\n      <WarningDialog\n        visible={pageObj?.deleteReceipt?.showPopUp}\n        className=\"w-76 !px-14\"\n        title={\"heading.dde.fees.receiptDelete\"}\n        warningMessage={`description.dde.fees.receiptDelete`}\n        onCancel={onResetWarningPop}\n        onConfirm={() => {\n          return onDeleteReceiptConfirm();\n        }}\n        onHide={() => {\n          //\n        }}\n      />\n      <ToastCustom\n        position={\"bottom-right\"}\n        ref={toastMessageRef}\n        toastText={toastMessage}\n        variant={toastMessageVariant}\n      />\n      <ErrorDialog\n        onHide={() => {\n          setShowDialogAPIError(false);\n          setErrorMessage(\"\");\n        }}\n        visible={showDialogAPIError}\n        errorMessage={errorMessage}\n      />\n    </div>\n  );\n};\n\nexport default withRouter(PageDepositCreateOrEdit);\n"],"names":["initialPageObj","PAGE_MODE","PageDepositCreateOrEdit","props","params","useParams","pageObj","setPageObj","useState","showDialogAPIError","setShowDialogAPIError","errorMessage","setErrorMessage","toastMessage","setToastMessage","toastMessageVariant","setToastMessageVariant","TOAST_STYLE_TYPE","triggerToast","setTriggerToast","suggestionsTemplate","setSuggestionsTemplate","forceUpdate","dataTableRef","useRef","toastMessageRef","simpleValidator","SimpleReactValidator","getStandardValidator","messageReplace","prev","documentUploaderRef","useEffect","_a","prevPageObj","updatedPageObj","depositAmount","row","getNumber","convertToIndianNumbering","getDepositDetails","prevObj","res","FeeService","receiptRecords","record","_b","_c","structLoanDocumentsFromAPIResponse","_d","_f","_e","_i","_h","_g","_k","_j","err","parseStandardAPIErrorMessage","handleChange","event","handleAutoCompleteBankChange","value","handleAutoCompleteReceiptChange","FEE_MODE","FEE_RECEIPT_STATUS","receipts","validate","validateForm","isValid","onResetWarningPop","onDeleteReceiptConfirm","STATIC_MASTER_TYPE_TOAST_TEXT","onSave","uploaderData","payload","enrichForSave","LINK_FEES_DEPOSIT","onCancel","LINK_FEES_DEPOSIT_CREATE_EDIT_FROM_RECONCILIATION","LINK_RECONCILIATION","depositReceipts","rowData","LOAN_SECTION_KEY","prepareAttributes","prepareDocSections","onDeleteRow","receiptUid","updatedObj","receipt","searchAutoComplete","options","searchAutoCompleteReceipt","digitsRegex","search","error","itemTemplateSahayyaBankAccount","item","jsx","Text","itemTemplateReceipt","renderLoanApplicationNo","renderApplicantName","renderBranch","renderInstrumentType","FEE_MODE_LABEL","renderInstrumentDate","formatDate","renderUtrOrCheckNo","renderAmount","numberFormatter","renderCollectedBy","renderUpdatedOn","renderActions","IconButton","BUTTON_TYPES","renderTable","jsxs","ReadOnlyTable","Column","useTranslateText","InputError","renderContent","AutoComplete","INPUT_STYLE_TYPE","e","DepositAccountService","InputBox","TextData","SystemDatePicker","DocumentUploader","DOC_UPLOADER_MODE","DOCUMENT_CATEGORY","ButtonBox","BUTTON_TYPE","AclGuard","SkeletonCustom","WarningDialog","ToastCustom","ErrorDialog","PageDepositCreateOrEdit$1","withRouter"],"mappings":"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"}