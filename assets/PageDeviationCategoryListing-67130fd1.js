import{w as Ze,r as i,aG as u,j as e,T as V,J as y,aH as z,ao as G,aI as de,aJ as le,aK as K,b7 as me,aF as pe,o as _,az as et,aM as tt,av as at,p as ue,z as st,aN as W}from"./index-e8217573.js";import{s as w,a as $,b as U}from"./sortIcon-54357a29.js";import{e as rt}from"./eye_icon-081bddb3.js";import{A as xe}from"./AutoComplete-0bca608a.js";import{B as g}from"./ButtonBox-9e46519a.js";import{D as X}from"./DatePicker-b1c13861.js";import{D as it}from"./Dialog-adadaf64.js";import{I as ot}from"./InputBox-b9e88f52.js";import{M as nt}from"./MenuBox-defc36b0.js";import{R as ct}from"./ReadOnlyTable-86accb69.js";import{S as dt}from"./SectionTitle-9f9277ec.js";import{S as lt}from"./SimpleDropDown-061a3470.js";import{T as mt}from"./Toast-ae99ea5b.js";import{C as M}from"./column.esm-938bad7d.js";import{P as J}from"./ProdcutDeviationCategory-d8b5e79a.js";import"./StaticMasterTypeService-480bff1a.js";import"./search_icon-459d6871.js";import"./withAuth-6de36ebf.js";import"./virtualscroller.esm-9939945c.js";import"./kebab-menu-8835ad2e.js";import"./No_data-1720c54e.js";import"./datatable.esm-f474a654.js";import"./paginator.esm-11c2c115.js";import"./TransitionGroup-c8afe0ce.js";function pt(te){const[ae,ve]=i.useState(!1),[he,j]=i.useState(!1),[Ae,N]=i.useState(!1),[s,se]=i.useState({}),[D,T]=i.useState(void 0),[ut,R]=i.useState(void 0);i.useState(void 0);const[C,x]=i.useState(void 0),[L,Y]=i.useState(void 0),[O,S]=i.useState(void 0),[F,E]=i.useState(void 0),[k,b]=i.useState(void 0),B=i.useRef(null),[Z,v]=i.useState(""),[re,h]=i.useState(u.PRIMARY),[p,A]=i.useState(!1),[I,ie]=i.useState(!1),[o,H]=i.useState({name:"",createdFrom:"",createdTo:"",updatedFrom:"",updatedTo:"",isActive:"",createdBy:{name:"",id:""},updatedBy:{name:"",id:""}});i.useState({title:"",id:"",userId:"",completed:"",concept:"",application:"",emailId:""});const[l,f]=i.useState({limit:10,loading:!1,totalRecords:0,start:0,search:"",runCustomQuery:!1,records:[]}),q=i.useRef(null),[fe,ye]=i.useState([{items:[{label:"Activate",className:""},{label:"Deactivate",className:""}]}]),ge=(t,a)=>{var Q;console.log("rowData=",t);const r={label:"label.common.deactivate",command:()=>{Ce(t)}},n={label:"label.common.active",command:()=>{Te(t)}},d=[{items:[t.isActive?r:n]}];ye(d),(Q=q==null?void 0:q.current)==null||Q.toggle(a)},[ee,je]=i.useState([]);i.useState();const c=i.useRef(null);i.useEffect(()=>{var t;(t=c==null?void 0:c.current)==null||t.search()},[l==null?void 0:l.search]),i.useEffect(()=>{var t;B!=null&&B.current&&Z!==""&&((t=B==null?void 0:B.current)==null||t.showFunction())},[Z,re,p]);const oe=t=>{const{name:a,value:r}=t.target;H(typeof r=="object"?n=>({...n,[a]:{name:`${r==null?void 0:r.name} ${r!=null&&r.lastName?r==null?void 0:r.lastName:""}`.trim(),id:r.userId}}):n=>({...n,[a]:r}))},P=t=>{const{name:a,value:r}=t.target;H(n=>({...n,[a]:r}))},Ne=t=>{let a="";D||D==null?a='sort={"name":"ASC"}&':a='sort={"name":"DESC"}&',D==null?T(!1):T(!D),R(void 0),x(void 0),Y(void 0),b(void 0),S(void 0),E(void 0),f({...l,search:a})},Te=t=>{se({...t}),N(!0),ie(!0)},Ce=t=>{se({...t}),j(!0),ie(!1)},Se=t=>{let a="";C||C==null?a='sort={"createdAt":"ASC"}&':a='sort={"createdAt":"DESC"}&',C==null?x(!1):x(!C),T(void 0),R(void 0),Y(void 0),b(void 0),S(void 0),E(void 0),f({...l,search:a})},Ee=t=>{let a="";L||L==null?a='sort={"createdBy":"ASC"}&':a='sort={"createdBy":"DESC"}&',L==null?Y(!1):x(!C),T(void 0),R(void 0),x(void 0),b(void 0),S(void 0),E(void 0),f({...l,search:a})},be=t=>{let a="";O||O==null?a='sort={"updatedAt":"ASC"}&':a='sort={"updatedAt":"DESC"}&',O==null?S(!1):S(!O),T(void 0),R(void 0),x(void 0),b(void 0),Y(void 0),E(void 0),f({...l,search:a})},Be=t=>{let a="";k||k==null?a='sort={"isActive":"ASC"}&':a='sort={"isActive":"DESC"}&',k==null?b(!1):b(!0),T(void 0),R(void 0),x(void 0),S(void 0),Y(void 0),E(void 0),f({...l,search:a})},Ie=t=>{let a="";F||F==null?a='sort={"updatedBy":"ASC"}&':a='sort={"updatedBy":"DESC"}&',F==null?E(!1):E(!F),T(void 0),R(void 0),x(void 0),S(void 0),Y(void 0),b(void 0),f({...l,search:a})},Me=()=>({...s},J.Inactivate(s==null?void 0:s.uid).then(t=>{var a;h(u.PRIMARY),v(z.DEACTIVATED),A(!p),j(!1),N(!1),(a=c==null?void 0:c.current)==null||a.search()}).catch(t=>{h(u.QUATERNARY),v(G(t)),A(!p)})),De=()=>({...s},J.activate(s==null?void 0:s.uid).then(t=>{var a;h(u.PRIMARY),v(z.ACTIVATED),A(!p),j(!1),N(!1),(a=c==null?void 0:c.current)==null||a.search()}).catch(t=>{h(u.QUATERNARY),v(G(t)),A(!p)})),Re=()=>{var n;const t={staticMasterType:(n=s==null?void 0:s.staticMasterType)==null?void 0:n.name,name:s==null?void 0:s.name,reason:s.reason,createdAt:s.createdAt,createdBy:s.createdBy,id:s.id,isActive:!1,requestId:s.requestId,uid:s.uid,updatedAt:s.updatedAt,updatedBy:s.updatedBy},a={...t,isActive:!0},r={name:s.displayName,operationType:de.UPDATE,entity:le.STATIC_MASTER_DATA,initialStateJson:K(t),finalStateJson:K(a),reasonForChange:s.reasons};return J.update(s==null?void 0:s.uid,r).then(m=>{var d;h(u.PRIMARY),v(z.SENT_FOR_APPROVAL),A(!p),j(!1),N(!1),(d=c==null?void 0:c.current)==null||d.search()}).catch(m=>{h(u.QUATERNARY),v(G(m)),A(!p)})},Ye=()=>{var n;const t={staticMasterType:(n=s==null?void 0:s.staticMasterType)==null?void 0:n.name,name:s==null?void 0:s.name,reason:s.reason,createdAt:s.createdAt,createdBy:s.createdBy,id:s.id,isActive:!0,requestId:s.requestId,uid:s.uid,updatedAt:s.updatedAt,updatedBy:s.updatedBy},a={...t,isActive:!1},r={name:s.displayName,operationType:de.UPDATE,entity:le.STATIC_MASTER_DATA,initialStateJson:K(t),finalStateJson:K(a),reasonForChange:s.reasons};return J.update(s==null?void 0:s.uid,r).then(m=>{var d;h(u.PRIMARY),v(z.SENT_FOR_APPROVAL),A(!p),j(!1),N(!1),(d=c==null?void 0:c.current)==null||d.search()}).catch(m=>{h(u.QUATERNARY),v(G(m)),A(!p)})},ne=async t=>{let a=[];t.query.trim().length?(await st.getAll(0,10,`name=${t.query}&`).then(r=>{r.status===200&&(a=[...r.data])}),a.length===0&&a.push({name:void 0,designation:void 0,emailId:void 0})):a=ee,je(a)},Oe=()=>{var a,r,n,m;let t="";if(o.name&&(t=`${t}name:lk=${o.name}&`),o.createdFrom&&(console.log(o.createdFrom),t=`${t}createdAt:gt=${W(o.createdFrom)}&`),o.createdTo&&(t=`${t}createdAt:lt=${W(o.createdTo)}&`),o.updatedFrom&&(t=`${t}updatedAt:gt=${W(o.updatedFrom)}&`),o.updatedTo&&(t=`${t}updatedAt:lt=${W(o.updatedTo)}&`),o.isActive){let d=!0;o.isActive==="YES"?d=!0:o.isActive==="NO"&&(d=!1),t=`${t}isActive:lk=${d}&`}(a=o.createdBy)!=null&&a.id&&(t=`${t}&createdBy=${(r=o.createdBy)==null?void 0:r.id}&`),(n=o.updatedBy)!=null&&n.id&&(t=`${t}&updatedBy=${(m=o.updatedBy)==null?void 0:m.id}&`),f({...l,search:t})},Fe=()=>{H({name:"",createdFrom:"",createdTo:"",updatedFrom:"",updatedTo:"",isActive:"",createdBy:{name:"",id:""},updatedBy:{name:"",id:""}}),f({...l,search:""})},Pe=()=>{ve(!ae)},_e=()=>{te.navigate(`${me}?mode=${pe.CREATE}`)},we=()=>{const{name:t,createdFrom:a,createdTo:r,updatedFrom:n,updatedTo:m,isActive:d,createdBy:Q,updatedBy:Xe}=o;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-3 flex flex-col gap-6 bg-primary-sapphireBlue-100 rounded-lg",children:[e.jsx("div",{className:"flex ",children:e.jsx(dt,{title:"text.masterData.types.search"})}),e.jsxs("div",{className:" grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsx(ot,{label:"input.masterData.staticMaster.displayName",name:"name",variant:_.SECONDARY,onChange:P,value:t}),e.jsx(lt,{label:"input.masterData.staticMaster.isActive",name:"isActive",variant:et.SECONDARY,options:tt,onChange:P,value:d}),e.jsx(X,{label:"input.masterData.staticMaster.createdFrom",name:"createdFrom",showTime:!0,value:a,placeholder:"DD-MMM-YYYY",onChange:P}),e.jsx(X,{showTime:!0,label:"input.masterData.staticMaster.createdTo",name:"createdTo",variant:_.PRIMARY,value:r,placeholder:"DD-MMM-YYYY",onChange:P}),e.jsx(xe,{label:"input.masterData.staticMaster.createdBy",name:"createdBy",field:"name",value:Q,variant:_.PRIMARY,suggestions:ee,completeMethod:ne,onChange:oe,itemTemplate:ce}),e.jsx(X,{showTime:!0,label:"input.masterData.staticMaster.updatedFrom",name:"updatedFrom",variant:_.PRIMARY,value:n,placeholder:"DD-MMM-YYYY",onChange:P}),e.jsx(X,{showTime:!0,label:"input.masterData.staticMaster.updatedTo",name:"updatedTo",variant:_.PRIMARY,value:m,placeholder:"DD-MMM-YYYY",onChange:P}),e.jsx(xe,{field:"name",label:"input.masterData.staticMaster.updatedBy",name:"updatedBy",variant:_.PRIMARY,value:Xe,suggestions:ee,completeMethod:ne,onChange:oe,itemTemplate:ce}),e.jsxs("div",{className:"flex gap-5",children:[e.jsx(g,{buttonType:y.RESET_OUTLINE,onClick:Fe}),e.jsx(g,{buttonType:y.SEARCH_OUTLINE,onClick:Oe})]})]})]})})},ce=t=>t.name===void 0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-39",children:[e.jsx("img",{src:at,alt:"search-icon",className:" h-7 w-7"}),e.jsx(V,{className:"text-primary-labelColor mt-2",label:"Loading..."})]}):e.jsx("div",{className:"flex flex-col",children:e.jsx(V,{className:"text-primary-labelColor",label:`${t.name}`})}),$e=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:t.name})}),Ue=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Display Name"}),e.jsx("img",{src:D==null?w:D==!0?$:U,alt:"Sort Icon",onClick:Ne,className:"cursor-pointer"})]}),Le=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Created On"}),e.jsx("img",{src:C==null?w:C==!0?$:U,alt:"Sort Icon",onClick:Se,className:"cursor-pointer"})]}),ke=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Created By"}),e.jsx("img",{src:L==null?w:L==!0?$:U,alt:"Sort Icon",onClick:Ee,className:"cursor-pointer"})]}),Ve=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Updated On"}),e.jsx("img",{src:O==null?w:O==!0?$:U,alt:"Sort Icon",onClick:be,className:"cursor-pointer"})]}),Je=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Updated By"}),e.jsx("img",{src:F==null?w:F==!0?$:U,alt:"Sort Icon",onClick:Ie,className:"cursor-pointer"})]}),He=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Is Active"}),e.jsx("img",{src:k==null?w:k==!0?$:U,alt:"Sort Icon",onClick:Be,className:"cursor-pointer"})]}),qe=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:`${ue(t.createdAt)}`})}),Qe=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:t.createdByUserName})}),ze=t=>e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:`${ue(t.updatedAt)}`}),Ge=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:t.updatedByUserName})}),Ke=t=>e.jsx(e.Fragment,{children:t.isActive?e.jsxs("div",{className:"flex items-center ",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-primaryBlue border-none"}),e.jsx("div",{className:"ml-2 ",children:"YES"})]}):e.jsxs("div",{className:"flex items-center ",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-secondary-gray-300 border-none"}),e.jsx("div",{className:"ml-2 ",children:"NO"})]})}),We=t=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center ",children:[e.jsx("div",{className:"w-4 h-4 flex items-center",children:e.jsx("img",{src:rt,alt:"Sahayya Logo",className:"cursor-pointer",onClick:a=>{te.navigate(`${me}?mode=${pe.VIEW}&uid=${t.uid}`)}})}),e.jsx("div",{className:"ml ",children:e.jsx(g,{buttonType:y.MENU,onClick:a=>{ge(t,a)},className:"!rounded-none bg-transparent !hover:bg-primary-gray-300"})})]})});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex w-full justify-between items-center",children:[e.jsx(V,{label:"heading.productConfiguration.deviation.category",className:"text-primary-ptext-1000 text-h2 font-bold flex"}),e.jsxs("div",{className:"flex gap-10",children:[e.jsx(g,{buttonType:y.FILTER_OUTLINE,onClick:Pe}),e.jsx(g,{buttonType:y.CREATE,className:"create-button",onClick:_e})]})]}),ae&&we(),e.jsxs(ct,{standardDataFormatPromise:J.getAll,dataKey:"id",search:l.search,ref:c,children:[e.jsx(M,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:Ue,body:$e}),e.jsx(M,{className:"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6",header:He,body:Ke}),e.jsx(M,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:Le,body:qe}),e.jsx(M,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:ke,body:Qe}),e.jsx(M,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:Ve,body:ze}),e.jsx(M,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:Je,body:Ge}),e.jsx(M,{className:"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6",header:"Actions",body:We})]})]}),e.jsxs(it,{onHide:I?()=>N(!1):()=>j(!1),visible:I?Ae:he,modal:!0,closable:!1,dismissableMask:!0,children:[e.jsx(V,{label:I?"dialog.staticMaster.activate":"dialog.staticMaster.deactivate",className:"text-primary-ptext-1000 text-base font-Roboto font-bold flex items-center justify-center"}),e.jsx(V,{label:I?"dialog.staticMaster.message.activate":"dialog.staticMaster.message",className:"text-primary-ptext-1000 text-xs font-Roboto flex mt text-center justify-center mx-2 mt-4"}),e.jsxs("div",{className:"flex justify-center mt-4",children:[e.jsx("div",{className:"mr-3",children:e.jsx(g,{buttonType:y.CANCEL_OUTLINE,onClick:I?()=>N(!1):()=>j(!1)})}),e.jsx("div",{className:"mr-3",children:e.jsx(g,{buttonType:y.SAVE_OUTLINE,onClick:I?()=>De():()=>Me()})}),e.jsx("div",{className:"",children:e.jsx(g,{buttonType:y.SEND_FOR_APPROVAL,className:"approve-primary",onClick:I?()=>Re():()=>Ye()})})]})]}),e.jsx(nt,{className:"w-20 bg-white font-Roboto text-xs text-primary-pText-1300 pt-2 rounded-lg mt-0.5 flex justify-center align-center shadow-autoCompletePanel",model:fe,ref:q}),e.jsx("div",{className:"",children:e.jsx(mt,{position:"bottom-right",ref:B,toastText:Z,variant:re})})]})}const wt=Ze(pt);export{wt as default};
//# sourceMappingURL=PageDeviationCategoryListing-67130fd1.js.map
