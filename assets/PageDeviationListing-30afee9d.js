import{w as mt,r as i,aG as v,j as e,T as S,J as b,aH as G,ao as K,aI as me,aJ as ue,aK as w,b6 as pe,aF as ve,o as Y,az as ut,aM as pt,av as xe,p as he,z as vt,aN as X}from"./index-e8217573.js";import{s as O,a as F,b as P}from"./sortIcon-54357a29.js";import{e as xt}from"./eye_icon-081bddb3.js";import{A as te}from"./AutoComplete-0bca608a.js";import{B as E}from"./ButtonBox-9e46519a.js";import{D as Z}from"./DatePicker-b1c13861.js";import{D as ht}from"./Dialog-adadaf64.js";import{I as ft}from"./InputBox-b9e88f52.js";import{M as gt}from"./MenuBox-defc36b0.js";import{R as yt}from"./ReadOnlyTable-86accb69.js";import{S as At}from"./SectionTitle-9f9277ec.js";import{S as jt}from"./SimpleDropDown-061a3470.js";import{C as I}from"./column.esm-938bad7d.js";import{P as ae}from"./ProductDeviation-5dd373c2.js";import{T as Nt}from"./Toast-ae99ea5b.js";import{S as fe}from"./StaticMasterTypeService-480bff1a.js";import{P as Ct}from"./ProdcutDeviationCategory-d8b5e79a.js";import"./search_icon-459d6871.js";import"./withAuth-6de36ebf.js";import"./virtualscroller.esm-9939945c.js";import"./kebab-menu-8835ad2e.js";import"./No_data-1720c54e.js";import"./datatable.esm-f474a654.js";import"./paginator.esm-11c2c115.js";import"./TransitionGroup-c8afe0ce.js";function Tt(se){const[ie,ge]=i.useState(!1),[ye,D]=i.useState(!1),[Ae,B]=i.useState(!1),[c,re]=i.useState({}),[U,x]=i.useState(void 0),[_,h]=i.useState(void 0),[k,f]=i.useState(void 0),[q,g]=i.useState(void 0),[V,y]=i.useState(void 0),[H,A]=i.useState(void 0),[Q,j]=i.useState(void 0),R=i.useRef(null),[ee,N]=i.useState(""),[oe,C]=i.useState(v.PRIMARY),[u,T]=i.useState(!1),[M,ne]=i.useState(!1),[r,J]=i.useState({deviation:"",name:"",createdFrom:"",createdTo:"",updatedFrom:"",updatedTo:"",isActive:"",createdBy:{name:"",id:""},updatedBy:{name:"",id:""}}),[d,p]=i.useState({limit:10,loading:!1,totalRecords:0,start:0,search:"",runCustomQuery:!1,records:[]}),W=i.useRef(null),[je,Ne]=i.useState([{items:[{label:"Activate",className:""},{label:"Deactivate",className:""}]}]),Ce=(t,a)=>{var m;console.log("rowData=",t);const s={label:"label.common.deactivate",command:()=>{De(t)}},o={label:"label.common.active",command:()=>{Ie(t)}},L=[{items:[t.isActive?s:o]}];Ne(L),(m=W==null?void 0:W.current)==null||m.toggle(a)},[z,Te]=i.useState([]),[Se,be]=i.useState(),n=i.useRef(null);i.useEffect(()=>{var t;(t=n==null?void 0:n.current)==null||t.search()},[d==null?void 0:d.search]),i.useEffect(()=>{var t;R!=null&&R.current&&ee!==""&&((t=R==null?void 0:R.current)==null||t.showFunction())},[ee,oe,u]);const ce=t=>{const{name:a,value:s}=t.target;J(typeof s=="object"?o=>({...o,[a]:{name:`${s==null?void 0:s.name} ${s!=null&&s.lastName?s==null?void 0:s.lastName:""}`.trim(),id:s.userId}}):o=>({...o,[a]:s}))},Ee=t=>{const{name:a,value:s}=t.target;J(o=>({...o,[a]:s}))},$=t=>{const{name:a,value:s}=t.target;J(o=>({...o,[a]:s}))},Ie=t=>{re({...t}),B(!0),ne(!0)},De=t=>{re({...t}),D(!0),ne(!1)},Be=t=>{let a="";_||_==null?(a='sort={"deviationCategory" : "DESC"}&',h(!1)):(a='sort={"deviationCategory" : "ASC"}&',h(!_)),x(void 0),f(void 0),g(void 0),j(void 0),y(void 0),A(void 0),p({...d,search:a})},Re=t=>{let a="";U||U==null?(a='sort={"name":"DESC"}&',x(!1)):(a='sort={"name":"ASC"}&',x(!U)),h(void 0),f(void 0),g(void 0),j(void 0),y(void 0),A(void 0),p({...d,search:a})},Me=t=>{let a="";Q||Q==null?(a='sort={"isActive":"DESC"}&',j(!1)):(a='sort={"isActive":"ASC"}&',j(!0)),h(void 0),x(void 0),f(void 0),g(void 0),y(void 0),A(void 0),p({...d,search:a})},Ye=t=>{let a="";k||k==null?(a='sort={"createdAt":"DESC"}&',f(!1)):(a='sort={"createdAt":"ASC"}&',f(!k)),h(void 0),x(void 0),g(void 0),j(void 0),y(void 0),A(void 0),p({...d,search:a})},Oe=t=>{let a="";q||q==null?(a='sort={"createdBy":"DESC"}&',g(!1)):(a='sort={"createdBy":"ASC"}&',g(!0)),h(void 0),x(void 0),f(void 0),j(void 0),y(void 0),A(void 0),p({...d,search:a})},Fe=t=>{let a="";V||V==null?(a='sort={"updatedAt":"DESC"}&',y(!1)):(a='sort={"updatedAt":"ASC"}&',y(!V)),h(void 0),x(void 0),f(void 0),g(void 0),j(void 0),A(void 0),p({...d,search:a})},Pe=t=>{let a="";H||H==null?(a='sort={"updatedBy":"DESC"}&',A(!1)):(a='sort={"updatedBy":"ASC"}&',A(!H)),h(void 0),x(void 0),f(void 0),g(void 0),j(void 0),y(void 0),p({...d,search:a})},$e=async()=>({...c},ae.Inactivate(c==null?void 0:c.uid).then(t=>{var a;C(v.PRIMARY),N(G.DEACTIVATED),T(!u),D(!1),B(!1),(a=n==null?void 0:n.current)==null||a.search()}).catch(t=>{C(v.QUATERNARY),N(K(t)),T(!u)})),Le=async()=>({...c},ae.activate(c==null?void 0:c.uid).then(t=>{var a;C(v.PRIMARY),N(G.ACTIVATED),T(!u),D(!1),B(!1),(a=n==null?void 0:n.current)==null||a.search()}).catch(t=>{C(v.QUATERNARY),N(K(t)),T(!u)})),we=async()=>{const t={...c},a={...t,isActive:!0},s={uid:c.uid,name:c.name,operationType:me.ACTIVE,entity:ue.DEVIATION,initialStateJson:w(t),finalStateJson:w(a),reasonForChange:"Activate",reqPayload:w(a)};return fe.approve(s).then(o=>{var l;C(v.PRIMARY),N(G.SENT_FOR_APPROVAL),T(!u),D(!1),B(!1),(l=n==null?void 0:n.current)==null||l.search()}).catch(o=>{C(v.QUATERNARY),N(K(o)),T(!u)})},Ue=async()=>{const t={...c},a={...t,isActive:!1},s={uid:c.uid,name:c.name,operationType:me.INACTIVE,entity:ue.DEVIATION,initialStateJson:w(t),finalStateJson:w(a),reasonForChange:"Deactivate",reqPayload:w(a)};return fe.approve(s).then(o=>{var l;C(v.PRIMARY),N(G.SENT_FOR_APPROVAL),T(!u),D(!1),B(!1),(l=n==null?void 0:n.current)==null||l.search()}).catch(o=>{C(v.QUATERNARY),N(K(o)),T(!u)})},_e=async t=>{let a=[];t.query.trim().length?(await Ct.getAll(0,10,`&name:lk=${t.query}&`).then(s=>{s.status===200&&(a=[...s.data.results])}),a.length===0&&a.push({name:void 0,designation:void 0,emailId:void 0})):a=z,be(a)},de=async t=>{let a=[];t.query.trim().length?(await vt.getAll(0,10,`name=${t.query}&`).then(s=>{s.status===200&&(a=[...s.data])}),a.length===0&&a.push({name:void 0,designation:void 0,emailId:void 0})):a=z,Te(a)},ke=()=>{var a,s,o,l,L;let t="";if(r.deviation&&typeof r.deviation=="object"){const m=(a=r==null?void 0:r.deviation)==null?void 0:a.uid;t=`${t}deviationCategory.uid=${m}&`}if(r.name&&(t=`${t}name:lk=${r.name}&`),r.createdFrom&&(console.log(r.createdFrom),t=`${t}createdAt:gt=${X(r.createdFrom)}&`),r.createdTo&&(t=`${t}createdAt:lt=${X(r.createdTo)}&`),r.updatedFrom&&(t=`${t}updatedAt:gt=${X(r.updatedFrom)}&`),r.updatedTo&&(t=`${t}updatedAt:lt=${X(r.updatedTo)}&`),r.isActive){let m=!0;r.isActive==="YES"?m=!0:r.isActive==="NO"&&(m=!1),t=`${t}isActive:lk=${m}&`}(s=r.createdBy)!=null&&s.id&&(t=`${t}&createdBy=${(o=r.createdBy)==null?void 0:o.id}&`),(l=r.updatedBy)!=null&&l.id&&(t=`${t}&updatedBy=${(L=r.updatedBy)==null?void 0:L.id}&`),p({...d,search:t})},Ve=()=>{J({deviation:"",name:"",createdFrom:"",createdTo:"",updatedFrom:"",updatedTo:"",isActive:"",createdBy:{name:"",id:""},updatedBy:{name:"",id:""}}),p({...d,search:""})},He=()=>{ge(!ie)},Je=()=>{se.navigate(`${pe}?mode=${ve.CREATE}`)},qe=()=>{const{deviation:t,name:a,createdFrom:s,createdTo:o,updatedFrom:l,updatedTo:L,isActive:m,createdBy:dt,updatedBy:lt}=r;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-3 flex flex-col gap-6 bg-primary-sapphireBlue-100 rounded-lg",children:[e.jsx("div",{className:"flex ",children:e.jsx(At,{title:"text.masterData.types.search"})}),e.jsxs("div",{className:" grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsx(te,{label:"input.productConfiguration.deviation.category",name:"deviation",field:"name",value:t,variant:Y.PRIMARY,suggestions:Se,completeMethod:_e,onChange:Ee,itemTemplate:Qe}),e.jsx(ft,{label:"input.productConfiguration.deviation.displayName",name:"name",variant:Y.SECONDARY,onChange:$,value:a}),e.jsx(jt,{label:"input.productConfiguration.deviation.isActive",name:"isActive",variant:ut.SECONDARY,options:pt,onChange:$,value:m}),e.jsx(Z,{label:"input.productConfiguration.deviation.createdFrom",name:"createdFrom",showTime:!0,value:s,placeholder:"DD-MMM-YYYY",onChange:$}),e.jsx(Z,{showTime:!0,label:"input.productConfiguration.deviation.createdTo",name:"createdTo",variant:Y.PRIMARY,value:o,placeholder:"DD-MMM-YYYY",onChange:$}),e.jsx(te,{label:"input.productConfiguration.deviation.createdBy",name:"createdBy",field:"name",value:dt,variant:Y.PRIMARY,suggestions:z,completeMethod:de,onChange:ce,itemTemplate:le}),e.jsx(Z,{showTime:!0,label:"input.productConfiguration.deviation.updatedFrom",name:"updatedFrom",variant:Y.PRIMARY,value:l,placeholder:"DD-MMM-YYYY",onChange:$}),e.jsx(Z,{showTime:!0,label:"input.productConfiguration.deviation.updatedTo",name:"updatedTo",variant:Y.PRIMARY,value:L,placeholder:"DD-MMM-YYYY",onChange:$}),e.jsx(te,{field:"name",label:"input.productConfiguration.deviation.updatedBy",name:"updatedBy",variant:Y.PRIMARY,value:lt,suggestions:z,completeMethod:de,onChange:ce,itemTemplate:le}),e.jsxs("div",{className:"flex gap-5",children:[e.jsx(E,{buttonType:b.RESET_OUTLINE,onClick:Ve}),e.jsx(E,{buttonType:b.SEARCH_OUTLINE,onClick:ke})]})]})]})})},Qe=t=>t.name===void 0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-39",children:[e.jsx("img",{src:xe,alt:"search-icon",className:" h-7 w-7"}),e.jsx(S,{className:"text-primary-labelColor mt-2",label:"Loading..."})]}):e.jsxs("div",{className:"flex flex-col",children:[e.jsx(S,{className:"text-primary-labelColor",label:`${t.name}`}),e.jsx(S,{className:"text-secondary-gray-500 text-xxs",label:t.name})]}),le=t=>t.name===void 0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-39",children:[e.jsx("img",{src:xe,alt:"search-icon",className:" h-7 w-7"}),e.jsx(S,{className:"text-primary-labelColor mt-2",label:"Loading..."})]}):e.jsx("div",{className:"flex flex-col",children:e.jsx(S,{className:"text-primary-labelColor",label:`${t.name}`})}),We=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Deviation"}),e.jsx("img",{src:_==null?O:_==!0?F:P,alt:"Sort Icon",onClick:Be,className:"cursor-pointer"})]}),ze=t=>{var a;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:(a=t==null?void 0:t.deviationCategory)==null?void 0:a.name})})},Ge=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:t.name})}),Ke=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Display Name"}),e.jsx("img",{src:U==null?O:U==!0?F:P,alt:"Sort Icon",onClick:Re,className:"cursor-pointer"})]}),Xe=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Created On"}),e.jsx("img",{src:k==null?O:k==!0?F:P,alt:"Sort Icon",onClick:Ye,className:"cursor-pointer"})]}),Ze=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Created By"}),e.jsx("img",{src:q==null?O:q==!0?F:P,alt:"Sort Icon",onClick:Oe,className:"cursor-pointer"})]}),et=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Updated On"}),e.jsx("img",{src:V==null?O:V==!0?F:P,alt:"Sort Icon",onClick:Fe,className:"cursor-pointer"})]}),tt=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Updated By"}),e.jsx("img",{src:H==null?O:H==!0?F:P,alt:"Sort Icon",onClick:Pe,className:"cursor-pointer"})]}),at=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Is Active"}),e.jsx("img",{src:Q==null?O:Q==!0?F:P,alt:"Sort Icon",onClick:Me,className:"cursor-pointer"})]}),st=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:`${he(t.createdAt)}`})}),it=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:t.createdByUserName})}),rt=t=>e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:`${he(t.updatedAt)}`}),ot=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:t.updatedByUserName})}),nt=t=>e.jsx(e.Fragment,{children:t.isActive?e.jsxs("div",{className:"flex items-center ",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-primaryBlue border-none"}),e.jsx("div",{className:"ml-2 ",children:"YES"})]}):e.jsxs("div",{className:"flex items-center ",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-secondary-gray-300 border-none"}),e.jsx("div",{className:"ml-2 ",children:"NO"})]})}),ct=t=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center ",children:[e.jsx("div",{className:"w-4 h-4 flex items-center",children:e.jsx("img",{src:xt,alt:"Sahayya Logo",className:"cursor-pointer",onClick:a=>{se.navigate(`${pe}?mode=${ve.VIEW}&uid=${t.uid}`)}})}),e.jsx("div",{className:"ml ",children:e.jsx(E,{buttonType:b.MENU,onClick:a=>{Ce(t,a)},className:"!rounded-none bg-transparent !hover:bg-primary-gray-300"})})]})});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex w-full justify-between items-center",children:[e.jsx(S,{label:"heading.productConfiguration.deviation",className:"text-primary-ptext-1000 text-h2 font-bold flex"}),e.jsxs("div",{className:"flex gap-10",children:[e.jsx(E,{buttonType:b.FILTER_OUTLINE,onClick:He}),e.jsx(E,{buttonType:b.CREATE,className:"create-button",onClick:Je})]})]}),ie&&qe(),e.jsxs(yt,{standardDataFormatPromise:ae.getAll,dataKey:"id",search:`&${d.search}`,ref:n,children:[e.jsx(I,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:We,body:ze}),e.jsx(I,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:Ke,body:Ge}),e.jsx(I,{className:"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6",header:at,body:nt}),e.jsx(I,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:Xe,body:st}),e.jsx(I,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:Ze,body:it}),e.jsx(I,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:et,body:rt}),e.jsx(I,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:tt,body:ot}),e.jsx(I,{className:"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6",header:"Actions",body:ct})]})]}),e.jsxs(ht,{onHide:M?()=>B(!1):()=>D(!1),visible:M?Ae:ye,modal:!0,closable:!1,dismissableMask:!0,children:[e.jsx(S,{label:M?"dialog.staticMaster.activate":"dialog.staticMaster.deactivate",className:"text-primary-ptext-1000 text-base font-Roboto font-bold flex items-center justify-center"}),e.jsx(S,{label:M?"dialog.staticMaster.message.activate":"dialog.staticMaster.message",className:"text-primary-ptext-1000 text-xs font-Roboto flex mt text-center justify-center mx-2 mt-4"}),e.jsxs("div",{className:"flex justify-center mt-4",children:[e.jsx("div",{className:"mr-3",children:e.jsx(E,{buttonType:b.CANCEL_OUTLINE,onClick:M?()=>B(!1):()=>D(!1)})}),e.jsx("div",{className:"mr-3",children:e.jsx(E,{buttonType:b.SAVE_OUTLINE,onClickWithLoader:M?()=>Le():()=>$e()})}),e.jsx("div",{className:"",children:e.jsx(E,{buttonType:b.SEND_FOR_APPROVAL,className:"approve-primary",onClickWithLoader:M?()=>we():()=>Ue()})})]})]}),e.jsx(gt,{className:"w-20 bg-white font-Roboto text-xs text-primary-pText-1300 pt-2 rounded-lg mt-0.5 flex justify-center align-center shadow-autoCompletePanel",model:je,ref:W}),e.jsx("div",{className:"",children:e.jsx(Nt,{position:"bottom-right",ref:R,toastText:ee,variant:oe})})]})}const Gt=mt(Tt);export{Gt as default};
//# sourceMappingURL=PageDeviationListing-30afee9d.js.map
