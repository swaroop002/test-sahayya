{"version":3,"file":"PageDocumentCheck-b0d31fe5.js","sources":["../../src/views/transaction/PageCAM/PageDocumentCheck/PageDocumentCheck.tsx"],"sourcesContent":["import React, { BaseSyntheticEvent, useEffect, useRef, useState } from \"react\";\nimport PageAssetDocumentCheck, {\n  DOCUMENT_CHECK_MODULE,\n} from \"views/transaction/PageDDE/QC/PageAssetDocumentCheck/PageAssetDocumentCheck\";\nimport { IDropDownOptions } from \"views/transaction/PageDDE/Login/Helper\";\nimport ErrorDialog from \"components/ErrorDialog/ErrorDialog\";\nimport ToastCustom from \"components/Toast\";\nimport {\n  BUTTON_TYPE,\n  INPUT_STYLE_TYPE,\n  PAGE_MODE,\n  STATIC_MASTER_TYPE_TOAST_TEXT,\n  TOAST_STYLE_TYPE,\n} from \"utils/Constant\";\nimport SaveComponent from \"components/Save/SaveComponent\";\nimport {\n  getStandardValidator,\n  messageReplace,\n  parseStandardAPIErrorMessage,\n} from \"utils/CommonUtil\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport Section from \"components/Section/Section\";\nimport EditableTableV2, {\n  Column,\n  EditableComponentRef,\n} from \"components/EditableTableV2/EditableTableV2\";\nimport StageService from \"services/transaction/DDE/StageService\";\nimport i18n from \"i18n\";\nimport SimpleDropDown from \"components/SimpleDropDown/SimpleDropDown\";\nimport DatePicker from \"components/DatePicker/DatePicker\";\nimport InputBox from \"components/InputBox/InputBox\";\nimport AclGuard from \"components/AclGuard/AclGuard\";\nimport IconButton, { BUTTON_TYPES } from \"components/IconButton/IconButton\";\nimport LegalService from \"services/transaction/DDE/LegalService\";\nimport ButtonBox from \"components/ButtonBox/ButtonBox\";\nimport MenuBox from \"components/MenuBox/MenuBox\";\nimport CamService from \"services/transaction/CamService\";\nimport { useParams } from \"react-router-dom\";\nimport DeviationTable from \"components/DeviationTable/DeviationTable\";\nimport { updateCamBusinessProofRowDataObj } from \"../Helper\";\nimport MediaGallery, {\n  IMediaInfo,\n  initialMediaGallerySectionInfo,\n} from \"components/MediaGallery/MediaGallery\";\nimport SystemDatePicker from \"components/SystemDatePicker/SystemDatePicker\";\n\ninterface IDropdownList {\n  businessProof?: IDropDownOptions[];\n  addressType?: IDropDownOptions[];\n  rcuStatus?: IDropDownOptions[];\n  verificationStatus?: IDropDownOptions[];\n}\n\nexport interface ICamBusinessProofRowData {\n  uid: string;\n  loan: {\n    uid: string;\n  };\n  stage: {\n    uid: string;\n  };\n  documentProof?: string;\n  docYearFrom: string;\n  docYearTo: string;\n  remarks: string;\n  loanDocument: {\n    uid?: string;\n    docType?: {\n      name?: string;\n    };\n    applicant?: {\n      firstName?: string;\n      middleName?: string;\n      lastName?: string;\n    };\n    documentSections?: {\n      fileName?: string;\n      fileType?: string;\n      loanDocument?: {\n        docCategory?: string;\n        docType?: {\n          name: string;\n        };\n      };\n      sectionName?: string;\n      url?: string;\n    }[];\n  };\n\n  isActive?: boolean;\n}\n\ninterface IPageObj {\n  dropdownOptions: IDropdownList;\n  isLoading: {\n    businessProof: boolean;\n  };\n  businessProof: ICamBusinessProofRowData[];\n  pageMode: {\n    businessProof: string;\n  };\n  // businessProofTableSearch:string;\n}\n\nconst initialPageOj: IPageObj = {\n  dropdownOptions: {\n    addressType: [],\n    businessProof: [],\n    rcuStatus: [],\n    verificationStatus: [],\n  },\n  businessProof: [],\n  pageMode: {\n    businessProof: PAGE_MODE.VIEW,\n  },\n  isLoading: {\n    businessProof: false,\n  },\n};\n\nconst PageDocumentCheck = () => {\n  /*\n    -------------------------------------------------------\n      State\n    -------------------------------------------------------\n  */\n  const params: { loanUid?: string; stageUid?: string } = useParams();\n\n  const [showDialogAPIError, setShowDialogAPIError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState<any>(\"\");\n  const [pageObj, setPageObj] = useState<IPageObj>({ ...initialPageOj });\n  const [toastMessage, setToastMessage] = useState(\"\");\n  const [toastMessageVariant, setToastMessageVariant] = useState(TOAST_STYLE_TYPE.PRIMARY);\n  const [triggerToast, setTriggerToast] = useState(false);\n  const [showMediaGallery, setShowMediaGallery] = useState<boolean>(false);\n  const [currentItemToViewInGallery, setCurrentItemToViewInGallery] = useState<IMediaInfo>({\n    ...initialMediaGallerySectionInfo,\n  });\n\n  // ref\n  const toastMessageRef = useRef(null);\n  const tableRef = React.useRef<EditableComponentRef>(null);\n  const actionMenuRef = useRef<any>(null);\n  const [, forceUpdate] = useState<boolean>(false);\n\n  const simpleValidator = useRef(\n    new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    })\n  );\n\n  // --------------------------- global variables ---------------------- //\n  const actionMenuModel: any[] = [\n    {\n      items: [],\n    },\n  ];\n\n  /*\n       -------------------------------------------------------\n         useEffect\n       -------------------------------------------------------\n     */\n\n  useEffect(() => {\n    if (toastMessageRef?.current && toastMessage !== \"\") {\n      // @ts-ignore: will be fixed in future\n      toastMessageRef?.current?.showFunction();\n    }\n  }, [toastMessage, toastMessageVariant, triggerToast]);\n\n  useEffect(() => {\n    if (errorMessage) {\n      setShowDialogAPIError(true);\n    }\n  }, [errorMessage]);\n\n  /*\n      -------------------------------------------------------\n        Service Calls\n      -------------------------------------------------------\n    */\n\n  /*\n      -------------------------------------------------------\n        Handlers\n      -------------------------------------------------------\n    */\n  const handleChange = (\n    e: any,\n    options: {\n      rowData: ICamBusinessProofRowData;\n      field: keyof ICamBusinessProofRowData;\n    }\n  ) => {\n    console.log(\"handle change\");\n    let rowDataObj: ICamBusinessProofRowData = { ...options.rowData };\n    rowDataObj = {\n      ...rowDataObj,\n      [`${options.field}`]: e.target.value,\n    };\n    tableRef.current?.reportDataChange(rowDataObj);\n  };\n\n  /* \n      --------------------------------------------------------\n      Validators\n      --------------------------------------------------------\n    */\n\n  const validate = (e: any) => {\n    simpleValidator?.current?.showMessageFor(e?.target?.name);\n  };\n\n  const validateForm = () => {\n    let isValid = false;\n    isValid = simpleValidator?.current?.allValid() ?? false;\n    if (isValid) {\n      return isValid;\n    } else {\n      forceUpdate((prev) => !prev);\n      simpleValidator?.current?.showMessages();\n      forceUpdate((prev) => !prev);\n      return false;\n    }\n  };\n\n  /*\n      -------------------------------------------------------\n        Button Click Handlers\n      -------------------------------------------------------\n    */\n\n  const onSaveBusinessProof = async () => {\n    if (validateForm()) {\n      const payload = enrichForBusinessProofSave();\n      // return;\n      try {\n        await CamService.updateIncomeDocuments(payload);\n        setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.SAVED);\n        setTriggerToast(!triggerToast);\n        setPageObj((prevPageObj) => ({\n          ...prevPageObj,\n          pageMode: { ...prevPageObj.pageMode, businessProof: PAGE_MODE.VIEW },\n        }));\n        tableRef.current?.clearAll();\n        tableRef.current?.search();\n        // getDetailsCallback?.();\n      } catch (error) {\n        setErrorMessage(parseStandardAPIErrorMessage(error));\n      }\n    }\n  };\n\n  const onEditBusinessProof = () => {\n    setPageObj((prevPageObj) => ({\n      ...prevPageObj,\n      pageMode: { ...prevPageObj.pageMode, businessProof: PAGE_MODE.EDIT },\n    }));\n  };\n\n  const onCancelBusinessProof = () => {\n    setPageObj((prevPageObj) => ({\n      ...prevPageObj,\n      pageMode: { ...prevPageObj.pageMode, businessProof: PAGE_MODE.VIEW },\n    }));\n    tableRef.current?.clearAll();\n    tableRef.current?.search();\n    // if  form has existing saved  data then call api else clear all\n    // getDetailsCallback?.();\n  };\n\n  const onClickActionMenu = (e: any, rowData: any) => {\n    // dynamic menu options array\n    const dynamicActionMenuOptions: any[] = [];\n\n    dynamicActionMenuOptions.push(\n      // --------------------Stop Delegation ------------------------  //\n      {\n        label: \"Remove\",\n        //icon: //JSX element,\n        className: \"px-1.5 text-xs text-primary-labelColor h-6.5 hover:bg-primary-sapphireBlue-100\",\n        command: () => {\n          onDeleteRow(rowData);\n        },\n      }\n    );\n\n    // common menu options\n    const menu: any[] = [...dynamicActionMenuOptions];\n\n    actionMenuModel[0].items = [...menu];\n    actionMenuRef?.current?.show(e);\n  };\n\n  const onDeleteRow = async (rowData: ICamBusinessProofRowData) => {\n    tableRef.current?.deleteRow(rowData);\n  };\n\n  const onViewFile = (e: any, rowData: ICamBusinessProofRowData) => {\n    let preparedInfoInList: IMediaInfo = {\n      uid: \"\",\n      placeOfUpload: \"\",\n      name: \"\",\n      fileName: \"\",\n      fileType: \"\",\n      download: \"\",\n      category: \"\",\n      type: \"\",\n      sectionName: \"\",\n      url: \"\",\n    };\n\n    if (rowData?.loanDocument) {\n      preparedInfoInList = {\n        uid: rowData?.loanDocument?.uid ?? \"\",\n        placeOfUpload: \"\",\n        name: rowData?.loanDocument?.applicant?.firstName ?? \"-\",\n        fileName: rowData?.loanDocument?.documentSections?.[0]?.fileName ?? \"-\",\n        fileType: rowData?.loanDocument?.documentSections?.[0]?.fileType ?? \"-\",\n        download: \"\",\n        category: rowData?.loanDocument?.documentSections?.[0]?.loanDocument?.docCategory ?? \"-\",\n        type: rowData?.loanDocument?.docType?.name ?? \"-\",\n        sectionName: rowData?.loanDocument?.documentSections?.[0]?.sectionName ?? \"-\",\n        url: rowData?.loanDocument?.documentSections?.[0]?.url ?? \"\",\n      };\n    }\n\n    setCurrentItemToViewInGallery(preparedInfoInList);\n    setShowMediaGallery(true);\n  };\n\n  /*\n      -------------------------------------------------------\n        Helper Functions\n      -------------------------------------------------------\n    */\n\n  const enrichForBusinessProofSave = () => {\n    let addRows = tableRef.current?.getAddedRecords() ?? [];\n    let deletedRows = tableRef.current?.getDeletedRecords() ?? [];\n    let updatedRows = tableRef.current?.getUpdatedRecords() ?? [];\n    addRows = addRows.map((rowData: any) => ({\n      ...updateCamBusinessProofRowDataObj(rowData),\n    }));\n    // updateBusinessProofRowDataObj\n    deletedRows = deletedRows.map((rowData: any) => updateCamBusinessProofRowDataObj(rowData));\n    updatedRows = updatedRows.map((rowData: any) => updateCamBusinessProofRowDataObj(rowData));\n\n    const enrichData = [...addRows, ...deletedRows, ...updatedRows];\n    return enrichData;\n  };\n  const resetValidator = () => {\n    simpleValidator.current = new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    });\n    simpleValidator?.current?.hideMessages();\n  };\n\n  const onTableUpdateCallback = () => {\n    resetValidator();\n  };\n\n  /*\n      -------------------------------------------------------\n        Sectional Renders\n      -------------------------------------------------------\n    */\n\n  const renderBusinessProof = (rowData: ICamBusinessProofRowData) => {\n    console.log(\"rowData Uid BusinessProof\", rowData.uid);\n\n    return (\n      <div className=\"pt-4\">\n        <SimpleDropDown\n          hideLabel\n          placeholder=\"placeholder.legal.documentCopyType\"\n          name={`documentProof${rowData?.uid}`}\n          value={`${\n            rowData?.loanDocument?.docType?.name ??\n            rowData?.loanDocument?.documentSections?.[0]?.loanDocument?.docType?.name\n          }`}\n          variant={INPUT_STYLE_TYPE.PRIMARY}\n          options={[\n            `${\n              rowData?.loanDocument?.docType?.name ??\n              rowData?.loanDocument?.documentSections?.[0]?.loanDocument?.docType?.name\n            }`,\n          ]}\n          // optionLabel=\"name\"\n          // optionValue=\"code\"\n          disabled\n          // onChange={(e) => handleChange(e, { rowData, field: \"docCopyType\" })}\n          // loader={isLoading}\n        />\n      </div>\n    );\n  };\n\n  const renderDocumentYearFrom = (rowData: ICamBusinessProofRowData) => {\n    return (\n      <div className=\"pt-4\">\n        <SystemDatePicker\n          hideLabel\n          name={`dateOfDocument${rowData.uid}`}\n          onChange={(e: any) => handleChange(e, { rowData: rowData, field: \"docYearFrom\" })}\n          showMinMaxRange\n          value={rowData?.docYearFrom ? new Date(rowData?.docYearFrom) : \"\"}\n          variant={INPUT_STYLE_TYPE.SECONDARY}\n          onBlur={validate}\n          validation={simpleValidator?.current?.message(\n            `dateOfDocument${rowData.uid}`,\n            rowData.docYearFrom,\n            \"mandatory\"\n          )}\n          // disabled={pageMode === PAGE_MODE.VIEW}\n        />\n      </div>\n    );\n  };\n\n  const renderDocumentYearTo = (rowData: ICamBusinessProofRowData) => {\n    return (\n      <div className=\"pt-4\">\n        <SystemDatePicker\n          hideLabel\n          name={`docYearTo${rowData.uid}`}\n          onChange={(e: any) => handleChange(e, { rowData: rowData, field: \"docYearTo\" })}\n          showMinMaxRange\n          value={rowData?.docYearTo ? new Date(rowData?.docYearTo) : \"\"}\n          variant={INPUT_STYLE_TYPE.SECONDARY}\n          onBlur={validate}\n          validation={simpleValidator?.current?.message(\n            `docYearTo${rowData.uid}`,\n            rowData.docYearTo,\n            \"mandatory\"\n          )}\n          // disabled={pageMode === PAGE_MODE.VIEW}\n        />\n      </div>\n    );\n  };\n\n  const renderRemark = (rowData: ICamBusinessProofRowData) => {\n    return (\n      <div className=\"pt-4\">\n        <InputBox\n          name={`remarks${rowData?.uid}`}\n          hideLabel\n          variant={INPUT_STYLE_TYPE.SECONDARY}\n          value={rowData?.remarks}\n          onBlur={validate}\n          onChange={(e) => handleChange(e, { rowData: rowData, field: \"remarks\" })}\n          validation={simpleValidator?.current?.message(\n            `remarks${rowData?.uid}`,\n            rowData?.remarks,\n            \"mandatory\"\n          )}\n          // disabled={pageMode === PAGE_MODE.VIEW}\n        />\n      </div>\n    );\n  };\n\n  const renderAction = (rowData: ICamBusinessProofRowData) => {\n    return (\n      <div className=\"flex gap-2 justify-center items-center\">\n        <AclGuard override={{ read: false }}>\n          <div className=\"flex-shrink-0\">\n            <IconButton\n              buttonType={BUTTON_TYPES.VIEW}\n              onClick={(e: any) => onViewFile(e, rowData)}\n            />\n          </div>\n        </AclGuard>\n        {/* <ButtonBox\n          buttonType={BUTTON_TYPE.MENU}\n          onClick={(e: any) => onClickActionMenu(e, rowData)}\n        /> */}\n      </div>\n    );\n  };\n\n  /*\n      -------------------------------------------------------\n      Main Renders\n      -------------------------------------------------------\n    */\n  return (\n    <div className=\"grid gap-5\">\n      <Section title=\"label.cam.businessProofDocument\">\n        <SaveComponent\n          title=\"\"\n          pageMode={pageObj?.pageMode?.businessProof}\n          disabled={pageObj?.isLoading?.businessProof}\n          onSave={onSaveBusinessProof}\n          onCancel={onCancelBusinessProof}\n          onEdit={onEditBusinessProof}\n        >\n          <AclGuard override={{ read: pageObj?.pageMode?.businessProof === PAGE_MODE.VIEW }}>\n            {params?.loanUid && params?.stageUid ? (\n              <EditableTableV2\n                ref={tableRef}\n                uniqueKey=\"uid\"\n                standardDataFormatPromise={CamService.getIncomeDocumentList}\n                search={`&isActive=${true}&loanUid=${params?.loanUid ?? \"\"}&stageUid=${\n                  params?.stageUid ?? \"\"\n                }`}\n                mode={\"UPDATE\"}\n                variant=\"secondary\"\n                onUpdateCallback={onTableUpdateCallback}\n                // isIgnoreInitialLoad\n                paginator={false}\n                className=\"table-auto-height\"\n              >\n                <Column\n                  header={i18n.t(\"label.cam.documentProof\")}\n                  className=\"text-primary-ptext-1000 text-left text-xs h-12 pl-6\"\n                  body={renderBusinessProof}\n                />\n\n                <Column\n                  header={i18n.t(\"label.cam.documentYearFrom\")}\n                  className=\" text-primary-ptext-1000 text-xs h-12 pl-6\"\n                  body={renderDocumentYearFrom}\n                />\n                <Column\n                  header={i18n.t(\"label.cam.documentYearTo\")}\n                  className=\" text-primary-ptext-1000 text-xs h-12 pl-6\"\n                  body={renderDocumentYearTo}\n                />\n                <Column\n                  header={i18n.t(\"label.cam.Remark\")}\n                  className=\" text-primary-ptext-1000 text-xs h-12 pl-6\"\n                  body={renderRemark}\n                />\n\n                <Column\n                  header={i18n.t(\"label.investmentInfo.table.colTitle.action\")}\n                  className=\"text-primary-ptext-1000 text-right text-xs h-12 px-6\"\n                  style={{ minWidth: \"50px\", width: \"50px\" }}\n                  body={renderAction}\n                />\n              </EditableTableV2>\n            ) : null}\n          </AclGuard>\n        </SaveComponent>\n      </Section>\n      <PageAssetDocumentCheck module={DOCUMENT_CHECK_MODULE.CAM} />\n      <MediaGallery\n        visible={showMediaGallery}\n        onToggleVisibility={() => setShowMediaGallery((prev) => !prev)}\n        list={[]}\n        currentSection={currentItemToViewInGallery}\n      />\n      <MenuBox\n        ref={actionMenuRef}\n        model={actionMenuModel}\n        variant=\"SECONDARY\"\n        buttonClassName=\"!bg-transparent\"\n        className=\"width-full-menubox bg-white  w-max p-1.5 rounded-md mt-0.5 border shadow-autoCompletePanel\"\n      />\n      <ErrorDialog\n        onHide={() => {\n          setShowDialogAPIError(false);\n          setErrorMessage(\"\");\n        }}\n        visible={showDialogAPIError}\n        errorMessage={errorMessage}\n      />\n      <ToastCustom\n        position={\"bottom-right\"}\n        ref={toastMessageRef}\n        toastText={toastMessage}\n        variant={toastMessageVariant}\n      />\n    </div>\n  );\n};\n\nexport default PageDocumentCheck;\n"],"names":["initialPageOj","PAGE_MODE","PageDocumentCheck","params","useParams","showDialogAPIError","setShowDialogAPIError","useState","errorMessage","setErrorMessage","pageObj","setPageObj","toastMessage","setToastMessage","toastMessageVariant","setToastMessageVariant","TOAST_STYLE_TYPE","triggerToast","setTriggerToast","showMediaGallery","setShowMediaGallery","currentItemToViewInGallery","setCurrentItemToViewInGallery","initialMediaGallerySectionInfo","toastMessageRef","useRef","tableRef","React","actionMenuRef","forceUpdate","simpleValidator","SimpleReactValidator","getStandardValidator","messageReplace","prev","actionMenuModel","useEffect","_a","handleChange","options","rowDataObj","validate","_b","validateForm","isValid","onSaveBusinessProof","payload","enrichForBusinessProofSave","CamService","STATIC_MASTER_TYPE_TOAST_TEXT","prevPageObj","error","parseStandardAPIErrorMessage","onEditBusinessProof","onCancelBusinessProof","onViewFile","rowData","preparedInfoInList","_c","_f","_e","_d","_i","_h","_g","_m","_l","_k","_j","_o","_n","_r","_q","_p","_u","_t","_s","addRows","deletedRows","updatedRows","updateCamBusinessProofRowDataObj","resetValidator","onTableUpdateCallback","renderBusinessProof","jsx","SimpleDropDown","INPUT_STYLE_TYPE","renderDocumentYearFrom","SystemDatePicker","e","renderDocumentYearTo","renderRemark","InputBox","renderAction","AclGuard","IconButton","BUTTON_TYPES","jsxs","Section","SaveComponent","EditableTableV2","Column","i18n","PageAssetDocumentCheck","DOCUMENT_CHECK_MODULE","MediaGallery","MenuBox","ErrorDialog","ToastCustom"],"mappings":"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"}