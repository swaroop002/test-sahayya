import{q as et,cj as st,r as l,aG as P,v as K,aF as w,ao as h,eX as tt,j as r,K as ot,R as ye,J as se,d4 as L,d7 as H,aH as _,T as ct,aw as J,da as te,c8 as Ke,d8 as Ge,d9 as $,dc as oe,dd as ve}from"./index-e8217573.js";import{B as ce}from"./ButtonBox-9e46519a.js";import{E as at}from"./ErrorDialog-d5eef4d7.js";import{L as Ye}from"./LazyLoader-70599949.js";import{S as nt}from"./SimpleTab-27fa8860.js";import{S as it}from"./Skeleton-7e12d019.js";import{T as dt}from"./TextData-06df331b.js";import{T as rt}from"./Toast-ae99ea5b.js";import{W as ge}from"./WarningDialog-77a1cb18.js";import{D as lt}from"./DocumentUploader-e2ec1a13.js";import{S as Fe}from"./SaveComponent-160c5b32.js";import{S as ae}from"./Section-00ef9f2b.js";import{A as ut}from"./Address-75e58af3.js";import{B as ft}from"./BasicInformation-f2687bb1.js";import{a as G,K as mt}from"./KYCV3-298daeeb.js";import{B as At}from"./BankAccountDetails-e32209b8.js";import{A as De}from"./ApplicantService-924aa5cb.js";import{S as yt}from"./StaticMasterDataService-689a6eca.js";import{B as ne}from"./BankAccountDetailsService-375c75c8.js";import{B as Ie}from"./BasicInformation-dd84bcb0.js";import{R as pe}from"./Residential-74fb844b.js";import{u as Dt,C as It,D as pt,c as kt,f as ke,v as Nt,j as Tt,o as We,q as ht,r as bt,t as St,x as qe,A as Et}from"./Helper-03e9d878.js";import{b as Pt}from"./MediaGallery-5884b284.js";import"./kebab-menu-8835ad2e.js";import"./Dialog-adadaf64.js";import"./FileUploadMenuBox-f47dc693.js";import"./MenuBox-defc36b0.js";import"./TransitionGroup-c8afe0ce.js";import"./loader-5f2cfb31.js";import"./AutoComplete-0bca608a.js";import"./search_icon-459d6871.js";import"./withAuth-6de36ebf.js";import"./virtualscroller.esm-9939945c.js";import"./DatePicker-b1c13861.js";import"./FileUploadCustom-5ab7fd25.js";import"./Loading-783a01c7.js";import"./SimpleDropDown-061a3470.js";import"./FileUploadService-1aaf11f7.js";import"./IconButton-36693dd9.js";import"./sortIcon-54357a29.js";import"./Download_Icon-51fc7f46.js";import"./eye_icon-081bddb3.js";import"./InputBox-b9e88f52.js";import"./DocumentService-a293b5f4.js";import"./link-0172a3d4.js";import"./InputTextArea-b90aad1d.js";import"./esm-70d64670.js";import"./index-8739acfd.js";import"./TextButton-41b4a67e.js";import"./City-7102c574.js";import"./Pincode-a7c9b067.js";import"./InputAddon-04f948e7.js";import"./ProfilePictureUpload-60f86be0.js";import"./SystemDatePicker-abe08a29.js";const He={basicInformation:{isBasicInfoLoading:!1,basicInfo:{},basicInfoPageMode:w.VIEW},addressInfo:{isAddressLoading:!1,address:{},addressInfoPageMode:w.VIEW},kycDocuments:{isKycLoading:!1,kycDocList:[kt],uniqueKycCardTracker:[],populateOcr:{uid:"",success:!1,failed:!1},aadharVerificationStatus:{verified:!1,failedToVerify:!1},savedDocuments:[]},bankAccount:{isBankAccountInfoLoading:!1,bankAccountInfoList:[ke]}},_o=()=>{var we,Ve;const N=et().loanUid??"",ie=new st({length:5}),[de,Ne]=l.useState(!0),[V,$e]=l.useState({guarantor:{name:"New Tab",key:""},index:null}),[ze,Je]=l.useState(""),[T,v]=l.useState(0),[Xe,Qe]=l.useState(0),[Ze,es]=l.useState(!1),[D,Z]=l.useState([{firstName:"New Tab",key:ie()}]),[Ot,ee]=l.useState(!1),[ss,ts]=l.useState(!1),[M,os]=l.useState({}),[cs,as]=l.useState(!1),[ns,is]=l.useState(!1),[ds,rs]=l.useState({EMPLOYMENT_NATURE_OPTION:[],INDUSTRY_OPTION:[],OCCUPATION_OPTION:[],BUSINESS_MANAGED_BY_OPTION:[],SEASONALITY_OPTION:[],NO_EMPLOYEE_OPTION:[]}),[I,f]=l.useState({...He}),[ls,us]=l.useState({basicInfoAPICall:!1}),[fs,ms]=l.useState(1),[As,Rt]=l.useState("bottom-right"),[re,C]=l.useState(""),[Te,O]=l.useState(P.PRIMARY),[E,R]=l.useState(!1),[le,p]=l.useState(""),[ys,z]=l.useState(!1),[Ds,ue]=l.useState(!1),[Is,he]=l.useState(!1),ps=l.useRef(null),Y=l.useRef(null),x=l.useRef(null),g=l.useRef(null),U=l.useRef([]),F=l.useRef(null),ks=(e,s)=>[{className:"",label:"Remove Guarantor",command:()=>{$e({guarantor:e,index:s}),z(!0)}}];l.useEffect(()=>{gs()},[]),l.useEffect(()=>{var e;(e=D[T])!=null&&e.uid&&(Hs(),be())},[T,Ze]),l.useEffect(()=>{var e,s,t;(s=(e=I==null?void 0:I.basicInformation)==null?void 0:e.basicInfo)!=null&&s.uid&&((t=D[T])!=null&&t.uid)&&fe()},[(we=I==null?void 0:I.basicInformation)==null?void 0:we.basicInfo]),l.useEffect(()=>{le&&he(!0)},[le]),l.useEffect(()=>{var e;Y!=null&&Y.current&&re!==""&&((e=Y==null?void 0:Y.current)==null||e.showFunction())},[re,Te,E]),l.useEffect(()=>{var e;(e=D[T])!=null&&e.uid&&!de&&be()},[de,ls.basicInfoAPICall]),l.useEffect(()=>{Pe({index:D.length-1})},[ss]),l.useEffect(()=>{f(e=>{var s,t;return{...e,addressInfo:{...e.addressInfo,address:{...e.addressInfo.address,address:M==null?void 0:M.address,pincode:{pinCode:(s=M==null?void 0:M.pincode)==null?void 0:s.pinCode,uid:(t=M==null?void 0:M.pincode)==null?void 0:t.uid}}}}})},[ns]);const W=async(e,s)=>{var t,o,n;try{const d=await De.getApplicantInfo(0,20,L.GUARANTOR,N);if(K(d)&&((t=d.data)!=null&&t.totalRecords)){const a=(n=(o=d.data)==null?void 0:o.results)==null?void 0:n.map((c,i)=>!(c!=null&&c.firstName)&&!c.lastName?{...c,firstName:`Guara... ${i+1}`}:{...c});Z(a),Ne(!1),e==="BASIC_INFO"&&us(c=>({...c,basicInfoAPICall:!c.basicInfoAPICall})),s&&s(a)}else Ne(!1)}catch(d){p(h(d))}},Ns=async()=>{var e,s,t,o,n,d,a;try{const c=await De.getApplicantInfo(0,20,L.PRIMARY,N);if(K(c)&&((e=c.data)!=null&&e.totalRecords))return Je((o=(t=(s=c.data)==null?void 0:s.results)==null?void 0:t[0])==null?void 0:o.uid),((a=(d=(n=c.data)==null?void 0:n.results)==null?void 0:d[0])==null?void 0:a.uid)??""}catch(c){p(h(c))}},be=async e=>{const s=D[T];e||f(t=>({...t,basicInformation:{...t.basicInformation,isBasicInfoLoading:!0}}));try{const t=await Ie.getDde(s==null?void 0:s.uid);K(t)?f(o=>({...o,basicInformation:{...o.basicInformation,basicInfo:Dt(t==null?void 0:t.data),isBasicInfoLoading:!1,basicInfoPageMode:w.VIEW}})):f(o=>({...o,basicInformation:{...o.basicInformation,isBasicInfoLoading:!1,basicInfoPageMode:w.VIEW}}))}catch(t){p(h(t))}},Ts=async(e,s)=>{var t,o,n,d,a,c,i,m,y,A,u,k,S,j;s||f(q=>({...q,kycDocuments:{...q.kycDocuments,isKycLoading:!0}}));try{const q=await G.getKycDocument(N,e);if(K(q)){const{data:B}=q,Ae=[],je=[],Zs=b=>b.map(Q=>({sectionUid:Q.uid??"",fileName:Q.fileName??"",fileType:Q.fileType??"",sectionType:Q.smDocSectionType??"",url:Q.url}));for(const b in B)Ae.push({listId:b,uid:b,docName:((n=(o=(t=B[b])==null?void 0:t[0].kyc)==null?void 0:o.docType)==null?void 0:n.code)??"",docNo:((a=(d=B[b])==null?void 0:d[0].kyc)==null?void 0:a.docNo)??"",maskedDocNo:((i=(c=B[b])==null?void 0:c[0].kyc)==null?void 0:i.maskedDocNo)??"",dob:((y=(m=B[b])==null?void 0:m[0].kyc)==null?void 0:y.dob)??"",docSections:Zs(B[b]),isVerified:((u=(A=B[b])==null?void 0:A[0].kyc)==null?void 0:u.isVerified)??!1}),je.push(((j=(S=(k=B[b])==null?void 0:k[0].kyc)==null?void 0:S.docType)==null?void 0:j.code)??"");Ae.length?f(b=>({...b,kycDocuments:{...b.kycDocuments,kycDocList:[...Ae],uniqueKycCardTracker:[...je],isKycLoading:!1}})):f(b=>({...b,kycDocuments:{...b.kycDocuments,isKycLoading:!1}}))}}catch(q){f(B=>({...B,kycDocuments:{...B.kycDocuments,isKycLoading:!1}})),p(h(q))}},fe=async e=>{const s=D[T];if(e||f(t=>({...t,addressInfo:{...t.addressInfo,isAddressLoading:!0}})),N&&(s!=null&&s.uid))try{const t=await pe.getAddressForDde(N,s==null?void 0:s.uid);K(t)&&Object.keys(t.data).length>0?f(o=>({...o,addressInfo:{...o.addressInfo,isAddressLoading:!1,address:It(t.data)}})):f(o=>({...o,addressInfo:{...o.addressInfo,isAddressLoading:!1}}))}catch(t){p(h(t))}},hs=async()=>{await yt.getAll(0,200,"staticMasterType.code=ACCOUNT_TYPE&").then(t=>{t.data.results&&t.data.results.length>0?rs(o=>({...o,ACCOUNT_OPTION:[...t.data.results??[]]})):console.log("error")})},Se=async(e,s)=>{var t,o;if(s||f(n=>({...n,bankAccount:{...n.bankAccount,isBankAccountInfoLoading:!0}})),N&&e)try{const n=await ne.getBankAccountDetails(N,e);if(K(n))if(((t=n==null?void 0:n.data)==null?void 0:t.length)>0){const d=(o=n==null?void 0:n.data)==null?void 0:o.map(a=>Et(a));f(a=>({...a,bankAccount:{bankAccountInfoList:[...d],isBankAccountInfoLoading:!1}}))}else f(d=>({...d,bankAccount:{...d.bankAccount,isBankAccountInfoLoading:!1,bankAccountInfoList:[{...ke}]}}))}catch(n){console.log(n),f(d=>({...d,bankAccount:{...d.bankAccount,isBankAccountInfoLoading:!1}}))}},Ee=async(e,s)=>(await Ws(s))[e],Pe=e=>{var t,o;let s=(t=x==null?void 0:x.current)==null?void 0:t.getData();s=pt(s),e.index!==T&&!((o=D==null?void 0:D[T])!=null&&o.uid)&&tt(s)?(ue(!0),Qe(e.index)):e.index!==T&&(X(),v(e.index))},bs=()=>{X(),v(Xe),ue(!1)},Ss=()=>{f(e=>({...e,kycDocuments:{...e.kycDocuments,aadharVerificationStatus:{verified:!1,failedToVerify:!1}}}))},Es=async(e,s,t)=>{const{kycDocuments:{kycDocList:o}}=I;if(e!=null&&e.uid){const n=await Ee(e==null?void 0:e.uid,s),d=We(N,s,e,n,L.GUARANTOR);try{const a=await G.updateKycDocument(d,$.DDE);if(H(a)){const{data:c}=a,i=c.meta?JSON.parse(c.meta):null,m=u=>{var k,S;return u===oe.DOCUMENT_SECTIONS_FRONT_PAGE?((k=i==null?void 0:i.ocrResponse)==null?void 0:k.frontMaskedImageUrl)??"":u===oe.DOCUMENT_SECTIONS_BACK_PAGE?((S=i==null?void 0:i.ocrResponse)==null?void 0:S.backMaskedImageUrl)??"":""},y=u=>{var k;return((k=c.docType)==null?void 0:k.code)===ve.AADHAR_CARD?u.map(j=>({sectionUid:j.uid??"",fileName:j.fileName??"",fileType:j.fileType??"",sectionType:j.smDocSectionType??"",url:i?m(j.smDocSectionType):j.url})):u},A=o.map(u=>{var k;return u.uid===c.uid?{...u,docName:((k=c.docType)==null?void 0:k.code)??"",docNo:c.docNo,maskedDocNo:c.maskedDocNo??"",docSections:y(c.kycDocuments),dob:c.dob??""}:u});f(u=>({...u,kycDocuments:{...u.kycDocuments,kycDocList:[...A]}})),O(P.PRIMARY),C(_.SAVED),R(!E),W("BASIC_INFO",u=>{u.length-1<T&&v((u==null?void 0:u.length)-1)})}}catch(a){p(h(a))}}else{const n=ht(N,s,e,L.GUARANTOR);try{const d=await G.saveKycDocument(n,$.DDE);if(J(d)){const{data:a}=d,c=a.meta?JSON.parse(a.meta):null,i=A=>{var u,k;return A===oe.DOCUMENT_SECTIONS_FRONT_PAGE?((u=c==null?void 0:c.ocrResponse)==null?void 0:u.frontMaskedImageUrl)??"":A===oe.DOCUMENT_SECTIONS_BACK_PAGE?((k=c==null?void 0:c.ocrResponse)==null?void 0:k.backMaskedImageUrl)??"":""},m=A=>{var u;return((u=a.docType)==null?void 0:u.code)===ve.AADHAR_CARD?A.map(S=>({sectionUid:S.uid??"",fileName:S.fileName??"",fileType:S.fileType??"",sectionType:S.smDocSectionType??"",url:c?i(S.smDocSectionType):S.url})):A},y=o.map((A,u)=>{var k;return u===t?{...A,uid:a.uid??"",docName:((k=a.docType)==null?void 0:k.code)??"",docNo:a.docNo??"",maskedDocNo:a.maskedDocNo??"",docSections:m(a.kycDocuments),dob:a.dob??""}:A});f(A=>{var u;return{...A,kycDocuments:{...A.kycDocuments,kycDocList:[...y],savedDocuments:[...A.kycDocuments.savedDocuments,(u=a.docType)==null?void 0:u.code],uniqueKycCardTracker:me()}}}),O(P.PRIMARY),C(_.SAVED),R(!E),W("BASIC_INFO",A=>{A.length-1<T&&v((A==null?void 0:A.length)-1)})}}catch(d){p(h(d))}}},Ps=async(e,s,t)=>{if(e.uid){const o=We(N,s,e,await Ee(e==null?void 0:e.uid,s),L.GUARANTOR);try{const n=await G.updateKycDocument(o,$.DDE);H(n)&&(t!==void 0&&Be(t),O(P.QUATERNARY),C(_.REMOVED),R(!E))}catch(n){p(h(n))}}},Cs=async(e,s,t)=>{const{kycDocuments:{kycDocList:o,populateOcr:n}}=I,d=bt(N,s,n.uid,e,L.GUARANTOR);try{const a=await G.populateKycDocument(d,$.DDE);if(J(a)){const{data:c}=a,i=o.map((m,y)=>{var A;return y===t?{...m,uid:c.uid,docName:((A=c.docType)==null?void 0:A.code)??"",docNo:c.docNo??"",dob:c.dob??""}:m});W("BASIC_INFO",m=>{m.length-1<T&&v((m==null?void 0:m.length)-1)}),f(m=>({...m,kycDocuments:{...m.kycDocuments,kycDocList:[...i],uniqueKycCardTracker:me(),populateOcr:{...m.kycDocuments.populateOcr,uid:c.uid??"",success:!0,failed:!1}}}))}}catch(a){f(c=>({...c,kycDocuments:{...c.kycDocuments,populateOcr:{...c.kycDocuments.populateOcr,success:!1,failed:!0}}})),p(h(a))}},Os=async(e,s,t,o,n)=>{const d=St(N,t,e,s,L.GUARANTOR,n),{kycDocuments:{kycDocList:a}}=I;try{const c=await G.validateAadhar(d,$.DDE);if(J(c)){const{data:i}=c,m=a.map((y,A)=>{var u;return A===o?{...y,uid:i.uid,docName:(u=i.docType)==null?void 0:u.code,docNo:i.docNo??"",maskedDocNo:i.maskedDocNo??"",dob:i.dob??""}:y});W("BASIC_INFO",y=>{y.length-1<T&&v((y==null?void 0:y.length)-1)}),f(y=>({...y,kycDocuments:{...y.kycDocuments,kycDocList:[...m],uniqueKycCardTracker:me(),aadharVerificationStatus:{...y.kycDocuments.aadharVerificationStatus,verified:!0}}}))}}catch(c){f(i=>({...i,kycDocuments:{...i.kycDocuments,aadharVerificationStatus:{...i.kycDocuments.aadharVerificationStatus,failedToVerify:!0}}})),p(h(c))}},Rs=async(e,s)=>{var o,n,d,a;const t=(n=(o=U==null?void 0:U.current)==null?void 0:o[e])==null?void 0:n.save();if(t){const c=qe(t,N,s,L.GUARANTOR);if(t.uid)try{const i=await ne.updateBankAccountDetail(c);H(i)&&(C(_.SAVED),O(P.PRIMARY),R(!E),(a=(d=U==null?void 0:U.current)==null?void 0:d[e])==null||a.onSaveSuccess())}catch(i){p(h(i))}else try{const i=await ne.createBankAccountDetail(c);J(i)&&(C(_.SAVED),O(P.PRIMARY),R(!E),i.constructor.name==="Object"&&f(m=>{const y=I.bankAccount.bankAccountInfoList.map(A=>{var u,k;return A.uid?A:{...t,uid:(u=i==null?void 0:i.data)==null?void 0:u.uid,id:(k=i==null?void 0:i.data)==null?void 0:k.id}});return{...m,bankAccount:{...m.bankAccount,bankAccountInfoList:y}}}))}catch(i){console.log(i),p(h(i))}}},Bs=()=>{Z(e=>[...e,{firstName:"New Tab",key:ie()}]),ts(e=>!e)},Ls=async(e,s)=>{if(e!=null&&e.uid)try{const t=await De.deleteApplicantInfo(e==null?void 0:e.uid);if(H(t)){if(C(_.SAVED),O(P.PRIMARY),R(!E),D.length===1){_e(),z(!1),X();return}Le(s),z(!1)}}catch(t){p(h(t))}else{if(D.length===1){_e(),z(!1),X();return}Le(s),z(!1)}},_s=()=>{var s;const e=(s=x==null?void 0:x.current)==null?void 0:s.save();if(!e)return Promise.resolve(!0);if(e){const t=Nt(e,N,ze,L.GUARANTOR);e.uid?Ie.updateDde(t).then(o=>{H(o)&&(O(P.PRIMARY),C(_.SAVED),R(!E),ee(!0),W("BASIC_INFO"))}).catch(o=>{p(h(o))}):Ie.createBasicInformation(t).then(o=>{J(o)&&(O(P.PRIMARY),C(_.SAVED),R(!E),ee(!0),Ce(),W("BASIC_INFO"))}).catch(o=>{p(h(o))})}},Ms=async e=>pe.saveForDde(e).then(s=>{H(s)&&(fe(),O(P.PRIMARY),C(_.SAVED),R(!E),ee(!0),f(t=>({...t,addressInfo:{...t.addressInfo,addressInfoPageMode:w.VIEW}})))}).catch(s=>{p(h(s))}),xs=async e=>pe.save(e).then(s=>{J(s)&&(fe(),O(P.PRIMARY),C(_.SAVED),R(!E),ee(!0),f(t=>({...t,addressInfo:{...t.addressInfo,addressInfoPageMode:w.VIEW}})))}).catch(s=>{p(h(s))}),Us=async e=>{var o,n,d,a,c,i;const s=(o=g==null?void 0:g.current)==null?void 0:o.save(),t=(n=F==null?void 0:F.current)==null?void 0:n.getUploadedData();if(!s||!(t!=null&&t.documentUid))return Promise.resolve(!0);if(s&&t){const m=Tt({...s,uid:(a=(d=I.addressInfo)==null?void 0:d.address)==null?void 0:a.uid,addressDocumentsInfo:t??{}},N,e,L.GUARANTOR);(i=(c=I.addressInfo)==null?void 0:c.address)!=null&&i.uid?Ms(m):xs(m)}},ws=()=>{f(e=>({...e,basicInformation:{...e.basicInformation,basicInfoPageMode:w.CREATE}}))},Vs=()=>{var e;(e=x==null?void 0:x.current)==null||e.cancel(),f(s=>({...s,basicInformation:{...s.basicInformation,basicInfoPageMode:w.VIEW}}))},Ce=()=>{f(e=>({...e,addressInfo:{...e.addressInfo,addressInfoPageMode:w.CREATE}}))},js=e=>{e&&Ts(e)},Ks=()=>{var e,s;(e=g==null?void 0:g.current)==null||e.resetValidator(),(s=F==null?void 0:F.current)==null||s.resetValidator(),f(t=>({...t,addressInfo:{...t.addressInfo,addressInfoPageMode:w.VIEW}}))},Gs=e=>{const s=[];s.push(Fs),e&&s.push(()=>Se(e)),s.forEach(t=>t())},vs=()=>{const e={...ke};f(s=>({...s,bankAccount:{...s.bankAccount,bankAccountInfoList:[...s.bankAccount.bankAccountInfoList,e]}}))},Ys=async(e,s)=>{var o,n;const t=(n=(o=U==null?void 0:U.current)==null?void 0:o[e])==null?void 0:n.remove();if(t){const d=qe(t,N,s,L.GUARANTOR);if(t.uid)try{const a=await ne.updateBankAccountDetail(d);H(a)&&(Se(s),C(_.REMOVED),O(P.QUATERNARY),R(!E))}catch(a){p(h(a))}else{const a=I.bankAccount.bankAccountInfoList.filter((c,i)=>i!==e);f(c=>({...c,bankAccount:{...c.bankAccount,employmentInfoList:[...a]}}))}}},Oe=async(e,s)=>G.getPopulateDocumentByKyc(N,e).then(t=>{var o;if(K(t)){const[n,d,a]=((o=t==null?void 0:t.data)==null?void 0:o.name.split(" "))??"";t.data={...t.data,firstName:n,middleName:d,lastName:a},os(t.data),s===te.ADDRESS&&is(c=>!c),s===te.BASIC_INFO&&as(c=>!c)}}).catch(t=>{p(h(t))}),gs=()=>{Ns(),W()},Fs=()=>{hs()},Ws=async e=>{try{const s=await G.getKycDocument(N,e);if(K(s)){const{data:t}=s;return t}}catch(s){p(h(s))}},me=()=>{const{kycDocuments:{uniqueKycCardTracker:e}}=I,s=[...e];return s.splice(s.length-1,1),[...s]},Re=()=>{const e={listId:`kyc-card-${fs+1}`,uid:"",docName:"",docNo:"",maskedDocNo:"",dob:"",docSections:[],isVerified:!1};ms(s=>s+1),f(s=>({...s,kycDocuments:{...s.kycDocuments,kycDocList:[...s.kycDocuments.kycDocList,e],populateOcr:{uid:"",success:!1,failed:!1}}}))},qs=e=>{f(s=>({...s,kycDocuments:{...s.kycDocuments,uniqueKycCardTracker:[...e]}}))},Be=e=>{const{kycDocuments:{kycDocList:s}}=I,t=s.filter((o,n)=>n!==e);f(o=>({...o,kycDocuments:{...o.kycDocuments,kycDocList:[...t]}}))},Le=e=>{const s=[...D];e>=0&&e<D.length&&(s.splice(e,1),Z(s),e+1===D.length-1&&T===e+1||(e===D.length-1&&T===e||e!==D.length-1&&T===D.length-1||e<T?setTimeout(()=>{v(T-1)},5):e===T&&(X(),es(t=>!t))))},_e=()=>{Z([{firstName:"New Tab",key:ie()}])},X=()=>{f({...He})},Hs=()=>{f(e=>({...e,basicInformation:{...e.basicInformation,isBasicInfoLoading:!0},addressInfo:{...e.addressInfo,isAddressLoading:!0},kycDocuments:{...e.kycDocuments,isKycLoading:!0},bankAccount:{...e.bankAccount,isBankAccountInfoLoading:!0}}))},Me=e=>({ocrStageName:Ge.LOGIN,ocrSubstageName:$.DDE,ocrPayloadData:{loanUid:N,applicant:{uid:e}}}),$s=l.useMemo(()=>M,[cs]),zs=e=>{const{basicInfoPageMode:s,basicInfo:t,isBasicInfoLoading:o}=I.basicInformation;return r.jsx(ft,{ref:x,type:"DDE",relationship:!0,pageMode:s,data:t,isLoading:o,prePopulated:$s,ocrRelatedData:Me(e==null?void 0:e.uid)})},Js=e=>{var n;const{addressInfoPageMode:s,address:t,isAddressLoading:o}=I.addressInfo;return o?r.jsx(it,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"}):r.jsxs(ut,{ref:g,variant:"PRIMARY",pageMode:s,data:t,children:[r.jsx(dt,{label:"Address Proof *",value:"Attach Documents (PDF, JPG, JPEG or PNG)",titleClass:"text-primary-sideBarBgColor text-sm font-bold mb-1"}),r.jsx(lt,{ref:F,mode:s,mandatoryDocUpload:!0,savedDocument:(n=t.loanDocuments)!=null&&n[0]?t.loanDocuments[0]:{},queryParamForDocList:Ke.DOCUMENT_CATEGORY_ADDRESS_PROOF,ocrStageName:Ge.LOGIN,ocrSubstageName:$.DDE,ocrPayloadData:{loanUid:N,applicant:{uid:e==null?void 0:e.uid}}})]})},xe=e=>{const{isKycLoading:s,kycDocList:t,uniqueKycCardTracker:o,populateOcr:n,aadharVerificationStatus:d}=I.kycDocuments;return r.jsx("div",{className:"grid grid-cols-2 gap-5",children:t.map((a,c)=>r.jsx("div",{children:r.jsx(mt,{mode:"EDIT",isLoading:s,uid:a.uid,documentListIndex:c,docName:a.docName,docNo:a.docNo,dateOfBirth:a.dob,docSections:a.docSections,maskedDocNo:a.maskedDocNo,isVerified:a.isVerified,removeDocumentInList:Be,cardNameList:o,handlerCardNameList:qs,ocrStatus:n,onSave:(i,m)=>Es(i,e==null?void 0:e.uid,m),onRemove:(i,m)=>{Ps(i,e==null?void 0:e.uid,m)},onPopulate:(i,m)=>Cs(i,e==null?void 0:e.uid,m),onVerifyAadhar:(i,m,y,A)=>Os(i,m,e==null?void 0:e.uid,y,A),aadharVerificationStatus:d,handlerAadharVerificationStatus:Ss,placeOfUpload:Pt.LOGIN_GUARANTORS})},`document-${a.listId}`))})},Ue=e=>{const{bankAccountInfoList:s,isBankAccountInfoLoading:t}=I.bankAccount;return r.jsx("div",{className:"flex flex-col gap-4",children:s==null?void 0:s.map((o,n)=>r.jsx(At,{disabled:!(e!=null&&e.uid),ref:d=>{U.current[n]=d},cardNumber:n+1,data:o,documentCategory:Ke.DOCUMENT_CATEGORY_BANK_ACCOUNT_DOCUMENT,ocrRelatedData:Me(e==null?void 0:e.uid),dropDownOptions:ds,isLoading:t,onRemoveBankAccountDetails:()=>Ys(n,e==null?void 0:e.uid),onSaveBankAccountDetails:()=>Rs(n,e==null?void 0:e.uid)},o==null?void 0:o.uid))})},Xs=(e,s)=>r.jsxs("div",{className:"flex flex-col gap-4",children:[!(e!=null&&e.uid)&&r.jsx(ae,{title:"KYC Documents",className:"mt-5",children:r.jsxs(ye.Fragment,{children:[xe(e),r.jsx("div",{className:"p-5 w-full rounded-xl bg-slate-100 mt-5",children:r.jsx(ce,{buttonType:se.ICON_TEXT_ROW,customLabel:"Add Another Document",onClick:Re})})]})}),r.jsx(ae,{title:"heading.basicInformation",children:r.jsxs(r.Fragment,{children:[r.jsx(Fe,{pageMode:I.basicInformation.basicInfoPageMode,onEdit:ws,onSave:_s,onCancel:Vs,onPrePopulate:()=>Oe(e==null?void 0:e.uid,te.BASIC_INFO),disablePrePopulate:!(e!=null&&e.uid),disabled:!(e!=null&&e.uid),children:zs(e)}),r.jsx(Fe,{disabled:!(e!=null&&e.uid),pageMode:I.addressInfo.addressInfoPageMode,onEdit:Ce,onSave:()=>Us(e==null?void 0:e.uid),onCancel:Ks,title:"label.heading.residential.address",onPrePopulate:()=>Oe(e==null?void 0:e.uid,te.ADDRESS),disablePrePopulate:!(e!=null&&e.uid),children:Js(e)})]})}),(e==null?void 0:e.uid)&&r.jsx(ae,{title:"KYC Documents",children:r.jsxs(Ye,{onLazyLoad:()=>js(e==null?void 0:e.uid),children:[xe(e),r.jsx("div",{className:"p-5 w-full rounded-xl bg-slate-100 mt-5",children:r.jsx(ce,{buttonType:se.ICON_TEXT_ROW,customLabel:"Add Another Document",onClick:Re})})]})}),r.jsx(ae,{title:"heading.dde.bankAccount.details",children:e!=null&&e.uid?r.jsxs(Ye,{onLazyLoad:()=>Gs(e==null?void 0:e.uid),children:[Ue(e),r.jsx("div",{className:"p-5 w-full rounded-xl bg-slate-100 mt-5",children:r.jsx(ce,{buttonType:se.ICON_TEXT_ROW,customLabel:"label.dde.add.another.bankAccount.details",onClick:vs})})]}):r.jsx(ye.Fragment,{children:Ue(e)})})]},e==null?void 0:e.key),Qs=()=>r.jsx(ct,{className:"",label:`
          ( ${D.length>1?`${D.length} Guarantors`:`${D.length} Guarantor`} )`});return de?r.jsx(ot,{}):r.jsxs(ye.Fragment,{children:[r.jsxs("div",{className:"scrollable-tab dynamic-tab relative deleteable-header",children:[r.jsx(nt,{showTooltip:!0,scrollable:!0,enableTabMenu:!0,tabHeaderMenuModel:(e,s)=>ks(e,s),optionLabel:["firstName","middleName","lastName"],optionKey:["uid","key"],headerClassName:"dynamic-header",ref:ps,activeIndex:T,tabs:D,onTabChange:Pe,renderContent:Xs}),r.jsxs("div",{className:"absolute top-0 right-0 text-[#A3A3A3] text-xs flex justify-evenly items-center w-[15%] space-x-4 pb-2.5 border-b",children:[Qs(),r.jsx("div",{className:"",children:r.jsx(ce,{buttonType:se.ICON_BUTTON_ADD,onClick:Bs})})]})]}),r.jsx(rt,{position:As,ref:Y,toastText:re,variant:Te}),r.jsx(at,{onHide:()=>{he(!1),p("")},visible:Is,errorMessage:le}),r.jsx(ge,{visible:ys,className:"w-76 !px-14",title:"Remove Guarantor ?",warningMessage:`Guarantor ${(Ve=V==null?void 0:V.guarantor)==null?void 0:Ve.firstName} will be removed`,onCancel:()=>z(!1),onConfirm:()=>{Ls(V==null?void 0:V.guarantor,V==null?void 0:V.index)},onHide:()=>{}}),r.jsx(ge,{visible:Ds,className:"w-76 !px-14",title:"Discard added data ?",warningMessage:"Your data will be lost if not saved before navigating to a different tab",onCancel:()=>ue(!1),onConfirm:bs,onHide:()=>{}})]})};export{_o as default};
//# sourceMappingURL=PageGuarantors-be0facb2.js.map
