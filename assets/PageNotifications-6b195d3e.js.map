{"version":3,"file":"PageNotifications-6b195d3e.js","sources":["../../src/assets/img/buttonIcons/Goto_Icon_Notification.svg","../../src/views/transaction/PageNotifications/PageNotifications.tsx"],"sourcesContent":["export default \"__VITE_ASSET__a69f41d0__\"","import GoTo from \"assets/img/buttonIcons/Goto_Icon_Notification.svg\";\nimport ReadOnlyTable, { IReadonlyTableRef } from \"components/ReadOnlyTable/ReadOnlyTable\";\nimport Section from \"components/Section/Section\";\nimport { useTranslateText } from \"hook/CustomHooks\";\nimport { Column } from \"primereact/column\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { linkAuthRoute, linkBasePath } from \"routes\";\nimport CommunicationService from \"services/transaction/CommunicationService\";\nimport { LINK_LOAN_DETAIL } from \"transactionRoutes\";\nimport { STAGE_MAPPING } from \"utils/Constant\";\n\nconst PageNotifications = () => {\n  const [dataTable] = useState({\n    limit: 10,\n    loading: false,\n    totalRecords: 0,\n    start: 0,\n    search: `&notificationType=web&sort={\"createdAt\":\"DESC\"}`,\n    runCustomQuery: false,\n    records: [],\n  });\n\n  const dataTableRef = useRef<IReadonlyTableRef | null>(null);\n  const userProfile = useSelector((state: any) => state.UserProfileReducers.profileObj);\n\n  useEffect(() => {\n    markAsRead();\n  });\n\n  /*\n    -----------------------------------------------------------------------------------------------\n    on-Handlers: Event handler for onClick, onToggle etc\n    -----------------------------------------------------------------------------------------------\n  */\n\n  const markAsRead = async () => {\n    try {\n      const res = await CommunicationService.updateNotificationStatusToRead();\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  /* \n    -------------------------------------------------------\n     Helper Functions\n    -------------------------------------------------------\n  */\n\n  /* \n    -------------------------------------------------------\n      Sectional Render Functions: For Sub components / section wise renders\n    -------------------------------------------------------\n  */\n\n  const renderTitle = (rowData: any) => {\n    let title = rowData?.activityType?.split(\"_\");\n    title = title.join(\" \");\n    title = title[0]?.toUpperCase() + title?.slice(1);\n    return <div className=\"flex items-center\">{title ?? \"-\"}</div>;\n  };\n  const renderMessage = (rowData: any) => {\n    return (\n      <div className=\"flex items-center\">{`${\n        rowData?.metadata?.lanId ? `${rowData?.metadata?.lanId}` : \"\"\n      } ${rowData?.metadata?.applicantName ? `| ${rowData?.metadata?.applicantName}` : \"\"} ${\n        rowData?.metadata?.assigneeName ? `| ${rowData?.metadata?.assigneeName}` : \"\"\n      } ${rowData?.message ? `| ${rowData?.message}` : \"\"} `}</div>\n    );\n  };\n\n  const renderAction = (rowData: any) => {\n    const path = STAGE_MAPPING[rowData?.metadata?.stageName] || \"\";\n    const URL =\n      linkBasePath +\n      linkAuthRoute +\n      LINK_LOAN_DETAIL +\n      path +\n      \"/\" +\n      rowData?.metadata?.loanUid +\n      \"/\" +\n      rowData?.metadata?.stageUid +\n      \"/\";\n\n    return (\n      <a className=\"w-full flex justify-center items-center cursor-pointer\" href={URL}>\n        <img src={GoTo} alt=\"navigate-to\" />\n      </a>\n    );\n  };\n\n  return (\n    <div>\n      <Section title=\"Notifications\">\n        <ReadOnlyTable\n          standardDataFormatPromise={CommunicationService.getAllNotifications}\n          dataKey=\"id\"\n          search={`${dataTable.search}&userUid=${userProfile?.userUid}`}\n          ref={dataTableRef}\n        >\n          <Column\n            className=\"text-primary-ptext-1000 text-left text-xs py-3 pl-6\"\n            header={useTranslateText(\"label.notifications.title\")}\n            body={renderTitle}\n          />\n          <Column\n            className=\"text-primary-ptext-1000 text-left text-xs py-3 pl-6\"\n            header={useTranslateText(\"label.notifications.message\")}\n            body={renderMessage}\n          />\n          <Column\n            className=\"text-primary-ptext-1000 text-left text-xs py-3 px-6\"\n            header={useTranslateText(\"label.notifications.action\")}\n            body={renderAction}\n            style={{ minWidth: \"50px\", width: \"50px\" }}\n          />\n        </ReadOnlyTable>\n      </Section>\n    </div>\n  );\n};\n\nexport default PageNotifications;\n"],"names":["GoTo","PageNotifications","dataTable","useState","dataTableRef","useRef","userProfile","useSelector","state","useEffect","markAsRead","res","CommunicationService","err","renderTitle","rowData","title","_a","_b","jsx","renderMessage","_c","_d","_e","_f","renderAction","path","STAGE_MAPPING","URL","linkBasePath","linkAuthRoute","LINK_LOAN_DETAIL","Section","jsxs","ReadOnlyTable","Column","useTranslateText"],"mappings":"qjBAAA,MAAeA,EAAA,8CCYTC,EAAoB,IAAM,CACxB,KAAA,CAACC,CAAS,EAAIC,WAAS,CAC3B,MAAO,GACP,QAAS,GACT,aAAc,EACd,MAAO,EACP,OAAQ,kDACR,eAAgB,GAChB,QAAS,CAAC,CAAA,CACX,EAEKC,EAAeC,SAAiC,IAAI,EACpDC,EAAcC,EAAaC,GAAeA,EAAM,oBAAoB,UAAU,EAEpFC,EAAAA,UAAU,IAAM,CACHC,GAAA,CACZ,EAQD,MAAMA,EAAa,SAAY,CACzB,GAAA,CACI,MAAAC,EAAM,MAAMC,EAAqB,uCAChCC,GACP,QAAQ,IAAIA,CAAG,CACjB,CAAA,EAeIC,EAAeC,GAAiB,SACpC,IAAIC,GAAQC,EAAAF,GAAA,YAAAA,EAAS,eAAT,YAAAE,EAAuB,MAAM,KACjC,OAAAD,EAAAA,EAAM,KAAK,GAAG,EACtBA,IAAQE,EAAAF,EAAM,CAAC,IAAP,YAAAE,EAAU,gBAAgBF,GAAA,YAAAA,EAAO,MAAM,IACvCG,EAAA,IAAA,MAAA,CAAI,UAAU,oBAAqB,YAAS,GAAI,CAAA,CAAA,EAEpDC,EAAiBL,GAAiB,iBACtC,OACGI,MAAA,MAAA,CAAI,UAAU,oBAAqB,aAClCF,EAAAF,GAAA,YAAAA,EAAS,WAAT,MAAAE,EAAmB,MAAQ,IAAGC,EAAAH,GAAA,YAAAA,EAAS,WAAT,YAAAG,EAAmB,QAAU,OACzDG,EAAAN,GAAA,YAAAA,EAAS,WAAT,MAAAM,EAAmB,cAAgB,MAAKC,EAAAP,GAAA,YAAAA,EAAS,WAAT,YAAAO,EAAmB,gBAAkB,OAC/EC,EAAAR,GAAA,YAAAA,EAAS,WAAT,MAAAQ,EAAmB,aAAe,MAAKC,EAAAT,GAAA,YAAAA,EAAS,WAAT,YAAAS,EAAmB,eAAiB,MACzET,GAAA,MAAAA,EAAS,QAAU,KAAKA,GAAA,YAAAA,EAAS,UAAY,KAAM,CAAA,CAAA,EAIrDU,EAAgBV,GAAiB,WACrC,MAAMW,EAAOC,GAAcV,EAAAF,GAAA,YAAAA,EAAS,WAAT,YAAAE,EAAmB,SAAS,GAAK,GACtDW,EACJC,EACAC,EACAC,EACAL,EACA,MACAR,EAAAH,GAAA,YAAAA,EAAS,WAAT,YAAAG,EAAmB,SACnB,MACAG,EAAAN,GAAA,YAAAA,EAAS,WAAT,YAAAM,EAAmB,UACnB,IAEF,OACGF,EAAAA,IAAA,IAAA,CAAE,UAAU,yDAAyD,KAAMS,EAC1E,SAACT,EAAA,IAAA,MAAA,CAAI,IAAKnB,EAAM,IAAI,aAAA,CAAc,CACpC,CAAA,CAAA,EAIJ,OACGmB,EAAA,IAAA,MAAA,CACC,SAACA,EAAAA,IAAAa,EAAA,CAAQ,MAAM,gBACb,SAAAC,EAAA,KAACC,EAAA,CACC,0BAA2BtB,EAAqB,oBAChD,QAAQ,KACR,OAAQ,GAAGV,EAAU,kBAAkBI,GAAA,YAAAA,EAAa,UACpD,IAAKF,EAEL,SAAA,CAAAe,EAAA,IAACgB,EAAA,CACC,UAAU,sDACV,OAAQC,EAAiB,2BAA2B,EACpD,KAAMtB,CAAA,CACR,EACAK,EAAA,IAACgB,EAAA,CACC,UAAU,sDACV,OAAQC,EAAiB,6BAA6B,EACtD,KAAMhB,CAAA,CACR,EACAD,EAAA,IAACgB,EAAA,CACC,UAAU,sDACV,OAAQC,EAAiB,4BAA4B,EACrD,KAAMX,EACN,MAAO,CAAE,SAAU,OAAQ,MAAO,MAAO,CAAA,CAC3C,CAAA,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,CAEJ"}