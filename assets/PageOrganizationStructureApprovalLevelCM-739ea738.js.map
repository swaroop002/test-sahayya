{"version":3,"file":"PageOrganizationStructureApprovalLevelCM-739ea738.js","sources":["../../src/views/masterData/OrganizationLevel/OrganizationApproval/OrganizationLevelApprovalLevelCreateViewEdit/PageOrganizationStructureApprovalLevelCM.tsx"],"sourcesContent":["/**\n * Author : Sachin pandey\n * Created on : 20 Dec, 2023\n *\n **/\n\n/*\n  -------------------------------------------------------\n   Imports:\n  -------------------------------------------------------\n*/\nimport AclGuard from \"components/AclGuard/AclGuard\";\nimport ButtonBox from \"components/ButtonBox\";\nimport ErrorDialog from \"components/ErrorDialog/ErrorDialog\";\nimport InputBox from \"components/InputBox\";\nimport InputTextArea from \"components/InputTextArea\";\nimport Text from \"components/Text\";\nimport ToastCustom from \"components/Toast/Toast\";\nimport { RouteProps, withRouter } from \"hoc/withRouter\";\nimport { ToastPositionType } from \"primereact/toast\";\nimport queryString from \"query-string\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { linkOrganizationApproval, linkPartnerUser } from \"routes\";\n\nimport PartnerMasterDataService from \"services/masterdata/Partners/PartnerMasterDataService\";\nimport StaticMasterTypeService from \"services/masterdata/StaticMaster/StaticMasterTypeService\";\nimport UserService from \"services/masterdata/User/UserService\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport {\n  getStandardValidator,\n  messageReplace,\n  parseStandardAPIErrorMessage,\n  stringifyObject,\n} from \"utils/CommonUtil\";\nimport OrgStructureApprovalService from \"../../../../../services/masterdata/OrgStruct/Approval/Approval\";\nimport {\n  BUTTON_TYPE,\n  ENTITY,\n  INPUT_STYLE_TYPE,\n  OPERATION_TYPE,\n  PAGE_MODE,\n  STATIC_MASTER_TYPE_TOAST_TEXT,\n  TOAST_STYLE_TYPE,\n} from \"utils/Constant\";\n\n/*\n  -------------------------------------------------------\n  PROPS:\n  -------------------------------------------------------\n*/\n\nconst OrganizationLevelApprovalLevelCreateViewEdit = (props: RouteProps) => {\n  /*\n    -------------------------------------------------------\n      States\n    -------------------------------------------------------\n  */\n  const [pageObj, setPageObj] = useState({\n    name: \"\",\n\n    sequence: \"\",\n    reasons: \"\",\n    description: \"\",\n    isActive: \"\",\n  });\n  const [initialData, setInitData] = useState<any>({\n    name: \"\",\n    sequence: \"\",\n    reasons: \"\",\n    description: \"\",\n    isActive: \"\",\n  });\n  const [pageMode, setPageMode] = useState(PAGE_MODE.CREATE);\n  const toastMessageRef = useRef(null);\n  const [isNameDuplicated, setIsNameDuplicated] = useState(false);\n\n  const [, forceUpdate] = useState<undefined | boolean>(undefined);\n  const [partnerNameList, setPartnerNameList] = useState<any>([]);\n  const [showDialogAPIError, setShowDialogAPIError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [position, setPosition] = useState<ToastPositionType | undefined>(\"bottom-right\");\n  const [toastMessageVariant, setToastMessageVariant] = useState(TOAST_STYLE_TYPE.PRIMARY);\n  const [toastMessage, setToastMessage] = useState<any>(\"\");\n  const [triggerToast, setTriggerToast] = useState(false);\n  const [navigateBack, setNavigateBack] = useState(false);\n\n  const [uid, setUid] = useState<any>(\"\");\n  const simpleValidator = useRef(\n    new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    })\n  );\n\n  /*\n        -------------------------------------------------------\n          Hooks: useEffect\n        -------------------------------------------------------\n      */\n  useEffect(() => {\n    const parsed: {\n      mode?: string;\n      uid?: string;\n    } = queryString.parse(props.location.search);\n    if (parsed?.mode && parsed?.mode !== undefined) {\n      setPageMode(parsed.mode);\n    }\n    console.log(parsed.mode, \"hmm\");\n    setUid(parsed.uid);\n    if (parsed?.mode && parsed?.mode !== undefined) {\n      setPageMode(parsed.mode);\n    }\n    getPartnerNameList();\n  }, []);\n\n  useEffect(() => {\n    if (toastMessageRef?.current && toastMessage !== \"\") {\n      // @ts-ignore: will be fixed in future\n      toastMessageRef?.current?.showFunction();\n    }\n  }, [toastMessage, toastMessageVariant, triggerToast]);\n  useEffect(() => {\n    if (errorMessage) {\n      setShowDialogAPIError(true);\n    }\n  }, [errorMessage]);\n  const getPartnerNameList = () => {\n    PartnerMasterDataService.getAll()\n      .then((res: any) => {\n        setPartnerNameList([...res.data.results] ?? []);\n      })\n      .catch((err) => {\n        console.log(\"err\");\n      });\n  };\n  /*\n        -------------------------------------------------------\n          Handlers: Event handler for onChange, onBlur etc\n        -------------------------------------------------------\n      */\n\n  const handleInputChange = (event: any) => {\n    const { name, value } = event.target;\n    setPageObj((prevPageObj) => ({\n      ...prevPageObj,\n      [name]: value,\n    }));\n  };\n\n  /* \n        -------------------------------------------------------\n          ButtonClick Functions:\n        -------------------------------------------------------\n      */\n\n  const payloadForSave = () => {\n    const enrichObjForSave = {\n      name: pageObj.name,\n      sequence: pageObj.sequence,\n      reason: pageObj.reasons,\n      description: pageObj.description,\n    };\n    return enrichObjForSave;\n  };\n  const payloadForApprove = () => {\n    const enrichObjForUpdate = {\n      uid: uid,\n      name: pageObj.name,\n      reason: pageObj.reasons,\n      description: pageObj.description,\n      sequence: pageObj.sequence,\n    };\n    return enrichObjForUpdate;\n  };\n\n  const prepareToApprove = () => {\n    const payloadForApprove = {\n      uid: uid,\n      name: pageObj.name,\n      reason: pageObj.reasons,\n      description: pageObj.description,\n      sequence: pageObj.sequence,\n    };\n\n    let enrichForSave;\n    const finalJsonObject = payloadForApprove;\n    const initialJsonObject = initialData;\n    if (pageMode === PAGE_MODE.CREATE) {\n      enrichForSave = {\n        name: pageObj.name,\n        operationType: OPERATION_TYPE.CREATE,\n        entity: ENTITY.APPROVAL_LEVEL,\n        initialStateJson: \"\",\n        finalStateJson: stringifyObject(finalJsonObject),\n        reqPayload: stringifyObject(finalJsonObject),\n        reasonForChange: pageObj.reasons,\n      };\n    } else {\n      enrichForSave = {\n        name: pageObj.name,\n        operationType: OPERATION_TYPE.UPDATE,\n        entity: ENTITY.APPROVAL_LEVEL,\n        initialStateJson: stringifyObject(initialJsonObject),\n        finalStateJson: stringifyObject(finalJsonObject),\n        reqPayload: stringifyObject(finalJsonObject),\n        reasonForChange: pageObj.reasons ?? \"reason\",\n      };\n    }\n    return enrichForSave;\n  };\n\n  useEffect(() => {\n    if (errorMessage) {\n      setShowDialogAPIError(true);\n    }\n  }, [errorMessage]);\n  useEffect(() => {\n    if (uid) {\n      getInitialData();\n    }\n  }, [uid]);\n\n  const getInitialData = () => {\n    OrgStructureApprovalService.findById(uid)\n      .then((res: any) => {\n        console.log(res.data, \"response\");\n\n        setPageObj({\n          ...pageObj,\n          sequence: res.data?.sequence,\n          name: res.data.name,\n          reasons: res.data.reason,\n          description: res.data.description,\n          isActive: res.data.isActive,\n        });\n\n        setInitData({\n          sequence: res.data?.sequence,\n          name: res.data.name,\n          reasons: res.data.reason,\n          description: res.data.description,\n          isActive: res.data.isActive,\n        });\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n  const validateForm = async () => {\n    \n    let isValid = false;\n    isValid = simpleValidator?.current?.allValid() ?? false;\n    if (isValid) {\n      return isValid;\n    } else {\n      forceUpdate((prev) => !prev);\n      simpleValidator?.current?.showMessages();\n      forceUpdate((prev) => !prev);\n      return false;\n    }\n  };\n\n  const validate = (e: any) => {\n    simpleValidator?.current?.showMessageFor(e?.target?.name);\n  };\n\n  const onSaveClick = async () => {\n    setErrorMessage(\"\");\n    let isValid = false;\n    isValid = await validateForm();\n\n    if (!isValid) {\n      setPosition(\"top-right\");\n      setToastMessageVariant(TOAST_STYLE_TYPE.QUATERNARY);\n      setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.ERROR);\n      setTriggerToast(!triggerToast);\n      return;\n    }\n\n    const enrichForSave = payloadForSave();\n    const enrichForUpdate = payloadForApprove();\n\n    if (simpleValidator?.current?.allValid()) {\n      if (pageMode !== PAGE_MODE.CREATE) {\n        try {\n          OrgStructureApprovalService.update(enrichForUpdate, uid);\n          setToastMessageVariant(TOAST_STYLE_TYPE.PRIMARY);\n          setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.SAVED);\n          setTriggerToast(!triggerToast);\n          setNavigateBack(true);\n        } catch (error) {\n          setErrorMessage(parseStandardAPIErrorMessage(error));\n        }\n      } else {\n        OrgStructureApprovalService.save(enrichForSave)\n          .then((res) => {\n            setToastMessageVariant(TOAST_STYLE_TYPE.PRIMARY);\n            setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.SAVED);\n            setTriggerToast(!triggerToast);\n            setNavigateBack(true);\n          })\n          .catch((err) => {\n            setErrorMessage(parseStandardAPIErrorMessage(err));\n          });\n      }\n    } else {\n      setPosition(\"top-right\");\n      setToastMessageVariant(TOAST_STYLE_TYPE.QUATERNARY);\n      setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.ERROR);\n      setTriggerToast(!triggerToast);\n      forceUpdate((prev) => !prev);\n      simpleValidator?.current?.showMessages();\n      forceUpdate((prev) => !prev);\n    }\n  };\n\n  const onCancelClick = () => {\n    props.navigate(linkOrganizationApproval);\n  };\n\n  const onApproveClick = async () => {\n    setErrorMessage(\"\");\n    let isValid = false;\n    isValid = await validateForm();\n\n    if (!isValid) {\n      setPosition(\"top-right\");\n      setToastMessageVariant(TOAST_STYLE_TYPE.QUATERNARY);\n      setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.ERROR);\n      setTriggerToast(!triggerToast);\n      return;\n    }\n    const enrichedObj = prepareToApprove();\n    return StaticMasterTypeService.approve(enrichedObj)\n      .then((res) => {\n        setToastMessageVariant(TOAST_STYLE_TYPE.PRIMARY);\n        setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.SENT_FOR_APPROVAL);\n        setTriggerToast(!triggerToast);\n        setNavigateBack(true);\n      })\n      .catch((err) => {\n        setErrorMessage(parseStandardAPIErrorMessage(err));\n      });\n  };\n\n  const onBackClick = () => {\n    props.navigate(linkOrganizationApproval);\n  };\n\n  const onEditClick = () => {\n    setPageMode(PAGE_MODE.EDIT);\n  };\n\n  /* \n        -------------------------------------------------------\n          Helper Functions:\n        -------------------------------------------------------\n      */\n  const getPageTitle = () => {\n    switch (pageMode) {\n      case PAGE_MODE.CREATE:\n        return \"heading.organizationLevelApproval.create\";\n      case PAGE_MODE.VIEW:\n        return \"heading.organizationLevelApproval.view\";\n      case PAGE_MODE.EDIT:\n        return \"heading.organizationLevelApproval.edit\";\n      default:\n        return \"heading.organizationLevelApproval.create\";\n    }\n  };\n  const onNameValidation = (event: any) => {\n  \n    let search = `&name=${event.target.value.toUpperCase()}`;\n    if (pageMode === PAGE_MODE.EDIT) {\n      search = `&name=${event.target.value.toUpperCase()}&uid:nq=${uid}`;\n    }\n    OrgStructureApprovalService.getAll(0, 10, `${search}`)\n      .then((res) => {\n        if (res.status === 200) {\n          res.data.results.length > 0 ? setIsNameDuplicated(true) : setIsNameDuplicated(false);\n        }\n      })\n      .catch((err) => {\n        setErrorMessage(parseStandardAPIErrorMessage(err));\n      });\n  };\n  /* \n      -------------------------------------------------------\n        Sectional Render Functions: For Sub components / section wise renders\n      -------------------------------------------------------\n    */\n  const { name, description, reasons, isActive, sequence } = pageObj;\n  return (\n    <AclGuard>\n      <div className=\" \">\n        <div className=\"flex w-full justify-between  items-center\">\n          <div className=\" \">\n            <Text\n              label={getPageTitle()}\n              className=\"text-primary-ptext-1000 text-h2 font-Roboto font-bold flex\"\n            />\n          </div>\n          <div className=\"flex mr-5\">\n            {pageMode === PAGE_MODE.CREATE || pageMode === PAGE_MODE.EDIT ? (\n              <>\n                <div className=\"mr-5\">\n                  <ButtonBox\n                    className=\"reset-red\"\n                    buttonType={BUTTON_TYPE.CANCEL_OUTLINE}\n                    onClick={onCancelClick}\n                  />\n                </div>\n                <div className=\"mr-10\">\n                  <ButtonBox buttonType={BUTTON_TYPE.SAVE_OUTLINE} onClickWithLoader={onSaveClick} />\n                </div>\n                <div>\n                  <ButtonBox\n                    className=\"approve-primary\"\n                    buttonType={BUTTON_TYPE.SEND_FOR_APPROVAL}\n                    onClickWithLoader={onApproveClick}\n                  />\n                </div>\n              </>\n            ) : (\n              <>\n                <div className=\"mr-5\">\n                  <ButtonBox buttonType={BUTTON_TYPE.BACK_OUTLINE} onClick={onBackClick} />\n                </div>\n                <div className=\"\">\n                  <ButtonBox\n                    buttonType={BUTTON_TYPE.EDIT_OUTLINE}\n                    className=\"blue-primary\"\n                    onClick={onEditClick}\n                  />\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-4 gap-3\">\n          <div className=\"col-span-1\">\n            <InputBox\n              label=\"input.organizationLevelApproval.Name\"\n              name=\"name\"\n              variant={INPUT_STYLE_TYPE.SECONDARY}\n              onChange={handleInputChange}\n              value={name}\n              onBlur={(e) => {\n                onNameValidation(e);\n                validate(e);\n              }}\n\n              validation={\n                isNameDuplicated\n                  ? \"Duplicate Entry Found\"\n                  : simpleValidator?.current?.message(`name`, name, \"mandatory\")\n              }\n              disabled={pageMode === PAGE_MODE.VIEW}\n            />\n          </div>\n          <div className=\"col-span-1\">\n            <InputBox\n              label=\"input.organizationLevelApproval.sequence\"\n              name=\"sequence\"\n              variant={INPUT_STYLE_TYPE.SECONDARY}\n              onChange={handleInputChange}\n              value={sequence}\n              onBlur={validate}\n              validation={simpleValidator?.current?.message(`sequence`, sequence, \"mandatory\")}\n              disabled={pageMode === PAGE_MODE.VIEW}\n            />\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-4 gap-3\">\n          <div className=\"col-span-2\">\n            <InputTextArea\n              label=\"input.partnerUser.description\"\n              name=\"description\"\n              variant={INPUT_STYLE_TYPE.SECONDARY}\n              maxCount={200}\n              onChange={handleInputChange}\n              value={description}\n              disabled={pageMode === PAGE_MODE.VIEW}\n            />\n          </div>\n          {pageMode !== PAGE_MODE.VIEW && (\n            <div className=\"col-span-2\">\n              <InputTextArea\n                label=\"input.partnerUser.reasons\"\n                name=\"reasons\"\n                variant={INPUT_STYLE_TYPE.SECONDARY}\n                maxCount={200}\n                onChange={handleInputChange}\n                value={reasons}\n                onBlur={validate}\n                validation={simpleValidator?.current?.message(`reasons`, reasons, \"mandatory\")}\n                disabled={pageMode === PAGE_MODE.VIEW}\n              />\n            </div>\n          )}\n          <ToastCustom\n            ref={toastMessageRef}\n            position=\"bottom-right\"\n            toastText=\"Sent for Approval\"\n            variant={TOAST_STYLE_TYPE.PRIMARY}\n          />\n        </div>\n        <ErrorDialog\n          onHide={() => setShowDialogAPIError(false)}\n          visible={showDialogAPIError}\n          errorMessage={errorMessage}\n        />\n        <ToastCustom\n          position={position}\n          ref={toastMessageRef}\n          toastText={toastMessage}\n          variant={toastMessageVariant}\n          onRemove={() => {\n            if (navigateBack) {\n              props.navigate(linkOrganizationApproval);\n            }\n          }}\n        />\n      </div>\n    </AclGuard>\n  );\n};\n\nexport default withRouter(OrganizationLevelApprovalLevelCreateViewEdit);\n"],"names":["OrganizationLevelApprovalLevelCreateViewEdit","props","pageObj","setPageObj","useState","initialData","setInitData","pageMode","setPageMode","PAGE_MODE","toastMessageRef","useRef","isNameDuplicated","setIsNameDuplicated","forceUpdate","partnerNameList","setPartnerNameList","showDialogAPIError","setShowDialogAPIError","errorMessage","setErrorMessage","position","setPosition","toastMessageVariant","setToastMessageVariant","TOAST_STYLE_TYPE","toastMessage","setToastMessage","triggerToast","setTriggerToast","navigateBack","setNavigateBack","uid","setUid","simpleValidator","SimpleReactValidator","getStandardValidator","messageReplace","prev","useEffect","parsed","queryString","getPartnerNameList","_a","PartnerMasterDataService","res","err","handleInputChange","event","name","value","prevPageObj","payloadForSave","payloadForApprove","prepareToApprove","enrichForSave","finalJsonObject","initialJsonObject","OPERATION_TYPE","ENTITY","stringifyObject","getInitialData","OrgStructureApprovalService","_b","validateForm","isValid","validate","onSaveClick","STATIC_MASTER_TYPE_TOAST_TEXT","enrichForUpdate","error","parseStandardAPIErrorMessage","onCancelClick","linkOrganizationApproval","onApproveClick","enrichedObj","StaticMasterTypeService","onBackClick","onEditClick","getPageTitle","onNameValidation","search","description","reasons","isActive","sequence","jsx","AclGuard","jsxs","Text","Fragment","ButtonBox","BUTTON_TYPE","InputBox","INPUT_STYLE_TYPE","InputTextArea","_c","ToastCustom","ErrorDialog","PageOrganizationStructureApprovalLevelCM","withRouter"],"mappings":"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"}