import{w as pt,r,aG as N,j as e,T as z,J as b,aH as W,ao as X,aI as ve,aJ as xe,aK as $,cK as ue,aF as he,o as I,az as vt,aM as xt,av as ut,p as fe,z as ht,aN as Z}from"./index-e8217573.js";import{s as B,a as D,b as O}from"./sortIcon-54357a29.js";import{e as ft}from"./eye_icon-081bddb3.js";import{A as Ae}from"./AutoComplete-0bca608a.js";import{B as R}from"./ButtonBox-9e46519a.js";import{D as ee}from"./DatePicker-b1c13861.js";import{D as At}from"./Dialog-adadaf64.js";import{I as ae}from"./InputBox-b9e88f52.js";import{M as gt}from"./MenuBox-defc36b0.js";import{R as jt}from"./ReadOnlyTable-86accb69.js";import{S as Nt}from"./SectionTitle-9f9277ec.js";import{S as yt}from"./SimpleDropDown-061a3470.js";import{T as St}from"./Toast-ae99ea5b.js";import{C as y}from"./column.esm-938bad7d.js";import{O as re}from"./Approval-120dc31f.js";import{S as ge}from"./StaticMasterTypeService-480bff1a.js";import"./search_icon-459d6871.js";import"./withAuth-6de36ebf.js";import"./virtualscroller.esm-9939945c.js";import"./kebab-menu-8835ad2e.js";import"./No_data-1720c54e.js";import"./datatable.esm-f474a654.js";import"./paginator.esm-11c2c115.js";import"./TransitionGroup-c8afe0ce.js";function Ct(ie){const[oe,je]=r.useState(!1),[Ne,Y]=r.useState(!1),[ye,L]=r.useState(!1),[l,ne]=r.useState({}),[w,p]=r.useState(void 0),[_,v]=r.useState(void 0),[k,x]=r.useState(void 0),[U,u]=r.useState(void 0),[H,h]=r.useState(void 0),[q,f]=r.useState(void 0),[V,A]=r.useState(void 0),[J,g]=r.useState(void 0),M=r.useRef(null),[te,S]=r.useState(""),[ce,C]=r.useState(N.PRIMARY),[j,T]=r.useState(!1),[F,le]=r.useState(!1),[i,Q]=r.useState({name:"",sequence:"",description:"",createdFrom:"",createdTo:"",updatedFrom:"",updatedTo:"",isActive:"",createdBy:{name:"",id:""},updatedBy:{name:"",id:""}}),[c,m]=r.useState({limit:10,loading:!1,totalRecords:0,start:0,search:"",runCustomQuery:!1,records:[]}),K=r.useRef(null),[Se,Ce]=r.useState([{items:[{label:"Activate",className:""},{label:"Deactivate",className:""}]}]),Te=(t,s)=>{var G;console.log("rowData=",t);const a={label:"label.common.deactivate",command:()=>{Be(t)}},o={label:"label.common.active",command:()=>{Ie(t)}},P=[{items:[t.isActive?a:o]}];Ce(P),(G=K==null?void 0:K.current)==null||G.toggle(s)},[se,Ee]=r.useState([]);r.useState();const n=r.useRef(null);r.useEffect(()=>{var t;(t=n==null?void 0:n.current)==null||t.search()},[c==null?void 0:c.search]),r.useEffect(()=>{var t;M!=null&&M.current&&te!==""&&((t=M==null?void 0:M.current)==null||t.showFunction())},[te,ce,j]);const de=t=>{const{name:s,value:a}=t.target;Q(typeof a=="object"?o=>({...o,[s]:{name:`${a==null?void 0:a.name} ${a!=null&&a.lastName?a==null?void 0:a.lastName:""}`.trim(),id:a.userId}}):o=>({...o,[s]:a}))},E=t=>{const{name:s,value:a}=t.target;Q(o=>({...o,[s]:a}))},be=t=>{let s="";w||w==null?(s='sort={"name":"DESC"}&',p(!1)):(s='sort={"name":"ASC"}&',p(!w)),v(void 0),u(void 0),h(void 0),g(void 0),f(void 0),A(void 0),x(void 0),m({...c,search:s})},Ie=t=>{ne({...t}),L(!0),le(!0)},Be=t=>{ne({...t}),Y(!0),le(!1)},De=t=>{let s="";_||_==null?(s='sort={"sequence":"DESC"}&',v(!1)):(s='sort={"sequence":"ASC"}&',v(!_)),m({...c,search:s}),p(void 0),x(void 0),u(void 0),h(void 0),g(void 0),f(void 0),A(void 0)},Oe=t=>{let s="";k||k==null?(s='sort={"description":"DESC"}&',x(!1)):(s='sort={"description":"ASC"}&',x(!k)),m({...c,search:s}),p(void 0),v(void 0),u(void 0),h(void 0),g(void 0),f(void 0),A(void 0)},Re=t=>{let s="";U||U==null?(s='sort={"createdAt":"DESC"}&',u(!1)):(s='sort={"createdAt":"ASC"}&',u(!U)),p(void 0),v(void 0),x(void 0),h(void 0),g(void 0),f(void 0),A(void 0),m({...c,search:s})},Ye=t=>{let s="";H||H==null?(s='sort={"createdBy":"DESC"}&',h(!1)):(s='sort={"createdBy":"ASC"}&',h(!0)),p(void 0),v(void 0),x(void 0),u(void 0),g(void 0),f(void 0),A(void 0),m({...c,search:s})},Le=t=>{let s="";q||q==null?(s='sort={"updatedAt":"DESC"}&',f(!1)):(s='sort={"updatedAt":"ASC"}&',f(!q)),p(void 0),v(void 0),x(void 0),u(void 0),g(void 0),h(void 0),A(void 0),m({...c,search:s})},Me=t=>{let s="";J||J==null?(s='sort={"isActive":"DESC"}&',g(!1)):(s='sort={"isActive":"ASC"}&',g(!0)),p(void 0),v(void 0),x(void 0),u(void 0),f(void 0),h(void 0),A(void 0),m({...c,search:s})},Fe=t=>{let s="";V||V==null?(s='sort={"updatedBy":"DESC"}&',A(!1)):(s='sort={"updatedBy":"ASC"}&',A(!V)),p(void 0),v(void 0),x(void 0),u(void 0),f(void 0),h(void 0),g(void 0),m({...c,search:s})},Pe=()=>re.Inactivate(l==null?void 0:l.uid).then(t=>{var s;C(N.PRIMARY),S(W.DEACTIVATED),T(!j),Y(!1),L(!1),(s=n==null?void 0:n.current)==null||s.search()}).catch(t=>{C(N.QUATERNARY),S(X(t)),T(!j)}),$e=()=>re.activate(l==null?void 0:l.uid).then(t=>{var s;C(N.PRIMARY),S(W.ACTIVATED),T(!j),Y(!1),L(!1),(s=n==null?void 0:n.current)==null||s.search()}).catch(t=>{C(N.QUATERNARY),S(X(t)),T(!j)}),we=()=>{const t={...l},s={...t,isActive:!0},a={uid:l.uid,name:l.name,operationType:ve.ACTIVE,entity:xe.APPROVAL_LEVEL,initialStateJson:$(t),finalStateJson:$(s),reasonForChange:"Activate",reqPayload:$(s)};return ge.approve(a).then(o=>{var d;C(N.PRIMARY),S(W.SENT_FOR_APPROVAL),T(!j),Y(!1),L(!1),(d=n==null?void 0:n.current)==null||d.search()}).catch(o=>{C(N.QUATERNARY),S(X(o)),T(!j)})},_e=()=>{const t={...l},s={...t,isActive:!1},a={uid:l.uid,name:l.name,operationType:ve.INACTIVE,entity:xe.APPROVAL_LEVEL,initialStateJson:$(t),finalStateJson:$(s),reasonForChange:"Deactivate",reqPayload:$(s)};return ge.approve(a).then(o=>{var d;C(N.PRIMARY),S(W.SENT_FOR_APPROVAL),T(!j),Y(!1),L(!1),(d=n==null?void 0:n.current)==null||d.search()}).catch(o=>{C(N.QUATERNARY),S(X(o)),T(!j)})},me=async t=>{let s=[];t.query.trim().length?(await ht.getAll(0,10,`name=${t.query}&`).then(a=>{a.status===200&&(s=[...a.data])}),s.length===0&&s.push({name:void 0,designation:void 0,emailId:void 0})):s=se,Ee(s)},ke=()=>{var s,a,o,d;let t="";if(i.name&&(t=`${t}&name:lk=${i.name}&`),i.sequence&&(t=`${t}&sequence:lk=${i.sequence}&`),i.description&&(t=`${t}&description:lk=${i.description}&`),i.createdFrom&&(console.log(i.createdFrom),t=`${t}&createdAt:gt=${Z(i.createdFrom)}&`),i.createdTo&&(t=`${t}&createdAt:lt=${Z(i.createdTo)}&`),i.updatedFrom&&(t=`${t}&updatedAt:gt=${Z(i.updatedFrom)}&`),i.updatedTo&&(t=`${t}&updatedAt:lt=${Z(i.updatedTo)}&`),i.isActive){let P=!0;i.isActive==="YES"?P=!0:i.isActive==="NO"&&(P=!1),t=`${t}&isActive:lk=${P}&`}(s=i.createdBy)!=null&&s.id&&(t=`${t}&createdBy=${(a=i.createdBy)==null?void 0:a.id}&`),(o=i.updatedBy)!=null&&o.id&&(t=`${t}&updatedBy=${(d=i.updatedBy)==null?void 0:d.id}&`),m({...c,search:t})},Ue=()=>{Q({name:"",sequence:"",description:"",createdFrom:"",createdTo:"",updatedFrom:"",updatedTo:"",isActive:"",createdBy:{name:"",id:""},updatedBy:{name:"",id:""}}),m({...c,search:""})},qe=()=>{je(!oe)},Ve=()=>{ie.navigate(`${ue}?mode=${he.CREATE}`)},ze=()=>{const{name:t,sequence:s,description:a,createdFrom:o,createdTo:d,updatedFrom:P,updatedTo:G,isActive:lt,createdBy:dt,updatedBy:mt}=i;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-3 flex flex-col gap-6 bg-primary-sapphireBlue-100 rounded-lg",children:[e.jsx("div",{className:"flex ",children:e.jsx(Nt,{title:"text.masterData.types.search"})}),e.jsxs("div",{className:" grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsx(ae,{label:"input.organizationLevelApproval.filter.displayName",name:"name",variant:I.SECONDARY,onChange:E,value:t}),e.jsx(ae,{label:"input.organizationLevelApproval.filter.sequence",name:"sequence",variant:I.SECONDARY,onChange:E,value:s}),e.jsx(ae,{label:"input.organizationLevelApproval.description",name:"description",variant:I.SECONDARY,onChange:E,value:a}),e.jsx(yt,{label:"input.organizationLevelApproval.isActive",name:"isActive",variant:vt.SECONDARY,options:xt,onChange:E,value:lt}),e.jsx(ee,{label:"input.organizationLevelApproval.createdFrom",name:"createdFrom",showTime:!0,value:o,placeholder:"DD-MMM-YYYY",onChange:E}),e.jsx(ee,{showTime:!0,label:"input.organizationLevelApproval.createdTo",name:"createdTo",variant:I.PRIMARY,value:d,placeholder:"DD-MMM-YYYY",onChange:E}),e.jsx(Ae,{label:"input.organizationLevelApproval.createdBy",name:"createdBy",field:"name",value:dt,variant:I.PRIMARY,suggestions:se,completeMethod:me,onChange:de,itemTemplate:pe}),e.jsx(ee,{showTime:!0,label:"input.organizationLevelApproval.updatedFrom",name:"updatedFrom",variant:I.PRIMARY,value:P,placeholder:"DD-MMM-YYYY",onChange:E}),e.jsx(ee,{showTime:!0,label:"input.organizationLevelApproval.updatedTo",name:"updatedTo",variant:I.PRIMARY,value:G,placeholder:"DD-MMM-YYYY",onChange:E}),e.jsx(Ae,{field:"name",label:"input.organizationLevelApproval.updatedBy",name:"updatedBy",variant:I.PRIMARY,value:mt,suggestions:se,completeMethod:me,onChange:de,itemTemplate:pe}),e.jsxs("div",{className:"flex gap-5",children:[e.jsx(R,{buttonType:b.RESET_OUTLINE,onClick:Ue}),e.jsx(R,{buttonType:b.SEARCH_OUTLINE,onClick:ke})]})]})]})})},pe=t=>t.name===void 0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-39",children:[e.jsx("img",{src:ut,alt:"search-icon",className:" h-7 w-7"}),e.jsx(z,{className:"text-primary-labelColor mt-2",label:"Loading..."})]}):e.jsx("div",{className:"flex flex-col",children:e.jsx(z,{className:"text-primary-labelColor",label:`${t.name}`})}),He=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:t.name})}),Je=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:" Name"}),e.jsx("img",{src:w==null?B:w==!0?D:O,alt:"Sort Icon",onClick:be,className:"cursor-pointer"})]}),Qe=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Sequence"}),e.jsx("img",{src:_==null?B:_==!0?D:O,alt:"Sort Icon",onClick:De,className:"cursor-pointer"})]}),Ke=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Description"}),e.jsx("img",{src:k==null?B:k==!0?D:O,alt:"Sort Icon",onClick:Oe,className:"cursor-pointer"})]}),Ge=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Created On"}),e.jsx("img",{src:U==null?B:U==!0?D:O,alt:"Sort Icon",onClick:Re,className:"cursor-pointer"})]}),We=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Created By"}),e.jsx("img",{src:H==null?B:H==!0?D:O,alt:"Sort Icon",onClick:Ye,className:"cursor-pointer"})]}),Xe=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Updated On"}),e.jsx("img",{src:q==null?B:q==!0?D:O,alt:"Sort Icon",onClick:Le,className:"cursor-pointer"})]}),Ze=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Updated By"}),e.jsx("img",{src:V==null?B:V==!0?D:O,alt:"Sort Icon",onClick:Fe,className:"cursor-pointer"})]}),et=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Is Active"}),e.jsx("img",{src:J==null?B:J==!0?D:O,alt:"Sort Icon",onClick:Me,className:"cursor-pointer"})]}),tt=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:t.sequence})}),st=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:t.description})}),at=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:`${fe(t.createdAt)}`})}),rt=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:t.createdByUserName})}),it=t=>e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:`${fe(t.updatedAt)}`}),ot=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left",children:t.updatedByUserName})}),nt=t=>e.jsx(e.Fragment,{children:t.isActive?e.jsxs("div",{className:"flex items-center ",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-primaryBlue border-none"}),e.jsx("div",{className:"ml-2 ",children:"YES"})]}):e.jsxs("div",{className:"flex items-center ",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-secondary-gray-300 border-none"}),e.jsx("div",{className:"ml-2 ",children:"NO"})]})}),ct=t=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center ",children:[e.jsx("div",{className:"w-4 h-4 flex items-center",children:e.jsx("img",{src:ft,alt:"Sahayya Logo",className:"cursor-pointer",onClick:s=>{ie.navigate(`${ue}?mode=${he.VIEW}&uid=${t.uid}`)}})}),e.jsx("div",{className:"ml ",children:e.jsx(R,{buttonType:b.MENU,onClick:s=>{Te(t,s)},className:"!rounded-none bg-transparent !hover:bg-primary-gray-300"})})]})});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex w-full justify-between items-center",children:[e.jsx(z,{label:"heading.organizationLevelApproval",className:"text-primary-ptext-1000 text-h2 font-bold flex"}),e.jsxs("div",{className:"flex gap-10",children:[e.jsx(R,{buttonType:b.FILTER_OUTLINE,onClick:qe}),e.jsx(R,{buttonType:b.CREATE,className:"create-button",onClick:Ve})]})]}),oe&&ze(),e.jsxs(jt,{standardDataFormatPromise:re.getAll,dataKey:"id",search:`&${c.search}`,ref:n,children:[e.jsx(y,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:Je,body:He}),e.jsx(y,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:Qe,body:tt}),e.jsx(y,{className:"text-primary-ptext-1000 text-left text-xs w-1/12  p-1 h-12 pl-6",header:Ke,body:st}),e.jsx(y,{className:"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6",header:et,body:nt}),e.jsx(y,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:Ge,body:at}),e.jsx(y,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:We,body:rt}),e.jsx(y,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:Xe,body:it}),e.jsx(y,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:Ze,body:ot}),e.jsx(y,{className:"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6",header:"Actions",body:ct})]})]}),e.jsxs(At,{onHide:F?()=>L(!1):()=>Y(!1),visible:F?ye:Ne,modal:!0,closable:!1,dismissableMask:!0,children:[e.jsx(z,{label:F?"dialog.staticMaster.activate":"dialog.staticMaster.deactivate",className:"text-primary-ptext-1000 text-base font-Roboto font-bold flex items-center justify-center"}),e.jsx(z,{label:F?"dialog.staticMaster.message.activate":"dialog.staticMaster.message",className:"text-primary-ptext-1000 text-xs font-Roboto flex mt text-center justify-center mx-2 mt-4"}),e.jsxs("div",{className:"flex justify-center mt-4",children:[e.jsx("div",{className:"mr-3",children:e.jsx(R,{buttonType:b.CANCEL_OUTLINE,onClick:F?()=>L(!1):()=>Y(!1)})}),e.jsx("div",{className:"mr-3",children:e.jsx(R,{buttonType:b.SAVE_OUTLINE,onClick:F?()=>$e():()=>Pe()})}),e.jsx("div",{className:"",children:e.jsx(R,{buttonType:b.SEND_FOR_APPROVAL,className:"approve-primary",onClick:F?()=>we():()=>_e()})})]})]}),e.jsx(gt,{className:"w-20 bg-white font-Roboto text-xs text-primary-pText-1300 pt-2 rounded-lg mt-0.5 flex justify-center align-center shadow-autoCompletePanel",model:Se,ref:K}),e.jsx("div",{className:"",children:e.jsx(St,{position:"bottom-right",ref:M,toastText:te,variant:ce})})]})}const Kt=pt(Ct);export{Kt as default};
//# sourceMappingURL=PageOrganizationStructureApprovalLevelListing-2551e141.js.map
