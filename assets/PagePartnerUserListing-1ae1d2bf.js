import{w as gt,r,aG as y,j as e,T as V,J as b,z as Z,p as ve,aH as ee,ao as te,aI as he,aJ as fe,aK as _,cs as Ne,aF as Ae,o as I,az as jt,aM as yt,av as St,aN as ae}from"./index-e8217573.js";import{s as R,a as B,b as P}from"./sortIcon-54357a29.js";import{e as Ct}from"./eye_icon-081bddb3.js";import{A as oe}from"./AutoComplete-0bca608a.js";import{B as M}from"./ButtonBox-9e46519a.js";import{D as se}from"./DatePicker-b1c13861.js";import{D as Tt}from"./Dialog-adadaf64.js";import{I as ge}from"./InputBox-b9e88f52.js";import{M as Et}from"./MenuBox-defc36b0.js";import{R as bt}from"./ReadOnlyTable-86accb69.js";import{S as It}from"./SectionTitle-9f9277ec.js";import{S as Rt}from"./SimpleDropDown-061a3470.js";import{T as Bt}from"./Toast-ae99ea5b.js";import{C as x}from"./column.esm-938bad7d.js";import{P as je}from"./PartnerMasterDataService-d9d86d95.js";import{S as ye}from"./StaticMasterTypeService-480bff1a.js";import"./search_icon-459d6871.js";import"./withAuth-6de36ebf.js";import"./virtualscroller.esm-9939945c.js";import"./kebab-menu-8835ad2e.js";import"./No_data-1720c54e.js";import"./datatable.esm-f474a654.js";import"./paginator.esm-11c2c115.js";import"./TransitionGroup-c8afe0ce.js";const Pt=ne=>{const[ce,Se]=r.useState(!1),[Ce,D]=r.useState(!1),[Te,Y]=r.useState(!1),[l,le]=r.useState({}),[H,p]=r.useState(void 0),[J,u]=r.useState(void 0),[q,v]=r.useState(void 0),[Mt,F]=r.useState(void 0),[Q,h]=r.useState(void 0),[W,f]=r.useState(void 0),[z,N]=r.useState(void 0),[G,A]=r.useState(void 0),[K,g]=r.useState(void 0),O=r.useRef(null),[re,S]=r.useState(""),[de,C]=r.useState(y.PRIMARY),[j,T]=r.useState(!1),[L,me]=r.useState(!1),[Dt,Ee]=r.useState([]),[i,$]=r.useState({partnerName:"",name:"",lastName:"",createdFrom:"",createdTo:"",updatedFrom:"",updatedTo:"",isActive:"",createdBy:{name:"",id:""},updatedBy:{name:"",id:""}}),[c,m]=r.useState({limit:10,loading:!1,totalRecords:0,start:0,search:"",runCustomQuery:!1,records:[]}),X=r.useRef(null),[be,Ie]=r.useState([{items:[{label:"Activate",className:""},{label:"Deactivate",className:""}]}]),Re=(t,a)=>{var E;console.log("rowData=",t);const s={label:"label.common.deactivate",command:()=>{Me(t)}},o={label:"label.common.active",command:()=>{Pe(t)}},w=[{items:[t.isActive?s:o]}];Ie(w),(E=X==null?void 0:X.current)==null||E.toggle(a)},n=r.useRef(null),[k,xe]=r.useState([]);r.useEffect(()=>{dt()},[]),r.useEffect(()=>{var t;(t=n==null?void 0:n.current)==null||t.search()},[c==null?void 0:c.search]),r.useEffect(()=>{var t;O!=null&&O.current&&re!==""&&((t=O==null?void 0:O.current)==null||t.showFunction())},[re,de,j]);const Be=t=>{const{name:a,value:s}=t.target;$(typeof s=="object"?o=>({...o,[a]:{name:s==null?void 0:s.name,id:s.uid}}):o=>({...o,[a]:s}))},pe=t=>{const{name:a,value:s}=t.target;$(typeof s=="object"?o=>({...o,[a]:{name:s==null?void 0:s.name,id:s.userId}}):o=>({...o,[a]:s}))},U=t=>{const{name:a,value:s}=t.target;$(o=>({...o,[a]:s}))},Pe=t=>{le({...t}),Y(!0),me(!0)},Me=t=>{le({...t}),D(!0),me(!1)},De=t=>{let a="";H||H===void 0?(a='sort={"partner.name":"DESC"}&',p(!1)):(a='sort={"partner.name":"ASC"}&',p(!0)),m({...c,search:a}),u(void 0),v(void 0),h(void 0),f(void 0),g(void 0),N(void 0),A(void 0)},Ye=t=>{let a="";J||J===void 0?(a='sort={"name":"DESC"}&',u(!1)):(a='sort={"name":"ASC"}&',u(!0)),m({...c,search:a}),p(void 0),v(void 0),F(void 0),h(void 0),f(void 0),g(void 0),N(void 0),A(void 0)},Fe=t=>{let a="";q||q===void 0?(a='sort={"lastName":"DESC"}&',v(!1)):(a='sort={"lastName":"ASC"}&',v(!0)),m({...c,search:a}),p(void 0),u(void 0),F(void 0),h(void 0),f(void 0),g(void 0),N(void 0),A(void 0)},Oe=t=>{let a="";Q||Q===void 0?(a='sort={"createdAt":"DESC"}&',h(!1)):(a='sort={"createdAt":"ASC"}&',h(!0)),p(void 0),u(void 0),v(void 0),F(void 0),f(void 0),g(void 0),N(void 0),A(void 0),m({...c,search:a})},Le=t=>{let a="";W||W===void 0?(a='sort={"createdBy":"DESC"}&',f(!1)):(a='sort={"createdBy":"ASC"}&',f(!0)),p(void 0),u(void 0),v(void 0),F(void 0),h(void 0),g(void 0),N(void 0),A(void 0),m({...c,search:a})},Ue=t=>{let a="";z||z===void 0?(a='sort={"updatedAt":"DESC"}&',N(!1)):(a='sort={"updatedAt":"ASC"}&',N(!0)),p(void 0),u(void 0),v(void 0),F(void 0),h(void 0),f(void 0),g(void 0),A(void 0),m({...c,search:a})},$e=t=>{let a="";G||G===void 0?(a='sort={"updatedBy":"DESC"}&',A(!1)):(a='sort={"updatedBy":"ASC"}&',A(!0)),p(void 0),u(void 0),v(void 0),F(void 0),h(void 0),f(void 0),g(void 0),N(void 0),m({...c,search:a})},we=t=>{let a="";K||K===void 0?(a='sort={"isActive":"DESC"}&',g(!1)):(a='sort={"isActive":"ASC"}&',g(!0)),p(void 0),u(void 0),v(void 0),F(void 0),h(void 0),f(void 0),N(void 0),A(void 0),m({...c,search:a})},_e=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Partner Name"}),e.jsx("img",{src:H==null?R:H==!0?B:P,alt:"Sort Icon",onClick:De,className:"cursor-pointer"})]}),ke=t=>{var a,s;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight w-35  text-left truncate",title:(a=t==null?void 0:t.partner)==null?void 0:a.name,children:(s=t==null?void 0:t.partner)==null?void 0:s.name})})},Ve=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"First Name"}),e.jsx("img",{src:J==null?R:J==!0?B:P,alt:"Sort Icon",onClick:Ye,className:"cursor-pointer"})]}),He=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight  text-left truncate",children:t.name})}),Je=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:" Last Name"}),e.jsx("img",{src:q==null?R:q==!0?B:P,alt:"Sort Icon",onClick:Fe,className:"cursor-pointer"})]}),qe=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left truncate",children:t.lastName})}),Qe=()=>e.jsx("div",{className:"flex",children:e.jsx("p",{className:"mr-1",children:"Email ID"})}),We=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left w-32 truncate",title:t.email,children:t.email})}),ze=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Created On"}),e.jsx("img",{src:Q==null?R:Q==!0?B:P,alt:"Sort Icon",onClick:Oe,className:"cursor-pointer"})]}),Ge=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left truncate",children:`${ve(t.createdAt)}`})}),Ke=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Created By"}),e.jsx("img",{src:W==null?R:W==!0?B:P,alt:"Sort Icon",onClick:Le,className:"cursor-pointer"})]}),Xe=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left truncate",children:t.createdByUserName})}),Ze=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Updated On"}),e.jsx("img",{src:z==null?R:z==!0?B:P,alt:"Sort Icon",onClick:Ue,className:"cursor-pointer"})]}),et=t=>e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left truncate",children:`${ve(t.updatedAt)}`}),tt=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Updated By"}),e.jsx("img",{src:G==null?R:G==!0?B:P,alt:"Sort Icon",onClick:$e,className:"cursor-pointer"})]}),at=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left truncate",children:t.updatedByUserName})}),st=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Is Active"}),e.jsx("img",{src:K==null?R:K==!0?B:P,alt:"Sort Icon",onClick:we,className:"cursor-pointer"})]}),rt=t=>e.jsx(e.Fragment,{children:t.isActive?e.jsxs("div",{className:"flex items-center ",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-primaryBlue border-none"}),e.jsx("div",{className:"ml-2 ",children:"YES"})]}):e.jsxs("div",{className:"flex items-center ",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-secondary-gray-300 border-none"}),e.jsx("div",{className:"ml-2 ",children:"NO"})]})}),it=async()=>Z.Inactivate(l==null?void 0:l.uid).then(t=>{var a;C(y.PRIMARY),S(ee.DEACTIVATED),T(!j),D(!1),Y(!1),(a=n==null?void 0:n.current)==null||a.search()}).catch(t=>{C(y.QUATERNARY),S(te(t)),T(!j)}),ot=()=>Z.activate(l==null?void 0:l.uid).then(t=>{var a;C(y.PRIMARY),S(ee.ACTIVATED),T(!j),D(!1),Y(!1),(a=n==null?void 0:n.current)==null||a.search()}).catch(t=>{C(y.QUATERNARY),S(te(t)),T(!j)}),nt=()=>{const t={...l},a={...t,isActive:!0},s={uid:l.uid,name:l.name,operationType:he.ACTIVE,entity:fe.PARTNER_USER,initialStateJson:_(t),finalStateJson:_(a),reasonForChange:"Activate",reqPayload:_(a)};return ye.approve(s).then(o=>{var d;C(y.PRIMARY),S(ee.SENT_FOR_APPROVAL),T(!j),D(!1),Y(!1),(d=n==null?void 0:n.current)==null||d.search()}).catch(o=>{C(y.QUATERNARY),S(te(o)),T(!j)})},ct=()=>{const t={...l},a={...t,isActive:!1},s={uid:l.uid,name:l.name,operationType:he.INACTIVE,entity:fe.PARTNER_USER,initialStateJson:_(t),finalStateJson:_(a),reasonForChange:"Deactivate",reqPayload:_(a)};return ye.approve(s).then(o=>{var d;C(y.PRIMARY),S(ee.SENT_FOR_APPROVAL),T(!j),D(!1),Y(!1),(d=n==null?void 0:n.current)==null||d.search()}).catch(o=>{C(y.QUATERNARY),S(te(o)),T(!j)})},ue=async t=>{let a=[];t.query.trim().length?(await Z.getAll(0,10,`name=${t.query}&`).then(s=>{s.status===200&&(a=[...s.data])}),a.length===0&&a.push({name:void 0,designation:void 0,emailId:void 0})):a=k,xe(a)},lt=async t=>{let a=[];t.query.trim().length?(await je.getAll(0,10,`&name:lk=${t.query}&`).then(s=>{s.status===200&&(a=[...s.data.results])}),a.length===0&&a.push({name:void 0,designation:void 0,emailId:void 0})):a=k,xe(a)},dt=()=>{je.getAll().then(t=>{Ee([...t.data.results]),console.log(t,"check")}).catch(t=>{console.log("err")})},mt=()=>{var a,s,o,d,w;let t="";if(i.name&&(t=`${t}name:lk=${i.name}&`),i.partnerName&&(t=`${t}partner.uid=${(a=i==null?void 0:i.partnerName)==null?void 0:a.id}&`),i.lastName&&(t=`${t}lastName:lk=${i.lastName}&`),i.createdFrom&&(console.log(i.createdFrom),t=`${t}createdAt:gt=${ae(i.createdFrom)}&`),i.createdTo&&(t=`${t}createdAt:lt=${ae(i.createdTo)}&`),i.updatedFrom&&(t=`${t}updatedAt:gt=${ae(i.updatedFrom)}&`),i.updatedTo&&(t=`${t}updatedAt:lt=${ae(i.updatedTo)}&`),i.isActive){let E=!0;i.isActive==="YES"?E=!0:i.isActive==="NO"&&(E=!1),t=`${t}isActive:lk=${E}&`}(s=i.createdBy)!=null&&s.id&&(t=`${t}&createdBy=${(o=i.createdBy)==null?void 0:o.id}&`),(d=i.updatedBy)!=null&&d.id&&(t=`${t}&updatedBy=${(w=i.updatedBy)==null?void 0:w.id}&`),m({...c,search:t})},xt=()=>{$({partnerName:"",name:"",lastName:"",createdFrom:"",createdTo:"",updatedFrom:"",updatedTo:"",isActive:"",createdBy:{name:"",id:""},updatedBy:{name:"",id:""}}),m({...c,search:""})},pt=()=>{Se(!ce)},ut=()=>{ne.navigate(`${Ne}?mode=${Ae.CREATE}`)},vt=()=>{const{partnerName:t,name:a,lastName:s,createdFrom:o,createdTo:d,updatedFrom:w,updatedTo:E,isActive:ft,createdBy:Nt,updatedBy:At}=i;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-3 flex flex-col gap-6 bg-primary-sapphireBlue-100 rounded-lg",children:[e.jsx("div",{className:"flex ",children:e.jsx(It,{title:"text.masterData.types.search"})}),e.jsxs("div",{className:" grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsx(oe,{label:"Partner Name",name:"partnerName",field:"name",value:t,variant:I.PRIMARY,suggestions:k,completeMethod:lt,onChange:Be,itemTemplate:ie}),e.jsx(ge,{label:"First Name",name:"name",variant:I.SECONDARY,onChange:U,value:a}),e.jsx(ge,{label:"Last Name",name:"lastName",variant:I.SECONDARY,onChange:U,value:s}),e.jsx(Rt,{label:"input.masterData.staticMaster.isActive",name:"isActive",variant:jt.SECONDARY,options:yt,onChange:U,value:ft}),e.jsx(se,{label:"input.masterData.staticMaster.createdFrom",name:"createdFrom",showTime:!0,value:o,placeholder:"DD-MMM-YYYY",onChange:U}),e.jsx(se,{showTime:!0,label:"input.masterData.staticMaster.createdTo",name:"createdTo",variant:I.PRIMARY,value:d,placeholder:"DD-MMM-YYYY",onChange:U}),e.jsx(oe,{label:"input.masterData.staticMaster.createdBy",name:"createdBy",field:"name",value:Nt,variant:I.PRIMARY,suggestions:k,completeMethod:ue,onChange:pe,itemTemplate:ie}),e.jsx(se,{showTime:!0,label:"input.masterData.staticMaster.updatedFrom",name:"updatedFrom",variant:I.PRIMARY,value:w,placeholder:"DD-MMM-YYYY",onChange:U}),e.jsx("div",{children:e.jsx(se,{showTime:!0,label:"input.masterData.staticMaster.updatedTo",name:"updatedTo",variant:I.PRIMARY,value:E,placeholder:"DD-MMM-YYYY",onChange:U})}),e.jsx(oe,{field:"name",label:"input.masterData.staticMaster.updatedBy",name:"updatedBy",variant:I.PRIMARY,value:At,suggestions:k,completeMethod:ue,onChange:pe,itemTemplate:ie}),e.jsxs("div",{className:"flex gap-5",children:[e.jsx(M,{buttonType:b.RESET_OUTLINE,onClick:xt}),e.jsx(M,{buttonType:b.SEARCH_OUTLINE,onClick:mt})]})]})]})})},ie=t=>t.name===void 0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-39",children:[e.jsx("img",{src:St,alt:"search-icon",className:" h-7 w-7"}),e.jsx(V,{className:"text-primary-labelColor mt-2",label:"Loading..."})]}):e.jsx("div",{className:"flex flex-col",children:e.jsx(V,{className:"text-primary-labelColor",label:`${t.name}`})}),ht=t=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center ",children:[e.jsx("div",{className:"w-4 h-4 flex items-center",children:e.jsx("img",{src:Ct,alt:"Sahayya Logo",className:"cursor-pointer",onClick:a=>{ne.navigate(`${Ne}?mode=${Ae.VIEW}&uid=${t.uid}`)}})}),e.jsx("div",{className:"ml ",children:e.jsx(M,{buttonType:b.MENU,onClick:a=>{Re(t,a)},className:"!rounded-none bg-transparent !hover:bg-primary-gray-300"})})]})});return e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex w-full justify-between items-center",children:[e.jsx(V,{label:"Partner User",className:"text-primary-ptext-1000 text-h2 font-bold flex"}),e.jsxs("div",{className:"flex gap-10",children:[e.jsx(M,{buttonType:b.FILTER_OUTLINE,onClick:pt}),e.jsx(M,{buttonType:b.CREATE,className:"create-button",onClick:ut})]})]}),ce&&vt(),e.jsxs(bt,{standardDataFormatPromise:Z.getAllPartnerUser,dataKey:"id",search:`${c.search}sahayyaUserType=PARTNER_USER`,ref:n,children:[e.jsx(x,{className:"text-primary-ptext-1000 text-left text-xs w-1/12   p-1 h-12 pl-6",header:_e,body:ke,style:{minWidth:"100px",width:"100px"}}),e.jsx(x,{className:"text-primary-ptext-1000 text-left text-xs w-1/12  p-1 h-12 pl-6",header:Ve,body:He}),e.jsx(x,{className:"text-primary-ptext-1000 text-left text-xs w-1/12  p-1 h-12 pl-6",header:Je,body:qe}),e.jsx(x,{className:"text-primary-ptext-1000 text-left text-xs w-1/12  p-1 h-12 pl-6",header:Qe,body:We}),e.jsx(x,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:ze,body:Ge}),e.jsx(x,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:Ke,body:Xe}),e.jsx(x,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:Ze,body:et}),e.jsx(x,{className:"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6",header:tt,body:at}),e.jsx(x,{className:"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6",header:st,body:rt}),e.jsx(x,{className:"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6",header:"Actions",body:ht})]}),e.jsxs(Tt,{onHide:L?()=>Y(!1):()=>D(!1),visible:L?Te:Ce,modal:!0,closable:!1,dismissableMask:!0,children:[e.jsx(V,{label:L?"dialog.staticMaster.activate":"dialog.staticMaster.deactivate",className:"text-primary-ptext-1000 text-base font-Roboto font-bold flex items-center justify-center"}),e.jsx(V,{label:L?"dialog.staticMaster.message.activate":"dialog.staticMaster.message",className:"text-primary-ptext-1000 text-xs font-Roboto flex mt text-center justify-center mx-2 mt-4"}),e.jsxs("div",{className:"flex justify-center mt-4",children:[e.jsx("div",{className:"mr-3",children:e.jsx(M,{buttonType:b.CANCEL_OUTLINE,onClick:L?()=>Y(!1):()=>D(!1)})}),e.jsx("div",{className:"mr-3",children:e.jsx(M,{buttonType:b.SAVE_OUTLINE,onClick:L?()=>ot():()=>it()})}),e.jsx("div",{className:"",children:e.jsx(M,{buttonType:b.SEND_FOR_APPROVAL,className:"approve-primary",onClick:L?()=>nt():()=>ct()})})]})]}),e.jsx(Et,{className:"w-20 bg-white font-Roboto text-xs text-primary-pText-1300 pt-2 rounded-lg mt-0.5 flex justify-center align-center shadow-autoCompletePanel",model:be,ref:X}),e.jsx("div",{className:"",children:e.jsx(Bt,{position:"bottom-right",ref:O,toastText:re,variant:de})})]})},ra=gt(Pt);export{ra as default};
//# sourceMappingURL=PagePartnerUserListing-1ae1d2bf.js.map
