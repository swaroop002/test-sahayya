{"version":3,"file":"PagePointOfInterest-a7b801d2.js","sources":["../../src/views/transaction/PagePointOfInterest/PagePointOfInterest.tsx"],"sourcesContent":["import Loader from \"components/Loader/Loader\";\nimport Locations from \"components/Locations/Locations\";\nimport ReadOnlyTable, { IReadonlyTableRef } from \"components/ReadOnlyTable/ReadOnlyTable\";\nimport SimpleTab from \"components/SimpleTab/SimpleTab\";\nimport Text from \"components/Text/Text\";\nimport { useTranslateText } from \"hook/CustomHooks\";\nimport { numberFormatter } from \"locale\";\nimport { Column } from \"primereact/column\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport AddressService from \"services/transaction/DDE/AddressService\";\nimport LoanService from \"services/transaction/LoanService\";\nimport PointOfInterestService from \"services/transaction/PointOfInterestService\";\n\nconst PagePointOfInterest = () => {\n  const [addressList, setAddressList] = useState<any[]>([]);\n  const [loader, setLoader] = useState<boolean>(true);\n  const dataTableRef = useRef<IReadonlyTableRef>(null);\n  const params = useParams<any>();\n\n  useEffect(() => {\n    init();\n  }, []);\n\n  const init = () => {\n    getAllAddress();\n  };\n\n  const getAllAddress = () => {\n    const start = 0;\n    const limit = 10;\n    AddressService.getAll(start, limit, `&loan.uid=${params.loanUid}`)\n      .then((res) => {\n        console.log(\"res\", res);\n        if (res.data.totalRecords > limit) {\n          AddressService.getAll(start, res.data.totalRecords, `&loan.uid=${params.loanUid}`)\n            .then((res) => {\n              console.log(\"res\", res);\n              setAddressList(prepareAddressList(res.data.results));\n              setLoader(false);\n            })\n            .catch((error) => {\n              console.log(\"error\", error);\n              setLoader(false);\n            });\n        } else {\n          setAddressList(prepareAddressList(res.data.results));\n          setLoader(false);\n        }\n      })\n      .catch((error) => {\n        console.log(\"error\", error);\n        setLoader(false);\n      });\n  };\n\n  const prepareAddressList = (addressList: any[]) => {\n    return addressList.map((address) => {\n      return {\n        id: address.id,\n        imageUrl: address.imageUrl,\n        fullName: address.applicant?.fullName,\n        applicantType: address.applicant?.applicantType,\n        addressType: address.primaryAddressType,\n        address: address.address,\n        lat: address.latitude ?? 0,\n        lng: address.longitude ?? 0,\n      };\n    });\n  };\n\n  const renderTabContent = (tab: any, index: any) => {\n    switch (tab.key) {\n      case \"Tab1\":\n        return renderTab1();\n      case \"Tab2\":\n        return renderTab2();\n\n      default:\n        return <div></div>;\n    }\n  };\n\n  const renderTab1 = () => {\n    if (loader)\n      return (\n        <div>\n          <Loader />\n        </div>\n      );\n    return (\n      <div className=\"bg-white p-5 m-4 \">\n        <Locations addressList={addressList} />\n      </div>\n    );\n  };\n\n  const renderParticulars = (rowData: any) => {\n    return <div>{rowData.name}</div>;\n  };\n  const renderDistance = (rowData: any) => {\n    return <div>{numberFormatter(rowData.distance)}</div>;\n  };\n  const renderTab2 = () => {\n    return (\n      <div className=\"bg-white p-5 m-4 \">\n        <ReadOnlyTable\n          standardDataFormatPromise={PointOfInterestService.getAll}\n          dataKey=\"id\"\n          ref={dataTableRef}\n          showAll\n          routeParams={params.loanUid}\n        >\n          <Column\n            className=\"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6\"\n            header={useTranslateText(\"label.pointOfInterest.particulars\")}\n            body={renderParticulars}\n          />\n          <Column\n            className=\"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6 \"\n            header={useTranslateText(\"label.pointOfInterest.distance\")}\n            body={renderDistance}\n          />\n        </ReadOnlyTable>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"flex flex-col gap-5 \">\n      <div className=\"text-base \">\n        <Text label={\"label.loanDetail.pointOfInterest\"} className=\"text-base font-bold\" />\n      </div>\n      <SimpleTab\n        tabs={[\n          {\n            name: \"label.pointOfInterest.Map\",\n            key: \"Tab1\",\n          },\n          {\n            name: \"label.pointOfInterest.keyDistance\",\n            key: \"Tab2\",\n          },\n        ]}\n        renderContent={(tab: any, index: any) => renderTabContent(tab, index)}\n      />\n    </div>\n  );\n};\n\nexport default PagePointOfInterest;\n"],"names":["PagePointOfInterest","addressList","setAddressList","useState","loader","setLoader","dataTableRef","useRef","params","useParams","useEffect","init","getAllAddress","AddressService","res","prepareAddressList","error","address","_a","_b","renderTabContent","tab","index","renderTab1","renderTab2","jsx","Loader","Locations","renderParticulars","rowData","renderDistance","numberFormatter","jsxs","ReadOnlyTable","PointOfInterestService","Column","useTranslateText","Text","SimpleTab"],"mappings":"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"}