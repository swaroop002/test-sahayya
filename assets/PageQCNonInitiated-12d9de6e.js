import{r,cU as re,aG as we,ad as ea,ae as aa,af as ta,v as ie,ao as oe,j as a,T as l,o as c,az as ce,J as me,c$ as T,b3 as na,b4 as sa,ag as la,L as ra,aN as ia,z as M,b as oa,l as ca,i as ma,cZ as da,c_ as ua,f as pa}from"./index-e8217573.js";import{A as x}from"./AutoComplete-0bca608a.js";import{B as de}from"./ButtonBox-9e46519a.js";import{E as xa}from"./ErrorDialog-d5eef4d7.js";import{I as j}from"./InputBox-b9e88f52.js";import{R as ga}from"./ReadOnlyTable-86accb69.js";import{S as ue}from"./SimpleDropDown-061a3470.js";import{S as ha}from"./SystemDatePicker-abe08a29.js";import{T as fa}from"./Toast-ae99ea5b.js";import{u as g}from"./CustomHooks-0ce50620.js";import{C as h}from"./column.esm-938bad7d.js";import{A as ba}from"./ApplicantService-924aa5cb.js";import{B as ya}from"./BankMasterDataService-185c821e.js";import{S as Ta}from"./State-681554db.js";import{O as Na}from"./Branch-732bec0f.js";import{P as Aa}from"./ProductConfigProductService-51cfb6b7.js";import{S as ja}from"./StaticMasterDataService-689a6eca.js";import{L as pe}from"./LoanService-d10912e0.js";import"./search_icon-459d6871.js";import"./withAuth-6de36ebf.js";import"./virtualscroller.esm-9939945c.js";import"./kebab-menu-8835ad2e.js";import"./Dialog-adadaf64.js";import"./No_data-1720c54e.js";import"./datatable.esm-f474a654.js";import"./paginator.esm-11c2c115.js";import"./DatePicker-b1c13861.js";import"./TransitionGroup-c8afe0ce.js";const xe={applicationNumber:{uid:"",name:""},customerName:{uid:"",name:""},salesManager:{uid:"",name:""},creditManager:{uid:"",name:""},salesAgent:{uid:"",name:""},product:"",state:{uid:"",name:""},branch:{uid:"",name:""},lendingType:"",bankFinancier:{uid:"",name:""},loginDate:"",loanAmountGreaterThan:"",loanAmountLessThan:"",daysPendingGreaterThan:"",daysPendingLessThan:""},at=()=>{var Y,_,D,G,Q,B,U,q,K,W;const[n,y]=r.useState(xe),[m,d]=r.useState([{name:"",uid:"",userId:""}]),[N,$]=r.useState({limit:10,loading:!1,totalRecords:0,start:0,search:`&qcStatus:null&loanStatus:nq=${re.DRAFT}`,runCustomQuery:!1,records:[]}),[ge,he]=r.useState([]),[fe,be]=r.useState([]),[ye,va]=r.useState("bottom-right"),[v,Te]=r.useState(""),[L,Ca]=r.useState(we.PRIMARY),[Ne,Sa]=r.useState(!1),[C,S]=r.useState(""),[Ae,E]=r.useState(!1),[,I]=r.useState(!1),i=r.useRef(new ea({validators:{...aa()},...ta(),autoForceUpdate:{forceUpdate:()=>I(e=>!e)}})),A=r.useRef(null),f=r.useRef(null);r.useEffect(()=>{ve()},[]),r.useEffect(()=>{var e;A&&A.current&&((e=A.current)==null||e.search())},[N.search]),r.useEffect(()=>{var e;f!=null&&f.current&&v!==""&&((e=f==null?void 0:f.current)==null||e.showFunction(),Te(""))},[v,L,Ne]),r.useEffect(()=>{C&&E(!0)},[C]);const R=e=>{var t,s;(s=i==null?void 0:i.current)==null||s.showMessageFor((t=e==null?void 0:e.target)==null?void 0:t.name)},je=()=>{var t,s;let e=!1;return e=(t=i==null?void 0:i.current)==null?void 0:t.allValid(),e||(I(o=>!o),(s=i==null?void 0:i.current)==null||s.showMessages(),I(o=>!o),!1)},ve=async()=>{Ce(),Se()},Ce=async()=>{var e;try{const t=await Aa.getAll(0,30,"");ie(t)&&F("product",(e=t==null?void 0:t.data)==null?void 0:e.results)}catch(t){console.log(t),S(oe(t))}},Se=async()=>{var e;try{const t=await ja.getAll(0,30,"staticMasterType.code=PRODUCT_LENDING_TYPE");ie(t)&&F("lendingType",(e=t==null?void 0:t.data)==null?void 0:e.results)}catch(t){console.log(t),S(oe(t))}},u=e=>{const{name:t,value:s}=e.target;let o="";typeof s=="object"?(s.lanId?o=s.lanId:s.fullName?o=s.fullName:s.name&&(o=s.name),y(p=>({...p,[t]:{name:o,uid:s.uid,userId:s.userId}}))):y(p=>({...p,[t]:{name:s,uid:"",userId:""}}))},O=e=>{y(t=>({...t,[e.target.name]:e.value}))},P=e=>{const{value:t}=e.target;y(s=>({...s,[e.target.name]:t}))},k=e=>{const{name:t,value:s}=e.target,o=T(s??"");y(p=>({...p,[t]:typeof o=="number"?na(o,"en-IN",0):""}))},Ie=()=>{y(xe),$({...N,search:""})},Pe=()=>{var s,o,p,z,H,J,Z,X,V,w,ee,ae,te,ne,se,le;if(!je())return;let e="";const t=sa(la(ra.SYSTEM_DATE));if((s=n.applicationNumber)!=null&&s.name&&(e=`${e}&lanId=${(o=n.applicationNumber)==null?void 0:o.name}`),(p=n.customerName)!=null&&p.name&&(e=`${e}&applicantName=${(z=n.customerName)==null?void 0:z.name}`),(H=n.salesManager)!=null&&H.name&&(e=`${e}&salesManager.uid=${(J=n.salesManager)==null?void 0:J.uid}`),(Z=n.creditManager)!=null&&Z.name&&(e=`${e}&creditManager.uid=${(X=n.creditManager)==null?void 0:X.uid}`),n.product&&(e=`${e}&product.uid=${n.product}`),(V=n.state)!=null&&V.name&&(e=`${e}&state.uid=${(w=n.state)==null?void 0:w.uid}`),(ee=n.branch)!=null&&ee.name&&(e=`${e}&branch.uid=${(ae=n.branch)==null?void 0:ae.uid}`),n.lendingType&&(e=`${e}&incomeSchemeProduct.name:lk=${n.lendingType}`),(te=n.bankFinancier)!=null&&te.name&&(e=`${e}&bankFinancier.uid=${(ne=n.bankFinancier)==null?void 0:ne.uid}`),(se=n.salesAgent)!=null&&se.name&&(e=`${e}&salesAgent.uid=${(le=n.salesAgent)==null?void 0:le.uid}`),T(n==null?void 0:n.loanAmountLessThan)&&(e=`${e}&amount:le=${T(n==null?void 0:n.loanAmountLessThan)}`),T(n==null?void 0:n.loanAmountGreaterThan)&&(e=`${e}&amount:ge=${T(n==null?void 0:n.loanAmountGreaterThan)}`),n.loginDate&&(e=`${e}&loginDate=${ia(n.loginDate)}`),Number(n.daysPendingGreaterThan)>0){const b=new Date(t);b.setDate(b.getDate()-Number(n.daysPendingGreaterThan)),e=`${e}&createdAtSystemDate:lt=${b.toISOString()}`}if(Number(n.daysPendingLessThan)>0){const b=new Date(t);b.setDate(b.getDate()-Number(n.daysPendingLessThan)),e=`${e}&createdAtSystemDate:gt=${b.toISOString()}`}e=`${e}&qcStatus:null&loanStatus:nq=${re.DRAFT}`,$({...N,search:e})},F=(e,t)=>{e==="product"?he(t??[]):e==="lendingType"&&be(t??[])},Me=async e=>{let t=[];await pe.getAll(0,10,`&lanId:lk=${e.query}`).then(s=>{s.status===200&&(t=[...s.data.results])}),t.length===0&&t.push({name:"",uid:""}),d(t)},$e=async e=>{let t=[];await ba.getCustomerName(0,10,`&fullName:lk=${e.query}`).then(s=>{s.status===200&&(t=[...s.data.results])}),t.length===0&&t.push({name:"",uid:""}),d(t)},Le=async e=>{let t=[];await M.getEmployee(0,10,`${e.query}`).then(s=>{s.status===200&&(t=[...s.data.results])}),t.length===0&&t.push({name:"",uid:""}),d(t)},Ee=async e=>{let t=[];await M.getEmployee(0,10,`${e.query}`).then(s=>{s.status===200&&(t=[...s.data.results])}),t.length===0&&t.push({name:"",uid:""}),d(t)},Re=async e=>{let t=[];await Ta.getAll(0,10,`name:lk=${e.query}&`).then(s=>{s.status===200&&(t=[...s.data.results])}),t.length===0&&t.push({name:"",uid:""}),d(t)},Oe=async e=>{let t=[];await M.getEmployee(0,10,`${e.query}`).then(s=>{s.status===200&&(t=[...s.data.results])}),t.length===0&&t.push({name:"",uid:""}),d(t)},ke=async e=>{let t=[];await Na.getAll(0,10,`name:lk=${e.query}&`).then(s=>{s.status===200&&(t=[...s.data.results])}),t.length===0&&t.push({name:"",uid:""}),d(t)},Fe=async e=>{let t=[];await ya.getAll(0,10,`&name:lk=${e.query}`).then(s=>{s.status===200&&(t=[...s.data.results])}),t.length===0&&t.push({name:"",uid:""}),d(t)},Ye=e=>{const t=oa+ca+ma+da+"/"+(e==null?void 0:e.uid)+ua;return a.jsx("a",{className:"flex items-center underline text-primary-sapphireBlue-900",href:t,children:(e==null?void 0:e.lanId)??"-"})},_e=e=>a.jsx("div",{className:"flex items-center",children:(e==null?void 0:e.linkedLoan)??"-"}),De=e=>a.jsx("div",{className:"flex items-center",children:(e==null?void 0:e.branch)??"-"}),Ge=e=>a.jsx("div",{className:"flex items-center",title:e==null?void 0:e.applicantNam,children:(e==null?void 0:e.applicantName)??"-"}),Qe=e=>a.jsx("div",{className:"flex items-center",title:e==null?void 0:e.product,children:(e==null?void 0:e.product)??"-"}),Be=e=>a.jsx("div",{className:"flex items-center",children:pa(e==null?void 0:e.loginDate)??"-"}),Ue=e=>a.jsx("div",{className:"flex items-center",children:(e==null?void 0:e.daysSinceLogin)??"-"}),qe=e=>a.jsx("div",{className:"flex items-center",children:(e==null?void 0:e.salesManager)??"-"}),Ke=e=>e.lanId===void 0?a.jsx("div",{className:"flex flex-col items-center justify-center h-39",children:a.jsx(l,{className:"text-primary-labelColor mt-2",label:"label.noDataFound"})}):a.jsx("div",{className:"flex flex-col",children:a.jsx(l,{className:"text-primary-labelColor",label:`${e.lanId}`})}),We=e=>e.fullName===void 0?a.jsx("div",{className:"flex flex-col items-center justify-center h-39",children:a.jsx(l,{className:"text-primary-labelColor mt-2",label:"label.noDataFound"})}):a.jsx("div",{className:"flex flex-col",children:a.jsx(l,{className:"text-primary-labelColor",label:`${e.fullName}`})}),ze=e=>e.name===void 0||(e==null?void 0:e.name.length)<1?a.jsx("div",{className:"flex flex-col items-center justify-center h-39",children:a.jsx(l,{className:"text-primary-labelColor mt-2",label:"label.noDataFound"})}):a.jsx("div",{className:"flex flex-col",children:a.jsx(l,{className:"text-primary-labelColor",label:`${e.name}`})}),He=e=>e.name===void 0||e.name===""?a.jsx("div",{className:"flex flex-col items-center justify-center h-39",children:a.jsx(l,{className:"text-primary-labelColor mt-2",label:"label.noDataFound"})}):a.jsx("div",{className:"flex flex-col",children:a.jsx(l,{className:"text-primary-labelColor",label:`${e.name}`})}),Je=e=>e.name===void 0||e.name===""?a.jsx("div",{className:"flex flex-col items-center justify-center h-39",children:a.jsx(l,{className:"text-primary-labelColor mt-2",label:"label.noDataFound"})}):a.jsxs("div",{className:"flex flex-col",children:[a.jsx(l,{className:"text-primary-labelColor",label:`${e.name}`}),a.jsx(l,{className:"text-secondary-gray-500 text-xxs",label:e==null?void 0:e.country})]}),Ze=e=>e.name===void 0||(e==null?void 0:e.name.length)<1?a.jsx("div",{className:"flex flex-col items-center justify-center h-39",children:a.jsx(l,{className:"text-primary-labelColor mt-2",label:"label.noDataFound"})}):a.jsx("div",{className:"flex flex-col",children:a.jsx(l,{className:"text-primary-labelColor",label:`${e.name}`})}),Xe=e=>e.name===void 0||e.name===""?a.jsx("div",{className:"flex flex-col items-center justify-center h-39",children:a.jsx(l,{className:"text-primary-labelColor mt-2",label:"label.noDataFound"})}):a.jsx("div",{className:"flex flex-col",children:a.jsx(l,{className:"text-primary-labelColor",label:`${e.name}`})}),Ve=e=>e.name===void 0||e.name===""?a.jsx("div",{className:"flex flex-col items-center justify-center h-39",children:a.jsx(l,{className:"text-primary-labelColor mt-2",label:"label.noDataFound"})}):a.jsx("div",{className:"flex flex-col",children:a.jsx(l,{className:"text-primary-labelColor",label:`${e.name}`})});return a.jsxs("div",{className:"p-3 rounded-masterDataPageRadius bg-white flex flex-col gap-3 overflow-scroll screen-body-scroll",children:[a.jsx("div",{className:"pl-3 py-2 flex items-center",children:a.jsx(l,{className:"text-primary-ptext-1000 font-bold text-2xl ",label:"label.QCInitiated.heading"})}),a.jsxs("div",{className:"p-3 bg-primary-sapphireBlue-100 rounded-lg flex flex-col gap-6",children:[a.jsx(l,{className:"  text-primary-ptext-1000 font-bold text-base",label:"label.task.advancedSearch"}),a.jsxs("div",{className:" grid grid-cols-1 md:grid-cols-4 gap-3",children:[a.jsx(x,{label:"label.QCInitiated.applicationNumber",name:"applicationNumber",field:"applicationNumber",value:(Y=n.applicationNumber)==null?void 0:Y.name,variant:c.PRIMARY,suggestions:m,completeMethod:Me,onChange:u,itemTemplate:Ke}),a.jsx(x,{label:"label.QCInitiated.customerName",name:"customerName",field:"customerName",variant:c.PRIMARY,value:(_=n.customerName)==null?void 0:_.name,suggestions:m,completeMethod:$e,onChange:u,itemTemplate:We}),a.jsx(j,{label:"label.QCInitiated.daysPendingGreaterThan",name:"daysPendingGreaterThan",value:n.daysPendingGreaterThan,variant:c.SECONDARY,onChange:P,onBlur:R,validation:(D=i==null?void 0:i.current)==null?void 0:D.message("daysPendingGreaterThan",n.daysPendingGreaterThan,"checkNumber|onlyPositive|onlyInteger")}),a.jsx(j,{label:"label.QCInitiated.daysPendingLessThan",name:"daysPendingLessThan",value:n.daysPendingLessThan,variant:c.SECONDARY,onChange:P,onBlur:R,validation:(G=i==null?void 0:i.current)==null?void 0:G.message("daysPendingLessThan",n.daysPendingLessThan,"checkNumber|onlyPositive|onlyInteger")}),a.jsx(x,{label:"label.QCInitiated.salesManager",name:"salesManager",field:"salesManager",value:(Q=n.salesManager)==null?void 0:Q.name,variant:c.PRIMARY,suggestions:m,completeMethod:Le,onChange:u,itemTemplate:ze}),a.jsx(x,{label:"label.QCInitiated.creditManager",name:"creditManager",field:"creditManager",value:(B=n.creditManager)==null?void 0:B.name,variant:c.PRIMARY,suggestions:m,completeMethod:Ee,onChange:u,itemTemplate:He}),a.jsx(j,{label:"label.QCInitiated.loanAmountGreaterThan",name:"loanAmountGreaterThan",value:n.loanAmountGreaterThan,variant:c.SECONDARY,onChange:k}),a.jsx(j,{label:"label.QCInitiated.LoanAmountLessThan",name:"loanAmountLessThan",value:n.loanAmountLessThan,variant:c.SECONDARY,onChange:k}),a.jsx(ue,{variant:ce.SECONDARY,label:"label.QCInitiated.product",name:"product",options:ge,optionLabel:"name",optionValue:"uid",value:n.product,onChange:O}),a.jsx(x,{label:"label.QCInitiated.state",name:"state",field:"state",value:(U=n.state)==null?void 0:U.name,variant:c.PRIMARY,suggestions:m,completeMethod:Re,onChange:u,itemTemplate:Je}),a.jsx(x,{label:"label.QCInitiated.salesAgent",name:"salesAgent",field:"salesAgent",value:(q=n.salesAgent)==null?void 0:q.name,variant:c.PRIMARY,suggestions:m,completeMethod:Oe,onChange:u,itemTemplate:Ze}),a.jsx(ha,{variant:c.PRIMARY,label:"label.QCInitiated.LoginDate",placeholder:"DD-MMM-YYYY",name:"loginDate",value:n.loginDate,onChange:P}),a.jsx(x,{label:"label.QCInitiated.branch",name:"branch",field:"branch",variant:c.PRIMARY,value:(K=n.branch)==null?void 0:K.name,suggestions:m,completeMethod:ke,onChange:u,itemTemplate:Xe}),a.jsx(ue,{label:"label.QCInitiated.lendingType",variant:ce.SECONDARY,name:"lendingType",options:fe,optionLabel:"name",optionValue:"name",value:n.lendingType,onChange:O}),a.jsx(x,{label:"label.QCInitiated.bank/Financier",name:"bankFinancier",field:"bankFinancier",value:(W=n.bankFinancier)==null?void 0:W.name,variant:c.PRIMARY,suggestions:m,completeMethod:Fe,onChange:u,itemTemplate:Ve}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("div",{className:"flex items-center gap-10",children:[a.jsx(de,{buttonType:me.RESET_OUTLINE,onClick:Ie}),a.jsx(de,{buttonType:me.SEARCH_OUTLINE,onClick:Pe})]})})]})]}),a.jsx("div",{className:"p-3 flex w-full justify-between items-center",children:a.jsx(l,{className:"text-primary-ptext-1000 font-bold text-2xl ",label:"label.QCInitiated.myApplication"})}),a.jsxs(ga,{standardDataFormatPromise:pe.getAll,dataKey:"id",search:N.search,ref:A,children:[a.jsx(h,{className:"text-primary-ptext-1000 text-left text-xs py-3 pl-6",header:g("label.partnerTask.loanApplicationNo"),body:Ye}),a.jsx(h,{className:"text-primary-ptext-1000 text-left text-xs py-3 pl-6",header:g("label.partnerTask.linkedApplication"),body:_e}),a.jsx(h,{className:"text-primary-ptext-1000 text-left text-xs py-3 pl-6",header:g("label.loanListing.branch"),body:De}),a.jsx(h,{className:"text-primary-ptext-1000 text-left text-xs py-3 pl-6",header:g("label.partnerTask.customerName"),body:Ge,style:{minWidth:"200px",width:"auto"}}),a.jsx(h,{className:"text-primary-ptext-1000 text-left text-xs py-3 pl-6",header:g("label.loanListing.product"),body:Qe,style:{minWidth:"200px",width:"auto"}}),a.jsx(h,{className:"text-primary-ptext-1000 text-left text-xs py-3 pl-6",header:g("label.QCInitiated.LoginDate"),body:Be}),a.jsx(h,{className:"text-primary-ptext-1000 text-left text-xs py-3 pl-6",header:g("label.QCInitiated.daysPending"),body:Ue}),a.jsx(h,{className:"text-primary-ptext-1000 text-left text-xs py-3 pl-6 pr-3",header:g("label.loanListing.salesManager"),body:qe,style:{minWidth:"150px",width:"auto"}})]}),a.jsx(fa,{position:ye,ref:f,toastText:v,variant:L}),a.jsx(xa,{onHide:()=>{E(!1),S("")},visible:Ae,errorMessage:C})]})};export{at as default};
//# sourceMappingURL=PageQCNonInitiated-12d9de6e.js.map
