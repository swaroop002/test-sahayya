{"version":3,"file":"PageReappeal-97c31aa2.js","sources":["../../src/assets/img/ReApeal/notificationOnTop.svg","../../src/views/transaction/PageReappeal/PageReappeal.tsx"],"sourcesContent":["export default \"__VITE_ASSET__fb560662__\"","import chatIcon from \"assets/chatSvg/chatIcon.svg\";\nimport notificationOnTop from \"assets/img/ReApeal/notificationOnTop.svg\";\nimport ButtonBox from \"components/ButtonBox/ButtonBox\";\nimport DocumentUploader, {\n  DOC_UPLOADER_MODE,\n  IDocumentInfo,\n  IDocumentUploaderRef,\n} from \"components/DocumentUploader/DocumentUploader\";\nimport InputBox from \"components/InputBox/InputBox\";\nimport InputTextArea from \"components/InputTextArea/InputTextArea\";\nimport SimpleDropDown from \"components/SimpleDropDown/SimpleDropDown\";\nimport SimpleOverlayPanel from \"components/SimpleOverlayPanel/SimpleOverlayPanel\";\nimport Text from \"components/Text/Text\";\nimport TextButton from \"components/TextButton/TextButton\";\nimport { withRouter } from \"hoc/withRouter\";\nimport { ReactNode, useEffect, useRef, useState } from \"react\";\nimport {\n  BUTTON_COLOR_TYPE,\n  BUTTON_TYPE,\n  DOCUMENT_CATEGORY,\n  INPUT_STYLE_TYPE,\n  LOAN_SECTION_KEY,\n} from \"utils/Constant\";\nimport {\n  prepareAttributes,\n  prepareDocSections,\n  structLoanDocumentsFromAPIResponse,\n} from \"../PageDDE/Login/Helper\";\nimport { useParams } from \"react-router-dom\";\nimport ChatServices from \"services/ChatServices\";\nimport { formatDate, getEnvVariableValue, validateGetAPIResponse } from \"utils/CommonUtil\";\nimport DialogBox from \"components/Dialog/Dialog\";\nimport MainMessageBody from \"components/ChatComponents/MainMessageBody\";\nimport StageService from \"services/transaction/DDE/StageService\";\nimport { useSelector } from \"react-redux\";\nimport { LINK_DDE_STAGE_AND_STATUS, LINK_DDE_STAGE_AND_STATUS_STAGES, LINK_LOAN_DATA, LINK_LOAN_DETAIL } from \"transactionRoutes\";\nimport StaticMasterDataService from \"services/masterdata/StaticMaster/StaticMasterDataService\";\n\nconst REAPEAL_STATUS = {\n  INITIATED: \"Initiated\",\n  COMPLETED: \"Completed\",\n  CANCELLED: \"Cancelled\",\n  RE_OPEN: \"Re-open\",\n  IN_REVIEW: \"In Review\",\n  PAUSED: \"Paused\",\n  REJECTED: \"Rejected\",\n  APPROVED: \"Approved\",\n};\nconst REASON_TO_REJECT = {\n  LOAN_REJECTION_REASON_POLICY_NORMS_NOT_MET: \"Loan rejection reason policy norms not met\",\n};\nconst PageReappeal = (props: any) => {\n  const userProfile = useSelector((state: any) => state.UserProfileReducers.profileObj);\n  const [isMessageDialogVisible, setIsMessageDialogVisible] = useState(false);\n  const initialPageObjData: any = {\n    reasonToReject: \"\",\n    rejectRemark: \"\",\n    remarks: \"\",\n    savedDocuments: [],\n    stageStatus: \"\",\n    updatedByUserName: \"\",\n    datForApprove: {},\n  };\n  const overlayPanelRef = useRef(null);\n  const [pageObj, setPageObj] = useState<any>({ ...initialPageObjData });\n  const params: { loanUid?: string; stageUid?: string } = useParams();\n  const [isNewMessageAvailable, setIsNewMessageAvailable] = useState(false);\n  const [showConfirmApproval, setShowConfirmApproval] = useState(false);\n  const [showConfirmRejected, setShowConfirmRejected] = useState(false);\n  const [stage, setStage] = useState<any>(\"\");\n  const [rejectionReasonOptions, setRejectionReasonOptions] = useState<any>([]);\n\n  const creditDocUploaderRef = useRef<IDocumentUploaderRef | null>(null);\n  const [dataForViewDetails, setDataForViewDetails] = useState({\n    assignedTo: \"\",\n    delegateTo: \"\",\n    initiation: \"\",\n    status: \"\",\n  });\n\n  useEffect(() => {\n    init();\n    getRejectionOptions();\n  }, []);\n  const init = async () => {\n    try {\n      const res = await StageService.getReappealDetails(params?.stageUid);\n      console.log(res, \"check\");\n      setPageObj({\n        reasonToReject: res?.data?.loan?.reasonToReject,\n        rejectRemark: res?.data?.loan?.rejectRemark,\n        remarks: res?.data?.stage?.remarks,\n        savedDocuments: structLoanDocumentsFromAPIResponse(res?.data?.stage.loanDocuments),\n        // savedDocuments: res?.data?.stage.loanDocuments[0] ?? {},\n        stageStatus: res?.data?.stage?.status,\n        updatedByUserName: res?.data?.stage?.updatedByUserName,\n        datForApprove: res?.data?.stage ?? {},\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    const pollingTimingForConversation = getEnvVariableValue(\"VITE_MESSAGE_CONVERSATION_TIMING\");\n    const callAPI = async () => {\n      try {\n        const res = await ChatServices.checkNewMessageAvailability(params?.stageUid ?? \"\");\n        setIsNewMessageAvailable(res?.data);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    callAPI();\n    // const intervalId = setInterval(callAPI, pollingTimingForConversation);\n    const intervalId = setInterval(callAPI, 1000000);\n    return () => {\n      clearInterval(intervalId);\n    };\n  }, []);\n  // handleClick\n  const onToggleMessage = (e: any) => {\n    setIsMessageDialogVisible(!isMessageDialogVisible);\n  };\n\n  // helper function\n  const getRejectionOptions = async () => {\n    StaticMasterDataService.getAll(\n      0,\n      1000,\n      \"staticMasterType.code=LOAN_REJECTION_REASON&\"\n    )\n      .then((res) => {\n        if (validateGetAPIResponse(res)) {\n          const options = res?.data?.results?.map((record: any) => {\n            return {\n              name: record?.name ?? \"\",\n              code: record?.code ?? \"\",\n            };\n          });\n          setRejectionReasonOptions(options?.length ? options : []);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n  function findObjectWithStage(arr: any) {\n    for (const obj of arr) {\n      if (obj.stage && typeof obj.stage === \"object\") {\n        if (obj.stage.stageName !== \"LOGIN\") {\n          return obj.stage;\n        }\n      }\n    }\n    // If no object found, return the first object\n    return arr[0].stage;\n  }\n\n  const prepareForReject = () => {\n    return {\n      uid: params.stageUid ?? \"\",\n      status: REAPEAL_STATUS.REJECTED,\n    };\n  };\n  const onRejectFinancialApproval = async () => {\n    try {\n      const res = await StageService.getReapealInitiationStage(`&loan.uid=${params.loanUid}`);\n      console.log(res?.data?.results, \"for the api which has the stage \");\n      const objectWithStage = findObjectWithStage(res.data.results);\n      console.log(objectWithStage);\n      setStage(objectWithStage);\n    } catch (error) {\n      console.log(error);\n    }\n    setShowConfirmRejected(true);\n  };\n  const onCancelRejectionInPopUp = () => {\n    setShowConfirmRejected(false);\n  };\n  const onSubmitRejectedInPopUp = async () => {\n    const enrichForReject = prepareForReject();\n    try {\n      const res = await StageService.acceptOrRejectReappealLoan(\"\", enrichForReject);\n      console.log(res);\n      props.navigate(`${LINK_LOAN_DETAIL}/${LINK_DDE_STAGE_AND_STATUS}/${params.loanUid}`);\n    } catch (error) {\n      console.log(error);\n    }\n    setShowConfirmRejected(true);\n  };\n\n  const onApproveFinancialApproval = async () => {\n    try {\n      const res = await StageService.getReapealInitiationStage(`&loan.uid=${params.loanUid}`);\n      console.log(res?.data?.results);\n      const objectWithStage = findObjectWithStage(res.data.results);\n      console.log(objectWithStage);\n      \n      setStage(objectWithStage);\n    } catch (error) {\n      console.log(error);\n    }\n    setShowConfirmApproval(true);\n  };\n  const onCancelApprovalInPopUp = () => {\n    setShowConfirmRejected(false);\n    setShowConfirmApproval(false);\n  };\n  const payloadForSubmitApproval = () => {\n    const enrich = pageObj.datForApprove;\n    delete enrich.laonDocuments;\n    delete enrich.stageDocuments;\n    enrich.status = REAPEAL_STATUS.APPROVED;\n\n    return enrich;\n  };\n  const onSubmitApprovalInPopUp = async () => {\n    const enrichForApproveSubmit = payloadForSubmitApproval();\n    try {\n      const res = await StageService.acceptOrRejectReappealLoan(\"\", enrichForApproveSubmit);\n      console.log(res);\n      const res2 = await StageService.initiateStageReapeal({\n        status: REAPEAL_STATUS.RE_OPEN,\n        uid: `${stage.uid}`,\n        stageInitiation: null,\n      });\n      props.navigate(`${LINK_LOAN_DETAIL}/${LINK_DDE_STAGE_AND_STATUS}/${params.loanUid}`);\n    } catch (error) {\n      console.log(error);\n    }\n    setShowConfirmApproval(false);\n  };\n\n  // helpers\n\n  \n  const onViewDetails = (e: any) => {\n    const viewDetailData: any = localStorage.getItem(\"stageDetail\");\n    setDataForViewDetails({\n      assignedTo: JSON.parse(viewDetailData)?.assignee?.name ?? \"NA\",\n      delegateTo: JSON.parse(viewDetailData)?.delegate?.name ?? \"NA\",\n      initiation: JSON.parse(viewDetailData)?.createdAtSystemDate ?? \"NA\",\n      status: JSON.parse(viewDetailData)?.status ?? \"NA\",\n    });\n    if (overlayPanelRef.current) {\n      // @ts-ignore: Will fix later\n      overlayPanelRef.current?.toggle(e);\n    }\n  };\n  const renderConfirmApprovalPopUp = (userProfile: any): ReactNode => {\n    return (\n      <DialogBox className={`w-84`} visible={showConfirmApproval} closable={false}>\n        <div className=\"flex flex-col gap-3\">\n          <div className=\"m-auto\">\n            <img src={notificationOnTop} alt=\"notificationIcon\" />\n          </div>\n          <div className=\"m-auto text-center\">\n            <Text\n              className=\"text-xl  font-bold text-primary-ptext-1000 w-fit  \"\n              label={\"Approve Re-appeal of Loan Application \"}\n            />\n          </div>\n          <div className=\" m-auto w-48 mt-3 text-center text-xs\">\n            <Text\n              label=\"Are you sure want to re-open this loan application for further process\"\n              className=\"font-normal text-xs\"\n            />\n          </div>\n          <div className=\"mt-3\">\n            <InputBox\n              label=\"Re-Appeal Approved By\"\n              labelClassNames=\"font-normal\"\n              className=\"h-6\"\n              value={userProfile.fullName === \"\" ? userProfile.name : userProfile.fullName}\n            />\n            <InputBox\n              label=\"Re-Open Stage\"\n              labelClassNames=\"font-normal\"\n              value={stage?.stageName}\n            />\n          </div>\n\n          <div className=\"flex    margin-auto\">\n            <div className=\" m-auto w-24 flex gap-3\">\n              <ButtonBox\n                className=\" \"\n               \n                buttonType={BUTTON_TYPE.NO}\n                onClick={onCancelApprovalInPopUp}\n              />\n              <ButtonBox\n                className=\"\"\n                \n                buttonType={BUTTON_TYPE.YES}\n                color={BUTTON_COLOR_TYPE.red}\n                onClickWithLoader={onSubmitApprovalInPopUp}\n                buttonIconClassName=\"w-9 h-9  border-4  border-yellow-500\"\n              />\n            </div>\n          </div>\n        </div>\n      </DialogBox>\n    );\n  };\n  const renderRejectApprovalPopUp = (userProfile: any): ReactNode => {\n    return (\n      <DialogBox className={`w-84`} visible={showConfirmRejected} closable={false}>\n        <div className=\"flex flex-col gap-3\">\n          <div className=\"m-auto\">\n            <img src={notificationOnTop} alt=\"notificationIcon\" />\n          </div>\n          <div className=\"m-auto text-center\">\n            <Text\n              className=\"text-xl  font-bold text-primary-ptext-1000 w-fit  \"\n              label={\"Reject Re-appeal of Loan Application \"}\n            />\n          </div>\n          <div className=\" m-auto w-48 mt-3 text-center text-xs\">\n            <Text\n              label=\"Are you sure want to reject this loan application for further process\"\n              className=\"font-normal text-xs\"\n            />\n          </div>\n          <div className=\"mt-3\">\n            <InputBox\n              label=\"Re-Appeal Rejected By\"\n              labelClassNames=\"font-normal\"\n              className=\"h-6\"\n              value={userProfile.fullName === \"\" ? userProfile.name : userProfile.fullName}\n            />\n            <InputBox\n              label=\"Re-Open Stage\"\n              labelClassNames=\"font-normal\"\n              value={stage?.stageName}\n            />\n          </div>\n\n         \n\n\n          <div className=\"flex    margin-auto\">\n            <div className=\" m-auto w-24 flex gap-3\">\n              <ButtonBox\n                className=\" \"\n               \n                buttonType={BUTTON_TYPE.NO}\n                onClick={onCancelRejectionInPopUp}\n              />\n              <ButtonBox\n                className=\"\"\n                \n                buttonType={BUTTON_TYPE.YES}\n                color={BUTTON_COLOR_TYPE.red}\n                onClickWithLoader={onSubmitRejectedInPopUp}\n                buttonIconClassName=\"  border-4  border-yellow-500\"\n              />\n            </div>\n          </div>\n\n        </div>\n      </DialogBox>\n    );\n  };\n\n  const renderLoanDetail = () => {\n    return (\n      <div className=\"flex flex-col gap-4 p-5 \">\n        <div className=\"flex flex-row justify-between items-center\">\n          <div className=\"text-sm text-secondary-stext-900\">Status :</div>\n          <div className=\"text-sm text-secondary-stext-900  font-bold ml-2\">\n            {dataForViewDetails.status}\n          </div>\n        </div>\n        <div className=\"flex flex-row justify-between items-center\">\n          <div className=\"text-sm text-secondary-stext-900\">Assigned to :</div>\n          <div className=\"text-sm text-secondary-stext-900  font-bold ml-2\">\n            {dataForViewDetails.assignedTo}\n          </div>\n        </div>\n        <div className=\"flex flex-row justify-between items-center\">\n          <div className=\"text-sm text-secondary-stext-900\">Delegated to :</div>\n          <div className=\"text-sm text-secondary-stext-900  font-bold ml-2\">\n            {dataForViewDetails.delegateTo}\n          </div>\n        </div>\n        <div className=\"flex flex-row justify-between items-center\">\n          <div className=\"text-sm text-secondary-stext-900\">Date of Initiation :</div>\n          <div className=\"text-sm text-secondary-stext-900  font-bold ml-2\">\n            {formatDate(dataForViewDetails.initiation)}\n          </div>\n        </div>\n      </div>\n    );\n  };\n  /*-----------------------------Main Render----------------------------*/\n  return (\n    <div className=\"flex flex-col gap-2\">\n      <div className=\"flex justify-between items-center flex-wrap \">\n        <div className=\"w-full flex gap-3  py-2 px-5 items-center justify-between sm:justify-normal sm:w-fit\">\n          <Text className=\"text-primary-ptext-1000 font-bold\" label={\"Reappeal\"} />\n          <TextButton\n            className=\"underline text-xs  !text-black  \"\n            label={\"View Details\"}\n            onClick={onViewDetails}\n          />{\" \"}\n          <button onClick={onToggleMessage} className=\" relative\">\n            <img src={chatIcon} alt=\"ChatIcon\" className=\"\" />{\" \"}\n            {isNewMessageAvailable ? (\n              <div className=\"absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full\"></div>\n            ) : (\n              <></>\n            )}\n          </button>\n        </div>\n\n        <div className=\"w-full my-2 px-5 flex items-center justify-end gap-5 text-xs text-primary-ptext-1000 sm:w-fit sm:justify-normal sm:my-0\">\n          <ButtonBox\n            className=\"\"\n            size={\"LOAN_DATA\"}\n            buttonType={BUTTON_TYPE.REJECT_APPLICATION}\n            onClick={onRejectFinancialApproval}\n          />\n\n          <ButtonBox\n            className=\"\"\n            size={\"LOAN_DATA\"}\n            buttonType={BUTTON_TYPE.APPROVE}\n            onClick={onApproveFinancialApproval}\n          />\n        </div>\n      </div>\n\n      <div className=\"flex flex-col gap-5 dde-layout-body-content\">\n        <div className=\"bg-white p-5 flex flex-col rounded-xl gap-2 \">\n          <div className=\"flex items-center justify-between \">\n            <div>\n              <Text className=\"text-xl font-bold text-primary-ptext-1000\" label={\"Reappeal\"} />\n            </div>\n          </div>\n          <div className=\" py-6.5  w-122.5\">\n            <Text label={\"Reject Condition\"} className=\"font-bold\" />\n            <div className=\" flex flex-col justify-between  mt-5.5\">\n              <div>\n                <div className=\"\">\n                  <SimpleDropDown\n                    placeholder={\"Select\"}\n                    label={\"Reason to Reject*\"}\n                    // options={[pageObj.reasonToReject]}\n                    options={rejectionReasonOptions}\n                    optionLabel=\"name\"\n                    optionValue=\"code\"\n                    value={pageObj.reasonToReject}\n                    disabled\n                  />\n                </div>\n              </div>\n\n              <div>\n                <div className=\"col-span-2 md:col-span-2 lg:col-span-2 \">\n                  <InputTextArea\n                    label={\"Description\"}\n                    name=\"description\"\n                    variant={INPUT_STYLE_TYPE.SECONDARY}\n                    hideMaxCount\n                    value={pageObj.rejectRemark}\n                    disabled\n                    // onChange={handleInputChange}\n                    // value={description}\n                    // disabled={pageMode !== PAGE_MODE.CREATE}\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"bg-white p-5 flex flex-col rounded-xl gap-2 \">\n          <div className=\"flex items-center justify-between \">\n            <div>\n              <Text\n                className=\"text-xl font-bold text-primary-ptext-1000\"\n                label={\"Reappeal Condition\"}\n              />\n            </div>\n          </div>\n          <div className=\" \">\n            <InputTextArea\n              name=\"description\"\n              variant={INPUT_STYLE_TYPE.SECONDARY}\n              maxCount={200}\n              value={pageObj.remarks}\n              disabled\n              // onChange={handleInputChange}\n              // value={description}\n              // disabled={pageMode !== PAGE_MODE.CREATE}\n            />\n          </div>\n          <div className=\"\">\n            <DocumentUploader\n              ref={creditDocUploaderRef}\n              savedDocument={pageObj.savedDocuments?.[0] ? pageObj.savedDocuments?.[0] : {}}\n              mode={DOC_UPLOADER_MODE.VIEW}\n              queryParamForDocList={DOCUMENT_CATEGORY.DOCUMENT_CATEGORY_REAPPEAL_DOCUMENTS}\n              docUploadTypeTitle={`PDF/JPG/Excel/ZIP`}\n            />\n          </div>\n        </div>\n        <div className=\"w-62.5 px-5\">\n          <InputBox\n            label={\"Approved/Rejected By\"}\n            disabled\n            value={pageObj.stageStatus !== \"Initiated\" ? pageObj.updatedByUserName : \"\"}\n          />\n        </div>\n        {isMessageDialogVisible ? (\n          <DialogBox\n            visible={isMessageDialogVisible}\n            closable={false}\n            model={\"false\"}\n            onHide={() => setIsMessageDialogVisible(false)}\n            className=\"rounded-lg shadow-lg !w-240 bg-blend-darken !p-0 !h-162\"\n          >\n            <MainMessageBody params={params} handleCloseOverLay={onToggleMessage} />\n          </DialogBox>\n        ) : null}\n        {showConfirmApproval && renderConfirmApprovalPopUp(userProfile)}\n        {showConfirmRejected && renderRejectApprovalPopUp(userProfile)}\n        <SimpleOverlayPanel\n          className=\"rounded-lg shadow-lg !w-80 p-1.5 \"\n          ref={overlayPanelRef}\n          content={renderLoanDetail()}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default withRouter(PageReappeal);\n"],"names":["notificationOnTop","REAPEAL_STATUS","PageReappeal","props","userProfile","useSelector","state","isMessageDialogVisible","setIsMessageDialogVisible","useState","initialPageObjData","overlayPanelRef","useRef","pageObj","setPageObj","params","useParams","isNewMessageAvailable","setIsNewMessageAvailable","showConfirmApproval","setShowConfirmApproval","showConfirmRejected","setShowConfirmRejected","stage","setStage","rejectionReasonOptions","setRejectionReasonOptions","creditDocUploaderRef","dataForViewDetails","setDataForViewDetails","useEffect","init","getRejectionOptions","res","StageService","_b","_a","_d","_c","_f","_e","structLoanDocumentsFromAPIResponse","_g","_i","_h","_k","_j","_l","error","getEnvVariableValue","callAPI","ChatServices","intervalId","onToggleMessage","e","StaticMasterDataService","validateGetAPIResponse","options","record","err","findObjectWithStage","arr","obj","prepareForReject","onRejectFinancialApproval","objectWithStage","onCancelRejectionInPopUp","onSubmitRejectedInPopUp","enrichForReject","LINK_LOAN_DETAIL","LINK_DDE_STAGE_AND_STATUS","onApproveFinancialApproval","onCancelApprovalInPopUp","payloadForSubmitApproval","enrich","onSubmitApprovalInPopUp","enrichForApproveSubmit","res2","onViewDetails","viewDetailData","renderConfirmApprovalPopUp","jsx","DialogBox","jsxs","Text","InputBox","ButtonBox","BUTTON_TYPE","BUTTON_COLOR_TYPE","renderRejectApprovalPopUp","renderLoanDetail","formatDate","TextButton","chatIcon","Fragment","SimpleDropDown","InputTextArea","INPUT_STYLE_TYPE","DocumentUploader","DOC_UPLOADER_MODE","DOCUMENT_CATEGORY","MainMessageBody","SimpleOverlayPanel","PageReappeal$1","withRouter"],"mappings":"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"}