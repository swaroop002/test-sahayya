{"version":3,"file":"PageRecommendations-f265d090.js","sources":["../../src/views/transaction/PageCAM/Sections/CAMDeviations/CAMDeviations.tsx","../../src/views/transaction/PageCAM/Sections/RiskAndStrength/RiskAndStrength.tsx","../../src/views/transaction/PageCAM/Sections/SalesRecommendation/SalesRecommendation.tsx","../../src/views/transaction/PageCAM/Sections/SanctionConditions/SanctionConditions.tsx","../../src/views/transaction/PageCAM/Sections/SystemRuleViolations/SystemRuleViolations.tsx","../../src/views/transaction/PageCAM/PageRecommendations/PageRecommendations.tsx"],"sourcesContent":["import AclGuard from \"components/AclGuard/AclGuard\";\nimport AutoComplete from \"components/AutoComplete/AutoComplete\";\nimport ButtonBox from \"components/ButtonBox/ButtonBox\";\nimport DeviationTable from \"components/DeviationTable/DeviationTable\";\nimport { Column, EditableComponentRef } from \"components/EditableTableV2\";\nimport ErrorDialog from \"components/ErrorDialog/ErrorDialog\";\nimport IconButton, { BUTTON_TYPES } from \"components/IconButton/IconButton\";\nimport InputTextArea from \"components/InputTextArea/InputTextArea\";\nimport SaveComponent from \"components/Save/SaveComponent\";\nimport SimpleDropDown from \"components/SimpleDropDown\";\nimport Text from \"components/Text/Text\";\nimport TextButton from \"components/TextButton/TextButton\";\nimport ToastCustom from \"components/Toast\";\nimport i18n from \"i18n\";\nimport { DropdownChangeParams } from \"primereact/dropdown\";\nimport { ToastPositionType } from \"primereact/toast\";\nimport React, { ReactNode, useEffect, useRef, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport StaticMasterDataService from \"services/masterdata/StaticMaster/StaticMasterDataService\";\nimport CamService from \"services/transaction/CamService\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport {\n  getStandardValidator,\n  messageReplace,\n  parseStandardAPIErrorMessage,\n  validateGetAPIResponse,\n  validatePutAPIResponse,\n} from \"utils/CommonUtil\";\nimport {\n  BUTTON_TYPE,\n  INPUT_STYLE_TYPE,\n  PAGE_MODE,\n  STATIC_MASTER_TYPE_TOAST_TEXT,\n  TOAST_STYLE_TYPE,\n  TYPE_OF_DEVIATION,\n} from \"utils/Constant\";\n\ninterface IDropDownOptions {\n  name: string;\n  code: string;\n  uid: string;\n}\n\ninterface IDropdownList {\n  deviationType: IDropDownOptions[];\n  deviationForAutomatic: IDropDownOptions[];\n  deviationCategory: IDropDownOptions[];\n  deviationLevel: IDropDownOptions[];\n}\n\nexport type TDeviationType = \"TYPE_OF_DEVIATION_AUTOMATIC\" | \"TYPE_OF_DEVIATION_MANUAL\";\n\ninterface IPageObj {\n  dropdownOptions: IDropdownList;\n  stageUid: string;\n  tableObj: {\n    search: string;\n  };\n}\n\nexport interface ICAMDeviationRowData {\n  uid: string;\n  loan: {\n    uid: string;\n  };\n  stage: {\n    uid: string;\n  };\n  deviation: {\n    uid: string;\n    name: string;\n  };\n  smDeviationType: string;\n  actualDeviation: string;\n  mitigation: string;\n  isActive: boolean;\n  smDeviationCategory: string;\n}\n\nconst initialTableRowData: ICAMDeviationRowData = {\n  uid: \"\",\n  loan: {\n    uid: \"\",\n  },\n  stage: {\n    uid: \"\",\n  },\n  deviation: {\n    uid: \"\",\n    name: \"\",\n  },\n  smDeviationCategory: \"\",\n  smDeviationType: TYPE_OF_DEVIATION.TYPE_OF_DEVIATION_MANUAL,\n  actualDeviation: \"\",\n  mitigation: \"\",\n  isActive: true,\n};\n\nconst initialPageOj: IPageObj = {\n  dropdownOptions: {\n    deviationType: [],\n    deviationForAutomatic: [],\n    deviationCategory: [],\n    deviationLevel: [],\n  },\n  stageUid: \"\",\n  tableObj: {\n    search: ``,\n  },\n};\n\nconst CAMDeviations = () => {\n  \n  const params: { loanUid?: string; stageUid?: string } = useParams();\n\n  /*\n    -------------------------------------------------------\n      State\n    -------------------------------------------------------\n  */\n\n  const [pageObj, setPageObj] = useState<IPageObj>({ ...initialPageOj });\n  const [pageMode, setPageMode] = useState(PAGE_MODE.VIEW);\n  const [deviationSuggestionsTemplate, setDeviationSuggestionsTemplate] = useState<\n    {\n      name: string | undefined;\n      uid: string | undefined;\n    }[]\n  >([]);\n\n  const [position, setPosition] = useState<ToastPositionType | undefined>(\"bottom-right\");\n  const [showDialogAPIError, setShowDialogAPIError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState<any>(\"\");\n  const [, forceUpdate] = useState<boolean>(false);\n  const [toastMessage, setToastMessage] = useState(\"\");\n  const [triggerToast, setTriggerToast] = useState(false);\n  const [toastMessageVariant, setToastMessageVariant] = useState(TOAST_STYLE_TYPE.PRIMARY);\n\n  // ref\n  const tableRef = React.useRef<EditableComponentRef>(null);\n  const toastMessageRef = useRef(null);\n  const simpleValidator = useRef(\n    new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    })\n  );\n  // --------------------------- global variables ---------------------- //\n\n  /*\n     -------------------------------------------------------\n       useEffect\n     -------------------------------------------------------\n   */\n\n  useEffect(() => {\n    setPageObj((prevPageObj) => ({\n      ...prevPageObj,\n      stageUid: params?.stageUid ?? \"\",\n    }));\n    \n    getDeviationTypeOptions();\n    getDeviationCategory();\n    getDeviationLevel();\n  }, []);\n\n  useEffect(() => {\n    if (pageObj.stageUid) {\n      setPageObj((prev) => ({\n        ...prev,\n        tableObj: {\n          search: `?loanUid=${params.loanUid}&stageUid=${pageObj.stageUid}&reEvalDeviations=false`,\n        },\n      }));\n    }\n  }, [pageObj.stageUid]);\n\n  useEffect(() => {\n    if (pageObj.tableObj.search) {\n      tableRef.current?.search();\n    }\n  }, [pageObj.tableObj]);\n\n  useEffect(() => {\n    if (toastMessageRef?.current && toastMessage !== \"\") {\n      // @ts-ignore: will be fixed in future\n      toastMessageRef?.current?.showFunction();\n      setToastMessage(\"\");\n    }\n  }, [toastMessage, triggerToast]);\n\n  useEffect(() => {\n    if (errorMessage) {\n      setShowDialogAPIError(true);\n    }\n  }, [errorMessage]);\n\n  /*\n    -------------------------------------------------------\n      Service Calls\n    -------------------------------------------------------\n  */\n\n  const getDeviationTypeOptions = () => {\n    \n    const start = 0;\n    const limit = 100;\n    StaticMasterDataService.getAll(\n      start,\n      limit,\n      \"staticMasterType.code=TYPE_OF_DEVIATION\"\n    )\n      .then((res) => {\n        if (validateGetAPIResponse(res)) {\n          console.log(res.data.results,\"cam resulta\")\n          updateDropdownOptions(\"deviationType\", res?.data?.results);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setErrorMessage(parseStandardAPIErrorMessage(err));\n      });\n  };\n\n  const getDeviationCategory = () => {\n    CamService.getDeviationCategories(0, 30, \"\")\n      .then((res) => {\n        if (validateGetAPIResponse(res)) {\n          updateDropdownOptions(\"deviationCategory\", res?.data?.results);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setErrorMessage(parseStandardAPIErrorMessage(err));\n      });\n  };\n\n  const getDeviationLevel = () => {\n    CamService.getDeviationLevel(0, 30, \"\")\n      .then((res) => {\n        if (validateGetAPIResponse(res)) {\n          updateDropdownOptions(\"deviationLevel\", res?.data?.results);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setErrorMessage(parseStandardAPIErrorMessage(err));\n      });\n  };\n\n  /*\n    -------------------------------------------------------\n      Handlers\n    -------------------------------------------------------\n  */\n\n  const handleDeviationCategoryChange = (e: DropdownChangeParams, rowData: any) => {\n    const rowDataObj = { ...rowData };\n\n    rowDataObj.smDeviationCategory = e.target.value;\n    tableRef.current?.reportDataChange(rowDataObj);\n  };\n\n  const handleDeviationLevelChange = (e: DropdownChangeParams, rowData: any) => {\n    const rowDataObj = { ...rowData };\n    rowDataObj.maxApprovalLevel = e.target.value;\n    tableRef.current?.reportDataChange(rowDataObj);\n  };\n\n  const handleManualDeviationChange = (e: any, rowData: any) => {\n    const { value } = e.target;\n    if (typeof value === \"object\") {\n      let rowDataObj = { ...rowData };\n\n      rowDataObj = {\n        ...rowDataObj,\n        deviation: {\n          ...rowDataObj.deviation,\n          uid: e.target.value?.uid ?? \"\",\n          name: e.target.value?.name ?? \"\",\n        },\n      };\n      tableRef.current?.reportDataChange(rowDataObj);\n    } else {\n      let rowDataObj = { ...rowData };\n      rowDataObj = {\n        ...rowDataObj,\n        deviation: {\n          ...rowDataObj.deviation,\n          uid: \"\",\n          name: e.target.value ?? \"\",\n        },\n      };\n      tableRef.current?.reportDataChange(rowDataObj);\n    }\n  };\n\n  const handleChange = (\n    e: any,\n    options: {\n      rowData: ICAMDeviationRowData;\n      field: keyof ICAMDeviationRowData;\n    }\n  ) => {\n    let rowDataObj: ICAMDeviationRowData = { ...options.rowData };\n    rowDataObj = {\n      ...rowDataObj,\n      [`${options.field}`]: e.target.value,\n    };\n    tableRef.current?.reportDataChange(rowDataObj);\n  };\n\n  /* \n    --------------------------------------------------------\n    Validators:\n    --------------------------------------------------------\n  */\n\n  const validate = (e: any) => {\n    simpleValidator?.current?.showMessageFor(e?.target?.name);\n  };\n\n  const validateForm = () => {\n    let isValid = false;\n    isValid = simpleValidator?.current?.allValid() ?? false;\n    if (isValid) {\n      return isValid;\n    } else {\n      forceUpdate((prev) => !prev);\n      simpleValidator?.current?.showMessages();\n      forceUpdate((prev) => !prev);\n      return false;\n    }\n  };\n\n  /*\n    -------------------------------------------------------\n      Button Click Handlers\n    -------------------------------------------------------\n  */\n\n  const onAddDeviation = () => {\n    tableRef.current?.addRow({ ...initialTableRowData });\n  };\n\n  const onDeleteRow = (rowData: ICAMDeviationRowData) => {\n    tableRef.current?.deleteRow(rowData);\n    simpleValidator.current = new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    });\n  };\n\n  const onSave = async () => {\n    if (!validateForm()) {\n      return;\n    }\n    const payload = enrichForSave();\n\n    try {\n      const res = await CamService.updateDeviations(payload);\n\n      if (validatePutAPIResponse(res)) {\n        setToastMessageVariant(TOAST_STYLE_TYPE.PRIMARY);\n        setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.SAVED);\n        setTriggerToast(!triggerToast);\n        setPageMode(PAGE_MODE.VIEW);\n        tableRef.current?.clearAll();\n        tableRef.current?.search();\n      }\n    } catch (error) {\n      console.log(error);\n      setErrorMessage(parseStandardAPIErrorMessage(error));\n    }\n  };\n\n  const onEdit = () => setPageMode(PAGE_MODE.EDIT);\n\n  const onCancel = () => {\n    setPageMode(PAGE_MODE.VIEW);\n    resetValidator();\n    setPageObj((prev) => ({\n      ...prev,\n      tableObj: {\n        search: `?loanUid=${params.loanUid}&stageUid=${pageObj.stageUid}&reEvalDeviations=false`,\n      },\n    }));\n    tableRef.current?.clearAll();\n  };\n\n  const onPopulateAutoDeviations = async () => {\n    // //resetting the validator because on click of autopopulate, table search triggers and new row(s) are added but the previous added rows (if any) without data are getting validated\n    simpleValidator.current = new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    });\n\n    try {\n      setPageObj((prev) => ({\n        ...prev,\n        tableObj: {\n          search: `?loanUid=${params.loanUid}&stageUid=${pageObj.stageUid}&reEvalDeviations=true`,\n        },\n      }));\n      tableRef.current?.clearAll();\n    } catch (error) {\n      setErrorMessage(parseStandardAPIErrorMessage(error));\n    }\n  };\n  /*\n    -------------------------------------------------------\n      Helper Functions\n    -------------------------------------------------------\n  */\n\n  const searchManualDeviation = async (e: any, rowData: any) => {\n    let suggestionsTemplate: any[] = [];\n    try {\n      const search = `&type.code=${TYPE_OF_DEVIATION.TYPE_OF_DEVIATION_MANUAL}&deviationCategory.name=${rowData.smDeviationCategory}&name:lk=${e.query}`;\n\n      const res = await CamService.findManualDeviations(0, 10, search);\n\n      if (validateGetAPIResponse(res)) {\n        suggestionsTemplate = res?.data?.results?.map((record: any) => {\n          return {\n            name: record?.name,\n            uid: record?.uid,\n          };\n        });\n      }\n    } catch (error) {\n      setToastMessageVariant(TOAST_STYLE_TYPE.QUATERNARY);\n      setPosition(\"top-right\");\n      setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.ERROR);\n      setTriggerToast(!triggerToast);\n    }\n\n    if (suggestionsTemplate.length === 0) {\n      suggestionsTemplate.push({ name: \"\", uid: \"\" });\n    }\n\n    setDeviationSuggestionsTemplate(suggestionsTemplate);\n  };\n\n  const enrichForSave = () => {\n    const data = {\n      loanUid: params?.loanUid ? params?.loanUid : null,\n      stageUid: pageObj?.stageUid ? pageObj?.stageUid : null,\n    };\n\n    const updateCamDeviationsRowDataObj = (data: any): ICAMDeviationRowData => {\n      const obj: ICAMDeviationRowData = {\n        uid: data?.uid,\n        loan: {\n          uid: data?.loan?.uid,\n        },\n        stage: {\n          uid: data?.stage?.uid,\n        },\n        actualDeviation: data?.actualDeviation,\n        deviation: {\n          uid: data?.deviation?.uid,\n          name: data?.deviation?.name,\n        },\n        smDeviationType: data?.smDeviationType,\n        mitigation: data?.mitigation,\n        smDeviationCategory: data?.smDeviationCategory,\n        isActive: data?.isActive,\n      };\n      return obj;\n    };\n\n    let addRows = tableRef.current?.getAddedRecords() ?? [];\n    let deletedRows = tableRef.current?.getDeletedRecords() ?? [];\n    let updatedRows = tableRef.current?.getUpdatedRecords() ?? [];\n\n    addRows = addRows.map((rowData: any) => ({\n      ...rowData,\n      loan: {\n        uid: data?.loanUid,\n      },\n      stage: {\n        uid: data?.stageUid,\n      },\n      smDeviationCategory: rowData?.smDeviationCategory,\n    }));\n\n    deletedRows = deletedRows.map((rowData: any) => updateCamDeviationsRowDataObj(rowData));\n    updatedRows = updatedRows.map((rowData: any) => updateCamDeviationsRowDataObj(rowData));\n\n    const enrichData = [...addRows, ...deletedRows, ...updatedRows];\n\n    return enrichData;\n  };\n\n  const updateDropdownOptions = (key: keyof IDropdownList, options: any[]) => {\n    setPageObj((prevState: any) => ({\n      ...prevState,\n      dropdownOptions: {\n        ...prevState?.dropdownOptions,\n        [key]: options ?? [],\n      },\n    }));\n  };\n\n  const resetValidator = () => {\n    simpleValidator.current = new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    });\n    simpleValidator?.current?.hideMessages();\n  };\n\n  /*\n    -------------------------------------------------------\n      Sectional Rendering\n    -------------------------------------------------------\n  */\n\n  const manualDeviationsTemplate = (item: any) => {\n    if (item?.name === undefined || item?.name === \"\") {\n      return (\n        <div className=\"flex flex-col items-center justify-center h-39 pointer-events-none cursor-default\">\n          <Text className=\"text-primary-labelColor mt-2\" label=\"label.noDataFound\" />\n        </div>\n      );\n    }\n    return (\n      <div className=\"flex flex-col\">\n        <Text className=\"text-primary-labelColor\" label={item?.name} />\n      </div>\n    );\n  };\n\n  const renderHeaderTypeOfDeviation = () => {\n    return (\n      <div className=\"flex items-center\">\n        <Text label={i18n.t(\"label.cam.recommendation.table.typeofdeviation\")} />\n      </div>\n    );\n  };\n\n  const renderTypeOfDeviations = (rowData: any) => {\n    return (\n      <div className=\"h-24\">\n        <SimpleDropDown\n          placeholder=\"placeholder.legal.deviationType\"\n          name={`typeOfDeviation${rowData?.uid}`}\n          value={rowData?.smDeviationType}\n          variant={INPUT_STYLE_TYPE.PRIMARY}\n          options={pageObj.dropdownOptions.deviationType}\n          optionLabel=\"name\"\n          optionValue=\"code\"\n          onBlur={validate}\n          validation={simpleValidator?.current?.message(\n            `typeOfDeviation${rowData?.uid}`,\n            rowData?.smDeviationType,\n            \"mandatory\"\n          )}\n          hideLabel\n          disabled={rowData?.smDeviationType === TYPE_OF_DEVIATION.TYPE_OF_DEVIATION_AUTOMATIC}\n        />\n      </div>\n    );\n  };\n\n  const renderHeaderDeviationCategory = () => {\n    return (\n      <div className=\"flex items-center\">\n        <Text label={i18n.t(\"label.cam.recommendation.table.deviationCategory\")} />\n      </div>\n    );\n  };\n\n  const renderDeviationCategory = (rowData: any): ReactNode => {\n    return (\n      <div className=\"h-24\">\n        <SimpleDropDown\n          name={`deviationCat${rowData.uid}`}\n          options={pageObj.dropdownOptions.deviationCategory}\n          optionLabel=\"name\"\n          optionValue=\"name\"\n          value={rowData.smDeviationCategory ?? \"\"}\n          onChange={(e: DropdownChangeParams) => {\n            handleDeviationCategoryChange(e, rowData);\n          }}\n          onBlur={validate}\n          validation={simpleValidator?.current?.message(\n            `deviationCat${rowData.uid}`,\n            rowData.smDeviationCategory,\n            \"mandatory\"\n          )}\n          hideLabel\n          disabled={rowData?.smDeviationType === TYPE_OF_DEVIATION.TYPE_OF_DEVIATION_AUTOMATIC}\n        />\n      </div>\n    );\n  };\n\n  const renderHeaderDeviation = () => {\n    return (\n      <div className=\"flex items-center\">\n        <Text label={i18n.t(\"label.cam.recommendation.table.deviation\")} />\n      </div>\n    );\n  };\n\n  const renderDeviation = (rowData: any) => {\n    return (\n      <div className=\"h-24\">\n        {rowData?.smDeviationType === TYPE_OF_DEVIATION.TYPE_OF_DEVIATION_MANUAL ? (\n          <AutoComplete\n            variant={INPUT_STYLE_TYPE.PRIMARY}\n            placeholder=\"\"\n            name={`deviation${rowData?.uid}`}\n            value={rowData?.deviation?.name}\n            suggestions={deviationSuggestionsTemplate}\n            completeMethod={(e: any) => searchManualDeviation(e, rowData)}\n            onChange={(e) => handleManualDeviationChange(e, rowData)}\n            itemTemplate={manualDeviationsTemplate}\n            onBlur={validate}\n            validation={simpleValidator?.current?.message(\n              `deviation${rowData?.uid}`,\n              rowData?.deviation?.name,\n              `mandatory`\n            )}\n            hideLabel\n            disabled={!rowData.smDeviationCategory}\n          />\n        ) : (\n          <AutoComplete\n            variant={INPUT_STYLE_TYPE.PRIMARY}\n            placeholder=\"\"\n            name={`deviation${rowData?.uid}`}\n            value={rowData?.deviation?.name}\n            onBlur={validate}\n            validation={simpleValidator?.current?.message(\n              `deviation${rowData?.uid}`,\n              rowData?.deviation?.name,\n              `mandatory`\n            )}\n            hideLabel\n            disabled\n          />\n        )}\n      </div>\n    );\n  };\n\n  const renderHeaderDeviationLevel = () => {\n    return (\n      <div className=\"flex items-center\">\n        <Text label={i18n.t(\"label.cam.recommendation.table.deviationlevel\")} />\n      </div>\n    );\n  };\n\n  const renderDeviationLevel = (rowData: any): ReactNode => {\n    return (\n      <div className=\"h-24\">\n        <SimpleDropDown\n          name={`deviationLevel${rowData.uid}`}\n          options={pageObj.dropdownOptions.deviationLevel}\n          optionLabel=\"name\"\n          optionValue=\"name\"\n          value={rowData.maxApprovalLevel ?? \"\"}\n          onChange={(e: DropdownChangeParams) => {\n            handleDeviationLevelChange(e, rowData);\n          }}\n          onBlur={validate}\n          validation={simpleValidator?.current?.message(\n            `deviationLevel${rowData.uid}`,\n            rowData.maxApprovalLevel,\n            \"mandatory\"\n          )}\n          hideLabel\n        />\n      </div>\n    );\n  };\n\n  const renderHeaderActualDeviation = () => {\n    return (\n      <div className=\"flex items-center\">\n        <Text label={i18n.t(\"label.cam.recommendation.table.actualDeviation\")} />\n      </div>\n    );\n  };\n\n  const renderActualDeviation = (rowData: any) => {\n    return (\n      <div className=\"h-24\">\n        <InputTextArea\n          name={`actualDeviation${rowData?.uid}`}\n          className=\"!h-full\"\n          variant={INPUT_STYLE_TYPE.SECONDARY}\n          maxCount={1000}\n          autoResize\n          value={rowData?.actualDeviation}\n          onChange={(e) => handleChange(e, { rowData, field: \"actualDeviation\" })}\n          onBlur={validate}\n          validation={simpleValidator?.current?.message(\n            `actualDeviation${rowData?.uid}`,\n            rowData?.actualDeviation,\n            \"mandatory\"\n          )}\n          hideLabel\n        />\n      </div>\n    );\n  };\n\n  const renderHeaderMitigants = () => {\n    return (\n      <div className=\"flex items-center\">\n        <Text label={i18n.t(\"label.cam.recommendation.table.mitigants\")} />\n      </div>\n    );\n  };\n\n  const renderMitigants = (rowData: any) => {\n    return (\n      <div className=\"h-24\">\n        <InputTextArea\n          name={`mitigants${rowData?.uid}`}\n          className=\"!h-full\"\n          variant={INPUT_STYLE_TYPE.SECONDARY}\n          maxCount={1000}\n          autoResize\n          value={rowData?.mitigation}\n          onChange={(e) => handleChange(e, { rowData, field: \"mitigation\" })}\n          onBlur={validate}\n          validation={simpleValidator?.current?.message(\n            `mitigants${rowData?.uid}`,\n            rowData?.mitigation,\n            \"mandatory\"\n          )}\n          hideLabel\n        />\n      </div>\n    );\n  };\n\n  const renderHeaderAction = () => {\n    return (\n      <div className=\"flex items-center\">\n        <Text label={i18n.t(\"label.cam.recommendation.table.action\")} />\n      </div>\n    );\n  };\n\n  const renderActions = (rowData: any) => {\n    return (\n      <div className=\"\">\n        <IconButton\n          buttonType={BUTTON_TYPES.DELETE}\n          onClick={() => onDeleteRow(rowData)}\n          tooltipOptions={{\n            position: \"left\",\n            className: \"text-xs font-Roboto bg-black text-white !p-1 rounded-md \",\n            showDelay: \"1000,\",\n            hideDelay: \"300\",\n          }}\n          disabled={\n            pageMode === PAGE_MODE.VIEW ||\n            rowData?.smDeviationType === TYPE_OF_DEVIATION.TYPE_OF_DEVIATION_AUTOMATIC\n          }\n        />\n      </div>\n    );\n  };\n\n  /*\n    -------------------------------------------------------\n    Main Rendering\n    -------------------------------------------------------\n  */\n  return (\n    <div className=\"grid gap-5 mb-5\">\n      <SaveComponent\n        className=\"overflow-x-auto\"\n        title={\"\"}\n        pageMode={pageMode}\n        onEdit={onEdit}\n        onCancel={onCancel}\n        onSave={onSave}\n      >\n        <AclGuard override={{ read: pageMode === PAGE_MODE.VIEW }}>\n          <div className=\"w-full flex flex-col gap-3\">\n            <div className=\"self-end\">\n              <div className=\"flex gap-3\">\n                <TextButton\n                  className=\"text-xs text-primary-primaryBlue\"\n                  label={\"label.cam.recommendation.deviations.populateAutoDeviations\"}\n                  onClick={onPopulateAutoDeviations}\n                  isIgnoreAccessLevel\n                />\n\n                <ButtonBox\n                  buttonType={BUTTON_TYPE.ICON_TEXT_ROW}\n                  customLabel={\"Add\"}\n                  onClick={onAddDeviation}\n                />\n              </div>\n            </div>\n\n            {pageObj.stageUid ? (\n              <div className=\"w-full\">\n                <DeviationTable\n                  ref={tableRef}\n                  standardDataFormatPromise={CamService.getCamDeviations}\n                  search={pageObj.tableObj.search}\n                  uniqueKey=\"uid\"\n                  mode={\"UPDATE\"}\n                  isIgnoreInitialLoad\n                >\n                  <Column\n                    header={renderHeaderTypeOfDeviation}\n                    className=\"text-primary-ptext-1000 text-left text-xs h-12 pl-6\"\n                    body={renderTypeOfDeviations}\n                    style={{ minWidth: \"170px\", width: \"170px\" }}\n                  />\n\n                  <Column\n                    header={renderHeaderDeviationCategory}\n                    className=\"pl-6 py-3 text-primary-ptext-1000 text-left text-xs\"\n                    body={renderDeviationCategory}\n                    style={{ minWidth: \"170px\", width: \"170px\" }}\n                  />\n\n                  <Column\n                    header={renderHeaderDeviation}\n                    className=\" pl-6 py-3 text-primary-ptext-1000 text-left text-xs\"\n                    body={renderDeviation}\n                    style={{ minWidth: \"256px\", width: \"256px\" }}\n                  />\n\n                  <Column\n                    header={renderHeaderDeviationLevel}\n                    className=\"pl-6 py-3 text-primary-ptext-1000 text-left text-xs\"\n                    body={renderDeviationLevel}\n                    style={{ minWidth: \"170px\", width: \"170px\" }}\n                  />\n\n                  <Column\n                    header={renderHeaderActualDeviation}\n                    className=\"!w-64 pl-6 py-3 text-primary-ptext-1000 text-left text-xs\"\n                    body={renderActualDeviation}\n                    style={{ minWidth: \"256px\", width: \"256px\" }}\n                  />\n                  <Column\n                    header={renderHeaderMitigants}\n                    className=\"!w-64 pl-6 py-3 text-primary-ptext-1000 text-left text-xs\"\n                    body={renderMitigants}\n                    style={{ minWidth: \"256px\", width: \"256px\" }}\n                  />\n                  <Column\n                    header={renderHeaderAction}\n                    className=\"px-6 py-3 text-primary-ptext-1000 text-center text-xs\"\n                    style={{ minWidth: \"50px\", width: \"50px\" }}\n                    body={renderActions}\n                  />\n                </DeviationTable>\n              </div>\n            ) : null}\n          </div>\n        </AclGuard>\n      </SaveComponent>\n\n      <ToastCustom\n        position={\"bottom-right\"}\n        ref={toastMessageRef}\n        toastText={toastMessage}\n        variant={TOAST_STYLE_TYPE.PRIMARY}\n      />\n\n      <ErrorDialog\n        onHide={() => {\n          setShowDialogAPIError(false);\n          setErrorMessage(\"\");\n        }}\n        visible={showDialogAPIError}\n        errorMessage={errorMessage}\n      />\n    </div>\n  );\n};\n\nexport default CAMDeviations;\n","import AclGuard from \"components/AclGuard/AclGuard\";\nimport ButtonBox from \"components/ButtonBox/ButtonBox\";\nimport EditableTableV2, { Column, EditableComponentRef } from \"components/EditableTableV2\";\nimport ErrorDialog from \"components/ErrorDialog/ErrorDialog\";\nimport IconButton, { BUTTON_TYPES } from \"components/IconButton/IconButton\";\nimport InputBox from \"components/InputBox/InputBox\";\nimport InputTextArea from \"components/InputTextArea/InputTextArea\";\nimport SaveComponent from \"components/Save/SaveComponent\";\nimport SimpleDropDown from \"components/SimpleDropDown\";\nimport Text from \"components/Text/Text\";\nimport ToastCustom from \"components/Toast\";\nimport i18n from \"i18n\";\nimport { DropdownChangeParams } from \"primereact/dropdown\";\nimport React, { BaseSyntheticEvent, ReactNode, useEffect, useRef, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport CamService from \"services/transaction/CamService\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport {\n  getStandardValidator,\n  messageReplace,\n  parseStandardAPIErrorMessage,\n  validatePutAPIResponse,\n} from \"utils/CommonUtil\";\nimport {\n  BUTTON_TYPE,\n  CAM_AND_RECOMMENDATION_RISK_STRENGTH,\n  INPUT_STYLE_TYPE,\n  PAGE_MODE,\n  STATIC_MASTER_TYPE_TOAST_TEXT,\n  TOAST_STYLE_TYPE,\n} from \"utils/Constant\";\n\ninterface IPageObj {\n  stageUid: string;\n  tableObj: {\n    search: string;\n  };\n}\n\nexport interface IRiskStrengthTableRowData {\n  uid: string;\n  smRiskStrength: string;\n  remarks: string;\n  description: string;\n  isActive: boolean;\n}\n\nconst initialRiskStrengthTableRowData: IRiskStrengthTableRowData = {\n  uid: \"\",\n  smRiskStrength: \"\",\n  remarks: \"\",\n  description: \"\",\n  isActive: true,\n};\n\nconst initialPageOj: IPageObj = {\n  stageUid: \"\",\n  tableObj: {\n    search: ``,\n  },\n};\n\nconst RiskAndStrength = () => {\n  const params: { loanUid?: string; stageUid?: string } = useParams();\n\n  /*\n    -------------------------------------------------------\n      State\n    -------------------------------------------------------\n  */\n\n  const [pageObj, setPageObj] = useState<IPageObj>({ ...initialPageOj });\n  const [pageMode, setPageMode] = useState(PAGE_MODE.VIEW);\n\n  const [, forceUpdate] = useState<boolean>(false);\n  const [toastMessage, setToastMessage] = useState(\"\");\n  const [triggerToast, setTriggerToast] = useState(false);\n  const [errorMessage, setErrorMessage] = useState<any>(\"\");\n  const [showDialogAPIError, setShowDialogAPIError] = useState(false);\n\n  // ref\n  const riskStrengthTableRef = useRef<EditableComponentRef>(null);\n  const toastMessageRef = useRef(null);\n  const simpleValidator = useRef(\n    new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    })\n  );\n\n  // --------------------------- global variables ---------------------- //\n\n  /*\n     -------------------------------------------------------\n       useEffect\n     -------------------------------------------------------\n   */\n\n  useEffect(() => {\n    setPageObj((prevPageObj) => ({\n      ...prevPageObj,\n      stageUid: params?.stageUid ?? \"\",\n    }));\n  }, []);\n\n  useEffect(() => {\n    if (params?.loanUid && pageObj.stageUid) {\n      setPageObj((prev) => {\n        return {\n          ...prev,\n          tableObj: {\n            search: `&loan.uid=${params.loanUid}&stage.uid=${pageObj.stageUid}`,\n          },\n        };\n      });\n    }\n  }, [params?.loanUid, pageObj.stageUid]);\n\n  useEffect(() => {\n    if (riskStrengthTableRef && riskStrengthTableRef.current && pageObj.tableObj.search) {\n      riskStrengthTableRef.current?.search();\n    }\n  }, [pageObj.tableObj.search]);\n\n  useEffect(() => {\n    if (toastMessageRef?.current && toastMessage !== \"\") {\n      // @ts-ignore: will be fixed in future\n      toastMessageRef?.current?.showFunction();\n      setToastMessage(\"\");\n    }\n  }, [toastMessage, triggerToast]);\n\n  useEffect(() => {\n    if (errorMessage) {\n      setShowDialogAPIError(true);\n    }\n  }, [errorMessage]);\n\n  /*\n    -------------------------------------------------------\n      Service Calls\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n      Handlers\n    -------------------------------------------------------\n  */\n\n  const handleRiskOrStrengthChange = (e: DropdownChangeParams, rowData: any) => {\n    const rowDataObj = { ...rowData };\n    rowDataObj.smRiskStrength = e.target.value;\n    riskStrengthTableRef.current?.reportDataChange(rowDataObj);\n  };\n\n  /* \n    --------------------------------------------------------\n    Validators:\n    --------------------------------------------------------\n  */\n\n  const validate = (e: any) => {\n    simpleValidator?.current?.showMessageFor(e?.target?.name);\n  };\n\n  const validateForm = () => {\n    let isValid = false;\n    isValid = simpleValidator?.current?.allValid() ?? false;\n    if (isValid) {\n      return isValid;\n    } else {\n      forceUpdate((prev) => !prev);\n      simpleValidator?.current?.showMessages();\n      forceUpdate((prev) => !prev);\n      return false;\n    }\n  };\n\n  /*\n    -------------------------------------------------------\n      Button Click Handlers\n    -------------------------------------------------------\n  */\n\n  const onEdit = () => setPageMode(PAGE_MODE.EDIT);\n\n  const onCancel = () => {\n    resetValidator();\n    setPageMode(PAGE_MODE.VIEW);\n    riskStrengthTableRef?.current?.search();\n  };\n\n  const onSave = async () => {\n    if (!validateForm()) return;\n\n    const payload = enrichForSave();\n\n    try {\n      const res = await CamService.updateRiskAndStrength(payload);\n\n      if (validatePutAPIResponse(res)) {\n        setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.SAVED);\n        setTriggerToast(!triggerToast);\n        setPageMode(PAGE_MODE.VIEW);\n\n        riskStrengthTableRef?.current?.search();\n      }\n    } catch (err) {\n      console.log(err);\n      setErrorMessage(parseStandardAPIErrorMessage(err));\n    }\n  };\n\n  const onAddRiskStrengthTableRow = () => {\n    riskStrengthTableRef.current?.addRow(initialRiskStrengthTableRowData);\n  };\n\n  /*\n    -------------------------------------------------------\n      Helper Functions\n    -------------------------------------------------------\n  */\n\n  const enrichForSave = () => {\n    const prepareRecords = () => {\n      const riskAndStrengthRecords = [\n        ...(riskStrengthTableRef.current?.getAddedRecords() ?? []),\n        ...(riskStrengthTableRef.current?.getUpdatedRecords() ?? []),\n        ...(riskStrengthTableRef.current?.getDeletedRecords() ?? []),\n      ].map((record) => ({\n        uid: record?.uid ? record?.uid : null,\n        smRiskStrength: record?.smRiskStrength ?? \"\",\n        remarks: record?.remarks ?? \"\",\n        description: record?.description ?? \"\",\n        isActive: record?.isActive ?? false,\n      }));\n\n      return riskAndStrengthRecords;\n    };\n\n    const payloadData = {\n      loan: {\n        uid: params?.loanUid ?? null,\n      },\n      stage: {\n        uid: pageObj.stageUid,\n      },\n      riskStrengths: prepareRecords(),\n    };\n\n    return payloadData;\n  };\n\n  const resetValidator = () => {\n    simpleValidator.current = new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    });\n    simpleValidator?.current?.hideMessages();\n  };\n\n  /*\n    -------------------------------------------------------\n      Sectional Rendering\n    -------------------------------------------------------\n  */\n\n  const renderHeaderRiskStrength = () => {\n    return (\n      <div className=\"flex items-center\">\n        <Text label={i18n.t(\"label.cam.recommendation.table.riskStrength\")} />\n      </div>\n    );\n  };\n\n  const renderRiskStrength = (rowData: any): ReactNode => {\n    return (\n      <div className=\"h-24\">\n        <SimpleDropDown\n          name={`smRiskStrength${rowData.uid}`}\n          className=\"!w-30\"\n          options={[\n            { label: \"Risk\", value: CAM_AND_RECOMMENDATION_RISK_STRENGTH.RISK },\n            { label: \"Strength\", value: CAM_AND_RECOMMENDATION_RISK_STRENGTH.STRENGTH },\n          ]}\n          optionLabel=\"label\"\n          optionValue=\"value\"\n          value={rowData.smRiskStrength ?? \"\"}\n          onChange={(e: DropdownChangeParams) => {\n            handleRiskOrStrengthChange(e, rowData);\n          }}\n          onBlur={validate}\n          validation={simpleValidator?.current?.message(\n            `smRiskStrength${rowData.uid}`,\n            rowData.smRiskStrength,\n            \"mandatory\"\n          )}\n          hideLabel\n        />\n      </div>\n    );\n  };\n\n  const renderHeaderDescription = () => {\n    return (\n      <div className=\"flex items-center\">\n        <Text label={i18n.t(\"label.cam.recommendation.table.desc\")} />\n      </div>\n    );\n  };\n\n  const renderRiskStrengthDescription = (rowData: any): ReactNode => {\n    return (\n      <div className=\"h-24\">\n        <InputTextArea\n          name={`description${rowData?.uid}`}\n          className=\"!h-full\"\n          variant={INPUT_STYLE_TYPE.SECONDARY}\n          maxCount={200}\n          autoResize\n          value={rowData?.description}\n          onChange={(e: BaseSyntheticEvent) => {\n            const rowDataObj = { ...rowData };\n            rowDataObj.description = e.target.value;\n            riskStrengthTableRef.current?.reportDataChange(rowDataObj);\n          }}\n          onBlur={validate}\n          validation={simpleValidator?.current?.message(\n            `description${rowData?.uid}`,\n            rowData?.description,\n            \"mandatory\"\n          )}\n          hideLabel\n        />\n      </div>\n    );\n  };\n\n  const renderHeaderRemarks = () => {\n    return (\n      <div className=\"flex items-center\">\n        <Text label={i18n.t(\"label.cam.recommendation.table.remarkMitigants\")} />\n      </div>\n    );\n  };\n\n  const renderRiskStrengthRemarks = (rowData: any): ReactNode => {\n    return (\n      <div className=\"h-24\">\n        <InputBox\n          name={`remarks${rowData?.uid}`}\n          className=\"!h-full\"\n          variant={INPUT_STYLE_TYPE.SECONDARY}\n          value={rowData?.remarks}\n          onChange={(e: BaseSyntheticEvent) => {\n            const rowDataObj = { ...rowData };\n            rowDataObj.remarks = e.target.value;\n            riskStrengthTableRef.current?.reportDataChange(rowDataObj);\n          }}\n          onBlur={validate}\n          validation={simpleValidator?.current?.message(\n            `remarks${rowData?.uid}`,\n            rowData?.remarks,\n            \"mandatory\"\n          )}\n          hideLabel\n        />\n      </div>\n    );\n  };\n\n  const renderHeaderAction = () => {\n    return (\n      <div className=\"flex items-center\">\n        <Text label={i18n.t(\"label.cam.recommendation.table.action\")} />\n      </div>\n    );\n  };\n\n  const renderRiskStrengthAction = (rowData: any): ReactNode => {\n    return (\n      <IconButton\n        className={`select-none`}\n        buttonType={BUTTON_TYPES.DELETE}\n        onClick={() => {\n          riskStrengthTableRef.current?.deleteRow(rowData);\n          simpleValidator.current = new SimpleReactValidator({\n            validators: { ...getStandardValidator() },\n            ...messageReplace(),\n            autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n          });\n        }}\n      />\n    );\n  };\n\n  /*\n    -------------------------------------------------------\n    Main Rendering\n    -------------------------------------------------------\n  */\n  return (\n    <React.Fragment>\n      <div className=\"grid gap-5 mb-5\">\n        <SaveComponent\n          title={\"\"}\n          pageMode={pageMode}\n          onEdit={onEdit}\n          onCancel={onCancel}\n          onSave={onSave}\n        >\n          <AclGuard override={{ read: pageMode === PAGE_MODE.VIEW }}>\n            <div className=\"flex flex-col gap-3\">\n              <div className=\"self-end\">\n                <ButtonBox\n                  buttonType={BUTTON_TYPE.ICON_TEXT_ROW}\n                  customLabel={\"Add\"}\n                  onClick={onAddRiskStrengthTableRow}\n                />\n              </div>\n\n              {params?.loanUid && pageObj.stageUid && (\n                <div>\n                  <EditableTableV2\n                    ref={riskStrengthTableRef}\n                    uniqueKey=\"uid\"\n                    standardDataFormatPromise={CamService.getRiskAndStrength}\n                    search={pageObj.tableObj.search}\n                    paginator\n                    mode={\"UPDATE\"}\n                    className=\"table-auto-height\"\n                  >\n                    <Column\n                      header={renderHeaderRiskStrength}\n                      className=\"w-30 pl-6 py-3 text-primary-ptext-1000 text-left text-xs\"\n                      body={renderRiskStrength}\n                    />\n\n                    <Column\n                      header={renderHeaderDescription}\n                      className=\"pl-6 py-3 text-primary-ptext-1000 text-left text-xs\"\n                      body={renderRiskStrengthDescription}\n                    />\n\n                    <Column\n                      header={renderHeaderRemarks}\n                      className=\"pl-6 py-3 text-primary-ptext-1000 text-left text-xs\"\n                      body={renderRiskStrengthRemarks}\n                    />\n\n                    <Column\n                      header={renderHeaderAction}\n                      className=\"px-6 py-3 text-primary-ptext-1000 text-center text-xs\"\n                      style={{ minWidth: \"50px\", width: \"50px\" }}\n                      body={renderRiskStrengthAction}\n                    />\n                  </EditableTableV2>\n                </div>\n              )}\n            </div>\n          </AclGuard>\n        </SaveComponent>\n\n        <ToastCustom\n          position={\"bottom-right\"}\n          ref={toastMessageRef}\n          toastText={toastMessage}\n          variant={TOAST_STYLE_TYPE.PRIMARY}\n        />\n\n        <ErrorDialog\n          onHide={() => {\n            setShowDialogAPIError(false);\n            setErrorMessage(\"\");\n          }}\n          visible={showDialogAPIError}\n          errorMessage={errorMessage}\n        />\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport default RiskAndStrength;\n","import AclGuard from \"components/AclGuard\";\nimport DatePicker from \"components/DatePicker/DatePicker\";\nimport InputBox from \"components/InputBox/InputBox\";\nimport InputTextArea from \"components/InputTextArea\";\nimport SkeletonCustom from \"components/Skeleton\";\nimport SystemDatePicker from \"components/SystemDatePicker/SystemDatePicker\";\nimport Text from \"components/Text/Text\";\nimport React, { useEffect, useState } from \"react\";\nimport { INPUT_STYLE_TYPE } from \"utils/Constant\";\n\ninterface IProps {\n  className?: string;\n  isLoading: boolean;\n  data: ISalesRecommendationPageObj[];\n}\n\nexport interface ISalesRecommendationPageObj {\n  uid: string;\n  recommendationDate: Date | string;\n  recommendedBy: string;\n  recommendation: string;\n}\n\nexport const initialSalesRecommendationPageObj: ISalesRecommendationPageObj = {\n  uid: \"\",\n  recommendationDate: \"\",\n  recommendedBy: \"\",\n  recommendation: \"\",\n};\n\nconst SalesRecommendation: React.FC<IProps> = (props: IProps) => {\n  const { className, data, isLoading } = props;\n  /*\n    -------------------------------------------------------\n      State\n    -------------------------------------------------------\n  */\n  const [pageObj, setPageObj] = useState<ISalesRecommendationPageObj[]>([]);\n\n  // --------------------------- global variables ---------------------- //\n\n  /*\n     -------------------------------------------------------\n       useEffect\n     -------------------------------------------------------\n   */\n\n  useEffect(() => {\n    setPageObj([...data]);\n  }, [data]);\n\n  /*\n    -------------------------------------------------------\n      Service Calls\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n      Handlers\n    -------------------------------------------------------\n  */\n\n  /* \n    --------------------------------------------------------\n    Validators:\n    --------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n      Button Click Handlers\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n      Helper Functions\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n      Sectional Renders\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n    Main Renders\n    -------------------------------------------------------\n  */\n\n  return (\n    <div>\n      {isLoading ? (\n        <SkeletonCustom height=\"19.375rem\" width=\"100%\" borderRadius=\"8px\" animation=\"wave\" />\n      ) : (\n        <AclGuard override={{ read: true }}>\n          <div className={`flex flex-col gap-3 ${className ?? \"\"}`}>\n            <React.Fragment>\n              {pageObj.length > 0 ? (\n                <>\n                  {pageObj.map(\n                    (salesRecommendation: ISalesRecommendationPageObj, index: number) => {\n                      return (\n                        <div\n                          key={`recommendation-card-${salesRecommendation.uid}`}\n                          className={` p-5 flex flex-col gap-3 border border-primary-ptext-500 rounded-xl`}\n                        >\n                          <div>\n                            <Text\n                              className=\"text-primary-sideBarBgColor text-sm font-bold mb-1\"\n                              label={\"label.cam.recommendation.recommendation\"}\n                              args={{ count: `${index + 1}` }}\n                            />\n                          </div>\n\n                          <div className=\"flex flex-wrap gap-3\">\n                            <div className=\"w-61\">\n                              <SystemDatePicker\n                                name=\"recommendationDate\"\n                                label={\"label.cam.recommendation.dateofrecommendation*\"}\n                                value={new Date(salesRecommendation.recommendationDate)}\n                                variant={INPUT_STYLE_TYPE.SECONDARY}\n                                hideErrorRow\n                              />\n                            </div>\n\n                            <div className=\"w-61\">\n                              <InputBox\n                                className=\"!h-6\"\n                                name=\"recommendedBy\"\n                                label={\"label.cam.recommendation.recommendedBy*\"}\n                                value={salesRecommendation.recommendedBy}\n                                hideErrorRow\n                              />\n                            </div>\n\n                            <div className=\"w-64 h-24\">\n                              <InputTextArea\n                                className=\"!h-full\"\n                                labelClassNames=\"text-xs !text-primary-gray-700\"\n                                name=\"recommendation\"\n                                label={\"label.cam.recommendation.recommendation*\"}\n                                value={salesRecommendation.recommendation}\n                                variant={INPUT_STYLE_TYPE.SECONDARY}\n                                hideErrorRow\n                                autoResize\n                              />\n                            </div>\n                          </div>\n                        </div>\n                      );\n                    }\n                  )}\n                </>\n              ) : (\n                <div\n                  className={` p-5 w-full h-56 flex items-center justify-center border border-primary-ptext-500 rounded-xl`}\n                >\n                  <Text className=\"text-secondary-steelBlue-500\" label={\"No Data\"} />\n                </div>\n              )}\n            </React.Fragment>\n          </div>\n        </AclGuard>\n      )}\n    </div>\n  );\n};\n\nexport default SalesRecommendation;\n","import AclGuard from \"components/AclGuard/AclGuard\";\nimport ButtonBox from \"components/ButtonBox/ButtonBox\";\nimport EditableTableV2, { Column, EditableComponentRef } from \"components/EditableTableV2\";\nimport ErrorDialog from \"components/ErrorDialog/ErrorDialog\";\nimport IconButton, { BUTTON_TYPES } from \"components/IconButton/IconButton\";\nimport InputBox from \"components/InputBox/InputBox\";\nimport InputTextArea from \"components/InputTextArea/InputTextArea\";\nimport SaveComponent from \"components/Save/SaveComponent\";\nimport SimpleDropDown from \"components/SimpleDropDown\";\nimport Text from \"components/Text/Text\";\nimport ToastCustom from \"components/Toast\";\nimport i18n from \"i18n\";\nimport { DropdownChangeParams } from \"primereact/dropdown\";\nimport React, { BaseSyntheticEvent, ReactNode, useEffect, useRef, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport StaticMasterDataService from \"services/masterdata/StaticMaster/StaticMasterDataService\";\nimport CamService from \"services/transaction/CamService\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport {\n  getStandardValidator,\n  messageReplace,\n  parseStandardAPIErrorMessage,\n  validateGetAPIResponse,\n  validatePutAPIResponse,\n} from \"utils/CommonUtil\";\nimport {\n  BUTTON_TYPE,\n  INPUT_STYLE_TYPE,\n  PAGE_MODE,\n  STATIC_MASTER_TYPE_TOAST_TEXT,\n  TOAST_STYLE_TYPE,\n} from \"utils/Constant\";\n\ninterface IDropDownOptions {\n  name: string;\n  code: string;\n  uid: string;\n}\n\ninterface IDropdownList {\n  sanctionCategory: IDropDownOptions[];\n  sanctionType: IDropDownOptions[];\n}\n\ninterface IPageObj {\n  dropdownOptions: IDropdownList;\n  stageUid: string;\n  tableObj: {\n    search: string;\n  };\n}\n\ninterface ISanctionConditionTableRowData {\n  uid: string;\n  sanctionCondition: string;\n  smSanctionType: string;\n  smCategory: string;\n  remarks: string;\n  isActive: true;\n}\n\nconst initialSanctionConditionTableRowData: ISanctionConditionTableRowData = {\n  uid: \"\",\n  sanctionCondition: \"\",\n  smSanctionType: \"\",\n  smCategory: \"\",\n  remarks: \"\",\n  isActive: true,\n};\n\nconst initialPageOj: IPageObj = {\n  dropdownOptions: {\n    sanctionCategory: [],\n    sanctionType: [],\n  },\n  stageUid: \"\",\n  tableObj: {\n    search: ``,\n  },\n};\n\nconst SanctionConditions = () => {\n  const params: { loanUid?: string; stageUid?: string } = useParams();\n\n  /*\n    -------------------------------------------------------\n      State\n    -------------------------------------------------------\n  */\n\n  const [pageObj, setPageObj] = useState<IPageObj>({ ...initialPageOj });\n  const [pageMode, setPageMode] = useState(PAGE_MODE.VIEW);\n\n  const [, forceUpdate] = useState<boolean>(false);\n  const [toastMessage, setToastMessage] = useState(\"\");\n  const [triggerToast, setTriggerToast] = useState(false);\n  const [errorMessage, setErrorMessage] = useState<any>(\"\");\n  const [showDialogAPIError, setShowDialogAPIError] = useState(false);\n\n  // ref\n  const tableRef = React.useRef<EditableComponentRef>(null);\n  const sanctionConditionsTableRef = useRef<EditableComponentRef>(null);\n  const toastMessageRef = useRef(null);\n  const simpleValidator = useRef(\n    new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    })\n  );\n\n  // --------------------------- global variables ---------------------- //\n\n  /*\n     -------------------------------------------------------\n       useEffect\n     -------------------------------------------------------\n   */\n\n  useEffect(() => {\n    setPageObj((prevPageObj) => ({\n      ...prevPageObj,\n      stageUid: params?.stageUid ?? \"\",\n    }));\n    getSanctionTypeOptions();\n    getSanctionCategory();\n  }, []);\n\n  useEffect(() => {\n    if (params?.loanUid && pageObj.stageUid) {\n      setPageObj((prev) => {\n        return {\n          ...prev,\n          tableObj: {\n            search: `&loan.uid=${params.loanUid}&stage.uid=${pageObj.stageUid}`,\n          },\n        };\n      });\n    }\n  }, [params?.loanUid, pageObj.stageUid]);\n\n  useEffect(() => {\n    if (\n      sanctionConditionsTableRef &&\n      sanctionConditionsTableRef.current &&\n      pageObj.tableObj.search\n    ) {\n      sanctionConditionsTableRef.current?.search();\n    }\n  }, [pageObj.tableObj.search]);\n\n  useEffect(() => {\n    if (toastMessageRef?.current && toastMessage !== \"\") {\n      // @ts-ignore: will be fixed in future\n      toastMessageRef?.current?.showFunction();\n      setToastMessage(\"\");\n    }\n  }, [toastMessage, triggerToast]);\n\n  useEffect(() => {\n    if (errorMessage) {\n      setShowDialogAPIError(true);\n    }\n  }, [errorMessage]);\n\n  /*\n    -------------------------------------------------------\n      Service Calls\n    -------------------------------------------------------\n  */\n\n  const getSanctionTypeOptions = async () => {\n    StaticMasterDataService.getAll(\n      0,\n      30,\n      \"staticMasterType.code=SANCTION_CONDITION_TYPE&\"\n    )\n      .then((res) => {\n        if (validateGetAPIResponse(res)) {\n          updateDropdownOptions(\"sanctionType\", res?.data?.results);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setErrorMessage(parseStandardAPIErrorMessage(err));\n      });\n  };\n\n  const getSanctionCategory = async () => {\n    StaticMasterDataService.getAll(\n      0,\n      10,\n      \"staticMasterType.code=SANCTION_CONDITION_CATEGORY&\"\n    )\n      .then((res) => {\n        if (validateGetAPIResponse(res)) {\n          updateDropdownOptions(\"sanctionCategory\", res?.data?.results);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setErrorMessage(parseStandardAPIErrorMessage(err));\n      });\n  };\n\n  /*\n    -------------------------------------------------------\n      Handlers\n    -------------------------------------------------------\n  */\n\n  const handleSancDropdownChange = (e: DropdownChangeParams, rowData: any) => {\n    const rowDataObj = { ...rowData };\n    if (e.target.name.includes(\"smSanctionType\")) {\n      rowDataObj.smSanctionType = e.target.value;\n    } else if (e.target.name.includes(\"smCategory\")) {\n      rowDataObj.smCategory = e.target.value;\n    }\n    sanctionConditionsTableRef.current?.reportDataChange(rowDataObj);\n  };\n\n  /* \n    --------------------------------------------------------\n    Validators:\n    --------------------------------------------------------\n  */\n\n  const validate = (e: any) => {\n    simpleValidator?.current?.showMessageFor(e?.target?.name);\n  };\n\n  const validateForm = () => {\n    let isValid = false;\n    isValid = simpleValidator?.current?.allValid() ?? false;\n    if (isValid) {\n      return isValid;\n    } else {\n      forceUpdate((prev) => !prev);\n      simpleValidator?.current?.showMessages();\n      forceUpdate((prev) => !prev);\n      return false;\n    }\n  };\n\n  /*\n    -------------------------------------------------------\n      Button Click Handlers\n    -------------------------------------------------------\n  */\n\n  const onEdit = () => setPageMode(PAGE_MODE.EDIT);\n\n  const onCancel = () => {\n    resetValidator();\n    setPageMode(PAGE_MODE.VIEW);\n    sanctionConditionsTableRef?.current?.search();\n  };\n\n  const onSave = async () => {\n    if (!validateForm()) return;\n\n    const payload = enrichForSave();\n\n    try {\n      const res = await CamService.updateSanctionConditions(payload);\n\n      if (validatePutAPIResponse(res)) {\n        setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.SAVED);\n        setTriggerToast(!triggerToast);\n        setPageMode(PAGE_MODE.VIEW);\n\n        sanctionConditionsTableRef?.current?.search();\n      }\n    } catch (err) {\n      console.log(err);\n      setErrorMessage(parseStandardAPIErrorMessage(err));\n    }\n  };\n\n  const onAddSancCondition = () => {\n    sanctionConditionsTableRef.current?.addRow(initialSanctionConditionTableRowData);\n  };\n\n  /*\n    -------------------------------------------------------\n      Helper Functions\n    -------------------------------------------------------\n  */\n\n  const enrichForSave = () => {\n    const prepareRecords = () => {\n      const sanctionConditionsRecords = [\n        ...(sanctionConditionsTableRef.current?.getAddedRecords() ?? []),\n        ...(sanctionConditionsTableRef.current?.getUpdatedRecords() ?? []),\n        ...(sanctionConditionsTableRef.current?.getDeletedRecords() ?? []),\n      ].map((record) => ({\n        uid: record?.uid ? record?.uid : null,\n        sanctionCondition: record?.sanctionCondition ?? \"\",\n        smSanctionType: record?.smSanctionType ?? \"\",\n        smCategory: record?.smCategory ?? \"\",\n        remarks: record?.remarks ?? \"\",\n        isActive: record?.isActive ?? false,\n      }));\n\n      return sanctionConditionsRecords;\n    };\n\n    const payloadData = {\n      loan: {\n        uid: params?.loanUid ?? null,\n      },\n      stage: {\n        uid: pageObj.stageUid,\n      },\n      sanctionedConditions: prepareRecords(),\n    };\n\n    return payloadData;\n  };\n\n  const updateDropdownOptions = (key: keyof IDropdownList, options: any[]) => {\n    setPageObj((prev: IPageObj) => ({\n      ...prev,\n      dropdownOptions: {\n        ...prev?.dropdownOptions,\n        [key]: options ?? [],\n      },\n    }));\n  };\n\n  const resetValidator = () => {\n    simpleValidator.current = new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    });\n    simpleValidator?.current?.hideMessages();\n  };\n\n  /*\n    -------------------------------------------------------\n      Sectional Rendering\n    -------------------------------------------------------\n  */\n\n  const renderSanctionConditionHeader = () => {\n    return (\n      <div className=\"flex items-center\">\n        <Text label={i18n.t(\"label.cam.recommendation.table.sancCondition\")} />\n      </div>\n    );\n  };\n\n  const renderSanctionCondition = (rowData: any): ReactNode => {\n    return (\n      <div className=\"h-24\">\n        <InputTextArea\n          name={`sanctionCondition${rowData?.uid}`}\n          className=\"!h-full\"\n          variant={INPUT_STYLE_TYPE.SECONDARY}\n          maxCount={200}\n          autoResize\n          value={rowData?.sanctionCondition}\n          onChange={(e: BaseSyntheticEvent) => {\n            const rowDataObj = { ...rowData };\n            rowDataObj.sanctionCondition = e.target.value;\n            sanctionConditionsTableRef.current?.reportDataChange(rowDataObj);\n          }}\n          onBlur={validate}\n          validation={simpleValidator?.current?.message(\n            `sanctionCondition${rowData?.uid}`,\n            rowData?.sanctionCondition,\n            \"mandatory\"\n          )}\n          hideLabel\n        />\n      </div>\n    );\n  };\n\n  const renderHeaderSanctionType = () => {\n    return (\n      <div className=\"flex items-center\">\n        <Text label={i18n.t(\"label.cam.recommendation.table.type\")} />\n      </div>\n    );\n  };\n\n  const renderSanctionType = (rowData: any): ReactNode => {\n    return (\n      <div className=\"h-24\">\n        <SimpleDropDown\n          name={`smSanctionType${rowData?.uid}`}\n          className=\"!w-30\"\n          options={pageObj.dropdownOptions.sanctionType}\n          optionLabel=\"name\"\n          optionValue=\"code\"\n          value={rowData?.smSanctionType ?? \"\"}\n          onChange={(e: DropdownChangeParams) => {\n            handleSancDropdownChange(e, rowData);\n          }}\n          onBlur={validate}\n          validation={simpleValidator?.current?.message(\n            `smSanctionType${rowData?.uid}`,\n            rowData?.smSanctionType,\n            \"mandatory\"\n          )}\n          hideLabel\n        />\n      </div>\n    );\n  };\n\n  const renderHeaderSanctionCategory = () => {\n    return (\n      <div className=\"flex items-center\">\n        <Text label={i18n.t(\"label.cam.recommendation.table.category\")} />\n      </div>\n    );\n  };\n\n  const renderSancCategory = (rowData: any): ReactNode => {\n    return (\n      <div className=\"h-24\">\n        <SimpleDropDown\n          name={`smCategory${rowData?.uid}`}\n          className=\"!w-30\"\n          options={pageObj.dropdownOptions.sanctionCategory}\n          optionLabel=\"name\"\n          optionValue=\"code\"\n          value={rowData?.smCategory ?? \"\"}\n          onChange={(e: DropdownChangeParams) => {\n            handleSancDropdownChange(e, rowData);\n          }}\n          onBlur={validate}\n          validation={simpleValidator?.current?.message(\n            `smCategory${rowData.uid}`,\n            rowData?.smCategory,\n            \"mandatory\"\n          )}\n          hideLabel\n        />\n      </div>\n    );\n  };\n\n  const renderHeaderRemarks = () => {\n    return (\n      <div className=\"flex items-center\">\n        <Text label={i18n.t(\"label.cam.recommendation.table.remark\")} />\n      </div>\n    );\n  };\n\n  const renderSanctionConditionRemarks = (rowData: any): ReactNode => {\n    return (\n      <div className=\"h-24\">\n        <InputBox\n          name={`remarks${rowData?.uid}`}\n          className=\"!h-6\"\n          variant={INPUT_STYLE_TYPE.SECONDARY}\n          value={rowData?.remarks}\n          onChange={(e: BaseSyntheticEvent) => {\n            const rowDataObj = { ...rowData };\n            rowDataObj.remarks = e.target.value;\n            sanctionConditionsTableRef.current?.reportDataChange(rowDataObj);\n          }}\n          onBlur={validate}\n          validation={simpleValidator?.current?.message(\n            `remarks${rowData?.uid}`,\n            rowData?.remarks,\n            \"mandatory\"\n          )}\n          hideLabel\n        />\n      </div>\n    );\n  };\n\n  const renderHeaderAction = () => {\n    return (\n      <div className=\"flex items-center\">\n        <Text label={i18n.t(\"label.cam.recommendation.table.action\")} />\n      </div>\n    );\n  };\n\n  const renderSancAction = (rowData: any): ReactNode => {\n    return (\n      <div className=\"h-24\">\n        <IconButton\n          className={`select-none`}\n          buttonType={BUTTON_TYPES.DELETE}\n          onClick={() => {\n            sanctionConditionsTableRef.current?.deleteRow(rowData);\n            simpleValidator.current = new SimpleReactValidator({\n              validators: { ...getStandardValidator() },\n              ...messageReplace(),\n              autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n            });\n          }}\n        />\n      </div>\n    );\n  };\n\n  /*\n    -------------------------------------------------------\n    Main Rendering\n    -------------------------------------------------------\n  */\n  return (\n    <React.Fragment>\n      <div className=\"grid gap-5 mb-5\">\n        <SaveComponent\n          title={\"\"}\n          pageMode={pageMode}\n          onEdit={onEdit}\n          onCancel={onCancel}\n          onSave={onSave}\n        >\n          <AclGuard override={{ read: pageMode === PAGE_MODE.VIEW }}>\n            <div className=\"flex flex-col gap-3\">\n              <div className=\"self-end\">\n                <ButtonBox\n                  buttonType={BUTTON_TYPE.ICON_TEXT_ROW}\n                  customLabel={\"Add\"}\n                  onClick={onAddSancCondition}\n                />\n              </div>\n\n              {params?.loanUid && pageObj.stageUid && (\n                <div>\n                  <EditableTableV2\n                    ref={sanctionConditionsTableRef}\n                    standardDataFormatPromise={CamService.getSanctionConditions}\n                    search={pageObj.tableObj.search}\n                    uniqueKey=\"uid\"\n                    mode={\"UPDATE\"}\n                    paginator\n                    className=\"table-auto-height\"\n                  >\n                    <Column\n                      header={renderSanctionConditionHeader}\n                      className=\"!w-64 pl-6 py-3 text-primary-ptext-1000 text-left text-xs\"\n                      body={renderSanctionCondition}\n                    />\n\n                    <Column\n                      header={renderHeaderSanctionType}\n                      className=\"!w-30 pl-6 py-3 text-primary-ptext-1000 text-left text-xs\"\n                      body={renderSanctionType}\n                    />\n\n                    <Column\n                      header={renderHeaderSanctionCategory}\n                      className=\"!w-30 pl-6 py-3 text-primary-ptext-1000 text-left text-xs\"\n                      body={renderSancCategory}\n                    />\n\n                    <Column\n                      header={renderHeaderRemarks}\n                      className=\"!w-64 pl-6 py-3 text-primary-ptext-1000 text-left text-xs\"\n                      body={renderSanctionConditionRemarks}\n                    />\n\n                    <Column\n                      header={renderHeaderAction}\n                      className=\"px-6 py-3 text-primary-ptext-1000 text-center text-xs\"\n                      style={{ minWidth: \"50px\", width: \"50px\" }}\n                      body={renderSancAction}\n                    />\n                  </EditableTableV2>\n                </div>\n              )}\n            </div>\n          </AclGuard>\n        </SaveComponent>\n\n        <ToastCustom\n          position={\"bottom-right\"}\n          ref={toastMessageRef}\n          toastText={toastMessage}\n          variant={TOAST_STYLE_TYPE.PRIMARY}\n        />\n\n        <ErrorDialog\n          onHide={() => {\n            setShowDialogAPIError(false);\n            setErrorMessage(\"\");\n          }}\n          visible={showDialogAPIError}\n          errorMessage={errorMessage}\n        />\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport default SanctionConditions;\n","import { Column } from \"components/EditableTableV2\";\nimport InputTextArea from \"components/InputTextArea/InputTextArea\";\nimport ReadOnlyTable, { IReadonlyTableRef } from \"components/ReadOnlyTable/ReadOnlyTable\";\nimport SkeletonCustom from \"components/Skeleton/Skeleton\";\nimport Text from \"components/Text/Text\";\nimport TextButton from \"components/TextButton/TextButton\";\nimport i18n from \"i18n\";\nimport React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { INPUT_STYLE_TYPE, PAGE_MODE } from \"utils/Constant\";\n\ninterface IDropDownOptions {\n  name: string;\n  code: string;\n  uid: string;\n}\n\ninterface IPageObj {\n  stageUid: string;\n  tableObj: {\n    search: string;\n  };\n}\n\nexport interface ICamSystemRuleViolationRowData {\n  // uid: string;\n  message: string;\n}\n\nconst initialPageOj: IPageObj = {\n  stageUid: \"\",\n  tableObj: {\n    search: ``,\n  },\n};\n\ninterface IProps {\n  isLoading: boolean;\n  data: ICamSystemRuleViolationRowData[];\n  getDetailsCallback: (option: { reEvaluate: boolean }) => void;\n  isLoadingOnReEvaluate: boolean;\n}\n\nconst SystemRuleViolations = (props: IProps) => {\n  const { isLoading, data, getDetailsCallback, isLoadingOnReEvaluate } = props;\n  const params: { loanUid?: string; stageUid?: string } = useParams();\n\n  /*\n    -------------------------------------------------------\n      State\n    -------------------------------------------------------\n  */\n\n  const [pageObj, setPageObj] = useState<IPageObj>({ ...initialPageOj });\n  const [pageMode, setPageMode] = useState(PAGE_MODE.VIEW);\n\n  const [, forceUpdate] = useState<boolean>(false);\n\n  // ref\n  const tableRef = React.useRef<IReadonlyTableRef>(null);\n\n  // --------------------------- global variables ---------------------- //\n\n  /*\n     -------------------------------------------------------\n       useEffect\n     -------------------------------------------------------\n   */\n\n  useEffect(() => {\n    setPageObj((prevPageObj) => ({\n      ...prevPageObj,\n      stageUid: params?.stageUid ?? \"\",\n    }));\n  }, []);\n\n  useEffect(() => {\n    if (pageObj.tableObj.search) {\n      tableRef.current?.search();\n    }\n  }, [pageObj.tableObj.search]);\n\n  /*\n    -------------------------------------------------------\n      Service Calls\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n      Handlers\n    -------------------------------------------------------\n  */\n\n  /* \n    --------------------------------------------------------\n    Validators:\n    --------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n      Button Click Handlers\n    -------------------------------------------------------\n  */\n\n  const onCheckSystemViolations = async () => {\n    getDetailsCallback?.({ reEvaluate: true });\n  };\n  /*\n    -------------------------------------------------------\n      Helper Functions\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n      Sectional Rendering\n    -------------------------------------------------------\n  */\n\n  const renderHeaderSystemRuleViolations = () => {\n    return (\n      <div className=\"flex items-center\">\n        <Text label={i18n.t(\"label.cam.systemRuleViolations\")} />\n      </div>\n    );\n  };\n\n  const renderSystemValidation = (rowData: ICamSystemRuleViolationRowData) => {\n    return (\n      <div className=\"h-24\">\n        <InputTextArea\n          name=\"address\"\n          className=\"!min-h-20 !max-h-40 h-25\"\n          placeholder={\"\"}\n          variant={INPUT_STYLE_TYPE.SECONDARY}\n          autoResize\n          hideMaxCount\n          value={rowData?.message ?? \"\"}\n          disabled\n        />\n      </div>\n    );\n  };\n\n  /*\n    -------------------------------------------------------\n    Main Rendering\n    -------------------------------------------------------\n  */\n  return (\n    <div className=\"grid gap-5 mb-5\">\n      <>\n        <div className=\"border border-secondary-concrete rounded-xl p-5\">\n          <div className=\"flex flex-col gap-3\">\n            <div className=\"self-end\">\n              <div className=\"flex gap-3\">\n                <TextButton\n                  className=\"text-xs text-primary-primaryBlue\"\n                  label={\"label.cam.checkSysViolations\"}\n                  onClick={onCheckSystemViolations}\n                  isLoading={isLoadingOnReEvaluate}\n                  // isIgnoreAccessLevel\n                />\n              </div>\n            </div>\n\n            {isLoading ? (\n              <SkeletonCustom height=\"19.375rem\" width=\"100%\" borderRadius=\"8px\" animation=\"wave\" />\n            ) : (\n              <div>\n                {pageObj?.stageUid ? (\n                  <ReadOnlyTable\n                    ref={tableRef}\n                    value={data}\n                    search={pageObj.tableObj.search}\n                    uniqueKey=\"uid\"\n                    mode={\"UPDATE\"}\n\n                    // onUpdateCallback={()=>{\n                    //   forceUpdate((prev)=>!prev);\n                    // }}\n                  >\n                    <Column\n                      header={renderHeaderSystemRuleViolations}\n                      className=\"text-primary-ptext-1000 text-left text-xs h-12 px-6  \"\n                      style={{ minWidth: \"170px\", width: \"170px\" }}\n                      body={renderSystemValidation}\n                    />\n                  </ReadOnlyTable>\n                ) : null}\n              </div>\n            )}\n          </div>\n        </div>\n      </>\n    </div>\n  );\n};\n\nexport default SystemRuleViolations;\n","import ErrorDialog from \"components/ErrorDialog/ErrorDialog\";\nimport Section from \"components/Section/Section\";\nimport ToastCustom from \"components/Toast\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport CamService from \"services/transaction/CamService\";\nimport { parseStandardAPIErrorMessage, validateGetAPIResponse } from \"utils/CommonUtil\";\nimport { TOAST_STYLE_TYPE } from \"utils/Constant\";\nimport { updateOverallCommentsPageObj, updatePurposeOfLoanPageObj } from \"../Helper\";\nimport CAMDeviations from \"../Sections/CAMDeviations/CAMDeviations\";\nimport OverallComments, {\n  IOverallCommentsPageObj,\n  intialOverallCommentsTextEditorPageObj,\n} from \"../Sections/OverallComments/OverallComments\";\nimport PurposeOfLoan, {\n  IPurposeOfLoanPageObj,\n  initialPurposeOfLoanTextEditorPageObj,\n} from \"../Sections/PurposeOfLoan\";\nimport RiskAndStrength from \"../Sections/RiskAndStrength/RiskAndStrength\";\nimport SalesRecommendationInCAM, {\n  ISalesRecommendationPageObj,\n} from \"../Sections/SalesRecommendation/SalesRecommendation\";\nimport SanctionConditions from \"../Sections/SanctionConditions/SanctionConditions\";\nimport SystemRuleViolations, {\n  ICamSystemRuleViolationRowData,\n} from \"../Sections/SystemRuleViolations/SystemRuleViolations\";\n\ninterface IRecommendationPageData {\n  loanUid: string;\n  stageUid: string;\n  purposeOfLoan: IPurposeOfLoanPageObj;\n  overallComments: IOverallCommentsPageObj;\n  salesRecommendation: ISalesRecommendationPageObj[];\n  systemRuleViolations: ICamSystemRuleViolationRowData[];\n  isLoadingPurposeOfLoan: boolean;\n  isLoadingOverallComments: boolean;\n  isLoadingSalesRecommendation: boolean;\n  isLoadingSystemRuleViolations: boolean;\n  isLoadingSystemRuleViolationsOnReEvaluate:boolean;\n}\n\nconst initialRecommendationPageData: IRecommendationPageData = {\n  stageUid: \"\",\n  loanUid: \"\",\n  purposeOfLoan: { ...initialPurposeOfLoanTextEditorPageObj },\n  overallComments: { ...intialOverallCommentsTextEditorPageObj },\n  salesRecommendation: [],\n  systemRuleViolations: [],\n  isLoadingPurposeOfLoan: true,\n  isLoadingOverallComments: true,\n  isLoadingSalesRecommendation: true,\n  isLoadingSystemRuleViolations: true,\n  isLoadingSystemRuleViolationsOnReEvaluate:false\n};\n\nconst PageRecommendations = () => {\n  const params: { loanUid?: string; stageUid?: string } = useParams();\n\n  const [pageData, setPageData] = useState<IRecommendationPageData>(initialRecommendationPageData);\n\n  //error handling states\n  const [toastMessage, setToastMessage] = useState(\"\");\n  const [triggerToast, setTriggerToast] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [showDialogAPIError, setShowDialogAPIError] = useState(false);\n\n  /*----------------refs-------------------------------- */\n  const toastMessageRef = useRef(null);\n\n  /*\n    ------------------------------------------------------------------------------------------------------------------------------------------------------useEffect:\n    ------------------------------------------------------------------------------------------------------------------------------------------------------\n  */\n\n  useEffect(() => {\n    init();\n  }, []);\n\n  useEffect(() => {\n    if (pageData.loanUid && pageData.stageUid) {\n      getPurposeOfLoanAndOverallComments();\n      getSalesRecommendationDetails();\n      getSystemRuleViolations();\n    }\n  }, [pageData.loanUid, pageData.stageUid]);\n\n  useEffect(() => {\n    if (toastMessageRef?.current && toastMessage !== \"\") {\n      // @ts-ignore: will be fixed in future\n      toastMessageRef?.current?.showFunction();\n      setToastMessage(\"\");\n    }\n  }, [toastMessage, triggerToast]);\n\n  useEffect(() => {\n    if (errorMessage) {\n      setShowDialogAPIError(true);\n    }\n  }, [errorMessage]);\n\n  /* \n    ---------------------------------------------------------------------------------------------------\n    Validators:\n    ---------------------------------------------------------------------------------------------------\n  */\n\n  /*---------------------------Service Calls------------------------- */\n\n  const getPurposeOfLoanAndOverallComments = async (sReturnResponseOnly?: boolean) => {\n    try {\n      const res = await CamService.getLoanPurposeAndComments(pageData.stageUid);\n\n      if (validateGetAPIResponse(res)) {\n        if (sReturnResponseOnly) return res?.data;\n\n        setPageData((prev: IRecommendationPageData) => {\n          return {\n            ...prev,\n            purposeOfLoan: {\n              ...prev.purposeOfLoan,\n              ...updatePurposeOfLoanPageObj(res?.data),\n            },\n            isLoadingPurposeOfLoan: false,\n            overallComments: {\n              ...prev.overallComments,\n              ...updateOverallCommentsPageObj(res?.data),\n            },\n            isLoadingOverallComments: false,\n          };\n        });\n      }\n    } catch (err) {\n      console.log(err);\n      setPageData((prev: IRecommendationPageData) => {\n        return {\n          ...prev,\n          isLoadingPurposeOfLoan: false,\n          isLoadingOverallComments: false,\n        };\n      });\n      setErrorMessage(parseStandardAPIErrorMessage(err));\n    }\n  };\n\n  const getSalesRecommendationDetails = async () => {\n    try {\n      const res = await CamService.getSalesRecommendation(pageData.loanUid);\n\n      if (validateGetAPIResponse(res)) {\n        const preparedListOfRecommendations: ISalesRecommendationPageObj[] = res?.data?.map(\n          (record: any) => {\n            return {\n              uid: record?.uid,\n              recommendationDate: record?.recommendationDate\n                ? new Date(record?.recommendationDate)\n                : \"\",\n              recommendedBy: record?.recommendedBy?.name ?? \"\",\n              recommendation: record?.recommendation ?? \"\",\n            };\n          }\n        );\n\n        setPageData((prev: IRecommendationPageData) => ({\n          ...prev,\n          salesRecommendation: [...preparedListOfRecommendations],\n          isLoadingSalesRecommendation: false,\n        }));\n      }\n    } catch (err) {\n      console.log(err);\n      setPageData((prev: IRecommendationPageData) => ({\n        ...prev,\n        salesRecommendation: [],\n        isLoadingSalesRecommendation: false,\n      }));\n      setErrorMessage(parseStandardAPIErrorMessage(err));\n    }\n  };\n\n  const getSystemRuleViolations = async (options?: { reEvaluate?: boolean }) => {\n\n    if(options?.reEvaluate){\n      setPageData((prevPageData)=>({\n        ...prevPageData,\n        isLoadingSystemRuleViolationsOnReEvaluate:true\n      }))\n    }\n    try {\n      const res = await CamService.getSystemRuleViolations(\n        `loanUid=${params?.loanUid}&stageUid=${params?.stageUid}&reEvalValidations=${\n          options?.reEvaluate ? true : false\n        }`\n      );\n\n      if (validateGetAPIResponse(res)) {\n        setPageData((prev: IRecommendationPageData) => ({\n          ...prev,\n          systemRuleViolations: res?.data,\n          isLoadingSystemRuleViolations: false,\n          isLoadingSystemRuleViolationsOnReEvaluate:false\n        }));\n      }\n    } catch (err) {\n      console.log(err);\n      setPageData((prev: IRecommendationPageData) => ({\n        ...prev,\n        isLoadingSystemRuleViolations: false,\n        isLoadingSystemRuleViolationsOnReEvaluate:false\n      }));\n      setErrorMessage(parseStandardAPIErrorMessage(err));\n    }\n  };\n\n  /*-------------------------Event Handlers------------------------ */\n\n  /*-----------------------------Click, Toggle-------------------------- */\n\n  const onCancelPurposeOfLoan = async () => {\n    const data = await getPurposeOfLoanAndOverallComments(true);\n    setPageData((prev: IRecommendationPageData) => ({\n      ...prev,\n      purposeOfLoan: {\n        ...prev.purposeOfLoan,\n        ...updatePurposeOfLoanPageObj(data),\n      },\n    }));\n  };\n\n  const onCancelOverallComments = async () => {\n    const data = await getPurposeOfLoanAndOverallComments(true);\n    setPageData((prev: IRecommendationPageData) => ({\n      ...prev,\n      overallComments: {\n        ...prev.purposeOfLoan,\n        ...updateOverallCommentsPageObj(data),\n      },\n    }));\n  };\n\n  /*-------------------------onChange, onBlur, onFocus----------------- */\n\n  /*--------------------------Helper Functions--------------------------------*/\n\n  const init = async () => {\n    setPageData((prev: IRecommendationPageData) => ({\n      ...prev,\n      stageUid: params?.stageUid ?? \"\",\n      loanUid: params?.loanUid ?? \"\",\n    }));\n  };\n\n  /*------------------------Main Render-------------------------- */\n\n  return (\n    <div className=\"flex flex-col gap-5\">\n      <Section title={\"label.cam.recommendation.purposeOfLoan*\"}>\n        <PurposeOfLoan\n          isLoading={pageData.isLoadingPurposeOfLoan}\n          data={pageData.purposeOfLoan}\n          getDataOnCancel={onCancelPurposeOfLoan}\n          payloadInfo={{\n            loanUid: pageData.loanUid,\n            stageUid: pageData.stageUid,\n          }}\n        />\n      </Section>\n\n      <Section title={\"label.cam.recommendation.overallComments*\"}>\n        <OverallComments\n          isLoading={pageData.isLoadingOverallComments}\n          data={pageData.overallComments}\n          getDataOnCancel={onCancelOverallComments}\n          payloadInfo={{\n            loanUid: pageData.loanUid,\n            stageUid: pageData.stageUid,\n          }}\n        />\n      </Section>\n\n      <Section title={\"label.cam.recommendation.riskStrength\"}>\n        <RiskAndStrength />\n      </Section>\n\n      <Section title={\"label.cam.recommendation.deviations*\"}>\n        <CAMDeviations />\n      </Section>\n\n      <Section title={\"label.cam.systemRuleViolations\"}>\n        <SystemRuleViolations\n          isLoading={pageData?.isLoadingSystemRuleViolations}\n          isLoadingOnReEvaluate={pageData?.isLoadingSystemRuleViolationsOnReEvaluate}\n          data={pageData?.systemRuleViolations}\n          getDetailsCallback={(options: { reEvaluate: boolean }) =>\n            getSystemRuleViolations({ reEvaluate: options?.reEvaluate })\n          }\n        />\n      </Section>\n\n      <Section title={\"label.cam.recommendation.sanctionConditions\"}>\n        <SanctionConditions />\n      </Section>\n\n      <Section title={\"label.cam.recommendation.salesRecommendation\"}>\n        <SalesRecommendationInCAM\n          isLoading={pageData.isLoadingSalesRecommendation}\n          data={pageData.salesRecommendation}\n        />\n      </Section>\n\n      <ToastCustom\n        position={\"bottom-right\"}\n        ref={toastMessageRef}\n        toastText={toastMessage}\n        variant={TOAST_STYLE_TYPE.PRIMARY}\n      />\n\n      <ErrorDialog\n        onHide={() => {\n          setShowDialogAPIError(false);\n          setErrorMessage(\"\");\n        }}\n        visible={showDialogAPIError}\n        errorMessage={errorMessage}\n      />\n    </div>\n  );\n};\n\nexport default PageRecommendations;\n"],"names":["initialTableRowData","TYPE_OF_DEVIATION","initialPageOj","CAMDeviations","params","useParams","pageObj","setPageObj","useState","pageMode","setPageMode","PAGE_MODE","deviationSuggestionsTemplate","setDeviationSuggestionsTemplate","position","setPosition","showDialogAPIError","setShowDialogAPIError","errorMessage","setErrorMessage","forceUpdate","toastMessage","setToastMessage","triggerToast","setTriggerToast","toastMessageVariant","setToastMessageVariant","TOAST_STYLE_TYPE","tableRef","React","toastMessageRef","useRef","simpleValidator","SimpleReactValidator","getStandardValidator","messageReplace","prev","useEffect","prevPageObj","getDeviationTypeOptions","getDeviationCategory","getDeviationLevel","_a","StaticMasterDataService","res","validateGetAPIResponse","updateDropdownOptions","err","parseStandardAPIErrorMessage","CamService","handleDeviationCategoryChange","rowData","rowDataObj","handleDeviationLevelChange","handleManualDeviationChange","value","_b","_c","_d","handleChange","options","validate","validateForm","isValid","onAddDeviation","onDeleteRow","onSave","payload","enrichForSave","validatePutAPIResponse","STATIC_MASTER_TYPE_TOAST_TEXT","error","onEdit","onCancel","resetValidator","onPopulateAutoDeviations","searchManualDeviation","suggestionsTemplate","search","record","data","updateCamDeviationsRowDataObj","addRows","deletedRows","updatedRows","key","prevState","manualDeviationsTemplate","item","jsx","Text","renderHeaderTypeOfDeviation","i18n","renderTypeOfDeviations","SimpleDropDown","INPUT_STYLE_TYPE","renderHeaderDeviationCategory","renderDeviationCategory","e","renderHeaderDeviation","renderDeviation","AutoComplete","_f","_e","renderHeaderDeviationLevel","renderDeviationLevel","renderHeaderActualDeviation","renderActualDeviation","InputTextArea","renderHeaderMitigants","renderMitigants","renderHeaderAction","renderActions","IconButton","BUTTON_TYPES","jsxs","SaveComponent","AclGuard","TextButton","ButtonBox","BUTTON_TYPE","DeviationTable","Column","ToastCustom","ErrorDialog","initialRiskStrengthTableRowData","RiskAndStrength","riskStrengthTableRef","handleRiskOrStrengthChange","onAddRiskStrengthTableRow","prepareRecords","renderHeaderRiskStrength","renderRiskStrength","CAM_AND_RECOMMENDATION_RISK_STRENGTH","renderHeaderDescription","renderRiskStrengthDescription","renderHeaderRemarks","renderRiskStrengthRemarks","InputBox","renderRiskStrengthAction","EditableTableV2","SalesRecommendation","props","className","isLoading","SkeletonCustom","salesRecommendation","index","SystemDatePicker","initialSanctionConditionTableRowData","SanctionConditions","sanctionConditionsTableRef","getSanctionTypeOptions","getSanctionCategory","handleSancDropdownChange","onAddSancCondition","renderSanctionConditionHeader","renderSanctionCondition","renderHeaderSanctionType","renderSanctionType","renderHeaderSanctionCategory","renderSancCategory","renderSanctionConditionRemarks","renderSancAction","SystemRuleViolations","getDetailsCallback","isLoadingOnReEvaluate","onCheckSystemViolations","renderHeaderSystemRuleViolations","renderSystemValidation","Fragment","ReadOnlyTable","initialRecommendationPageData","initialPurposeOfLoanTextEditorPageObj","intialOverallCommentsTextEditorPageObj","PageRecommendations","pageData","setPageData","init","getPurposeOfLoanAndOverallComments","getSalesRecommendationDetails","getSystemRuleViolations","sReturnResponseOnly","updatePurposeOfLoanPageObj","updateOverallCommentsPageObj","preparedListOfRecommendations","prevPageData","onCancelPurposeOfLoan","onCancelOverallComments","Section","PurposeOfLoan","OverallComments","SalesRecommendationInCAM"],"mappings":"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"}