import{aF as y,r as a,q as Ie,aH as Ae,ao as te,ad as le,ae as ce,af as re,j as e,T as M,R as us,ax as ie,c8 as ms,eN as vs,o as q,J as Ts,aG as je,cn as Se,d$ as ue,fk as Is,aA as es,S as As,dl as Ce,v as Me,d4 as Rs,fl as Cs}from"./index-e8217573.js";import{E as me}from"./ErrorDialog-d5eef4d7.js";import{I as Ms}from"./Info-6f3aa97c.js";import{S as ae}from"./Section-00ef9f2b.js";import{A as Us}from"./ApplicantService-924aa5cb.js";import{S as Os}from"./StaticMasterDataService-689a6eca.js";import{R as oe}from"./RcuService-53ccbee9.js";import{S as ss}from"./StageService-c1c03c89.js";import{u as Ls,a as ts,b as Ps,c as is,d as ns,e as ks,f as as,S as ls,R as cs,i as rs}from"./Helper-06cc777c.js";import{D as ps,a as Te}from"./DocumentUploader-e2ec1a13.js";import{S as Re}from"./SaveComponent-160c5b32.js";import{S as de}from"./Skeleton-7e12d019.js";import{T as Ee}from"./Toast-ae99ea5b.js";import{B as Vs}from"./ButtonBox-9e46519a.js";import{S as Pe}from"./SimpleDropDown-061a3470.js";import{I as fs}from"./InputTextArea-b90aad1d.js";import{A as ve}from"./Address-75e58af3.js";import{C as G,E as Ys}from"./EditableTableV2-6afcb42b.js";import{I as _s}from"./InputAddon-04f948e7.js";import{I as D}from"./InputBox-b9e88f52.js";import{R as Oe}from"./ReadOnlyTable-86accb69.js";import{a as xs}from"./CustomHooks-0ce50620.js";import{I as gs,B as hs}from"./IconButton-36693dd9.js";import{i as Le,M as ys}from"./MediaGallery-5884b284.js";import{R as os}from"./RadioButton-86c37166.js";import{R as Fs}from"./RichTextEditor-a03bd2fb.js";import{S as bs}from"./SystemDatePicker-abe08a29.js";import{A as ds}from"./AutoComplete-0bca608a.js";import{C as Ws}from"./BaseChips-c7cc0dee.js";import{u as Bs}from"./useSelector-dc41929a.js";import"./Dialog-adadaf64.js";import"./loader-5f2cfb31.js";import"./DatePicker-b1c13861.js";import"./withAuth-6de36ebf.js";import"./FileUploadCustom-5ab7fd25.js";import"./Loading-783a01c7.js";import"./FileUploadMenuBox-f47dc693.js";import"./kebab-menu-8835ad2e.js";import"./MenuBox-defc36b0.js";import"./FileUploadService-1aaf11f7.js";import"./DocumentService-a293b5f4.js";import"./link-0172a3d4.js";import"./TransitionGroup-c8afe0ce.js";import"./virtualscroller.esm-9939945c.js";import"./esm-70d64670.js";import"./index-8739acfd.js";import"./TextButton-41b4a67e.js";import"./City-7102c574.js";import"./Pincode-a7c9b067.js";import"./datatable.esm-f474a654.js";import"./paginator.esm-11c2c115.js";import"./No_data-1720c54e.js";import"./sortIcon-54357a29.js";import"./Download_Icon-51fc7f46.js";import"./eye_icon-081bddb3.js";import"./search_icon-459d6871.js";const Ue={key:Math.random().toString(36).slice(2),sectionMode:y.VIEW,uid:"",savedDocuments:[],status:"",remark:"",disable:!1,isActive:!0},$s=a.forwardRef((V,c)=>{const{data:x,isLoading:A,getDetailsCallback:g,dropDownOptions:Y,payloadInfo:S}=V;Ie();const[C,T]=a.useState([]),[H,F]=a.useState(y.VIEW),[$,L]=a.useState(""),[W,z]=a.useState(!1),[P,k]=a.useState(""),[U,I]=a.useState(!1),p=a.useRef(null),v=a.useRef([]),[,b]=a.useState(!1),N=a.useRef([]);a.useImperativeHandle(c,()=>({save:B,onCancel:o})),a.useEffect(()=>{if((x==null?void 0:x.length)===0||C.length===0)T(()=>[{...Ue}]),f(1);else{const i=x.map(r=>({...r,key:Math.random().toString(36).slice(2)}));T([...i]),f(x==null?void 0:x.length)}},[x]),a.useEffect(()=>{var i;p!=null&&p.current&&$!==""&&((i=p==null?void 0:p.current)==null||i.showFunction(),L(""))},[$,W]),a.useEffect(()=>{P&&I(!0)},[P]);const X=(i,r)=>{var t,s,l;(l=(t=N==null?void 0:N.current)==null?void 0:t[r])==null||l.showMessageFor((s=i==null?void 0:i.target)==null?void 0:s.name)},Q=i=>{var t,s,l,u;let r=!1;return r=((s=(t=N==null?void 0:N.current)==null?void 0:t[i])==null?void 0:s.allValid())??!1,r||(b(h=>!h),(u=(l=N==null?void 0:N.current)==null?void 0:l[i])==null||u.showMessages(),b(h=>!h),!1)},B=async(i,r)=>{var h,R;const t=(R=(h=v.current)==null?void 0:h[i])==null?void 0:R.getUploadedData();if(!!!Q(i)||!!!t)return;const u=Z(t,{idx:i,isActive:r==null?void 0:r.isActive});try{const O=await oe.uploadAdditionalDocument(u);L(Ae.SAVED),z(!W),F(y.VIEW),n({index:i,sectionMode:y.VIEW}),g==null||g()}catch(O){k(te(O))}},K=i=>{n({index:i,sectionMode:y.EDIT})},o=i=>{var r,t,s,l,u;n({index:i,sectionMode:y.VIEW}),_(i),(t=(r=v==null?void 0:v.current)==null?void 0:r[i])==null||t.resetDocUpload(),(l=(s=v==null?void 0:v.current)==null?void 0:s[i])==null||l.resetValidator(),(u=C[i])!=null&&u.uid?g==null||g():T(h=>{const R=[...h];return R[i]={...Ue},R})},m=()=>{N.current[C==null?void 0:C.length]=new le({validators:{...ce()},...re(),autoForceUpdate:{forceUpdate:()=>b(i=>!i)}}),T(i=>[...i,{...Ue}])},j=(i,r)=>{T(t=>{const s=[...t];return s[r.index][r.field]=i.target.value,s})},E=i=>{T(r=>{var s;let t=[...r];return t[i].sectionMode===y.EDIT&&(t==null||t.forEach((l,u)=>{u!==i&&(t[u].disable=!1)})),(s=t[i])!=null&&s.uid||(t=r==null?void 0:r.filter((l,u)=>u!==i)),t})},d=i=>[{className:`${C.length===1?"cursor-not-allowed":""}`,label:"Remove",command:()=>{E(i),B(i,{isActive:!1})},disabled:C.length===1}],n=i=>{T(r=>{const t=[...r];return t[i.index].sectionMode=i.sectionMode,t==null||t.forEach((s,l)=>{l!==i.index&&(t[l].disable=i.sectionMode!==y.VIEW)}),t})},f=i=>{var r,t;for(let s=0;s<i;s++)N.current[s]=new le({validators:{...ce()},...re(),autoForceUpdate:{forceUpdate:()=>b(l=>!l)}}),(t=(r=N==null?void 0:N.current)==null?void 0:r[s])==null||t.hideMessages()},_=i=>{var r,t;N.current[i]=new le({validators:{...ce()},...re(),autoForceUpdate:{forceUpdate:()=>b(s=>!s)}}),(t=(r=N==null?void 0:N.current)==null?void 0:r[i])==null||t.hideMessages()},Z=(i,r)=>{const t=[...C],s=t[r.idx].status,l=t[r.idx].remark,u=R=>R.map(J=>({uid:J.uid??null,section:J.code,fileName:J.fileName,fileType:J.contentType,thumbUrl:J.thumbUrl,url:J.url,isActive:J.isActive}));return[{loan:{uid:S.loanUid},stage:{uid:S.stageUid},applicant:{uid:S.applicantUid},loanDocument:{loan:{uid:S.loanUid},applicant:{uid:S.applicantUid},uid:i.uid??null,docType:{uid:i.documentUid?i.documentUid:""},loanSectionKey:"",docCategory:i.documentCategory?i.documentCategory:"",stage:{uid:S.stageUid},documentSections:u(i.documentSectionUrls),isActive:r==null?void 0:r.isActive},smDocVerificationAction:s,remarks:l}]};return e.jsxs("div",{className:" p-5 border border-primary-ptext-500  rounded-xl grid gap-5",children:[e.jsx("div",{className:"mb-4",children:e.jsx(M,{className:"text-primary-sideBarBgColor text-base font-bold ",label:"label.rcu.addedDocuments"})}),A?e.jsx(de,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"}):e.jsxs(us.Fragment,{children:[C==null?void 0:C.map((i,r)=>{var t,s,l,u;return e.jsx("div",{children:e.jsx(Re,{title:"",pageMode:i.sectionMode,onSave:()=>B(r,{isActive:!0}),onCancel:()=>o(r),onEdit:()=>K(r),kebabModel:d(r),disabled:i==null?void 0:i.disable,children:e.jsxs(ie,{override:{read:i.sectionMode===y.VIEW},children:[e.jsxs("div",{className:"",children:[e.jsx(M,{className:"text-primary-ptext-1000 text-xs ",label:"label.rcu.documentType"}),e.jsx(ps,{ref:h=>{v.current[r]=h},savedDocument:(t=i==null?void 0:i.savedDocuments)!=null&&t[0]?(s=i==null?void 0:i.savedDocuments)==null?void 0:s[0]:{},mandatoryDocUpload:!0,mode:i.sectionMode===y.VIEW?Te.VIEW:Te.EDIT,queryParamForDocList:ms.DOCUMENT_CATEGORY_RCU_ADDITIONAL_DOCUMENTS})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 rounded-b-xl ",children:[e.jsx("div",{className:"",children:e.jsx(Pe,{label:"label.rcu.addedDocs.status*",name:`status${r}`,value:i==null?void 0:i.status,options:vs,optionLabel:"label",optionValue:"value",onBlur:h=>X(h,r),onChange:h=>j(h,{index:r,field:"status"}),validation:(u=(l=N==null?void 0:N.current)==null?void 0:l[r])==null?void 0:u.message(`status${r}`,i.status,"mandatory"),disabled:i.sectionMode===y.VIEW})}),e.jsx("div",{className:"col-span-2 h-35",children:e.jsx(fs,{name:`remark${i==null?void 0:i.remark}`,className:"!h-full",label:"label.crifDetails.enquiryByLenders.thead.remark",variant:q.SECONDARY,maxCount:500,onChange:h=>j(h,{index:r,field:"remark"}),value:i.remark,autoResize:!0,disabled:i.sectionMode===y.VIEW})})]})]})})},i.uid?i.uid:i.key)}),e.jsx("div",{className:"p-5 w-full rounded-xl bg-primary-ptext-200 mt-5",children:e.jsx(Vs,{buttonType:Ts.ICON_TEXT_ROW,customLabel:"label.legal.addDocument",onClick:m})})]}),e.jsx(Ee,{position:"bottom-right",ref:p,toastText:$,variant:je.PRIMARY}),e.jsx(me,{onHide:()=>{I(!1),k("")},visible:U,errorMessage:P})]})}),Ne={PERMANENT:"PERMANENT",RESIDENTIAL:"RESIDENTIAL",EMPLOYEMENT_ADDRESS:"EMPLOYEMENT_ADDRESS",COLLATERAL_PROPERTY:"COLLATERAL_PROPERTY"},Gs={address:"",pincode:{pinCode:"",uid:""},city:{name:"",uid:""},state:"",latitude:"",longitude:"",uid:"",smAddressType:"",primaryAddressType:"",propertyType:""},Ns={firstName:"",middleName:"",lastName:"",mobileNumber:"",coApplicantDetailsTable:[],showAddressOfType:Ne.COLLATERAL_PROPERTY,addressData:{...Gs},nameOfOrganization:""},Hs=V=>{var j;const{data:c,isLoading:x}=V,A=xs(),[g,Y]=a.useState({...Ns}),[S,C]=a.useState(y.VIEW),[T,H]=a.useState(""),[F,$]=a.useState(!1),[L,W]=a.useState(""),[z,P]=a.useState(!1),k=a.useRef(null),U=a.useRef(null),I=a.useRef(null);a.useEffect(()=>{c&&Object.keys(c).length>0&&Y(()=>({...c}))},[c]),a.useEffect(()=>{var E;U!=null&&U.current&&T!==""&&((E=U==null?void 0:U.current)==null||E.showFunction(),H(""))},[T,F]),a.useEffect(()=>{L&&P(!0)},[L]);const p=()=>{switch(g.showAddressOfType){case Ne.PERMANENT:return e.jsxs("div",{className:"col-span-4",children:[e.jsx("div",{className:"mb-3",children:e.jsx(M,{className:"text-primary-sideBarBgColor text-base font-medium",label:"subHeading.dde.permanentAddress"})}),e.jsx(ve,{pageMode:S,ref:I,data:X,variant:Se.SECONDARY,hideMarkUsingMap:!0})]});case Ne.RESIDENTIAL:return e.jsxs("div",{className:"col-span-4",children:[e.jsx("div",{className:"mb-3",children:e.jsx(M,{className:"text-primary-sideBarBgColor text-base font-medium",label:"label.heading.residential.address"})}),e.jsx(ve,{pageMode:S,ref:I,data:X,variant:Se.SECONDARY,hideMarkUsingMap:!0})]});case Ne.EMPLOYEMENT_ADDRESS:return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("div",{className:"mb-3",children:e.jsx(M,{className:"text-primary-sideBarBgColor text-base font-medium",label:"label.rcu.employmentDetails"})}),e.jsx("div",{children:e.jsx(D,{label:"label.rcu.nameOfOrganisation/Establishment",name:"nameOfOrganization",variant:q.SECONDARY,value:m??""})})]}),e.jsxs("div",{className:"col-span-4",children:[e.jsx("div",{className:"mb-3",children:e.jsx(M,{className:"text-primary-sideBarBgColor text-base font-medium",label:"label.rcu.employmentAddress"})}),e.jsx(ve,{pageMode:S,ref:I,data:X,variant:Se.SECONDARY,hideMarkUsingMap:!0})]})]});case Ne.COLLATERAL_PROPERTY:return e.jsxs("div",{className:"col-span-4",children:[e.jsx("div",{className:"mb-3",children:e.jsx(M,{className:"text-primary-sideBarBgColor text-base font-medium",label:"label.rcu.collateralPropertyAddress"})}),e.jsx(ve,{pageMode:S,ref:I,data:X,variant:Se.SECONDARY,hideMarkUsingMap:!0})]});default:return null}},v=E=>e.jsx("span",{children:E==null?void 0:E.firstName}),b=E=>e.jsx("span",{children:E==null?void 0:E.middleName}),N=E=>e.jsx("span",{children:E==null?void 0:E.lastName}),X=a.useMemo(()=>{const{address:E,pincode:d,city:n,state:f,latitude:_,longitude:Z}=g.addressData;return{address:E,pincode:d,city:n,state:f,latitude:_,longitude:Z}},[g==null?void 0:g.addressData]),{firstName:Q,middleName:B,lastName:K,mobileNumber:o,nameOfOrganization:m}=g;return e.jsxs("div",{className:" grid gap-5",children:[e.jsx("div",{className:"flex flex-col gap-3 border border-primary-ptext-500  rounded-xl p-5 ",children:x?e.jsx(de,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"}):e.jsx(ie,{override:{read:S===y.VIEW},children:e.jsxs("div",{className:"grid grid-cols-4 gap-5  ",children:[e.jsx("div",{children:e.jsx(D,{label:"input.basicInformation.firstNameNotMandatory",name:"loanNo",variant:q.SECONDARY,value:Q??""})}),e.jsx("div",{children:e.jsx(D,{label:"input.basicInformation.middleName",name:"salesManager",variant:q.SECONDARY,value:B??""})}),e.jsx("div",{children:e.jsx(D,{label:"input.basicInformation.lastNameNotMandatory",name:"creditManager",variant:q.SECONDARY,value:K??""})}),e.jsx("div",{children:e.jsx(_s,{disabled:S===y.VIEW,label:"input.basicInformation.mobile",name:"mobileNumber",value:o,variant:q.SECONDARY})}),e.jsxs("div",{className:"col-span-4",children:[e.jsx("div",{className:"col-span-4 mb-1.5",children:e.jsx(M,{label:"label.rcu.coApplicantsDetails",className:" text-primary-sideBarBgColor  text-xs font-medium"})}),e.jsxs(Oe,{dataKey:"id",ref:k,value:c==null?void 0:c.coApplicantDetailsTable,className:` ${(j=c==null?void 0:c.coApplicantDetailsTable)!=null&&j.length?"  ":" rcu-stage-document-verification"}`,children:[e.jsx(G,{header:A("label.rcu.firstName"),className:"text-primary-ptext-1000 text-left text-xs h-12 pl-6",body:v}),e.jsx(G,{header:A("label.rcu.middleName"),className:"text-primary-ptext-1000 text-left text-xs h-12 pl-6",body:b}),e.jsx(G,{header:A("label.rcu.lastName"),className:"text-primary-ptext-1000 text-left text-xs h-12 pl-6",body:N})]})]})]})})}),e.jsx("div",{className:"flex flex-col gap-3 border border-primary-ptext-500  rounded-xl p-5 ",children:x?e.jsx(de,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"}):e.jsx(ie,{override:{read:S===y.VIEW},children:e.jsx("div",{className:"grid grid-cols-4 gap-5  ",children:p()})})}),e.jsx(Ee,{position:"bottom-right",ref:U,toastText:T,variant:je.PRIMARY}),e.jsx(me,{onHide:()=>{P(!1),W("")},visible:z,errorMessage:L})]})},Ks=V=>{const{isLoading:c,payloadInfo:x}=V,A=Ie(),[g,Y]=a.useState(y.VIEW),[S,C]=a.useState(!1),[T,H]=a.useState({...Le}),[F,$]=a.useState(""),[L,W]=a.useState(!1),[z,P]=a.useState(""),[k,U]=a.useState(!1),I=a.useRef(null),p=a.useRef(null),[,v]=a.useState(!1),b=a.useRef(new le({validators:{...ce()},...re(),autoForceUpdate:{forceUpdate:()=>v(t=>!t)}}));a.useEffect(()=>{var t;I!=null&&I.current&&F!==""&&((t=I==null?void 0:I.current)==null||t.showFunction(),$(""))},[F,L]),a.useEffect(()=>{z&&U(!0)},[z]);const N=(t,s)=>{var u;const l={...s};l.smDocVerificationAction=t.target.value,(u=p.current)==null||u.reportDataChange(l)},X=(t,s)=>{var u;const l={...s};l.remarks=t.target.value,(u=p.current)==null||u.reportDataChange(l)},Q=t=>{var s,l;(l=b==null?void 0:b.current)==null||l.showMessageFor((s=t==null?void 0:t.target)==null?void 0:s.name)},B=()=>{var s,l;let t=!1;return t=((s=b==null?void 0:b.current)==null?void 0:s.allValid())??!1,t||(v(u=>!u),(l=b==null?void 0:b.current)==null||l.showMessages(),v(u=>!u),!1)},K=async()=>{var l,u,h;if(!B())return;const t=[...((l=p.current)==null?void 0:l.getUpdatedRecords())??[]],s=E(t);try{const R=await oe.updateDocumentVerfication(s);$(Ae.SAVED),W(!L),(u=p==null?void 0:p.current)==null||u.clearAll(),(h=p==null?void 0:p.current)==null||h.search(),Y(y.VIEW)}catch(R){console.log(R),P(te(R))}},o=()=>Y(y.EDIT),m=()=>{var t,s;(t=p==null?void 0:p.current)==null||t.clearAll(),(s=p==null?void 0:p.current)==null||s.search(),d(),Y(y.VIEW)},j=(t,s)=>{var u,h,R,O,J,w,ee,se,pe,fe,xe,ge,he,ye,be,ke,Ve,Ye,_e,Fe,We,Be,$e,Ge,He,Ke,qe,ze,Xe,Je,Qe,Ze,De,we;let l={...Le};s.kycDocument?l={uid:(u=s==null?void 0:s.kycDocument)==null?void 0:u.uid,placeOfUpload:`Initiation - ${((h=s==null?void 0:s.stage)==null?void 0:h.stageName)??""}`,name:`${((J=(O=(R=s==null?void 0:s.kycDocument)==null?void 0:R.kyc)==null?void 0:O.applicant)==null?void 0:J.firstName)??"-"} ${((se=(ee=(w=s==null?void 0:s.kycDocument)==null?void 0:w.kyc)==null?void 0:ee.applicant)==null?void 0:se.middleName)??"-"} ${((xe=(fe=(pe=s==null?void 0:s.kycDocument)==null?void 0:pe.kyc)==null?void 0:fe.applicant)==null?void 0:xe.lastName)??"-"}`,fileName:((ge=s==null?void 0:s.kycDocument)==null?void 0:ge.fileName)??"-",fileType:((he=s==null?void 0:s.kycDocument)==null?void 0:he.fileType)??"-",download:"",category:"KYC",type:((ke=(be=(ye=s==null?void 0:s.kycDocument)==null?void 0:ye.kyc)==null?void 0:be.docType)==null?void 0:ke.name)??"-",sectionName:((Ve=s==null?void 0:s.kycDocument)==null?void 0:Ve.smDocSectionType)??"-",url:((Ye=s==null?void 0:s.kycDocument)==null?void 0:Ye.url)??""}:s!=null&&s.loanDocumentSection&&(l={uid:(_e=s==null?void 0:s.loanDocumentSection)==null?void 0:_e.uid,placeOfUpload:`Initiation - ${s==null?void 0:s.stage.stageName}`,name:`${((We=(Fe=s==null?void 0:s.stage)==null?void 0:Fe.applicant)==null?void 0:We.firstName)??"-"} ${(($e=(Be=s==null?void 0:s.stage)==null?void 0:Be.applicant)==null?void 0:$e.middleName)??"-"} ${((He=(Ge=s==null?void 0:s.stage)==null?void 0:Ge.applicant)==null?void 0:He.lastName)??"-"}`,fileName:((Ke=s==null?void 0:s.loanDocumentSection)==null?void 0:Ke.fileName)??"-",fileType:((qe=s==null?void 0:s.loanDocumentSection)==null?void 0:qe.fileType)??"-",download:"",category:((Xe=(ze=s==null?void 0:s.loanDocumentSection)==null?void 0:ze.loanDocument)==null?void 0:Xe.docCategory)??"-",type:((Ze=(Qe=(Je=s==null?void 0:s.loanDocumentSection)==null?void 0:Je.loanDocument)==null?void 0:Qe.docType)==null?void 0:Ze.name)??"-",sectionName:((De=s==null?void 0:s.loanDocumentSection)==null?void 0:De.section)??"-",url:((we=s==null?void 0:s.loanDocumentSection)==null?void 0:we.url)??""}),H(l),C(!0)},E=t=>{const s=()=>{const u=t.map(h=>({uid:h.uid??null,smDocVerificationAction:h.smDocVerificationAction,remarks:h.remarks}));return u.length>0?u:[]};return{uid:x.rcuUid,stageDocuments:s()}},d=()=>{var t;b.current=new le({validators:{...ce()},...re(),autoForceUpdate:{forceUpdate:()=>v(s=>!s)}}),(t=b==null?void 0:b.current)==null||t.hideMessages()},n=t=>{if(t.kycDocument||t.loanDocumentSection){const s={...t.kycDocument||t.loanDocumentSection};return e.jsx(M,{className:" text-xs text-secondary-labelColor ",label:s==null?void 0:s.fileName})}},f=t=>{var s,l,u,h,R,O;if(t.kycDocument)return e.jsx(M,{className:" text-xs text-secondary-labelColor ",label:(u=(l=(s=t==null?void 0:t.kycDocument)==null?void 0:s.kyc)==null?void 0:l.docType)==null?void 0:u.name});if(t.loanDocumentSection)return e.jsx(M,{className:" text-xs text-secondary-labelColor ",label:(O=(R=(h=t==null?void 0:t.loanDocumentSection)==null?void 0:h.loanDocument)==null?void 0:R.docType)==null?void 0:O.name})},_=t=>{if(t!=null&&t.kycDocument){const{firstName:s,lastName:l,applicantType:u}=t.kycDocument.kyc.applicant;return e.jsx(M,{className:" text-xs text-secondary-labelColor ",label:`${s??""} ${l??""}-${u??""}`})}else if(t.loanDocumentSection){const{firstName:s,lastName:l,applicantType:u}=t.loanDocumentSection.loanDocument.applicant;return e.jsx(M,{className:" text-xs text-secondary-labelColor ",label:`${s??""} ${l??""}-${u??""}`})}},Z=t=>e.jsx("div",{className:"w-6 h-6 flex justify-center",children:e.jsx(gs,{buttonType:hs.VIEW,onClick:s=>{j(s,t)},disabled:g===y.VIEW})}),i=t=>{var s;return e.jsx("div",{className:"flex items-center",children:e.jsx(Pe,{name:`smDocVerificationAction${t.uid}`,value:t.smDocVerificationAction,onChange:l=>{N(l,t)},validation:(s=b==null?void 0:b.current)==null?void 0:s.message(`smDocVerificationAction${t.uid}`,t==null?void 0:t.smDocVerificationAction,"mandatory"),options:Is,onBlur:Q,optionLabel:"label",optionValue:"value",disabled:g===y.VIEW})})},r=t=>{var s;return e.jsx("div",{className:"flex items-center",children:e.jsx(D,{name:`remarks${t==null?void 0:t.uid}`,variant:q.SECONDARY,onChange:l=>X(l,t),onBlur:Q,value:t.remarks??"",validation:(s=b==null?void 0:b.current)==null?void 0:s.message(`remarks${t==null?void 0:t.uid}`,t==null?void 0:t.remarks,"mandatory")})})};return e.jsxs("div",{children:[e.jsx(Re,{title:"label.rcu.documentVerification",pageMode:g,onSave:K,onCancel:m,onEdit:o,disabled:c,children:c?e.jsx(de,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"}):e.jsx(ie,{override:{read:g===y.VIEW},children:e.jsx("div",{className:"mt-3 flex flex-col gap-5 w-full",children:(A==null?void 0:A.stageUid)&&x.rcuUid&&e.jsxs(Ys,{ref:p,uniqueKey:"uid",mode:"UPDATE",standardDataFormatPromise:oe.getDocumentVerification,search:`&stage.uid=${A.stageUid}&isSharedAtInitiation=${!0}&isActive=${!0}`,className:" share-payment-details-table",dataKey:"uid",children:[e.jsx(G,{className:"text-primary-ptext-1000 text-left text-xs h-12 pl-6",header:ue.t("label.existing.doc.file.name"),body:n}),e.jsx(G,{className:"text-primary-ptext-1000 text-left text-xs h-12 pl-6",header:ue.t("label.rcu.documentType"),body:f}),e.jsx(G,{className:"text-primary-ptext-1000 text-left text-xs h-12 pl-6",header:ue.t("label.rcu.customer"),body:_}),e.jsx(G,{className:"text-primary-ptext-1000 text-left text-xs h-12 pl-6",header:ue.t("label.rcu.viewFile"),body:Z}),e.jsx(G,{className:"text-primary-ptext-1000 text-left text-xs h-12 pl-6",header:ue.t("label.rcu.verificationStatus"),body:i,style:{maxWidth:"120px"}}),e.jsx(G,{className:"text-primary-ptext-1000 text-left text-xs h-12 px-6",header:ue.t("label.crifDetails.enquiryByLenders.thead.remark"),body:r,style:{maxWidth:"150px"}})]})})})}),e.jsx(ys,{visible:S,onToggleVisibility:()=>C(t=>!t),list:[],currentSection:T}),e.jsx(Ee,{position:"bottom-right",ref:I,toastText:F,variant:je.PRIMARY}),e.jsx(me,{onHide:()=>{U(!1),P("")},visible:k,errorMessage:z})]})},js={rcuUid:"",loanNo:"",branch:"",agency:"",salesManager:"",creditManager:"",dateOfReport:"",dedupeCheck:"",commentsErrorMessage:"",comments:""},ne={YES:"YES",NO:"NO"},qs=V=>{var t;const{data:c,isLoading:x,getDataOnCancel:A}=V,[g,Y]=a.useState({...js}),[S,C]=a.useState(y.VIEW),[T,H]=a.useState(""),[F,$]=a.useState(!1),[L,W]=a.useState(""),[z,P]=a.useState(!1),k=a.useRef(null),U=a.useRef(null),[,I]=a.useState(!1),p=a.useRef(new le({validators:{...ce()},...re(),autoForceUpdate:{forceUpdate:()=>I(s=>!s)}}));a.useEffect(()=>{c.loanNo&&Y(()=>({...c}))},[c]),a.useEffect(()=>{var s;k!=null&&k.current&&T!==""&&((s=k==null?void 0:k.current)==null||s.showFunction(),H(""))},[T,F]),a.useEffect(()=>{L&&P(!0)},[L]),a.useEffect(()=>{g.dedupeCheck===ne.NO&&B()},[g.dedupeCheck]);const v=s=>{Y(l=>({...l,[s.target.name]:s.target.value}))},b=s=>{Y(l=>({...l,dedupeCheck:s.value}))},N=s=>{B()&&g!=null&&g.commentsErrorMessage&&Y(l=>({...l,errorMessage:""}))},X=s=>{var l,u;(u=p==null?void 0:p.current)==null||u.showMessageFor((l=s==null?void 0:s.target)==null?void 0:l.name)},Q=()=>{var l,u;let s=!1;return s=((l=p==null?void 0:p.current)==null?void 0:l.allValid())??!1,s||(I(h=>!h),(u=p==null?void 0:p.current)==null||u.showMessages(),I(h=>!h),!1)},B=()=>{var l,u,h,R;if(g.dedupeCheck===ne.NO)return Y(O=>({...O,commentsErrorMessage:""})),!0;const s=(R=(h=(u=(l=U==null?void 0:U.current)==null?void 0:l.editor)==null?void 0:u.plugins)==null?void 0:h.wordcount)==null?void 0:R.body.getCharacterCount();return s<1||!s?(Y(O=>({...O,commentsErrorMessage:"Minimum 1 characters"})),!1):s>300?(Y(O=>({...O,commentsErrorMessage:"Maximum 300 characters"})),!1):(Y(O=>({...O,commentsErrorMessage:""})),!0)},K=async()=>{if(Q()&&B()){const s=j();try{const l=await oe.updateLoanSummary(s);H(Ae.SAVED),$(!F),C(y.VIEW)}catch(l){W(te(l))}}},o=()=>C(y.EDIT),m=()=>{A==null||A(),E(),C(y.VIEW)},j=()=>{var s,l;return{uid:g.rcuUid,dateOfReportingSampling:g.dateOfReport,isDedupeCheckDone:g.dedupeCheck===ne.YES,dedupeDescription:(l=(s=U.current)==null?void 0:s.editor)==null?void 0:l.getContent()}},E=()=>{var s;p.current=new le({validators:{...ce()},...re(),autoForceUpdate:{forceUpdate:()=>I(l=>!l)}}),(s=p==null?void 0:p.current)==null||s.hideMessages()},{loanNo:d,salesManager:n,creditManager:f,dedupeCheck:_,branch:Z,agency:i,dateOfReport:r}=g;return e.jsxs("div",{children:[e.jsx(Re,{title:"",pageMode:S,onSave:K,onCancel:m,onEdit:o,disabled:x,children:x?e.jsx(de,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"}):e.jsx(ie,{override:{read:S===y.VIEW},children:e.jsxs(us.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-4 gap-3  ",children:[e.jsx("div",{children:e.jsx(D,{label:"label.rcu.loanNoMandatory",name:"loanNo",variant:q.SECONDARY,value:d??"",disabled:!0})}),e.jsx("div",{children:e.jsx(D,{label:"label.rcu.salesManager",name:"salesManager",variant:q.SECONDARY,value:n??"",disabled:!0})}),e.jsx("div",{children:e.jsx(D,{label:"label.rcu.creditManager",name:"creditManager",variant:q.SECONDARY,value:f??"",disabled:!0})}),e.jsx("div",{children:e.jsx(D,{label:"input.sourceDetails.branch",name:"branch",variant:q.SECONDARY,value:Z??"",disabled:!0})}),e.jsx("div",{children:e.jsx(D,{label:"label.rcu.agencyMandatory",name:"agency",variant:q.SECONDARY,value:i??"",disabled:!0})}),e.jsx("div",{children:e.jsx(bs,{label:"label.rcu.dateOfReporting",name:"dateOfReport",value:r,variant:q.SECONDARY,onChange:v,onBlur:X,validation:(t=p==null?void 0:p.current)==null?void 0:t.message("dateOfReport",r,"mandatory"),placeholder:"DD-MMM-YYYY "})})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"mb-5",children:[e.jsx(M,{className:"text-xs text-primary-ptext-1000",label:"label.rcu.dedupeCheck"}),e.jsxs("div",{className:"flex gap-5",children:[e.jsxs("div",{className:"mr-5 flex",children:[e.jsx(os,{hideLabel:!0,hideErrorRow:!0,variant:es.PRIMARY,value:ne.YES,checked:_===ne.YES,onChange:b,disabled:S===y.VIEW}),e.jsx(M,{className:"ml-1.5 text-xs ",label:"label.dde.yes"})]}),e.jsxs("div",{className:"flex",children:[e.jsx(os,{hideLabel:!0,hideErrorRow:!0,variant:es.PRIMARY,value:ne.NO,checked:_===ne.NO,onChange:b,disabled:S===y.VIEW}),e.jsx(M,{className:"ml-1.5 text-xs ",label:"label.dde.no"})]})]})]}),e.jsxs("div",{children:[e.jsx(M,{className:"text-xs text-primary-ptext-1000",label:"label.rcu.comments"}),e.jsx(Fs,{ref:U,validation:{errorMessage:g.commentsErrorMessage},initialValue:g.comments,onKeyDown:N,height:"400px",disabled:S===y.VIEW})]})]})]})})}),e.jsx(Ee,{position:"bottom-right",ref:k,toastText:T,variant:je.PRIMARY}),e.jsx(me,{onHide:()=>{P(!1),W("")},visible:z,errorMessage:L})]})},Es={dateOfInitiation:"",rcuType:"",externalVendor:{name:""},internalAssignee:{name:""},CCEmails:[],description:"",profileCheckTable:[],stageDocuments:[]},zs=V=>{var E;const{isLoading:c,data:x,dropdownOptions:A}=V,g=xs(),[Y,S]=a.useState({...Es}),[C,T]=a.useState(!1),[H,F]=a.useState({...Le}),$=a.useRef(null),L=a.useRef();a.useEffect(()=>{x.rcuType&&S(d=>({...d,...x}))},[x]);const W=(d,n)=>{var _,Z,i,r,t,s,l,u,h,R,O,J,w,ee,se,pe,fe,xe,ge,he,ye,be;let f={uid:"",placeOfUpload:"",name:"",fileName:"",fileType:"",download:"",category:"",type:"",sectionName:"",url:""};n!=null&&n.loanDocumentSection?f={uid:n==null?void 0:n.uid,placeOfUpload:"",name:((i=(Z=(_=n==null?void 0:n.loanDocumentSection)==null?void 0:_.loanDocument)==null?void 0:Z.applicant)==null?void 0:i.firstName)??"-",fileName:((r=n==null?void 0:n.loanDocumentSection)==null?void 0:r.fileName)??"-",fileType:((t=n==null?void 0:n.loanDocumentSection)==null?void 0:t.fileType)??"-",download:"",category:((l=(s=n==null?void 0:n.loanDocumentSection)==null?void 0:s.loanDocument)==null?void 0:l.docCategory)??"-",type:((R=(h=(u=n==null?void 0:n.loanDocumentSection)==null?void 0:u.loanDocument)==null?void 0:h.docType)==null?void 0:R.name)??"-",sectionName:((O=n==null?void 0:n.loanDocumentSection)==null?void 0:O.section)??"-",url:(J=n==null?void 0:n.loanDocumentSection)==null?void 0:J.url}:n!=null&&n.kycDocument&&(f={uid:n==null?void 0:n.uid,placeOfUpload:"",name:((se=(ee=(w=n==null?void 0:n.kycDocument)==null?void 0:w.kyc)==null?void 0:ee.applicant)==null?void 0:se.firstName)??"-",fileName:((pe=n==null?void 0:n.kycDocument)==null?void 0:pe.fileName)??"-",fileType:((fe=n==null?void 0:n.kycDocument)==null?void 0:fe.fileType)??"-",download:"",category:"KYC",type:((he=(ge=(xe=n==null?void 0:n.kycDocument)==null?void 0:xe.kyc)==null?void 0:ge.docType)==null?void 0:he.name)??"-",sectionName:((ye=n==null?void 0:n.kycDocument)==null?void 0:ye.smDocSectionType)??"-",url:(be=n==null?void 0:n.kycDocument)==null?void 0:be.url}),F(f),T(!0)},z=d=>e.jsx("div",{className:"flex items-center",children:e.jsx(M,{className:" text-primary-ptext-1000 ",label:(d==null?void 0:d.primaryAddressType)??""})}),P=d=>e.jsx("div",{className:"flex items-center",children:e.jsx(M,{className:" text-primary-ptext-1000 ",label:(d==null?void 0:d.address)??""})}),k=d=>{var n;return e.jsx("div",{className:"flex items-center",children:e.jsx(M,{className:" text-primary-ptext-1000 ",label:(n=d==null?void 0:d.city)==null?void 0:n.name})})},U=d=>e.jsx("div",{className:"flex items-center",children:e.jsx(M,{className:" text-primary-ptext-1000 ",label:d==null?void 0:d.state})}),I=d=>{var n;return e.jsx("div",{className:"flex items-center",children:e.jsx(M,{className:" text-primary-ptext-1000 ",label:(n=d==null?void 0:d.pincode)==null?void 0:n.pinCode})})},p=d=>{var n,f;return e.jsx("div",{className:"flex items-center",children:d!=null&&d.loanDocumentSection?((f=(n=d==null?void 0:d.loanDocumentSection)==null?void 0:n.loanDocument)==null?void 0:f.docCategory)??"-":"KYC"})},v=d=>e.jsx("div",{className:"flex items-center",children:(d==null?void 0:d.stageDocType)??"-"}),b=d=>{var n,f;return e.jsx("div",{className:"flex items-center",children:d!=null&&d.loanDocumentSection?((n=d==null?void 0:d.loanDocumentSection)==null?void 0:n.section)??"-":(f=d==null?void 0:d.kycDocument)==null?void 0:f.smDocSectionType})},N=d=>e.jsx("div",{className:"px-2 flex items-center space-x-4",children:e.jsx("div",{className:"flex items-center",children:e.jsx(gs,{buttonType:hs.VIEW,onClick:n=>{W(n,d)},isIgnoreAccessLevel:!0})})}),X=()=>{var d;return e.jsxs(Oe,{dataKey:"id",ref:L,value:x==null?void 0:x.stageDocuments,className:` ${(d=x==null?void 0:x.stageDocuments)!=null&&d.length?"  ":" rcu-stage-document-verification"}`,children:[e.jsx(G,{header:g("label.existing.document.category"),className:"text-primary-ptext-1000 text-left text-xs h-12 pl-6",body:p}),e.jsx(G,{header:g("label.existing.document.type"),className:"text-primary-ptext-1000 text-left text-xs h-12 pl-6",body:v}),e.jsx(G,{header:g("label.existing.document.section"),className:"text-primary-ptext-1000 text-left text-xs h-12 pl-6",body:b}),e.jsx(G,{header:g("label.existing.document.action"),className:"text-primary-ptext-1000 text-center text-xs h-12 pr-2",body:N})]})},{dateOfInitiation:Q,rcuType:B,externalVendor:K,internalAssignee:o,CCEmails:m,description:j}=Y;return e.jsxs("div",{children:[e.jsx(ae,{title:"heading.rcu.initiationInfo",children:c?e.jsx(de,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"}):e.jsx(ie,{override:{read:!0},children:e.jsxs("div",{className:"grid grid-cols-4 gap-3 border border-primary-ptext-500  rounded-xl p-5 ",children:[e.jsx("div",{className:"",children:e.jsx(bs,{label:"label.rcu.dateOfInitiation",name:"dateOfInitiation",value:new Date(Q),variant:q.SECONDARY,placeholder:"DD-MM-YYYY "})}),e.jsx("div",{className:"",children:e.jsx(Pe,{label:"label.rcu.rcuType",name:"rcuType",value:B,optionLabel:"name",optionValue:"code",options:(A==null?void 0:A.rcuType)??[]})}),e.jsx("div",{className:"col-span-2"}),e.jsx("div",{className:"",children:e.jsx(ds,{label:"label.rcu.externalVendor",name:"externalVendor",value:K==null?void 0:K.name,variant:q.PRIMARY})}),e.jsx("div",{className:"",children:e.jsx(ds,{label:"label.rcu.internalAssignee",name:"internalAssignee",value:o==null?void 0:o.name,variant:q.PRIMARY})}),e.jsx("div",{className:"col-span-2"}),e.jsx("div",{className:"col-span-2",children:e.jsx(Ws,{className:"",name:"cc",value:m,label:"label.rcu.cc",ref:$})}),e.jsx("div",{className:"col-span-2"}),e.jsxs("div",{className:"col-span-4",children:[e.jsx("div",{className:"mb-1",children:e.jsx(M,{label:"label.legal.documentVerification",className:"text-primary-sideBarBgColor font-medium text-xs"})}),X()]}),e.jsx("div",{className:"col-span-4",children:e.jsx(M,{label:"heading.rcu.profileCheck",className:"text-primary-sideBarBgColor font-bold text-xs"})}),e.jsx("div",{className:"col-span-4",children:e.jsxs(Oe,{dataKey:"id",ref:L,value:x==null?void 0:x.profileCheckTable,className:` ${(E=x==null?void 0:x.profileCheckTable)!=null&&E.length?" ":" rcu-stage-document-verification"}`,children:[e.jsx(G,{header:g("label.stages.initiate.addressType"),className:"text-primary-ptext-1000 text-left text-xs h-12 pl-6",body:z}),e.jsx(G,{header:g("label.stages.initiate.address"),className:"text-primary-ptext-1000 text-left text-xs h-12 pl-6",body:P}),e.jsx(G,{header:g("label.stages.initiate.city"),className:"text-primary-ptext-1000 text-center text-xs h-12 px-6",body:k}),e.jsx(G,{header:g("label.stages.initiate.state"),className:"text-primary-ptext-1000 text-center text-xs h-12 px-6",body:U}),e.jsx(G,{header:g("label.stages.initiate.pincode"),className:"text-primary-ptext-1000 text-center text-xs h-12 px-6",body:I})]})}),e.jsx("div",{className:"col-span-2 h-40",children:e.jsx(fs,{name:"description",className:"!h-full",label:"input.masterData.staticMaster.description",placeholder:"placeholder.rcu.description",variant:q.SECONDARY,maxCount:200,value:j})})]})})}),e.jsx(ys,{visible:C,onToggleVisibility:()=>T(d=>!d),list:[],currentSection:H})]})},Ss={savedDocuments:[]},Xs=V=>{var B,K;Ie();const{data:c,payloadInfo:x,getDataOnCancel:A,isLoading:g}=V,[Y,S]=a.useState({...Ss}),[C,T]=a.useState("1"),[H,F]=a.useState(y.VIEW),[$,L]=a.useState(""),[W,z]=a.useState(!1),[P,k]=a.useState(""),[U,I]=a.useState(!1),p=a.useRef(null),v=a.useRef(null);a.useEffect(()=>{c&&Object.keys(c).length>0&&(S(()=>({...c})),T(Math.random().toString()))},[c]),a.useEffect(()=>{var o;p!=null&&p.current&&$!==""&&((o=p==null?void 0:p.current)==null||o.showFunction(),L(""))},[$,W]),a.useEffect(()=>{P&&I(!0)},[P]);const b=async()=>{var j,E;const o=(j=v==null?void 0:v.current)==null?void 0:j.getUploadedData();if(!((E=o==null?void 0:o.documentSectionUrls)!=null&&E.length))return;const m=Q(o);try{const d=await oe.updateUploadReport(m);L(Ae.SAVED),z(!W),F(y.VIEW)}catch(d){console.log(d),k(te(d))}},N=()=>F(y.EDIT),X=()=>{var o;A==null||A(),(o=v==null?void 0:v.current)==null||o.resetValidator(),F(y.VIEW)},Q=o=>{const m=E=>E.map(n=>({uid:n.uid?n.uid:null,section:n.code,fileName:n.fileName,fileType:n.contentType,thumbUrl:n.thumbUrl,url:n.url,isActive:n.isActive}));return{uid:x.rcuUid,loan:{uid:x.loanUid},loanDocuments:[{docType:{uid:o.documentUid},docCategory:o.documentCategory,documentSections:m(o.documentSectionUrls)}]}};return e.jsxs("div",{children:[e.jsx(Re,{title:"",pageMode:H,onSave:b,onCancel:X,onEdit:N,disabled:g,children:g?e.jsx(de,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"}):e.jsx(ie,{override:{read:H===y.VIEW},children:e.jsx("div",{className:" grid grid-cols-4 gap-3 ",children:e.jsxs("div",{className:"col-span-4",children:[e.jsx("div",{children:e.jsx(M,{className:"text-xs text-primary-ptext-1000",label:"label.rcu.documentType.uploadReport"})}),e.jsx(ps,{ref:v,savedDocument:(B=c.savedDocuments)!=null&&B[0]?(K=c.savedDocuments)==null?void 0:K[0]:{},mode:H===y.VIEW?Te.VIEW:Te.EDIT,queryParamForDocList:ms.DOCUMENT_CATEGORY_RCU_DOCUMENT,mandatoryDocUpload:!0},C)]})})})}),e.jsx(Ee,{position:"bottom-right",ref:p,toastText:$,variant:je.PRIMARY}),e.jsx(me,{onHide:()=>{I(!1),k("")},visible:U,errorMessage:P})]})},Js={showInfo:!0,loanUid:"",applicantUid:"",rcuUid:"",stageUid:"",stageInfo:{},dropdownOptions:{addressType:[],rcuType:[],rcuStatus:[],verificationStatus:[]},coApplicantList:[],initiationInfo:{...Es},loanSummary:{...js},applicantDetails:{...Ns},addedDocuments:[],profileVerification:{...rs},uploadReport:{...Ss},rcuStatusInfo:{...rs},isLoadingInitiationInfo:!0,isLoadingLoanSummary:!0,isLoadingApplicantDetails:!0,isLoadingDocumentVerification:!0,isLoadingAddedDocuments:!0,isLoadingProfileVerification:!0,isLoadingUploadReport:!0,isLoadingRcuStatusInfo:!0},Dt=()=>{var K;const V=Ie(),[c,x]=a.useState({...Js}),[A,g]=a.useState(""),[Y,S]=a.useState(!1),[C,T]=a.useState(!1),H=Bs(o=>o.UserProfileReducers.profileObj),F=(H==null?void 0:H.sahayyaUserType)===As.PARTNER_USER,$={rcuUid:c.rcuUid,loanUid:c.loanUid,stageUid:c.stageUid};a.useEffect(()=>{V.stageUid&&L()},[V.stageUid]),a.useEffect(()=>{c.stageUid&&(W(),z(c.stageUid))},[c.stageUid]),a.useEffect(()=>{c.rcuUid&&P()},[c.rcuUid]),a.useEffect(()=>{A&&S(!0)},[A]),a.useEffect(()=>{var o,m,j;((o=c.stageInfo)==null?void 0:o.status)===Ce.IN_REVIEW?T(!0):F?((m=c.stageInfo)==null?void 0:m.status)===Ce.COMPLETED||((j=c.stageInfo)==null?void 0:j.status)===Ce.CANCELLED?T(!0):T(!1):T(!0)},[(K=c.stageInfo)==null?void 0:K.status,F]);const L=async()=>{x(o=>({...o,loanUid:V.loanUid??"",stageUid:V.stageUid??""})),k(),U()},W=async o=>{var m,j,E,d,n;try{const f=await ss.getStageDetails(c.stageUid);if(Me(f)){if(o)return f==null?void 0:f.data;const _=await ss.getPropertyDetails(0,20,`uid=${((E=(j=(m=f==null?void 0:f.data)==null?void 0:m.stage)==null?void 0:j.address)==null?void 0:E.uid)??""}`),Z=[],i=await Us.getApplicantInfo(0,20,Rs.CO_APPLICANT,V.loanUid??"");(n=(d=i==null?void 0:i.data)==null?void 0:d.results)==null||n.forEach(r=>{r.isActive&&Z.push({firstName:r.firstName,middleName:r.middleName,lastName:r.lastName})}),x(r=>{var t,s,l,u,h,R,O,J,w,ee,se;return{...r,stageInfo:(t=f==null?void 0:f.data)==null?void 0:t.stage,rcuUid:((u=(l=(s=f==null?void 0:f.data)==null?void 0:s.stage)==null?void 0:l.rcu)==null?void 0:u.uid)??"",applicantUid:((O=(R=(h=f==null?void 0:f.data)==null?void 0:h.stage)==null?void 0:R.applicant)==null?void 0:O.uid)??"",initiationInfo:{...r.initiationInfo,...Ls(f==null?void 0:f.data,(w=(J=_==null?void 0:_.data)==null?void 0:J.results)==null?void 0:w[0])},isLoadingInitiationInfo:!1,loanSummary:{...r.loanSummary,...ts(f==null?void 0:f.data)},isLoadingLoanSummary:!1,applicantDetails:{...r.applicantDetails,...Ps(f==null?void 0:f.data,Z,(se=(ee=_==null?void 0:_.data)==null?void 0:ee.results)==null?void 0:se[0])},isLoadingApplicantDetails:!1,isLoadingDocumentVerification:!1,profileVerification:{...r.profileVerification,...is(f==null?void 0:f.data)},isLoadingProfileVerification:!1,rcuStatusInfo:{...r.rcuStatusInfo,...ns(f==null?void 0:f.data)},isLoadingRcuStatusInfo:!1}})}}catch(f){console.log(f),g(te(f)),x(_=>({..._,isLoadingInitiationInfo:!1,isLoadingLoanSummary:!1,isLoadingApplicantDetails:!1,isLoadingDocumentVerification:!1,isLoadingAddedDocuments:!1,isLoadingProfileVerification:!1,isLoadingRcuStatusInfo:!1}))}},z=async o=>{try{const m=await oe.getAdditionalDocuments(o);x(j=>({...j,addedDocuments:[...ks(m==null?void 0:m.data)],isLoadingAddedDocuments:!1}))}catch(m){console.log(m),g(te(m)),x(j=>({...j,isLoadingAddedDocuments:!1}))}},P=async o=>{try{const m=await oe.getUploadReport(c.rcuUid);if(Me(m)){if(o)return m==null?void 0:m.data;x(j=>({...j,uploadReport:{...j.uploadReport,...as(m==null?void 0:m.data)},isLoadingUploadReport:!1}))}}catch(m){console.log(m),g(te(m)),x(j=>({...j,isLoadingUploadReport:!1}))}},k=()=>{Os.getAll(0,1e3,"staticMasterType.code=RCU_TYPE&").then(o=>{var m;Me(o)&&B("rcuType",(m=o==null?void 0:o.data)==null?void 0:m.results)}).catch(o=>{console.log(o),g(te(o))})},U=()=>{B("rcuStatus",[...Cs])},I=()=>{x(o=>({...o,showInfo:!1}))},p=async()=>{const o=await W(!0);x(m=>({...m,loanSummary:{...m.loanSummary,...ts(o)}}))},v=async()=>{const o=await W(!0);x(m=>({...m,profileVerification:{...m.profileVerification,...is(o)}}))},b=async()=>{const o=await P(!0);x(m=>({...m,uploadReport:{...m.uploadReport,...as(o)}}))},N=async()=>{const o=await W(!0);x(m=>({...m,rcuStatusInfo:{...m.rcuStatusInfo,...ns(o)}}))},X=()=>{var o,m;return{rcuType:(o=c.dropdownOptions)==null?void 0:o.rcuType,addressType:(m=c.dropdownOptions)==null?void 0:m.addressType}},Q=()=>{var o;return{rcuStatus:(o=c.dropdownOptions)==null?void 0:o.rcuStatus}},B=(o,m)=>{x(j=>({...j,dropdownOptions:{...j.dropdownOptions,[o]:m??[]}}))};return e.jsxs("div",{className:"grid gap-5 mb-5",children:[c!=null&&c.showInfo?e.jsx(Ms,{description:"description.rcu.info",onClose:I}):null,e.jsx(zs,{isLoading:c.isLoadingInitiationInfo,data:c==null?void 0:c.initiationInfo,dropdownOptions:X()}),e.jsxs(ie,{override:{read:C},children:[e.jsx(ae,{title:"heading.rcu.loanSummary",children:e.jsx(qs,{isLoading:c.isLoadingLoanSummary,data:c.loanSummary,getDataOnCancel:p})}),e.jsx(ae,{title:"heading.rcu.applicantDetails",children:e.jsx(Hs,{isLoading:c.isLoadingApplicantDetails,data:c.applicantDetails})}),e.jsx(ae,{title:"heading.technical.documentDetails",children:e.jsxs(e.Fragment,{children:[e.jsx(Ks,{isLoading:c.isLoadingDocumentVerification,payloadInfo:$}),e.jsx($s,{isLoading:c.isLoadingAddedDocuments,data:c==null?void 0:c.addedDocuments,payloadInfo:{loanUid:(V==null?void 0:V.loanUid)??"",applicantUid:c.applicantUid??"",stageUid:c.stageUid??""},getDetailsCallback:()=>z(c==null?void 0:c.stageUid)})]})}),e.jsx(ae,{title:"label.rcu.profile",children:e.jsx(ls,{isLoading:c.isLoadingProfileVerification,data:c.profileVerification,getDataOnCancel:v,section:cs.PROFILE_VERIFICATION.code})}),e.jsx(ae,{title:"label.rcu.uploadRCUReport",children:e.jsx(Xs,{isLoading:c.isLoadingUploadReport,data:c.uploadReport,payloadInfo:$,getDataOnCancel:b})}),e.jsx(ae,{title:"heading.rcu.rcuStatus",children:e.jsx(ls,{isLoading:c.isLoadingRcuStatusInfo,data:c.rcuStatusInfo,dropdownOptions:Q(),section:cs.RCU_STATUS.code,getDataOnCancel:N})})]}),e.jsx(me,{onHide:()=>{S(!1),g("")},visible:Y,errorMessage:A})]})};export{Dt as default};
//# sourceMappingURL=PageReport-59a19834.js.map
