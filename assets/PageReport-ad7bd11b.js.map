{"version":3,"file":"PageReport-ad7bd11b.js","sources":["../../src/views/transaction/PageDDE/Legal/Sections/BoundaryDetails/BoundaryDetails.tsx","../../src/views/transaction/PageDDE/Legal/Sections/DocumentScrutinized/DocumentScrutinized.tsx","../../src/views/transaction/PageDDE/Legal/Sections/DocumentScrutinizedPostAndPre/DocumentScrutinizedPostAndPre.tsx","../../src/views/transaction/PageDDE/Legal/Sections/InitiationInfo/InitiationInfo.tsx","../../src/views/transaction/PageDDE/Legal/Sections/LoanSummary/LoanSummary.tsx","../../src/views/transaction/PageDDE/Legal/Sections/OtherProvisions/OtherProvisions.tsx","../../src/views/transaction/PageDDE/Legal/Sections/PropertyAddressAsDocument/PropertyAddressAsDocument.tsx","../../src/views/transaction/PageDDE/Legal/Sections/PropertyDetails/PropertyDetails.tsx","../../src/views/transaction/PageDDE/Legal/Sections/SaveContentTextEditor/SaveContentTextEditor.tsx","../../src/views/transaction/PageDDE/Legal/Sections/UploadReport/UploadReport.tsx","../../src/views/transaction/PageDDE/Legal/PageReport/PageReport.tsx"],"sourcesContent":["import DatePicker from \"components/DatePicker/DatePicker\";\nimport SaveComponent from \"components/Save/SaveComponent\";\nimport Section from \"components/Section/Section\";\nimport React, { useEffect, useState, forwardRef, useRef, useImperativeHandle } from \"react\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport {\n  INPUT_STYLE_TYPE,\n  PAGE_MODE,\n  STATIC_MASTER_TYPE_TOAST_TEXT,\n  TOAST_STYLE_TYPE,\n} from \"utils/Constant\";\nimport {\n  getStandardValidator,\n  messageReplace,\n  parseStandardAPIErrorMessage,\n} from \"utils/CommonUtil\";\nimport InputBox from \"components/InputBox\";\nimport AclGuard from \"components/AclGuard\";\nimport InputTextArea from \"components/InputTextArea/InputTextArea\";\nimport { ILegalSectionProps } from \"../../PageReport/PageReport\";\nimport ErrorDialog from \"components/ErrorDialog/ErrorDialog\";\nimport ToastCustom from \"components/Toast\";\nimport SkeletonCustom from \"components/Skeleton/Skeleton\";\nimport LegalService from \"services/transaction/DDE/LegalService\";\nimport { isLegalSectionAccessDisabled } from \"../../Helper\";\nimport { useSelector } from \"react-redux\";\ninterface IProps extends ILegalSectionProps {\n  isLoadingInitial: boolean;\n  data?: ILegalLoanSummaryPageObj;\n  getDetailsCallback: () => void;\n}\n\nexport interface ILegalLoanSummaryPageObj {\n  legalUid: string;\n  eastBy: string;\n  westBy: string;\n  northBy: string;\n  southBy: string;\n}\n\nexport const initialLegalBoundaryDetailsPageOj: ILegalLoanSummaryPageObj = {\n  legalUid: \"\",\n  eastBy: \"\",\n  westBy: \"\",\n  northBy: \"\",\n  southBy: \"\",\n};\n\nexport interface IOtherDetailsRef {\n  save: () => ILegalLoanSummaryPageObj;\n  onSaveSuccess: () => any;\n  onCancel: () => any;\n}\n\nconst BoundaryDetails: React.FC<IProps> = forwardRef((props, ref) => {\n  const { data, getDetailsCallback, isLoadingInitial, isLoading } = props;\n\n  /*\n    -------------------------------------------------------\n      State\n    -------------------------------------------------------\n    */\n  const [pageObj, setPageObj] = useState<ILegalLoanSummaryPageObj>({\n    ...initialLegalBoundaryDetailsPageOj,\n  });\n  const [pageMode, setPageMode] = useState(PAGE_MODE.VIEW);\n  const [toastMessage, setToastMessage] = useState(\"\");\n  const [triggerToast, setTriggerToast] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [showDialogAPIError, setShowDialogAPIError] = useState(false);\n  // ref\n  const toastMessageRef = useRef(null);\n  // --------------------------- validator initialization ---------------------- //\n  const [, forceUpdate] = useState<boolean>(false);\n\n  const simpleValidator = useRef(\n    new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    })\n  );\n\n  useImperativeHandle(ref, () => ({\n    save: onSave,\n    onCancel: onCancel,\n  }));\n\n  // --------------------------- global variables ---------------------- //\n\n  /*\n     -------------------------------------------------------\n       useEffect\n     -------------------------------------------------------\n   */\n\n  useEffect(() => {\n    if (data?.legalUid) {\n      setPageObj((prevObj) => ({\n        ...prevObj,\n        ...data,\n      }));\n    }\n  }, [data]);\n\n  useEffect(() => {\n    if (toastMessageRef?.current && toastMessage !== \"\") {\n      // @ts-ignore: will be fixed in future\n      toastMessageRef?.current?.showFunction();\n      setToastMessage(\"\");\n    }\n  }, [toastMessage, triggerToast]);\n\n  useEffect(() => {\n    if (errorMessage) {\n      setShowDialogAPIError(true);\n    }\n  }, [errorMessage]);\n\n  /*\n    -------------------------------------------------------\n      Service Calls\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n      Handlers\n    -------------------------------------------------------\n  */\n  const handleChange = (e: any) => {\n    setPageObj((prevObj) => ({\n      ...prevObj,\n      [e.target.name]: e.target.value,\n    }));\n  };\n  /* \n    --------------------------------------------------------\n    Validators:\n    --------------------------------------------------------\n  */\n\n  const validate = (e: any) => {\n    simpleValidator?.current?.showMessageFor(e?.target?.name);\n  };\n\n  const validateForm = () => {\n    let isValid = false;\n    isValid = simpleValidator?.current?.allValid() ?? false;\n    if (isValid) {\n      return isValid;\n    } else {\n      forceUpdate((prev) => !prev);\n      simpleValidator?.current?.showMessages();\n      forceUpdate((prev) => !prev);\n      return false;\n    }\n  };\n\n  /*\n    -------------------------------------------------------\n      Button Click Handlers\n    -------------------------------------------------------\n  */\n\n  const onSave = async () => {\n    console.log(\"save\");\n\n    if (!validateForm()) {\n      return;\n    }\n    const payload = enrichForSave();\n\n    try {\n      const res = await LegalService.updateBoundaryDetails(payload);\n\n      setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.SAVED);\n      setTriggerToast(!triggerToast);\n      setPageMode(PAGE_MODE.VIEW);\n      getDetailsCallback?.();\n    } catch (error) {\n      setErrorMessage(parseStandardAPIErrorMessage(error));\n    }\n  };\n\n  const onEdit = () => setPageMode(PAGE_MODE.EDIT);\n\n  const onCancel = () => {\n    setPageMode(PAGE_MODE.VIEW);\n    resetValidator();\n    // if  form has existing saved  data then call api else clear all\n    getDetailsCallback?.();\n  };\n\n  /*\n    -------------------------------------------------------\n      Helper Functions\n    -------------------------------------------------------\n  */\n\n  const enrichForSave = () => {\n    return {\n      uid: pageObj?.legalUid,\n      eastBy: pageObj?.eastBy,\n      westBy: pageObj?.westBy,\n      northBy: pageObj?.northBy,\n      southBy: pageObj?.southBy,\n    };\n  };\n  const resetValidator = () => {\n    simpleValidator.current = new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    });\n    simpleValidator?.current?.hideMessages();\n  };\n\n  /*\n    -------------------------------------------------------\n      Sectional Rendering\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n    Main Rendering\n    -------------------------------------------------------\n  */\n\n  const { eastBy, westBy, northBy, southBy } = pageObj;\n  return (\n    <div>\n      <SaveComponent\n        title=\"label.legal.boundaryDetails\"\n        pageMode={pageMode}\n        disabled={isLoading}\n        onSave={onSave}\n        onCancel={onCancel}\n        onEdit={onEdit}\n      >\n        {isLoadingInitial ? (\n          <SkeletonCustom height=\"19.375rem\" width=\"100%\" borderRadius=\"8px\" animation=\"wave\" />\n        ) : (\n          <AclGuard override={{ read: pageMode === PAGE_MODE.VIEW }}>\n            <div className=\" grid grid-cols-4 gap-3  \">\n              <div className=\"col-span-2 h-32\">\n                <InputTextArea\n                  name=\"eastBy\"\n                  className=\"!h-full\"\n                  label=\"label.legal.eastBy*\"\n                  placeholder={\"placeholder.legal.description\"}\n                  variant={INPUT_STYLE_TYPE.SECONDARY}\n                  onChange={handleChange}\n                  value={eastBy}\n                  onBlur={validate}\n                  validation={simpleValidator?.current?.message(\"eastBy\", eastBy, \"mandatory\")}\n                />\n              </div>\n              <div className=\"col-span-2 h-32\">\n                <InputTextArea\n                  name=\"westBy\"\n                  className=\"!h-full\"\n                  label=\"label.legal.westBy*\"\n                  placeholder={\"placeholder.legal.description\"}\n                  variant={INPUT_STYLE_TYPE.SECONDARY}\n                  onChange={handleChange}\n                  value={westBy}\n                  onBlur={validate}\n                  // maxCount={300}\n                  validation={simpleValidator?.current?.message(\"westBy\", westBy, \"mandatory\")}\n                />\n              </div>{\" \"}\n              <div className=\"col-span-2 h-32\">\n                <InputTextArea\n                  name=\"northBy\"\n                  className=\"!h-full\"\n                  label=\"label.legal.northBy*\"\n                  placeholder={\"placeholder.legal.description\"}\n                  variant={INPUT_STYLE_TYPE.SECONDARY}\n                  onChange={handleChange}\n                  value={northBy}\n                  onBlur={validate}\n                  validation={simpleValidator?.current?.message(\"northBy\", northBy, \"mandatory\")}\n                />\n              </div>{\" \"}\n              <div className=\"col-span-2 h-32\">\n                <InputTextArea\n                  name=\"southBy\"\n                  className=\"!h-full\"\n                  label=\"label.legal.southBy*\"\n                  placeholder={\"placeholder.legal.description\"}\n                  variant={INPUT_STYLE_TYPE.SECONDARY}\n                  onChange={handleChange}\n                  value={southBy}\n                  onBlur={validate}\n                  validation={simpleValidator?.current?.message(\"southBy\", southBy, \"mandatory\")}\n                />\n              </div>\n            </div>\n          </AclGuard>\n        )}\n      </SaveComponent>\n\n      <ToastCustom\n        position={\"bottom-right\"}\n        ref={toastMessageRef}\n        toastText={toastMessage}\n        variant={TOAST_STYLE_TYPE.PRIMARY}\n      />\n\n      <ErrorDialog\n        onHide={() => {\n          setShowDialogAPIError(false);\n          setErrorMessage(\"\");\n        }}\n        visible={showDialogAPIError}\n        errorMessage={errorMessage}\n      />\n    </div>\n  );\n});\n\nexport default BoundaryDetails;\n","import DatePicker from \"components/DatePicker/DatePicker\";\nimport SaveComponent from \"components/Save/SaveComponent\";\nimport Section from \"components/Section/Section\";\nimport React, { useEffect, useState, forwardRef, useRef, useImperativeHandle } from \"react\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport {\n  BUTTON_TYPE,\n  CHECKBOX_STYLE_TYPE,\n  INPUT_STYLE_TYPE,\n  LEGAL_DOCUMENT_SCRUTINIZED_MESSAGE,\n  PAGE_MODE,\n  STATIC_MASTER_TYPE_TOAST_TEXT,\n  TOAST_STYLE_TYPE,\n} from \"utils/Constant\";\nimport {\n  getStandardValidator,\n  messageReplace,\n  parseStandardAPIErrorMessage,\n  parseStandardAPIErrorMessageNew,\n} from \"utils/CommonUtil\";\nimport InputBox from \"components/InputBox\";\nimport AclGuard from \"components/AclGuard\";\nimport SimpleDropDown from \"components/SimpleDropDown/SimpleDropDown\";\nimport { IDropDownOptions } from \"views/transaction/PageDDE/Login/Helper\";\nimport InputTextArea from \"components/InputTextArea/InputTextArea\";\nimport { ILegalDropdownList, ILegalSectionProps } from \"../../PageReport/PageReport\";\nimport ErrorDialog from \"components/ErrorDialog/ErrorDialog\";\nimport ToastCustom from \"components/Toast\";\nimport LegalService from \"services/transaction/DDE/LegalService\";\nimport SkeletonCustom from \"components/Skeleton/Skeleton\";\nimport EditableTableV2, {\n  Column,\n  EditableComponentRef,\n} from \"components/EditableTableV2/EditableTableV2\";\nimport StageService from \"services/transaction/DDE/StageService\";\nimport i18n from \"i18n\";\nimport IconButton, { BUTTON_TYPES } from \"components/IconButton/IconButton\";\nimport Text from \"components/Text/Text\";\nimport SimpleToolTip from \"components/SimpleToolTip/SimpleToolTip\";\nimport infoIcon from \"assets/img/common/info.svg\";\nimport CheckBox from \"components/CheckBox/CheckBox\";\nimport ButtonBox from \"components/ButtonBox/ButtonBox\";\nimport {\n  isLegalSectionAccessDisabled,\n  updateLegalDocumentScrutinizedRowDataObj,\n} from \"../../Helper\";\nimport { useSelector } from \"react-redux\";\nimport SystemDatePicker from \"components/SystemDatePicker/SystemDatePicker\";\n\nexport interface ILegalDocumentScrutinizedData {\n  stageUid?: string;\n  loanUid: string;\n  applicantUid: string;\n}\ninterface IProps extends ILegalSectionProps {\n  dropDownOptions: ILegalDropdownList;\n  data?: ILegalDocumentScrutinizedData;\n  updatedRelatedTableCallback: () => void;\n}\n\nexport interface ILegalDocumentScrutinizedRowData {\n  uid: string;\n  loan: {\n    uid: string;\n  };\n  stage: {\n    uid: string;\n  };\n  applicant: {\n    uid: string;\n  };\n  dateOfDoc: string;\n  name: string;\n  docCopyType: string;\n  preDisbursementCollection: boolean;\n  postDisbursementCollection: boolean;\n  isActive: boolean;\n}\n\nexport interface IDocumentScrutinizedRef {\n  refresh: () => void;\n}\nexport interface TLegalDisbursementConfig {\n  code: TLegalDisbursement;\n  componentLabel: string;\n  searchParams: string;\n  tableFlag: \"preDisbursementCollection\" | \"postDisbursementCollection\";\n}\nexport type TLegalDisbursement = \"PRE_DISBURSEMENT\" | \"POST_DISBURSEMENT\";\nexport const LEGAL_DISBURSEMENT_CODE: Record<TLegalDisbursement, TLegalDisbursement> = {\n  PRE_DISBURSEMENT: \"PRE_DISBURSEMENT\",\n  POST_DISBURSEMENT: \"POST_DISBURSEMENT\",\n};\nexport const LEGAL_DISBURSEMENT: Record<TLegalDisbursement, TLegalDisbursementConfig> = {\n  PRE_DISBURSEMENT: {\n    code: LEGAL_DISBURSEMENT_CODE.PRE_DISBURSEMENT,\n    componentLabel: \"heading.legal.documentsPriorToDisbursement\",\n    searchParams: \"&preDisbursementCollection=true\",\n    tableFlag: \"preDisbursementCollection\",\n  },\n  POST_DISBURSEMENT: {\n    code: LEGAL_DISBURSEMENT_CODE.POST_DISBURSEMENT,\n    componentLabel: \"heading.legal.documentsPostToDisbursement\",\n    searchParams: \"&postDisbursementCollection=true\",\n    tableFlag: \"postDisbursementCollection\",\n  },\n};\n\nexport const initialDocumentScrutinizedProps: ILegalDocumentScrutinizedData = {\n  applicantUid: \"\",\n  loanUid: \"\",\n  stageUid: \"\",\n};\nconst initialTableRowData: ILegalDocumentScrutinizedRowData = {\n  uid: \"\",\n  loan: {\n    uid: \"\",\n  },\n  stage: {\n    uid: \"\",\n  },\n  applicant: {\n    uid: \"\",\n  },\n  dateOfDoc: \"\",\n  name: \"\",\n  docCopyType: \"\",\n  preDisbursementCollection: false,\n  postDisbursementCollection: false,\n  isActive: true,\n};\n\nconst DocumentScrutinized: React.FC<IProps> = forwardRef((props, ref) => {\n  const { data, dropDownOptions, updatedRelatedTableCallback } = props;\n\n  /*\n    -------------------------------------------------------\n      State\n    -------------------------------------------------------\n    */\n  const [pageMode, setPageMode] = useState(PAGE_MODE.VIEW);\n  const [toastMessage, setToastMessage] = useState(\"\");\n  const [triggerToast, setTriggerToast] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [showDialogAPIError, setShowDialogAPIError] = useState(false);\n  // ref\n  const toastMessageRef = useRef(null);\n  const tableRef = React.useRef<EditableComponentRef>(null);\n\n  // --------------------------- validator initialization ---------------------- //\n  const [, forceUpdate] = useState<boolean>(false);\n\n  const simpleValidator = useRef(\n    new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    })\n  );\n\n  useImperativeHandle(ref, () => ({\n    refresh: onSearch,\n  }));\n\n  // --------------------------- global variables ---------------------- //\n\n  /*\n     -------------------------------------------------------\n       useEffect\n     -------------------------------------------------------\n   */\n\n  useEffect(() => {\n    if (toastMessageRef?.current && toastMessage !== \"\") {\n      // @ts-ignore: will be fixed in future\n      toastMessageRef?.current?.showFunction();\n      setToastMessage(\"\");\n    }\n  }, [toastMessage, triggerToast]);\n\n  useEffect(() => {\n    if (errorMessage) {\n      setShowDialogAPIError(true);\n    }\n  }, [errorMessage]);\n\n  /*\n    -------------------------------------------------------\n      Service Calls\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n      Handlers\n    -------------------------------------------------------\n  */\n  const handleChange = (\n    e: any,\n    options: {\n      rowData: ILegalDocumentScrutinizedRowData;\n      field: keyof ILegalDocumentScrutinizedRowData;\n    }\n  ) => {\n    console.log(\"handle change\");\n    let rowDataObj: ILegalDocumentScrutinizedRowData = { ...options.rowData };\n    rowDataObj = {\n      ...rowDataObj,\n      [`${options.field}`]: e.target.value,\n    };\n    tableRef.current?.reportDataChange(rowDataObj);\n  };\n\n  const handlePreDisbursementChange = (e: any, rowData: ILegalDocumentScrutinizedRowData) => {\n    console.log(\"handle change\");\n    const rowDataObj = { ...rowData };\n    rowDataObj.preDisbursementCollection = e.checked;\n    if (e.checked) {\n      rowDataObj.postDisbursementCollection = false;\n    }\n    tableRef.current?.reportDataChange(rowDataObj);\n  };\n\n  const handlePostDisbursementChange = (e: any, rowData: ILegalDocumentScrutinizedRowData) => {\n    console.log(\"handle change\");\n    const rowDataObj = { ...rowData };\n    rowDataObj.postDisbursementCollection = e.checked;\n    if (e.checked) {\n      rowDataObj.preDisbursementCollection = false;\n    }\n    tableRef.current?.reportDataChange(rowDataObj);\n  };\n  /* \n    --------------------------------------------------------\n    Validators:\n    --------------------------------------------------------\n  */\n\n  const validate = (e: any) => {\n    simpleValidator?.current?.showMessageFor(e?.target?.name);\n  };\n\n  const validateForm = () => {\n    let isValid = false;\n    isValid = simpleValidator?.current?.allValid() ?? false;\n    if (isValid) {\n      return isValid;\n    } else {\n      forceUpdate((prev) => !prev);\n      simpleValidator?.current?.showMessages();\n      forceUpdate((prev) => !prev);\n      return false;\n    }\n  };\n\n  /*\n    -------------------------------------------------------\n      Button Click Handlers\n    -------------------------------------------------------\n  */\n\n  const onAddDocument = () => {\n    tableRef.current?.addRow({ ...initialTableRowData });\n  };\n\n  const onSave = async () => {\n    console.log(\"save\");\n\n    if (!validateForm()) {\n      return;\n    }\n    const payload = enrichForSave();\n\n    try {\n      const res = await LegalService.updateDocumentsScrutinized(payload);\n\n      setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.SAVED);\n      setTriggerToast(!triggerToast);\n      setPageMode(PAGE_MODE.VIEW);\n      tableRef.current?.clearAll();\n      tableRef.current?.search();\n      updatedRelatedTableCallback?.();\n      // need to reset the table component data\n    } catch (error) {\n      setErrorMessage(parseStandardAPIErrorMessage(error));\n    }\n  };\n\n  const onEdit = () => setPageMode(PAGE_MODE.EDIT);\n\n  const onCancel = () => {\n    setPageMode(PAGE_MODE.VIEW);\n    resetValidator();\n    tableRef.current?.clearAll();\n    tableRef.current?.search();\n    // need to reset the table component data\n  };\n\n  const onDeleteRow = (rowData: ILegalDocumentScrutinizedRowData) => {\n    tableRef.current?.deleteRow(rowData);\n    simpleValidator.current = new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    });\n  };\n\n  /*\n    -------------------------------------------------------\n      Helper Functions\n    -------------------------------------------------------\n  */\n  const enrichForSave = () => {\n    console.log(\"enrich for save\");\n    let addRows = tableRef.current?.getAddedRecords() ?? [];\n    let deletedRows = tableRef.current?.getDeletedRecords() ?? [];\n    let updatedRows = tableRef.current?.getUpdatedRecords() ?? [];\n    addRows = addRows.map((rowData: any) => ({\n      ...rowData,\n      loan: {\n        uid: data?.loanUid,\n      },\n      applicant: {\n        uid: data?.applicantUid,\n      },\n      stage: {\n        uid: data?.stageUid,\n      },\n      dateOfDoc: rowData?.dateOfDoc !== \"\"? rowData?.dateOfDoc:null,\n    }));\n\n    deletedRows = deletedRows.map((rowData: any) =>\n      updateLegalDocumentScrutinizedRowDataObj(rowData)\n    );\n    updatedRows = updatedRows.map((rowData: any) =>\n      updateLegalDocumentScrutinizedRowDataObj(rowData)\n    );\n\n    const enrichData = [...addRows, ...deletedRows, ...updatedRows];\n    return enrichData;\n  };\n\n  const resetValidator = () => {\n    simpleValidator.current = new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    });\n    simpleValidator?.current?.hideMessages();\n  };\n\n  const onSearch = () => {\n    tableRef.current?.search();\n  };\n\n  /*\n    -------------------------------------------------------\n      Sectional Rendering\n    -------------------------------------------------------\n  */\n\n  const renderColumnHeader = (column: {\n    label: string;\n    message: string;\n    code: TLegalDisbursement;\n  }) => {\n    return (\n      <div className=\"flex flex-row \">\n        <div className=\" flex flex-row pr-5\">\n          <Text className=\" whitespace-pre\" label={`${column.label}`} />\n          <div className={` ml-1 info-${column.code} flex-shrink-0 `}>\n            <img src={infoIcon} alt={column.label} />\n          </div>\n        </div>\n\n        <SimpleToolTip\n          target={`.info-${column.code}`}\n          position={\"top\"}\n          htmlContent={`${column.message}`}\n          variant={INPUT_STYLE_TYPE?.PRIMARY}\n          className=\"\"\n          // appendTo={\"self\"}\n        />\n        {/* <Tooltip target=\".test\">\n            \"test123\"\n          </Tooltip> */}\n      </div>\n    );\n  };\n\n  const renderDateOfDocument = (rowData: ILegalDocumentScrutinizedRowData) => {\n    return (\n      <div className=\"pt-4\">\n        <SystemDatePicker\n          hideLabel\n          name={`dateOfDocument${rowData.uid}`}\n          onChange={(e: any) => handleChange(e, { rowData: rowData, field: \"dateOfDoc\" })}\n          showMinMaxRange\n          value={rowData?.dateOfDoc ? new Date(rowData?.dateOfDoc) : \"\"}\n          variant={INPUT_STYLE_TYPE.SECONDARY}\n          // onBlur={validate}\n          // validation={simpleValidator?.current?.message(\n          //   `dateOfDocument${rowData.uid}`,\n          //   rowData.dateOfDoc,\n          //   \"mandatory\"\n          // )}\n          disabled={pageMode === PAGE_MODE.VIEW}\n        />\n      </div>\n    );\n  };\n\n  const renderNameOfDocument = (rowData: ILegalDocumentScrutinizedRowData) => {\n    return (\n      <div className=\"pt-4\">\n        <InputBox\n          name={`nameOfDocument${rowData?.uid}`}\n          hideLabel\n          variant={INPUT_STYLE_TYPE.SECONDARY}\n          value={rowData?.name}\n          onBlur={validate}\n          onChange={(e) => handleChange(e, { rowData: rowData, field: \"name\" })}\n          validation={simpleValidator?.current?.message(\n            `nameOfDocument${rowData?.uid}`,\n            rowData?.name,\n            \"mandatory\"\n          )}\n          disabled={pageMode === PAGE_MODE.VIEW}\n        />\n      </div>\n    );\n  };\n\n  const renderDocumentCopyType = (rowData: ILegalDocumentScrutinizedRowData) => {\n    return (\n      <div className=\"pt-4\">\n        <SimpleDropDown\n          hideLabel\n          placeholder=\"placeholder.legal.documentCopyType\"\n          name={`docCopyType${rowData?.uid}`}\n          value={rowData?.docCopyType}\n          variant={INPUT_STYLE_TYPE.PRIMARY}\n          options={dropDownOptions.documentCopyType}\n          optionLabel=\"name\"\n          optionValue=\"code\"\n          onChange={(e) => handleChange(e, { rowData, field: \"docCopyType\" })}\n          onBlur={validate}\n          // loader={isLoading}\n          validation={simpleValidator?.current?.message(\n            `documentCopyType${rowData?.uid}`,\n            rowData.docCopyType,\n            \"mandatory\"\n          )}\n        />\n      </div>\n    );\n  };\n\n  const renderPreDisbursementCollection = (rowData: ILegalDocumentScrutinizedRowData) => {\n    return (\n      <div className=\"pt-4\">\n        <CheckBox\n          variant={CHECKBOX_STYLE_TYPE.PRIMARY}\n          value={rowData.preDisbursementCollection}\n          checked={rowData.preDisbursementCollection}\n          onChange={(e) => handlePreDisbursementChange(e, rowData)}\n          hideLabel\n        />\n      </div>\n    );\n  };\n\n  const renderPostDisbursementCollection = (rowData: ILegalDocumentScrutinizedRowData) => {\n    return (\n      <div className=\"pt-4\">\n        <CheckBox\n          variant={CHECKBOX_STYLE_TYPE.PRIMARY}\n          value={rowData.postDisbursementCollection}\n          checked={rowData.postDisbursementCollection}\n          onChange={(e) => handlePostDisbursementChange(e, rowData)}\n          hideLabel\n        />\n      </div>\n    );\n  };\n\n  const renderActions = (rowData: any) => {\n    return (\n      <div className=\"\">\n        <IconButton\n          buttonType={BUTTON_TYPES.DELETE}\n          onClick={() => onDeleteRow(rowData)}\n          disabled={pageMode === PAGE_MODE.VIEW}\n          tooltipOptions={{\n            position: \"left\",\n            className: \"text-xs font-Roboto bg-black text-white !p-1 rounded-md \",\n            showDelay: \"1000,\",\n            hideDelay: \"300\",\n          }}\n        />\n      </div>\n    );\n  };\n\n  const renderSaveComponentHeader = () => {\n    return (\n      <div className=\"flex justify-between items-center flex-grow\">\n        <Text\n          className=\"text-primary-sideBarBgColor text-sm font-bold mb-1\"\n          label={\"heading.legal.descriptionOfDocument*\"}\n        />\n      </div>\n    );\n  };\n\n  /*\n    -------------------------------------------------------\n    Main Rendering\n    -------------------------------------------------------\n  */\n\n  return (\n    <div>\n      <SaveComponent\n        renderHeaderContent={renderSaveComponentHeader}\n        pageMode={pageMode}\n        onSave={onSave}\n        onCancel={onCancel}\n        onEdit={onEdit}\n      >\n        <AclGuard override={{ read: pageMode === PAGE_MODE.VIEW }}>\n          <div className=\"flex justify-end\">\n            <div className=\" mr-3 self-center\">\n              <ButtonBox\n                buttonType={BUTTON_TYPE.ICON_TEXT_ROW}\n                customLabel={\"label.legal.addDocument\"}\n                onClick={onAddDocument}\n                // disabled={disableAddNew}\n              />\n            </div>\n          </div>\n          {data?.stageUid ? (\n            <EditableTableV2\n              ref={tableRef}\n              uniqueKey=\"uid\"\n              standardDataFormatPromise={StageService.getDocumentScrutinized}\n              search={`&stage.uid=${data?.stageUid}&isActive=${true}&isSharedAtInitiation:nq=true`}\n              mode={\"UPDATE\"}\n            >\n              <Column\n                header={i18n.t(\"label.legal.dateOfDocument\")}\n                className=\"text-primary-ptext-1000 text-left text-xs h-12 pl-6\"\n                body={renderDateOfDocument}\n              />\n\n              <Column\n                header={i18n.t(\"label.legal.nameOfDocument*\")}\n                className=\"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6\"\n                body={renderNameOfDocument}\n              />\n              <Column\n                header={i18n.t(\"label.legal.documentCopyType*\")}\n                className=\"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6\"\n                body={renderDocumentCopyType}\n              />\n              <Column\n                header={() =>\n                  renderColumnHeader({\n                    label: \"label.legal.preDisbursementCollection*\",\n                    code: LEGAL_DISBURSEMENT.PRE_DISBURSEMENT.code,\n                    message: LEGAL_DOCUMENT_SCRUTINIZED_MESSAGE.PRE_DISBURSEMENT,\n                  })\n                }\n                style={{ minWidth: \"200px\", width: \"200px\" }}\n                className=\"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6\"\n                body={renderPreDisbursementCollection}\n              />\n              <Column\n                header={() =>\n                  renderColumnHeader({\n                    label: \"label.legal.postDisbursementCollection*\",\n                    code: LEGAL_DISBURSEMENT.POST_DISBURSEMENT.code,\n                    message: LEGAL_DOCUMENT_SCRUTINIZED_MESSAGE.POST_DISBURSEMENT,\n                  })\n                }\n                style={{ minWidth: \"200px\", width: \"200px\" }}\n                className=\"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6\"\n                body={renderPostDisbursementCollection}\n              />\n\n              <Column\n                header={i18n.t(\"label.investmentInfo.table.colTitle.action\")}\n                className=\"text-primary-ptext-1000 text-right text-xs h-12 px-6\"\n                style={{ minWidth: \"50px\", width: \"50px\" }}\n                body={renderActions}\n              />\n            </EditableTableV2>\n          ) : null}\n        </AclGuard>\n      </SaveComponent>\n\n      <ToastCustom\n        position={\"bottom-right\"}\n        ref={toastMessageRef}\n        toastText={toastMessage}\n        variant={TOAST_STYLE_TYPE.PRIMARY}\n      />\n\n      <ErrorDialog\n        onHide={() => {\n          setShowDialogAPIError(false);\n          setErrorMessage(\"\");\n        }}\n        visible={showDialogAPIError}\n        errorMessage={errorMessage}\n      />\n    </div>\n  );\n});\n\nexport default DocumentScrutinized;\n","import DatePicker from \"components/DatePicker/DatePicker\";\nimport SaveComponent from \"components/Save/SaveComponent\";\nimport Section from \"components/Section/Section\";\nimport React, { useEffect, useState, forwardRef, useRef, useImperativeHandle } from \"react\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport {\n  BUTTON_TYPE,\n  CHECKBOX_STYLE_TYPE,\n  INPUT_STYLE_TYPE,\n  LEGAL_DOCUMENT_SCRUTINIZED_MESSAGE,\n  PAGE_MODE,\n  STATIC_MASTER_TYPE_TOAST_TEXT,\n  TOAST_STYLE_TYPE,\n} from \"utils/Constant\";\nimport {\n  getStandardValidator,\n  messageReplace,\n  parseStandardAPIErrorMessage,\n  parseStandardAPIErrorMessageNew,\n} from \"utils/CommonUtil\";\nimport InputBox from \"components/InputBox\";\nimport AclGuard from \"components/AclGuard\";\nimport SimpleDropDown from \"components/SimpleDropDown/SimpleDropDown\";\nimport { IDropDownOptions } from \"views/transaction/PageDDE/Login/Helper\";\nimport InputTextArea from \"components/InputTextArea/InputTextArea\";\nimport { ILegalDropdownList, ILegalSectionProps } from \"../../PageReport/PageReport\";\nimport ErrorDialog from \"components/ErrorDialog/ErrorDialog\";\nimport ToastCustom from \"components/Toast\";\nimport LegalService from \"services/transaction/DDE/LegalService\";\nimport SkeletonCustom from \"components/Skeleton/Skeleton\";\nimport EditableTableV2, {\n  Column,\n  EditableComponentRef,\n} from \"components/EditableTableV2/EditableTableV2\";\nimport StageService from \"services/transaction/DDE/StageService\";\nimport i18n from \"i18n\";\nimport IconButton, { BUTTON_TYPES } from \"components/IconButton/IconButton\";\nimport Text from \"components/Text/Text\";\nimport SimpleToolTip from \"components/SimpleToolTip/SimpleToolTip\";\nimport infoIcon from \"assets/img/common/info.svg\";\nimport CheckBox from \"components/CheckBox/CheckBox\";\nimport ButtonBox from \"components/ButtonBox/ButtonBox\";\nimport {\n  ILegalDocumentScrutinizedRowData,\n  LEGAL_DISBURSEMENT,\n  LEGAL_DISBURSEMENT_CODE,\n  TLegalDisbursement,\n} from \"../DocumentScrutinized/DocumentScrutinized\";\nimport {\n  isLegalSectionAccessDisabled,\n  updateLegalDocumentScrutinizedRowDataObj,\n} from \"../../Helper\";\nimport { useSelector } from \"react-redux\";\nimport SystemDatePicker from \"components/SystemDatePicker/SystemDatePicker\";\n\nexport interface ILegalDocumentScrutinizedData {\n  stageUid?: string;\n  loanUid: string;\n  applicantUid: string;\n}\ninterface IProps extends ILegalSectionProps {\n  section: TLegalDisbursement;\n  dropDownOptions: ILegalDropdownList;\n  data?: ILegalDocumentScrutinizedData;\n  updatedRelatedTableCallback: () => void;\n}\n\nexport const initialDocumentScrutinizedProps: ILegalDocumentScrutinizedData = {\n  applicantUid: \"\",\n  loanUid: \"\",\n  stageUid: \"\",\n};\nconst initialTableRowData: ILegalDocumentScrutinizedRowData = {\n  uid: \"\",\n  loan: {\n    uid: \"\",\n  },\n  stage: {\n    uid: \"\",\n  },\n  applicant: {\n    uid: \"\",\n  },\n  dateOfDoc: \"\",\n  name: \"\",\n  docCopyType: \"\",\n  preDisbursementCollection: false,\n  postDisbursementCollection: false,\n  isActive: true,\n};\n\nconst DocumentScrutinizedPostAndPre: React.FC<IProps> = forwardRef((props, ref) => {\n  const { data, dropDownOptions, section, updatedRelatedTableCallback } = props;\n\n  /*\n    -------------------------------------------------------\n      State\n    -------------------------------------------------------\n    */\n  const [pageMode, setPageMode] = useState(PAGE_MODE.VIEW);\n  const [toastMessage, setToastMessage] = useState(\"\");\n  const [triggerToast, setTriggerToast] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [showDialogAPIError, setShowDialogAPIError] = useState(false);\n  // ref\n  const toastMessageRef = useRef(null);\n  const tableRef = React.useRef<EditableComponentRef>(null);\n\n  // --------------------------- validator initialization ---------------------- //\n  const [, forceUpdate] = useState<boolean>(false);\n\n  const simpleValidator = useRef(\n    new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    })\n  );\n\n  useImperativeHandle(ref, () => ({\n    refresh: onSearch,\n  }));\n\n  // --------------------------- global variables ---------------------- //\n\n  /*\n     -------------------------------------------------------\n       useEffect\n     -------------------------------------------------------\n   */\n\n  useEffect(() => {\n    if (toastMessageRef?.current && toastMessage !== \"\") {\n      // @ts-ignore: will be fixed in future\n      toastMessageRef?.current?.showFunction();\n      setToastMessage(\"\");\n    }\n  }, [toastMessage, triggerToast]);\n\n  useEffect(() => {\n    if (errorMessage) {\n      setShowDialogAPIError(true);\n    }\n  }, [errorMessage]);\n\n  /*\n    -------------------------------------------------------\n      Service Calls\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n      Handlers\n    -------------------------------------------------------\n  */\n  const handleChange = (\n    e: any,\n    options: {\n      rowData: ILegalDocumentScrutinizedRowData;\n      field: keyof ILegalDocumentScrutinizedRowData;\n    }\n  ) => {\n    let rowDataObj: ILegalDocumentScrutinizedRowData = { ...options.rowData };\n    rowDataObj = {\n      ...rowDataObj,\n      [`${options.field}`]: e.target.value,\n    };\n    tableRef.current?.reportDataChange(rowDataObj);\n  };\n\n  /* \n    --------------------------------------------------------\n    Validators:\n    --------------------------------------------------------\n  */\n\n  const validate = (e: any) => {\n    simpleValidator?.current?.showMessageFor(e?.target?.name);\n  };\n\n  const validateForm = () => {\n    let isValid = false;\n    isValid = simpleValidator?.current?.allValid() ?? false;\n    if (isValid) {\n      return isValid;\n    } else {\n      forceUpdate((prev) => !prev);\n      simpleValidator?.current?.showMessages();\n      forceUpdate((prev) => !prev);\n      return false;\n    }\n  };\n  /*\n    -------------------------------------------------------\n      Button Click Handlers\n    -------------------------------------------------------\n  */\n\n  const onAddDocument = () => {\n    tableRef.current?.addRow({ ...initialTableRowData });\n  };\n\n  const onSave = async () => {\n    if (!validateForm()) {\n      return;\n    }\n    const payload = enrichForSave();\n    let service;\n    if (section === LEGAL_DISBURSEMENT_CODE.PRE_DISBURSEMENT) {\n      service = LegalService.updateDocumentsScrutinizedPreDisbursement;\n    } else {\n      service = LegalService.updateDocumentsScrutinizedPostDisbursement;\n    }\n    try {\n      const res = await service(payload);\n\n      setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.SAVED);\n      setTriggerToast(!triggerToast);\n      setPageMode(PAGE_MODE.VIEW);\n      tableRef.current?.clearAll();\n      tableRef.current?.search();\n      updatedRelatedTableCallback?.();\n    } catch (error) {\n      setErrorMessage(parseStandardAPIErrorMessage(error));\n    }\n  };\n\n  const onEdit = () => setPageMode(PAGE_MODE.EDIT);\n\n  const onCancel = () => {\n    setPageMode(PAGE_MODE.VIEW);\n    resetValidator();\n    tableRef.current?.clearAll();\n    tableRef.current?.search();\n  };\n\n  const onDeleteRow = (rowData: ILegalDocumentScrutinizedRowData) => {\n    tableRef.current?.deleteRow(rowData);\n    simpleValidator.current = new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    });\n  };\n\n  /*\n    -------------------------------------------------------\n      Helper Functions\n    -------------------------------------------------------\n  */\n  const onSearch = () => {\n    tableRef.current?.search();\n  };\n\n  const enrichForSave = () => {\n    console.log(\"enrich for save\");\n    let addRows = tableRef.current?.getAddedRecords() ?? [];\n    let deletedRows = tableRef.current?.getDeletedRecords() ?? [];\n    let updatedRows = tableRef.current?.getUpdatedRecords() ?? [];\n    addRows = addRows.map((rowData: any) => ({\n      ...rowData,\n      loan: {\n        uid: data?.loanUid,\n      },\n      applicant: {\n        uid: data?.applicantUid,\n      },\n      stage: {\n        uid: data?.stageUid,\n      },\n      dateOfDoc:rowData?.dateOfDoc !==\"\"? rowData?.dateOfDoc: null,\n      [`${LEGAL_DISBURSEMENT?.[section]?.tableFlag}`]: true,\n    }));\n\n    deletedRows = deletedRows.map((rowData: any) =>\n      updateLegalDocumentScrutinizedRowDataObj(rowData, {\n        [`${LEGAL_DISBURSEMENT?.[section]?.tableFlag}`]: true,\n      })\n    );\n    updatedRows = updatedRows.map((rowData: any) =>\n      updateLegalDocumentScrutinizedRowDataObj(rowData, {\n        [`${LEGAL_DISBURSEMENT?.[section]?.tableFlag}`]: true,\n      })\n    );\n    const enrichData = [...addRows, ...deletedRows, ...updatedRows];\n    return enrichData;\n  };\n\n  const resetValidator = () => {\n    simpleValidator.current = new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    });\n    simpleValidator?.current?.hideMessages();\n  };\n\n  /*\n    -------------------------------------------------------\n      Sectional Rendering\n    -------------------------------------------------------\n  */\n\n  const renderDateOfDocument = (rowData: ILegalDocumentScrutinizedRowData) => {\n    return (\n      <div className=\"pt-4\">\n        <SystemDatePicker\n          hideLabel\n          name={`dateOfDocument${rowData.uid}`}\n          onChange={(e: any) => handleChange(e, { rowData: rowData, field: \"dateOfDoc\" })}\n          showMinMaxRange\n          value={rowData?.dateOfDoc ? new Date(rowData?.dateOfDoc) : \"\"}\n          variant={INPUT_STYLE_TYPE.SECONDARY}\n          // onBlur={validate}\n          // validation={simpleValidator?.current?.message(\n          //   `dateOfDocument${rowData.uid}`,\n          //   rowData.dateOfDoc,\n          //   \"mandatory\"\n          // )}\n          disabled={pageMode === PAGE_MODE.VIEW}\n        />\n      </div>\n    );\n  };\n\n  const renderNameOfDocument = (rowData: ILegalDocumentScrutinizedRowData) => {\n    return (\n      <div className=\"pt-4\">\n        <InputBox\n          name={`nameOfDocument${rowData?.uid}`}\n          hideLabel\n          variant={INPUT_STYLE_TYPE.SECONDARY}\n          value={rowData?.name}\n          onBlur={validate}\n          onChange={(e) => handleChange(e, { rowData: rowData, field: \"name\" })}\n          validation={simpleValidator?.current?.message(\n            `nameOfDocument${rowData?.uid}`,\n            rowData?.name,\n            \"mandatory\"\n          )}\n          disabled={pageMode === PAGE_MODE.VIEW}\n        />\n      </div>\n    );\n  };\n\n  const renderDocumentCopyType = (rowData: ILegalDocumentScrutinizedRowData) => {\n    return (\n      <div className=\"pt-4\">\n        <SimpleDropDown\n          hideLabel\n          name={`docCopyType${rowData?.uid}`}\n          value={rowData?.docCopyType}\n          variant={INPUT_STYLE_TYPE.PRIMARY}\n          options={dropDownOptions.documentCopyType}\n          // options={[\"option1\", \"option2\"]}\n          optionLabel=\"name\"\n          optionValue=\"code\"\n          onChange={(e) => handleChange(e, { rowData, field: \"docCopyType\" })}\n          onBlur={validate}\n          // loader={isLoading}\n          validation={simpleValidator?.current?.message(\n            `docCopyType${rowData?.uid}`,\n            rowData.docCopyType,\n            \"mandatory\"\n          )}\n        />\n      </div>\n    );\n  };\n\n  const renderActions = (rowData: any) => {\n    return (\n      <div className=\"\">\n        <IconButton\n          buttonType={BUTTON_TYPES.DELETE}\n          onClick={() => onDeleteRow(rowData)}\n          disabled={pageMode === PAGE_MODE.VIEW}\n          tooltipOptions={{\n            position: \"left\",\n            className: \"text-xs font-Roboto bg-black text-white !p-1 rounded-md \",\n            showDelay: \"1000,\",\n            hideDelay: \"300\",\n          }}\n        />\n      </div>\n    );\n  };\n\n  const renderSaveComponentHeader = () => {\n    return (\n      <div className=\"flex justify-between items-center flex-grow\">\n        <Text\n          className=\"text-primary-sideBarBgColor text-sm font-bold mb-1\"\n          label={LEGAL_DISBURSEMENT?.[section]?.componentLabel}\n        />\n      </div>\n    );\n  };\n\n  /*\n    -------------------------------------------------------\n    Main Rendering\n    -------------------------------------------------------\n  */\n\n  return (\n    <div>\n      <SaveComponent\n        renderHeaderContent={renderSaveComponentHeader}\n        pageMode={pageMode}\n        onSave={onSave}\n        onCancel={onCancel}\n        onEdit={onEdit}\n      >\n        <AclGuard override={{ read: pageMode === PAGE_MODE.VIEW }}>\n          <div className=\"flex justify-end\">\n            <div className=\" mr-3 self-center\">\n              <ButtonBox\n                buttonType={BUTTON_TYPE.ICON_TEXT_ROW}\n                customLabel={\"label.legal.addDocument\"}\n                onClick={onAddDocument}\n                // disabled={disableAddNew}\n              />\n            </div>\n          </div>\n          {data?.stageUid ? (\n            <EditableTableV2\n              ref={tableRef}\n              uniqueKey=\"uid\"\n              standardDataFormatPromise={StageService.getDocumentScrutinized}\n              search={`&stage.uid=${data?.stageUid}&isActive=${true}${\n                LEGAL_DISBURSEMENT?.[section]?.searchParams\n              }`}\n              mode={\"UPDATE\"}\n            >\n              <Column\n                header={i18n.t(\"label.legal.dateOfDocument\")}\n                className=\"text-primary-ptext-1000 text-left text-xs h-12 pl-6\"\n                body={renderDateOfDocument}\n              />\n\n              <Column\n                header={i18n.t(\"label.legal.nameOfDocument*\")}\n                className=\"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6\"\n                body={renderNameOfDocument}\n              />\n              <Column\n                header={i18n.t(\"label.legal.documentCopyType*\")}\n                className=\"table-header-right text-primary-ptext-1000 text-xs h-12 px-6\"\n                body={renderDocumentCopyType}\n              />\n            </EditableTableV2>\n          ) : null}\n        </AclGuard>\n      </SaveComponent>\n\n      <ToastCustom\n        position={\"bottom-right\"}\n        ref={toastMessageRef}\n        toastText={toastMessage}\n        variant={TOAST_STYLE_TYPE.PRIMARY}\n      />\n\n      <ErrorDialog\n        onHide={() => {\n          setShowDialogAPIError(false);\n          setErrorMessage(\"\");\n        }}\n        visible={showDialogAPIError}\n        errorMessage={errorMessage}\n      />\n    </div>\n  );\n});\n\nexport default DocumentScrutinizedPostAndPre;\n","import AclGuard from \"components/AclGuard\";\nimport Address, { IAddressRef } from \"components/Address\";\nimport AutoComplete from \"components/AutoComplete\";\nimport { Column } from \"components/EditableTableV2/EditableTableV2\";\nimport IconButton, { BUTTON_TYPES } from \"components/IconButton/IconButton\";\nimport InputTextArea from \"components/InputTextArea\";\nimport MediaGallery, {\n  IMediaInfo,\n  initialMediaGallerySectionInfo,\n} from \"components/MediaGallery/MediaGallery\";\nimport ReadOnlyTable from \"components/ReadOnlyTable/ReadOnlyTable\";\nimport Section from \"components/Section\";\nimport SimpleDropDown from \"components/SimpleDropDown\";\nimport SkeletonCustom from \"components/Skeleton\";\nimport SystemDatePicker from \"components/SystemDatePicker/SystemDatePicker\";\nimport Text from \"components/Text\";\nimport ChipsBox from \"components/base/BaseChips/BaseChips\";\nimport { useTextConverter } from \"hook/CustomHooks\";\nimport { BaseSyntheticEvent, useEffect, useMemo, useRef, useState } from \"react\";\nimport { INITIATE_STAGE_OPTIONS, INPUT_STYLE_TYPE, PAGE_MODE, VARIANTS } from \"utils/Constant\";\nimport { ILegalDropdownList, ILegalSectionProps } from \"../../PageReport\";\n\ninterface IProps extends ILegalSectionProps {\n  isLoadingInitial: boolean;\n  dropdownOptions: ILegalDropdownList;\n  data: ILegalInitiationInfo;\n}\n\nexport interface ILegalInitiationInfo {\n  legalUid: string;\n  showOnlyUploadReport: boolean;\n  dateOfInitiation: string;\n  stage: string;\n  vendorType: string;\n  externalVendor: { name: string };\n  internalAssignee: { name: string };\n  CCEmails: string[];\n  description: string;\n  propertyType: string;\n  address: string;\n  pincode: { pinCode: string; uid?: string };\n  city: { name: string; uid?: string };\n  state: string;\n  latitude: string;\n  longitude: string;\n  stageDocuments?: any[];\n}\n\nexport const initialLegalInitiationInfoPageOj: ILegalInitiationInfo = {\n  legalUid: \"\",\n  showOnlyUploadReport: true,\n  dateOfInitiation: \"\",\n  stage: \"\",\n  vendorType: \"\",\n  externalVendor: { name: \"\" },\n  internalAssignee: { name: \"\" },\n  CCEmails: [],\n  description: \"\",\n  propertyType: \"\",\n  address: \"\",\n  pincode: { pinCode: \"\", uid: \"\" },\n  city: { name: \"\", uid: \"\" },\n  state: \"\",\n  latitude: \"\",\n  longitude: \"\",\n  stageDocuments: [],\n};\n\nconst InitiationInfo = (props: IProps) => {\n  const { isLoadingInitial, data, dropdownOptions } = props;\n\n  // --------------------- states ---------------------- //\n  const [pageObj, setPageObj] = useState<ILegalInitiationInfo>({\n    ...initialLegalInitiationInfoPageOj,\n  });\n  const [showMediaGallery, setShowMediaGallery] = useState<boolean>(false);\n  const [currentItemToViewInGallery, setCurrentItemToViewInGallery] = useState<IMediaInfo>({\n    ...initialMediaGallerySectionInfo,\n  });\n\n  // --------------------- ref ---------------------------- //\n  const chipRef = useRef<any>(null);\n  const addressRef = useRef<IAddressRef | null>(null);\n  const selectedDocsTableRef: any = useRef<any>();\n\n  // --------------------- custom hooks ---------------------------- //\n  const textConverter = useTextConverter();\n\n  // --------------------------- global variables ---------------------- //\n\n  /*\n     -------------------------------------------------------\n       useEffect\n     -------------------------------------------------------\n   */\n\n  useEffect(() => {\n    if (data.stage) {\n      setPageObj((prevObj) => ({\n        ...prevObj,\n        ...data,\n      }));\n    }\n  }, [data]);\n\n  /*\n  ------------------------------------------------------------\n   onClick,onBlur Handlers\n   ------------------------------------------------------------\n  */\n\n  const onViewFile = (e: BaseSyntheticEvent, rowData: any) => {\n    let preparedInfoInList: IMediaInfo = {\n      uid: \"\",\n      placeOfUpload: \"\",\n      name: \"\",\n      fileName: \"\",\n      fileType: \"\",\n      download: \"\",\n      category: \"\",\n      type: \"\",\n      sectionName: \"\",\n      url: \"\",\n    };\n\n    if (rowData?.loanDocumentSection) {\n      preparedInfoInList = {\n        uid: rowData?.uid,\n        placeOfUpload: \"\",\n        name: rowData?.loanDocumentSection?.loanDocument?.applicant?.firstName ?? \"-\",\n        fileName: rowData?.loanDocumentSection?.fileName ?? \"-\",\n        fileType: rowData?.loanDocumentSection?.fileType ?? \"-\",\n        download: \"\",\n        category: rowData?.loanDocumentSection?.loanDocument?.docCategory ?? \"-\",\n        type: rowData?.loanDocumentSection?.loanDocument?.docType?.name ?? \"-\",\n        sectionName: rowData?.loanDocumentSection?.section ?? \"-\",\n        url: rowData?.loanDocumentSection?.url,\n      };\n    } else if (rowData?.kycDocument) {\n      preparedInfoInList = {\n        uid: rowData?.uid,\n        placeOfUpload: \"\",\n        name: rowData?.kycDocument?.kyc?.applicant?.firstName ?? \"-\",\n        fileName: rowData?.kycDocument?.fileName ?? \"-\",\n        fileType: rowData?.kycDocument?.fileType ?? \"-\",\n        download: \"\",\n        category: \"KYC\",\n        type: rowData?.kycDocument?.kyc?.docType?.name ?? \"-\",\n        sectionName: rowData?.kycDocument?.smDocSectionType ?? \"-\",\n        url: rowData?.kycDocument?.url,\n      };\n    }\n\n    setCurrentItemToViewInGallery(preparedInfoInList);\n    setShowMediaGallery(true);\n  };\n\n  /*\n    -------------------------------------------------------\n      Sectional Rendering\n    -------------------------------------------------------\n  */\n  const addressData = useMemo(() => {\n    const { address, pincode, city, state, propertyType, latitude, longitude } = pageObj;\n    return {\n      address,\n      pincode,\n      city,\n      state,\n      propertyType,\n      latitude,\n      longitude,\n    };\n  }, [\n    pageObj?.address,\n    pageObj?.pincode,\n    pageObj?.city,\n    pageObj?.state,\n    pageObj?.propertyType,\n    pageObj?.latitude,\n    pageObj?.longitude,\n  ]);\n\n  const renderDocCategory = (rowData: any) => {\n    return (\n      <div className=\"flex items-center\">\n        {rowData?.loanDocumentSection\n          ? rowData?.loanDocumentSection?.loanDocument?.docCategory ?? \"-\"\n          : \"KYC\"}\n      </div>\n    );\n  };\n\n  const renderDocType = (rowData: any) => {\n    return <div className=\"flex items-center\">{rowData?.stageDocType ?? \"-\"}</div>;\n  };\n\n  const renderDocSection = (rowData: any) => {\n    return (\n      <div className=\"flex items-center\">\n        {rowData?.loanDocumentSection\n          ? rowData?.loanDocumentSection?.section ?? \"-\"\n          : rowData?.kycDocument?.smDocSectionType}\n      </div>\n    );\n  };\n\n  const renderAction = (rowData: any) => {\n    return (\n      <div className=\"px-2 flex items-center space-x-4\">\n        <div className=\"flex items-center\">\n          <IconButton\n            buttonType={BUTTON_TYPES.VIEW}\n            onClick={(e: BaseSyntheticEvent) => {\n              onViewFile(e, rowData);\n            }}\n            isIgnoreAccessLevel\n          />\n        </div>\n      </div>\n    );\n  };\n\n  const renderSelectedExistingDocs = () => {\n    return (\n      <ReadOnlyTable\n        dataKey=\"id\"\n        ref={selectedDocsTableRef}\n        value={data?.stageDocuments}\n        className={` h-auto selected-existing-doc-read-table ${\n          data?.stageDocuments?.length ? \"!min-h-auto\" : \"!min-h-50\"\n        }`}\n      >\n        <Column\n          header={textConverter(\"label.existing.document.category\")}\n          className=\"text-primary-ptext-1000 text-left text-xs h-12 pl-6\"\n          body={renderDocCategory}\n        />\n        <Column\n          header={textConverter(\"label.existing.document.type\")}\n          className=\"text-primary-ptext-1000 text-left text-xs h-12 pl-6\"\n          body={renderDocType}\n        />\n        <Column\n          header={textConverter(\"label.existing.document.section\")}\n          className=\"text-primary-ptext-1000 text-left text-xs h-12 pl-6\"\n          body={renderDocSection}\n        />\n        <Column\n          header={textConverter(\"label.existing.document.action\")}\n          className=\"text-primary-ptext-1000 text-center text-xs h-12 pr-2\"\n          body={renderAction}\n        />\n      </ReadOnlyTable>\n    );\n  };\n\n  /*\n    -------------------------------------------------------\n    Main Rendering\n    -------------------------------------------------------\n  */\n\n  const {\n    dateOfInitiation,\n    vendorType,\n    stage,\n    externalVendor,\n    internalAssignee,\n    CCEmails,\n    description,\n    propertyType,\n  } = pageObj;\n\n  return (\n    <Section title=\"header.legal.initiationInfo\">\n      <div className={`w-full h-full border border-primary-ptext-500 rounded-xl p-5`}>\n        {isLoadingInitial ? (\n          <SkeletonCustom height=\"19.375rem\" width=\"100%\" borderRadius=\"8px\" animation=\"wave\" />\n        ) : (\n          <AclGuard override={{ read: true }}>\n            <div className=\" grid grid-cols-4 gap-3\">\n              <div>\n                {/* Sys date */}\n                <SystemDatePicker\n                  label=\"label.legal.dateOfInitiation\"\n                  name=\"dateOfInitiation\"\n                  value={new Date(dateOfInitiation)}\n                  variant={INPUT_STYLE_TYPE.SECONDARY}\n                  placeholder=\"DD-MM-YYYY \"\n                />\n              </div>\n              <div>\n                <SimpleDropDown\n                  label=\"label.cq.stage\"\n                  name=\"stage\"\n                  value={stage}\n                  options={INITIATE_STAGE_OPTIONS}\n                />\n              </div>\n              <div>\n                <SimpleDropDown\n                  label=\"label.legal.vendorType\"\n                  name=\"venderType\"\n                  value={vendorType}\n                  optionLabel=\"name\"\n                  optionValue=\"code\"\n                  options={dropdownOptions?.venderType ?? []}\n                />\n              </div>\n              <div></div>\n              <div>\n                <AutoComplete\n                  label=\"label.legal.externalVender\"\n                  name=\"externalVendor\"\n                  value={externalVendor?.name}\n                  variant={INPUT_STYLE_TYPE.PRIMARY}\n                />\n              </div>\n              <div>\n                <AutoComplete\n                  label=\"label.legal.internalAssignee\"\n                  name=\"internalAssignee\"\n                  value={internalAssignee?.name}\n                  variant={INPUT_STYLE_TYPE.PRIMARY}\n                />\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-4 gap-x-4 gap-y-5 mt-4\">\n              <div className=\"col-span-2\">\n                <ChipsBox\n                  className={\"\"}\n                  name=\"cc\"\n                  value={CCEmails}\n                  label={\"label.legal.cc\"}\n                  ref={chipRef}\n                />\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-4 gap-x-4 gap-y-5 mt-7\">\n              <div className=\"col-span-2\">\n                <InputTextArea\n                  name=\"description\"\n                  className=\"!h-40\"\n                  label=\"input.masterData.staticMaster.description\"\n                  placeholder={\"placeholder.legal.description\"}\n                  variant={INPUT_STYLE_TYPE.SECONDARY}\n                  maxCount={200}\n                  value={description}\n                  autoResize\n                />\n              </div>\n            </div>\n\n            <div className=\"mt-6\">{renderSelectedExistingDocs()}</div>\n\n            <div className=\"flex flex-col justify-start items-start space-y-4 w-full mt-6\">\n              <Text\n                label={\"heading.dde.propertyDetails\"}\n                className=\"text-primary-sideBarBgColor font-bold text-xs\"\n              />\n\n              <div className=\"w-full\">\n                <Address\n                  pageMode={PAGE_MODE.VIEW}\n                  variant={VARIANTS.TERTIARY}\n                  ref={addressRef}\n                  data={addressData}\n                  hideMarkUsingMap\n                />\n              </div>\n            </div>\n          </AclGuard>\n        )}\n\n        <MediaGallery\n          visible={showMediaGallery}\n          onToggleVisibility={() => setShowMediaGallery((prev) => !prev)}\n          list={[]}\n          currentSection={currentItemToViewInGallery}\n        />\n      </div>\n    </Section>\n  );\n};\n\nexport default InitiationInfo;\n","import AclGuard from \"components/AclGuard\";\nimport ErrorDialog from \"components/ErrorDialog/ErrorDialog\";\nimport InputBox from \"components/InputBox\";\nimport SaveComponent from \"components/Save/SaveComponent\";\nimport SkeletonCustom from \"components/Skeleton/Skeleton\";\nimport SystemDatePicker from \"components/SystemDatePicker/SystemDatePicker\";\nimport ToastCustom from \"components/Toast\";\nimport React, { forwardRef, useEffect, useImperativeHandle, useRef, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport LegalService from \"services/transaction/DDE/LegalService\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport {\n  getStandardValidator,\n  messageReplace,\n  parseStandardAPIErrorMessage,\n} from \"utils/CommonUtil\";\nimport {\n  INPUT_STYLE_TYPE,\n  PAGE_MODE,\n  STATIC_MASTER_TYPE_TOAST_TEXT,\n  TOAST_STYLE_TYPE,\n} from \"utils/Constant\";\nimport { isLegalSectionAccessDisabled } from \"../../Helper\";\n\ninterface IProps {\n  isLoading?: boolean;\n  data: ILoanSummaryPageObj;\n  isLoadingInitial: boolean;\n  getDetailsCallback: () => Promise<void>;\n}\n\nexport interface ILoanSummaryPageObj {\n  dateOfInitiation: string;\n  legalUid: string;\n  loanNo: string;\n  branchNo: string;\n  agency: string;\n  dateOfReport: string | Date;\n}\n\nexport const initialLegalSummaryPageOj: ILoanSummaryPageObj = {\n  dateOfInitiation: \"\",\n  legalUid: \"\",\n  loanNo: \"\",\n  branchNo: \"\",\n  agency: \"\",\n  dateOfReport: \"\",\n};\n\nexport interface IOtherDetailsRef {\n  save: () => ILoanSummaryPageObj;\n  onSaveSuccess: () => any;\n  onCancel: () => any;\n}\n\nconst LoanSummary: React.FC<IProps> = forwardRef((props, ref) => {\n  const { data, isLoading, isLoadingInitial, getDetailsCallback } = props;\n  /*\n    -------------------------------------------------------\n      State\n    -------------------------------------------------------\n    */\n  const [pageObj, setPageObj] = useState<ILoanSummaryPageObj>({ ...initialLegalSummaryPageOj });\n  const [pageMode, setPageMode] = useState(PAGE_MODE.VIEW);\n  const [toastMessage, setToastMessage] = useState(\"\");\n  const [triggerToast, setTriggerToast] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [showDialogAPIError, setShowDialogAPIError] = useState(false);\n\n  // ref\n  const toastMessageRef = useRef(null);\n\n  // --------------------------- validator initialization ---------------------- //\n  const [, forceUpdate] = useState<boolean>(false);\n\n  const simpleValidator = useRef(\n    new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    })\n  );\n\n  useImperativeHandle(ref, () => ({\n    save: onSave,\n    onCancel: onCancel,\n  }));\n\n  // --------------------------- global variables ---------------------- //\n\n  /*\n     -------------------------------------------------------\n       useEffect\n     -------------------------------------------------------\n   */\n\n  useEffect(() => {\n    if (data.loanNo) {\n      setPageObj((prevObj) => ({\n        ...prevObj,\n        ...data,\n      }));\n    }\n  }, [data]);\n\n  useEffect(() => {\n    if (toastMessageRef?.current && toastMessage !== \"\") {\n      // @ts-ignore: will be fixed in future\n      toastMessageRef?.current?.showFunction();\n      setToastMessage(\"\");\n    }\n  }, [toastMessage, triggerToast]);\n\n  useEffect(() => {\n    if (errorMessage) {\n      setShowDialogAPIError(true);\n    }\n  }, [errorMessage]);\n\n  /*\n    -------------------------------------------------------\n      Service Calls\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n      Handlers\n    -------------------------------------------------------\n  */\n  const handleDateOfReportingChange = (e: any) => {\n    setPageObj((prevObj) => ({\n      ...prevObj,\n      [e.target.name]: e.target.value,\n    }));\n  };\n  /* \n    --------------------------------------------------------\n    Validators:\n    --------------------------------------------------------\n  */\n\n  const validate = (e: any) => {\n    simpleValidator?.current?.showMessageFor(e?.target?.name);\n  };\n\n  const validateForm = () => {\n    let isValid = false;\n    isValid = simpleValidator?.current?.allValid() ?? false;\n    if (isValid) {\n      return isValid;\n    } else {\n      forceUpdate((prev) => !prev);\n      simpleValidator?.current?.showMessages();\n      forceUpdate((prev) => !prev);\n      return false;\n    }\n  };\n\n  /*\n    -------------------------------------------------------\n      Button Click Handlers\n    -------------------------------------------------------\n  */\n\n  const onSave = async () => {\n    if (!validateForm()) {\n      return;\n    }\n    const payload = enrichForSave();\n    try {\n      const res = await LegalService.updateSummary(payload);\n      setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.SAVED);\n      setTriggerToast(!triggerToast);\n      setPageMode(PAGE_MODE.VIEW);\n      getDetailsCallback?.();\n    } catch (error) {\n      setErrorMessage(parseStandardAPIErrorMessage(error));\n    }\n  };\n\n  const onEdit = () => setPageMode(PAGE_MODE.EDIT);\n\n  const onCancel = () => {\n    setPageMode(PAGE_MODE.VIEW);\n    resetValidator();\n    // if  form has existing saved  data then call api else clear all\n    getDetailsCallback?.();\n  };\n\n  /*\n    -------------------------------------------------------\n      Helper Functions\n    -------------------------------------------------------\n  */\n\n  const enrichForSave = () => {\n    return {\n      uid: pageObj.legalUid,\n      dateOfReport: pageObj.dateOfReport,\n    };\n  };\n\n  const resetValidator = () => {\n    simpleValidator.current = new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    });\n    simpleValidator?.current?.hideMessages();\n  };\n\n  /*\n    -------------------------------------------------------\n      Sectional Rendering\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n    Main Rendering\n    -------------------------------------------------------\n  */\n\n  const { loanNo, branchNo, agency, dateOfReport } = pageObj;\n  return (\n    <div>\n      <SaveComponent\n        title=\"label.legal.loanSummary\"\n        pageMode={pageMode}\n        disabled={isLoading}\n        onSave={onSave}\n        onCancel={onCancel}\n        onEdit={onEdit}\n      >\n        {isLoadingInitial ? (\n          <SkeletonCustom height=\"19.375rem\" width=\"100%\" borderRadius=\"8px\" animation=\"wave\" />\n        ) : (\n          <AclGuard override={{ read: pageMode === PAGE_MODE.VIEW }}>\n            <div className=\" grid grid-cols-4 gap-3  \">\n              <div>\n                <InputBox\n                  label=\"label.legal.loanNoMandatory\"\n                  name=\"loanNo\"\n                  variant={INPUT_STYLE_TYPE.SECONDARY}\n                  value={loanNo ?? \"\"}\n                  disabled\n                />\n              </div>\n              <div>\n                <InputBox\n                  label=\"input.sourceDetails.branch\"\n                  name=\"Branch\"\n                  variant={INPUT_STYLE_TYPE.SECONDARY}\n                  value={branchNo ?? \"\"}\n                  disabled\n                />\n              </div>\n              <div>\n                <InputBox\n                  label=\"label.legal.agencyMandatory\"\n                  name=\"loanNo\"\n                  variant={INPUT_STYLE_TYPE.SECONDARY}\n                  value={agency ?? \"\"}\n                  disabled\n                />\n              </div>\n              <div>\n                <SystemDatePicker\n                  label=\"label.legal.dateOfReporting\"\n                  name=\"dateOfReport\"\n                  minDate={\n                    pageObj?.dateOfInitiation ? new Date(pageObj?.dateOfInitiation) : undefined\n                  }\n                  value={dateOfReport}\n                  variant={INPUT_STYLE_TYPE.SECONDARY}\n                  onChange={handleDateOfReportingChange}\n                  onBlur={validate}\n                  validation={simpleValidator?.current?.message(\n                    `dateOfReport`,\n                    dateOfReport,\n                    \"mandatory\"\n                  )}\n                  placeholder=\"DD-MMM-YYYY \"\n                />\n              </div>\n            </div>\n          </AclGuard>\n        )}\n      </SaveComponent>\n\n      <ToastCustom\n        position={\"bottom-right\"}\n        ref={toastMessageRef}\n        toastText={toastMessage}\n        variant={TOAST_STYLE_TYPE.PRIMARY}\n      />\n\n      <ErrorDialog\n        onHide={() => {\n          setShowDialogAPIError(false);\n          setErrorMessage(\"\");\n        }}\n        visible={showDialogAPIError}\n        errorMessage={errorMessage}\n      />\n    </div>\n  );\n});\n\nexport default LoanSummary;\n","import AclGuard from \"components/AclGuard\";\nimport { Column } from \"components/EditableTableV2/EditableTableV2\";\nimport InputBox from \"components/InputBox\";\nimport InputError from \"components/InputError/InputError\";\nimport RadioButton from \"components/RadioButton/RadioButton\";\nimport ReadOnlyTable from \"components/ReadOnlyTable/ReadOnlyTable\";\nimport SaveComponent from \"components/Save/SaveComponent\";\nimport Text from \"components/Text/Text\";\nimport React, { forwardRef, useEffect, useImperativeHandle, useRef, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport {\n  getStandardValidator,\n  messageReplace,\n  parseStandardAPIErrorMessage,\n  removeSpacesInString,\n} from \"utils/CommonUtil\";\nimport {\n  CHECKBOX_STYLE_TYPE,\n  INPUT_STYLE_TYPE,\n  PAGE_MODE,\n  STATIC_MASTER_TYPE_TOAST_TEXT,\n  TOAST_STYLE_TYPE,\n} from \"utils/Constant\";\nimport { ILegalDropdownList, ILegalSectionProps } from \"../../PageReport/PageReport\";\nimport ToastCustom from \"components/Toast\";\nimport ErrorDialog from \"components/ErrorDialog/ErrorDialog\";\nimport SkeletonCustom from \"components/Skeleton/Skeleton\";\nimport LegalService from \"services/transaction/DDE/LegalService\";\nimport { isLegalSectionAccessDisabled } from \"../../Helper\";\nimport { useSelector } from \"react-redux\";\n\ninterface IProps extends ILegalSectionProps {\n  dropDownOptions: ILegalDropdownList;\n  data: ILegalOtherProvisionPageObj;\n  getDetailsCallback: () => void;\n}\n\ntype TIsTrue = \"YES\" | \"NO\";\nexport interface ILegalOtherProvisionRowData {\n  uid?: string;\n  loan: {\n    uid: string;\n  };\n  stage: {\n    uid: string;\n  };\n  smCode?: string;\n  name: string;\n  value: TIsTrue | \"\" | null;\n  comment: string;\n}\n\ntype TInput = \"CHECKBOX\" | \"TEXT_INPUT\";\n\nconst IS_TRUE: Record<TIsTrue, TIsTrue> = {\n  YES: \"YES\",\n  NO: \"NO\",\n};\n\nconst INPUT: Record<TInput, TInput> = {\n  CHECKBOX: \"CHECKBOX\",\n  TEXT_INPUT: \"TEXT_INPUT\",\n};\n\nexport interface ILegalOtherProvisionPageObj {\n  tableData: ILegalOtherProvisionRowData[];\n  isTableLoaded: boolean;\n  loanUid: string;\n  stageUid: string;\n  isTableDataEmptyFromApi: boolean;\n}\n\nexport const initialLegalOtherProvisionPageObj: ILegalOtherProvisionPageObj = {\n  tableData: [],\n  isTableLoaded: false,\n  loanUid: \"\",\n  stageUid: \"\",\n  isTableDataEmptyFromApi: false,\n};\n\nexport interface IOtherDetailsRef {\n  onSaveSuccess: () => any;\n  onCancel: () => any;\n}\n\nconst OtherProvisions: React.FC<IProps> = forwardRef((props, ref) => {\n  const { t } = useTranslation();\n  const { data, isLoading, dropDownOptions, getDetailsCallback } = props;\n\n  /*\n    -------------------------------------------------------\n      State\n    -------------------------------------------------------\n    */\n  const [pageObj, setPageObj] = useState<ILegalOtherProvisionPageObj>({\n    ...initialLegalOtherProvisionPageObj,\n  });\n  const [pageMode, setPageMode] = useState(PAGE_MODE.VIEW);\n  const [toastMessage, setToastMessage] = useState(\"\");\n  const [triggerToast, setTriggerToast] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [showDialogAPIError, setShowDialogAPIError] = useState(false);\n\n  // ref\n  const tableRef = useRef<any>(null);\n  const toastMessageRef = useRef(null);\n\n  // --------------------------- validator initialization ---------------------- //\n  const [, forceUpdate] = useState<boolean>(false);\n\n  const simpleValidator = useRef(\n    new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    })\n  );\n\n  useImperativeHandle(ref, () => ({\n    save: onSave,\n    onCancel: onCancel,\n  }));\n\n  // --------------------------- global variables ---------------------- //\n\n  /*\n     -------------------------------------------------------\n       useEffect\n     -------------------------------------------------------\n   */\n  useEffect(() => {\n    if (data?.tableData?.length > 0) {\n      setPageObj((prevObj) => ({ ...prevObj, ...data }));\n    }\n  }, [data]);\n\n  useEffect(() => {\n    //initial table update\n    const otherProvisionOptions = dropDownOptions?.otherProvisions;\n    if (\n      otherProvisionOptions &&\n      otherProvisionOptions?.length > 0 &&\n      data.isTableLoaded &&\n      data.isTableDataEmptyFromApi\n    ) {\n      setPageObj((prevObj) => {\n        const updatePageObj = { ...prevObj };\n        const tableData: ILegalOtherProvisionRowData[] = [];\n        for (const option of otherProvisionOptions) {\n          tableData.push({\n            smCode: option?.code ?? \"\",\n            //  loan:option\n            name: option?.name ?? \"\",\n            value: null,\n            comment: \"\",\n            loan: {\n              uid: data?.loanUid,\n            },\n            stage: {\n              uid: data?.stageUid,\n            },\n          });\n        }\n        updatePageObj.tableData = tableData;\n        return updatePageObj;\n      });\n    }\n  }, [dropDownOptions?.otherProvisions, data]);\n\n  useEffect(() => {\n    if (toastMessageRef?.current && toastMessage !== \"\") {\n      // @ts-ignore: will be fixed in future\n      toastMessageRef?.current?.showFunction();\n      setToastMessage(\"\");\n    }\n  }, [toastMessage, triggerToast]);\n\n  useEffect(() => {\n    if (errorMessage) {\n      setShowDialogAPIError(true);\n    }\n  }, [errorMessage]);\n\n \n\n  /*\n    -------------------------------------------------------\n      Service Calls\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n      Handlers\n    -------------------------------------------------------\n  */\n\n  const handleChange = (\n    e: any,\n    rowData: ILegalOtherProvisionRowData,\n    input: keyof typeof INPUT\n  ) => {\n    const questionIndex = pageObj.tableData.findIndex(\n      (question) => question.smCode === rowData.smCode\n    );\n    if (questionIndex > -1) {\n      setPageObj((prevPageObj) => {\n        const updatedPageObj = { ...prevPageObj };\n        if (input === INPUT.CHECKBOX) {\n          updatedPageObj.tableData[questionIndex].value = e.value;\n        } else {\n          updatedPageObj.tableData[questionIndex].comment = e.target?.value;\n        }\n        return updatedPageObj;\n      });\n    }\n  };\n  /* \n    --------------------------------------------------------\n    Validators:\n    --------------------------------------------------------\n  */\n\n  const validate = (e: any) => {\n    simpleValidator?.current?.showMessageFor(e?.target?.name);\n  };\n\n  const validateForm = () => {\n    let isValid = false;\n    isValid = simpleValidator?.current?.allValid() ?? false;\n    if (isValid) {\n      return isValid;\n    } else {\n      forceUpdate((prev) => !prev);\n      simpleValidator?.current?.showMessages();\n      forceUpdate((prev) => !prev);\n      return false;\n    }\n  };\n\n  /*\n    -------------------------------------------------------\n      Button Click Handlers\n    -------------------------------------------------------\n  */\n\n  const onSave = async () => {\n    console.log(\"save\");\n    if (!validateForm()) {\n      return;\n    }\n    try {\n      const res = await LegalService.updateOtherProvisionDetails(pageObj?.tableData);\n\n      setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.SAVED);\n      setTriggerToast(!triggerToast);\n      setPageMode(PAGE_MODE.VIEW);\n      tableRef.current?.search();\n    } catch (error) {\n      setErrorMessage(parseStandardAPIErrorMessage(error));\n    }\n  };\n\n  const onEdit = () => setPageMode(PAGE_MODE.EDIT);\n\n  const onCancel = () => {\n    setPageMode(PAGE_MODE.VIEW);\n    resetValidator();\n    getDetailsCallback?.();\n  };\n\n  /*\n    -------------------------------------------------------\n      Helper Functions\n    -------------------------------------------------------\n  */\n\n  const resetValidator = () => {\n    simpleValidator.current = new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    });\n    simpleValidator?.current?.hideMessages();\n  };\n\n  /*\n    -------------------------------------------------------\n      Sectional Rendering\n    -------------------------------------------------------\n  */\n\n  const renderQuestion = (rowData: ILegalOtherProvisionRowData) => {\n    return <Text className=\" text-xs text-secondary-labelColor \" label={rowData?.name} />;\n  };\n\n  const renderYesOrNo = (rowData: ILegalOtherProvisionRowData) => {\n    return (\n      <div className=\"mt-5 \">\n        <div className=\"flex flex-shrink-0 \">\n          <div className=\"mr-5 flex\">\n            <RadioButton\n              hideLabel\n              hideErrorRow\n              variant={CHECKBOX_STYLE_TYPE.PRIMARY}\n              value={IS_TRUE.YES}\n              checked={rowData.value === IS_TRUE.YES}\n              onChange={(e) => handleChange(e, rowData, INPUT.CHECKBOX)}\n              disabled={pageMode === PAGE_MODE.VIEW}\n            />\n            <Text className=\"ml-1.5 text-xs \" label=\"label.dde.yes\" />\n          </div>\n          <div className=\"flex\">\n            <RadioButton\n              hideLabel\n              hideErrorRow\n              variant={CHECKBOX_STYLE_TYPE.PRIMARY}\n              value={IS_TRUE.NO}\n              checked={rowData.value === IS_TRUE.NO}\n              onChange={(e) => handleChange(e, rowData, INPUT.CHECKBOX)}\n              disabled={pageMode === PAGE_MODE.VIEW}\n            />\n            <Text className=\"ml-1.5 text-xs \" label=\"label.dde.no\" />\n          </div>\n        </div>\n        <div className=\"h-4 flex ml-6 items-start mb-1.5\">\n          <InputError\n            validation={simpleValidator?.current?.message(\n              `value${rowData?.smCode}`,\n              rowData.value,\n              \"mandatory\"\n            )}\n            // hideErrorRow={hideErrorRow}\n            // errorClassNames={errorClassNames}\n          />\n        </div>\n      </div>\n    );\n  };\n\n  const renderComment = (rowData: ILegalOtherProvisionRowData) => {\n    return (\n      <div className=\"flex items-start mt-1\">\n        <InputBox\n          name={`comment${rowData?.smCode}`}\n          variant={INPUT_STYLE_TYPE.SECONDARY}\n          onChange={(e) => handleChange(e, rowData, INPUT.TEXT_INPUT)}\n          onBlur={validate}\n          value={rowData?.comment}\n          // validation={simpleValidator?.current?.message(\n          //   `comment${rowData?.smCode}`,\n          //   rowData?.comment,\n          //   \"mandatory\"\n          // )}\n          // hideLabel\n          // hideErrorRow\n        />\n      </div>\n    );\n  };\n\n  /*\n    -------------------------------------------------------\n    Main Rendering\n    -------------------------------------------------------\n  */\n\n  return (\n    <div>\n      <SaveComponent\n        title=\"heading.legal.otherProvisions*\"\n        pageMode={pageMode}\n        onSave={onSave}\n        onCancel={onCancel}\n        onEdit={onEdit}\n      >\n        {isLoading ? (\n          <SkeletonCustom height=\"19.375rem\" width=\"100%\" borderRadius=\"8px\" animation=\"wave\" />\n        ) : (\n          <AclGuard override={{ read: pageMode === PAGE_MODE.VIEW }}>\n            <ReadOnlyTable\n              value={pageObj.tableData}\n              className=\" share-payment-details-table\"\n              ref={tableRef}\n              dataKey=\"uid\"\n            >\n              <Column\n                className=\"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6\"\n                header={\"Question\"}\n                body={renderQuestion}\n              />\n              <Column\n                className=\"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6\"\n                header={\"Yes/No*\"}\n                body={renderYesOrNo}\n              />\n              <Column\n                className=\"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6\"\n                header={\"Comment\"}\n                body={renderComment}\n                style={{ maxWidth: \"168px\" }}\n              />\n            </ReadOnlyTable>\n          </AclGuard>\n        )}\n      </SaveComponent>\n\n      <ToastCustom\n        position={\"bottom-right\"}\n        ref={toastMessageRef}\n        toastText={toastMessage}\n        variant={TOAST_STYLE_TYPE.PRIMARY}\n      />\n\n      <ErrorDialog\n        onHide={() => {\n          setShowDialogAPIError(false);\n          setErrorMessage(\"\");\n        }}\n        visible={showDialogAPIError}\n        errorMessage={errorMessage}\n      />\n    </div>\n  );\n});\n\nexport default OtherProvisions;\n","import DatePicker from \"components/DatePicker/DatePicker\";\nimport SaveComponent from \"components/Save/SaveComponent\";\nimport Section from \"components/Section/Section\";\nimport React, {\n  useState,\n  forwardRef,\n  useRef,\n  useImperativeHandle,\n  useMemo,\n  useEffect,\n} from \"react\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport {\n  INPUT_STYLE_TYPE,\n  PAGE_MODE,\n  STATIC_MASTER_TYPE_TOAST_TEXT,\n  TOAST_STYLE_TYPE,\n  VARIANTS,\n} from \"utils/Constant\";\nimport {\n  getStandardValidator,\n  messageReplace,\n  parseStandardAPIErrorMessage,\n} from \"utils/CommonUtil\";\nimport InputBox from \"components/InputBox\";\nimport AclGuard from \"components/AclGuard\";\nimport Address, { IAddressData, IAddressRef } from \"components/Address/Address\";\nimport { ILegalSectionProps } from \"../../PageReport/PageReport\";\nimport SkeletonCustom from \"components/Skeleton/Skeleton\";\nimport ErrorDialog from \"components/ErrorDialog/ErrorDialog\";\nimport ToastCustom from \"components/Toast\";\nimport LegalService from \"services/transaction/DDE/LegalService\";\nimport { useSelector } from \"react-redux\";\nimport { isLegalSectionAccessDisabled } from \"../../Helper\";\n\ninterface IProps extends ILegalSectionProps {\n  data: ILegalPropertyAddressPageObj;\n  isLoadingInitial: boolean;\n  getDetailsCallback: () => Promise<void>;\n}\n\ninterface IAutoComplete {\n  name: string;\n  uid: string;\n  code?: string;\n}\n\nexport interface ILegalPropertyAddressPageObj {\n  addressUid: string;\n  legalUid: string;\n  stageUid: string;\n  address: string;\n  pincode: { pinCode: string; uid?: string };\n  city: { name: string; uid?: string };\n  state: string;\n  latitude: string;\n  longitude: string;\n}\n\nexport const initialLegalPropertyAddressPageOj: ILegalPropertyAddressPageObj = {\n  addressUid: \"\",\n  legalUid: \"\",\n  stageUid: \"\",\n  address: \"\",\n  pincode: { pinCode: \"\", uid: \"\" },\n  city: { name: \"\", uid: \"\" },\n  state: \"\",\n  latitude: \"\",\n  longitude: \"\",\n};\n\nexport interface IOtherDetailsRef {\n  save: () => ILegalPropertyAddressPageObj;\n  onSaveSuccess: () => any;\n  onCancel: () => any;\n}\n\nconst PropertyAddressAsDocument: React.FC<IProps> = forwardRef((props, ref) => {\n  const { data, isLoading, isLoadingInitial, getDetailsCallback } = props;\n  /*\n    -------------------------------------------------------\n      State\n    -------------------------------------------------------\n    */\n  const [pageObj, setPageObj] = useState<ILegalPropertyAddressPageObj>({\n    ...initialLegalPropertyAddressPageOj,\n  });\n  const [pageMode, setPageMode] = useState(PAGE_MODE.VIEW);\n  const [toastMessage, setToastMessage] = useState(\"\");\n  const [triggerToast, setTriggerToast] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [showDialogAPIError, setShowDialogAPIError] = useState(false);\n\n  // ref\n  const toastMessageRef = useRef(null);\n  // --------------------------- validator initialization ---------------------- //\n  const [, forceUpdate] = useState<boolean>(false);\n\n  const simpleValidator = useRef(\n    new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    })\n  );\n  const addressRef = useRef<IAddressRef | null>(null);\n\n  useImperativeHandle(ref, () => ({\n    save: onSave,\n    onCancel: onCancel,\n  }));\n\n  // --------------------------- global variables ---------------------- //\n\n  /*\n     -------------------------------------------------------\n       useEffect\n     -------------------------------------------------------\n   */\n\n  useEffect(() => {\n    if (data.addressUid) {\n      setPageObj((prevObj) => ({\n        ...prevObj,\n        ...data,\n      }));\n    }\n  }, [data]);\n\n  useEffect(() => {\n    if (toastMessageRef?.current && toastMessage !== \"\") {\n      // @ts-ignore: will be fixed in future\n      toastMessageRef?.current?.showFunction();\n      setToastMessage(\"\");\n    }\n  }, [toastMessage, triggerToast]);\n\n  useEffect(() => {\n    if (errorMessage) {\n      setShowDialogAPIError(true);\n    }\n  }, [errorMessage]);\n\n  /*\n    -------------------------------------------------------\n      Service Calls\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n      Handlers\n    -------------------------------------------------------\n  */\n  const handleDateOfReportingChange = (e: any) => {\n    setPageObj((prevObj) => ({\n      ...prevObj,\n      [e.target.name]: e.target.value,\n    }));\n  };\n  /* \n    --------------------------------------------------------\n    Validators:\n    --------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n      Button Click Handlers\n    -------------------------------------------------------\n  */\n\n  const onSave = async () => {\n    console.log(\"save\");\n    const data = addressRef.current?.save();\n    if (data) {\n      const payload = enrichForSave(data);\n      try {\n        const res = await LegalService.updatePropertyAddressAsPerDoc(payload);\n\n        setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.SAVED);\n        setTriggerToast(!triggerToast);\n        setPageMode(PAGE_MODE.VIEW);\n        getDetailsCallback?.();\n      } catch (error) {\n        setErrorMessage(parseStandardAPIErrorMessage(error));\n      }\n    }\n  };\n\n  const onEdit = () => setPageMode(PAGE_MODE.EDIT);\n\n  const onCancel = () => {\n    setPageMode(PAGE_MODE.VIEW);\n\n    // if  form has existing saved  data then call api else clear all\n    addressRef.current?.resetValidator();\n    getDetailsCallback?.();\n    //  setPageObj((prevPageObj) => ({ ...prevPageObj, ...initialPageOj }));\n  };\n\n  /*\n    -------------------------------------------------------\n      Helper Functions\n    -------------------------------------------------------\n  */\n  const enrichForSave = (data: IAddressData) => {\n    return {\n      stage: {\n        uid: pageObj?.stageUid,\n      },\n      address: {\n        ...data,\n        uid: pageObj?.addressUid,\n        latitude: data?.latitude ? parseFloat(data?.latitude) : undefined,\n        longitude: data?.longitude ? parseFloat(data?.longitude) : undefined,\n      },\n    };\n  };\n\n  /*\n    -------------------------------------------------------\n      Sectional Rendering\n    -------------------------------------------------------\n  */\n  const addressData = useMemo(() => {\n    const { address, pincode, city, state, latitude, longitude } = pageObj;\n    return {\n      address,\n      pincode,\n      city,\n      state,\n      latitude,\n      longitude,\n    };\n  }, [\n    pageObj?.address,\n    pageObj?.pincode,\n    pageObj?.city,\n    pageObj?.state,\n    pageObj?.latitude,\n    pageObj?.longitude,\n  ]);\n\n  /*\n    -------------------------------------------------------\n    Main Rendering\n    -------------------------------------------------------\n  */\n\n  return (\n    <>\n      <SaveComponent\n        title=\"Heading.legal.PropertyAddressAsDocument\"\n        pageMode={pageMode}\n        disabled={isLoading}\n        onSave={onSave}\n        onCancel={onCancel}\n        onEdit={onEdit}\n      >\n        {isLoadingInitial ? (\n          <SkeletonCustom height=\"19.375rem\" width=\"100%\" borderRadius=\"8px\" animation=\"wave\" />\n        ) : (\n          <div className=\" grid grid-cols-4 gap-3  \">\n            <div className=\"col-span-4\">\n              <Address\n                pageMode={pageMode}\n                ref={addressRef}\n                data={addressData}\n                variant={VARIANTS.SECONDARY}\n                isLatLong\n              />\n            </div>\n          </div>\n        )}\n      </SaveComponent>\n\n      <ToastCustom\n        position={\"bottom-right\"}\n        ref={toastMessageRef}\n        toastText={toastMessage}\n        variant={TOAST_STYLE_TYPE.PRIMARY}\n      />\n\n      <ErrorDialog\n        onHide={() => {\n          setShowDialogAPIError(false);\n          setErrorMessage(\"\");\n        }}\n        visible={showDialogAPIError}\n        errorMessage={errorMessage}\n      />\n    </>\n  );\n});\n\nexport default PropertyAddressAsDocument;\n","import AclGuard from \"components/AclGuard\";\nimport ErrorDialog from \"components/ErrorDialog/ErrorDialog\";\nimport InputBox from \"components/InputBox\";\nimport SaveComponent from \"components/Save/SaveComponent\";\nimport SimpleDropDown from \"components/SimpleDropDown/SimpleDropDown\";\nimport SkeletonCustom from \"components/Skeleton/Skeleton\";\nimport ToastCustom from \"components/Toast\";\nimport React, { forwardRef, useEffect, useImperativeHandle, useRef, useState } from \"react\";\nimport LegalService from \"services/transaction/DDE/LegalService\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport {\n  getStandardValidator,\n  messageReplace,\n  parseStandardAPIErrorMessage,\n} from \"utils/CommonUtil\";\nimport {\n  INPUT_STYLE_TYPE,\n  PAGE_MODE,\n  STATIC_MASTER_TYPE_TOAST_TEXT,\n  TOAST_STYLE_TYPE,\n} from \"utils/Constant\";\nimport { ILegalDropdownList, ILegalSectionProps } from \"../../PageReport/PageReport\";\nimport { isLegalSectionAccessDisabled } from \"../../Helper\";\nimport { useSelector } from \"react-redux\";\n\ninterface IProps extends ILegalSectionProps {\n  dropDownOptions: ILegalDropdownList;\n  isLoadingInitial: boolean;\n  data?: ILegalPropertyDetailsPageObj;\n  getDetailsCallback: () => void;\n}\n\nexport interface ILegalPropertyDetailsPageObj {\n  stageUid: string;\n  legalUid: string;\n  typeOfLoan?: string;\n  natureOfTransactions: string;\n  subRegistrarOffice: string;\n  nameOfPresentOwner: string;\n  areaOfProperty: string;\n  units: string;\n  typeOfMortgage: string;\n  natureOfLand: string;\n}\n\nexport const initialLegalPropertyDetailsPageOj: ILegalPropertyDetailsPageObj = {\n  stageUid: \"\",\n  legalUid: \"\",\n  typeOfLoan: \"LOAN_TYPE_SECURED\",// Type of Loan would be always secured as Legal and Technical is done only for loans that are secured by a property\n  natureOfTransactions: \"\",\n  subRegistrarOffice: \"\",\n  nameOfPresentOwner: \"\",\n  areaOfProperty: \"\",\n  units: \"\",\n  typeOfMortgage: \"\",\n  natureOfLand: \"\",\n};\n\nexport interface IOtherDetailsRef {\n  save: () => ILegalPropertyDetailsPageObj;\n  onSaveSuccess: () => any;\n  onCancel: () => any;\n}\n\nconst PropertyDetails: React.FC<IProps> = forwardRef((props, ref) => {\n  const { dropDownOptions, getDetailsCallback, data, isLoadingInitial } = props;\n  const gridDivRef = useRef<any>(null);\n  /*\n    -------------------------------------------------------\n      State\n    -------------------------------------------------------\n    */\n  const [pageObj, setPageObj] = useState<ILegalPropertyDetailsPageObj>({\n    ...initialLegalPropertyDetailsPageOj,\n  });\n  const [pageMode, setPageMode] = useState(PAGE_MODE.VIEW);\n  const [toastMessage, setToastMessage] = useState(\"\");\n  const [triggerToast, setTriggerToast] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [showDialogAPIError, setShowDialogAPIError] = useState(false);\n  // ref\n  const toastMessageRef = useRef(null);\n\n  // --------------------------- validator initialization ---------------------- //\n  const [, forceUpdate] = useState<boolean>(false);\n\n  const simpleValidator = useRef(\n    new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    })\n  );\n\n  useImperativeHandle(ref, () => ({\n    save: onSave,\n    onCancel: onCancel,\n  }));\n\n  // --------------------------- global variables ---------------------- //\n\n  /*\n     -------------------------------------------------------\n       useEffect\n     -------------------------------------------------------\n   */\n\n  useEffect(() => {\n    if (data?.legalUid) {\n      setPageObj((prevObj) => ({\n        ...prevObj,\n        ...data,\n      }));\n    }\n  }, [data]);\n\n  useEffect(() => {\n    if (toastMessageRef?.current && toastMessage !== \"\") {\n      // @ts-ignore: will be fixed in future\n      toastMessageRef?.current?.showFunction();\n      setToastMessage(\"\");\n    }\n  }, [toastMessage, triggerToast]);\n\n  useEffect(() => {\n    if (errorMessage) {\n      setShowDialogAPIError(true);\n    }\n  }, [errorMessage]);\n\n  /*\n    -------------------------------------------------------\n      Service Calls\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n      Handlers\n    -------------------------------------------------------\n  */\n  const handleChange = (e: any) => {\n    setPageObj((prevObj) => ({\n      ...prevObj,\n      [e.target.name]: e.target.value,\n    }));\n  };\n  /* \n    --------------------------------------------------------\n    Validators:\n    --------------------------------------------------------\n  */\n\n  const validate = (e: any) => {\n    simpleValidator?.current?.showMessageFor(e?.target?.name);\n  };\n\n  const validateForm = () => {\n    let isValid = false;\n    isValid = simpleValidator?.current?.allValid() ?? false;\n    if (isValid) {\n      return isValid;\n    } else {\n      forceUpdate((prev) => !prev);\n      simpleValidator?.current?.showMessages();\n      forceUpdate((prev) => !prev);\n      return false;\n    }\n  };\n\n  /*\n    -------------------------------------------------------\n      Button Click Handlers\n    -------------------------------------------------------\n  */\n\n  const onSave = async () => {\n    console.log(\"save\");\n\n    if (!validateForm()) {\n      return;\n    }\n    const payload = enrichForSave();\n\n    try {\n      const res = await LegalService.updatePropertyDetails(payload);\n\n      setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.SAVED);\n      setTriggerToast(!triggerToast);\n      setPageMode(PAGE_MODE.VIEW);\n      getDetailsCallback?.();\n    } catch (error) {\n      setErrorMessage(parseStandardAPIErrorMessage(error));\n    }\n  };\n\n  const onEdit = () => setPageMode(PAGE_MODE.EDIT);\n\n  const onCancel = () => {\n    setPageMode(PAGE_MODE.VIEW);\n    resetValidator();\n    getDetailsCallback?.();\n  };\n\n  /*\n    -------------------------------------------------------\n      Helper Functions\n    -------------------------------------------------------\n  */\n  const getDropdownWidth = () => {\n    return gridDivRef?.current?.clientWidth\n      ? { width: `${gridDivRef?.current?.clientWidth}px` }\n      : undefined;\n  };\n\n  const enrichForSave = () => {\n    return {\n      uid: pageObj?.legalUid,\n      // uid: pageObj?.stageUid,\n      typeOfLoan: pageObj?.typeOfLoan,\n      natureOfTransaction: pageObj?.natureOfTransactions,\n      subRegistrarOffice: pageObj?.subRegistrarOffice,\n      nameOfCurrentOwner: pageObj?.nameOfPresentOwner,\n      areaOfPropertyAsPerDoc: pageObj?.areaOfProperty,\n      areaUnit: pageObj?.units,\n      typeOfMortgate: pageObj?.typeOfMortgage,\n      natureOfLand: pageObj?.natureOfLand,\n    };\n  };\n\n  const resetValidator = () => {\n    simpleValidator.current = new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    });\n    simpleValidator?.current?.hideMessages();\n  };\n\n  /*\n    -------------------------------------------------------\n      Sectional Rendering\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n    Main Rendering\n    -------------------------------------------------------\n  */\n\n  const {\n    typeOfLoan,\n    natureOfTransactions,\n    subRegistrarOffice,\n    nameOfPresentOwner,\n    areaOfProperty,\n    units,\n    typeOfMortgage,\n    natureOfLand,\n  } = pageObj;\n  return (\n    <div>\n      <SaveComponent\n        title=\"header.legal.propertyDetails\"\n        pageMode={pageMode}\n        onSave={onSave}\n        onCancel={onCancel}\n        onEdit={onEdit}\n      >\n        {isLoadingInitial ? (\n          <SkeletonCustom height=\"19.375rem\" width=\"100%\" borderRadius=\"8px\" animation=\"wave\" />\n        ) : (\n          <AclGuard override={{ read: pageMode === PAGE_MODE.VIEW }}>\n            <div className=\" grid grid-cols-4 gap-3 \">\n              <div className=\"col-span-1\">\n                <SimpleDropDown\n                  label=\"label.legal.typeOfLoanMandatory\"\n                  placeholder=\"placeholder.legal.typeOfLoanMandatory\"\n                  name=\"typeOfLoan\"\n                  value={typeOfLoan}\n                  // onChange={handleChange}\n                  // validation={simpleValidator?.current?.message(\n                  //   `typeOfLoan`,\n                  //   typeOfLoan,\n                  //   \"mandatory\"\n                  // )}\n                  // onBlur={validate}\n                  disabled\n                  options={dropDownOptions.typeOfLoan}\n                  optionLabel=\"name\"\n                  optionValue=\"code\"\n                />\n              </div>\n              <div className=\"col-span-1 \" ref={gridDivRef}>\n                {/* client bug change from dropdown to text */}\n                {/* <SimpleDropDown\n                  label=\"label.legal.natureOfTransactionMandatory\"\n                  placeholder=\"placeholder.legal.natureOfTransactionMandatory\"\n                  name=\"natureOfTransactions\"\n                  value={natureOfTransactions}\n                  onChange={handleChange}\n                  validation={simpleValidator?.current?.message(\n                    `natureOfTransactions`,\n                    natureOfTransactions,\n                    \"mandatory\"\n                  )}\n                  onBlur={validate}\n                  style={getDropdownWidth()}\n                  disabled={pageMode === PAGE_MODE.VIEW}\n                  options={dropDownOptions.natureOfTransactions}\n                  optionLabel=\"name\"\n                  optionValue=\"code\"\n                /> */}\n                <InputBox\n                  label=\"label.legal.natureOfTransactionMandatory\"\n                  name=\"natureOfTransactions\"\n                  variant={INPUT_STYLE_TYPE.SECONDARY}\n                  value={natureOfTransactions ?? \"\"}\n                  onChange={handleChange}\n                  validation={simpleValidator?.current?.message(\n                    `natureOfTransactions`,\n                    natureOfTransactions,\n                    \"mandatory\"\n                  )}\n                  onBlur={validate}\n                />\n              </div>\n              <div>\n                <InputBox\n                  label=\"label.legal.subRegistrarOffice\"\n                  name=\"subRegistrarOffice\"\n                  variant={INPUT_STYLE_TYPE.SECONDARY}\n                  value={subRegistrarOffice ?? \"\"}\n                  onChange={handleChange}\n                  validation={simpleValidator?.current?.message(\n                    `subRegistrarOffice`,\n                    subRegistrarOffice,\n                    \"mandatory\"\n                  )}\n                  onBlur={validate}\n                />\n              </div>\n              <div>\n                <InputBox\n                  label=\"label.legal.nameOfPresentOwnerMandatory\"\n                  name=\"nameOfPresentOwner\"\n                  variant={INPUT_STYLE_TYPE.SECONDARY}\n                  value={nameOfPresentOwner ?? \"\"}\n                  onChange={handleChange}\n                  validation={simpleValidator?.current?.message(\n                    `nameOfPresentOwner`,\n                    nameOfPresentOwner,\n                    \"mandatory\"\n                  )}\n                  onBlur={validate}\n                />\n              </div>\n              <div>\n                <InputBox\n                  label=\"label.legal.areaOfPropertyMandatory\"\n                  name=\"areaOfProperty\"\n                  variant={INPUT_STYLE_TYPE.SECONDARY}\n                  value={areaOfProperty ?? \"\"}\n                  onChange={handleChange}\n                  validation={simpleValidator?.current?.message(\n                    `areaOfProperty`,\n                    areaOfProperty,\n                    \"mandatory|checkNumber|onlyPositive|maxDecimal:2\"\n                  )}\n                  onBlur={validate}\n                />\n              </div>\n              <div className=\"col-span-1\">\n                <SimpleDropDown\n                  label=\"label.legal.unitsMandatory\"\n                  placeholder=\"placeholder.legal.unitsMandatory\"\n                  name=\"units\"\n                  value={units}\n                  onChange={handleChange}\n                  validation={simpleValidator?.current?.message(`units`, units, \"mandatory\")}\n                  onBlur={validate}\n                  disabled={pageMode === PAGE_MODE.VIEW}\n                  options={dropDownOptions.units}\n                  optionLabel=\"name\"\n                  optionValue=\"code\"\n                />\n              </div>\n              <div className=\"col-span-1\">\n                <SimpleDropDown\n                  label=\"label.legal.typeOfMortgage*\"\n                  placeholder=\"placeholder.legal.typeOfMortgage*\"\n                  name=\"typeOfMortgage\"\n                  value={typeOfMortgage}\n                  onChange={handleChange}\n                  validation={simpleValidator?.current?.message(\n                    `typeOfMortgage`,\n                    typeOfMortgage,\n                    \"mandatory\"\n                  )}\n                  onBlur={validate}\n                  disabled={pageMode === PAGE_MODE.VIEW}\n                  options={dropDownOptions.typeOfMortgage}\n                  optionLabel=\"name\"\n                  optionValue=\"code\"\n                />\n              </div>\n              <div className=\"col-span-1\">\n                <SimpleDropDown\n                  label=\"label.legal.natureOfPropertyMandatory\"\n                  placeholder=\"placeholder.legal.natureOfPropertyMandatory\"\n                  name=\"natureOfLand\"\n                  value={natureOfLand}\n                  onChange={handleChange}\n                  validation={simpleValidator?.current?.message(\n                    `natureOfLand`,\n                    natureOfLand,\n                    \"mandatory\"\n                  )}\n                  onBlur={validate}\n                  disabled={pageMode === PAGE_MODE.VIEW}\n                  options={dropDownOptions.natureOfLand}\n                  optionLabel=\"name\"\n                  optionValue=\"code\"\n                />\n              </div>\n            </div>\n          </AclGuard>\n        )}\n      </SaveComponent>\n\n      <ToastCustom\n        position={\"bottom-right\"}\n        ref={toastMessageRef}\n        toastText={toastMessage}\n        variant={TOAST_STYLE_TYPE.PRIMARY}\n      />\n\n      <ErrorDialog\n        onHide={() => {\n          setShowDialogAPIError(false);\n          setErrorMessage(\"\");\n        }}\n        visible={showDialogAPIError}\n        errorMessage={errorMessage}\n      />\n    </div>\n  );\n});\n\nexport default PropertyDetails;\n","import DatePicker from \"components/DatePicker/DatePicker\";\nimport SaveComponent from \"components/Save/SaveComponent\";\nimport Section from \"components/Section/Section\";\nimport React, { useEffect, useState, forwardRef, useRef, useImperativeHandle } from \"react\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport {\n  INPUT_STYLE_TYPE,\n  LEGAL_TEXT_EDITOR_SECTIONS,\n  PAGE_MODE,\n  STATIC_MASTER_TYPE_TOAST_TEXT,\n  TOAST_STYLE_TYPE,\n} from \"utils/Constant\";\nimport {\n  getStandardValidator,\n  messageReplace,\n  parseStandardAPIErrorMessage,\n} from \"utils/CommonUtil\";\nimport InputBox from \"components/InputBox\";\nimport AclGuard from \"components/AclGuard\";\nimport RichTextEditor from \"components/RichTextEditor\";\nimport { ILegalSectionProps } from \"../../PageReport/PageReport\";\nimport ErrorDialog from \"components/ErrorDialog/ErrorDialog\";\nimport ToastCustom from \"components/Toast\";\nimport SkeletonCustom from \"components/Skeleton/Skeleton\";\nimport LegalService from \"services/transaction/DDE/LegalService\";\nimport { useSelector } from \"react-redux\";\nimport { isLegalSectionAccessDisabled } from \"../../Helper\";\n\nexport type TLegalTextEditorSection = \"TITLE_OBSERVATION\" | \"TITLE_SEARCH\";\ninterface IProps extends ILegalSectionProps {\n  title?: string;\n  isLoadingInitial: boolean;\n  data?: ILegalTextContentPageObj;\n  getDetailsCallback: () => void;\n  section: TLegalTextEditorSection;\n}\n\nexport interface ILegalTextContentPageObj {\n  legalUid: string;\n  richText: string;\n  errorMessage?: string;\n}\n\ninterface IEditorRef {\n  editor: {\n    getContent: () => void;\n    plugins: {\n      wordcount: {\n        body: {\n          getCharacterCount: () => any;\n        };\n      };\n    };\n  };\n}\n\nexport const initialTextEditorPageOj: ILegalTextContentPageObj = {\n  legalUid: \"\",\n  richText: \"\",\n  errorMessage: \"\",\n};\n\nexport interface IOtherDetailsRef {\n  save: () => ILegalTextContentPageObj;\n  onSaveSuccess: () => any;\n  onCancel: () => any;\n}\n\nconst SaveContentTextEditor: React.FC<IProps> = forwardRef((props, ref) => {\n  const { title, section, getDetailsCallback, isLoadingInitial, data, isLoading } = props;\n\n  /*\n    -------------------------------------------------------\n      State\n    -------------------------------------------------------\n    */\n  const [pageObj, setPageObj] = useState<ILegalTextContentPageObj>({ ...initialTextEditorPageOj });\n  const [pageMode, setPageMode] = useState(PAGE_MODE.VIEW);\n  const [toastMessage, setToastMessage] = useState(\"\");\n  const [triggerToast, setTriggerToast] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [showDialogAPIError, setShowDialogAPIError] = useState(false);\n  // ref\n  const toastMessageRef = useRef(null);\n\n  // --------------------------- validator initialization ---------------------- //\n  const [, forceUpdate] = useState<boolean>(false);\n\n  const simpleValidator = useRef(\n    new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    })\n  );\n  const editorRef = useRef<IEditorRef>(null);\n\n  useImperativeHandle(ref, () => ({\n    save: onSave,\n    onCancel: onCancel,\n  }));\n\n  // --------------------------- global variables ---------------------- //\n\n  /*\n     -------------------------------------------------------\n       useEffect\n     -------------------------------------------------------\n   */\n\n  useEffect(() => {\n    if (data?.legalUid) {\n      setPageObj((prevObj) => ({\n        ...prevObj,\n        ...data,\n      }));\n    }\n  }, [data]);\n\n  useEffect(() => {\n    if (toastMessageRef?.current && toastMessage !== \"\") {\n      // @ts-ignore: will be fixed in future\n      toastMessageRef?.current?.showFunction();\n      setToastMessage(\"\");\n    }\n  }, [toastMessage, triggerToast]);\n\n  useEffect(() => {\n    if (errorMessage) {\n      setShowDialogAPIError(true);\n    }\n  }, [errorMessage]);\n\n  /*\n    -------------------------------------------------------\n      Service Calls\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n      Handlers\n    -------------------------------------------------------\n  */\n  const handleEditorValidation = (e: any) => {\n    if (validateEditor()) {\n      if (pageObj?.errorMessage) {\n        setPageObj((prevPageObj) => ({ ...prevPageObj, errorMessage: \"\" }));\n      }\n    }\n  };\n  /* \n    --------------------------------------------------------\n    Validators:\n    --------------------------------------------------------\n  */\n\n  const validate = (e: any) => {\n    simpleValidator?.current?.showMessageFor(e?.target?.name);\n  };\n\n  const validateForm = () => {\n    let isValid = false;\n    isValid = simpleValidator?.current?.allValid() ?? false;\n    if (isValid) {\n      return isValid;\n    } else {\n      forceUpdate((prev) => !prev);\n      simpleValidator?.current?.showMessages();\n      forceUpdate((prev) => !prev);\n      return false;\n    }\n  };\n\n  const validateEditor = () => {\n    console.log(\"editor \", editorRef);\n\n    const wordcount = editorRef?.current?.editor?.plugins?.wordcount?.body.getCharacterCount();\n\n    if (wordcount < 1) {\n      setPageObj((prevState) => {\n        return {\n          ...prevState,\n          errorMessage: \"Mandatory\",\n        };\n      });\n      return false;\n    }\n\n    // if (wordcount > 300) {\n    //   setPageObj((prevState) => {\n    //     return {\n    //       ...prevState,\n    //       errorMessage: \"Maximum 300 characters\",\n\n    //     };\n    //   });\n    //   return false;\n    // }\n\n    return true;\n  };\n\n  /*\n    -------------------------------------------------------\n      Button Click Handlers\n    -------------------------------------------------------\n  */\n\n  const onSave = async () => {\n    console.log(\"save\");\n\n    if (!validateEditor()) {\n      return;\n    }\n    const payload = enrichForSave();\n    let updateService;\n    if (section === LEGAL_TEXT_EDITOR_SECTIONS.TITLE_OBSERVATION) {\n      updateService = LegalService.updateTitleObservation;\n    } else {\n      updateService = LegalService.updateTitleSearch;\n    }\n    try {\n      const res = await updateService(payload);\n\n      setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.SAVED);\n      setTriggerToast(!triggerToast);\n      setPageMode(PAGE_MODE.VIEW);\n      getDetailsCallback?.();\n    } catch (error) {\n      setErrorMessage(parseStandardAPIErrorMessage(error));\n    }\n  };\n\n  const onEdit = () => setPageMode(PAGE_MODE.EDIT);\n\n  const onCancel = () => {\n    setPageMode(PAGE_MODE.VIEW);\n    // if  form has existing saved  data then call api else clear all\n    getDetailsCallback?.();\n    // editorRef?.current?.editor?.annotator?.removeAll();\n  };\n\n  /*\n    -------------------------------------------------------\n      Helper Functions\n    -------------------------------------------------------\n  */\n  const enrichForSave = () => {\n    const richText = editorRef.current?.editor?.getContent();\n    if (section === LEGAL_TEXT_EDITOR_SECTIONS.TITLE_OBSERVATION) {\n      return {\n        uid: pageObj?.legalUid,\n        propertyTitleObservations: richText,\n      };\n    } else {\n      return {\n        uid: pageObj?.legalUid,\n        titleSearch: richText,\n      };\n    }\n  };\n\n  /*\n    -------------------------------------------------------\n      Sectional Rendering\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n    Main Rendering\n    -------------------------------------------------------\n  */\n\n  return (\n    <div>\n      <SaveComponent\n        title={title}\n        pageMode={pageMode}\n        disabled={isLoading}\n        onSave={onSave}\n        onCancel={onCancel}\n        onEdit={onEdit}\n      >\n        {isLoadingInitial ? (\n          <SkeletonCustom height=\"19.375rem\" width=\"100%\" borderRadius=\"8px\" animation=\"wave\" />\n        ) : (\n          <AclGuard override={{ read: pageMode === PAGE_MODE.VIEW }}>\n            <div className=\" grid grid-cols-4 gap-3  \">\n              <div className=\"col-span-4 \">\n                <RichTextEditor\n                  ref={editorRef}\n                  validation={{ errorMessage: pageObj.errorMessage }}\n                  initialValue={pageObj.richText}\n                  onChange={handleEditorValidation}\n                  height={400}\n                  disabled={pageMode === PAGE_MODE.VIEW}\n                />\n              </div>\n            </div>\n          </AclGuard>\n        )}\n      </SaveComponent>\n\n      <ToastCustom\n        position={\"bottom-right\"}\n        ref={toastMessageRef}\n        toastText={toastMessage}\n        variant={TOAST_STYLE_TYPE.PRIMARY}\n      />\n\n      <ErrorDialog\n        onHide={() => {\n          setShowDialogAPIError(false);\n          setErrorMessage(\"\");\n        }}\n        visible={showDialogAPIError}\n        errorMessage={errorMessage}\n      />\n    </div>\n  );\n});\n\nexport default SaveContentTextEditor;\n","import AclGuard from \"components/AclGuard\";\nimport DocumentUploader, {\n  DOC_UPLOADER_MODE,\n  IDocumentInfo,\n  IDocumentUploaderRef,\n} from \"components/DocumentUploader/DocumentUploader\";\nimport ErrorDialog from \"components/ErrorDialog/ErrorDialog\";\nimport SaveComponent from \"components/Save/SaveComponent\";\nimport SkeletonCustom from \"components/Skeleton/Skeleton\";\nimport ToastCustom from \"components/Toast\";\nimport React, { forwardRef, useEffect, useImperativeHandle, useRef, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useParams } from \"react-router-dom\";\nimport LegalService from \"services/transaction/DDE/LegalService\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport {\n  getStandardValidator,\n  messageReplace,\n  parseStandardAPIErrorMessage,\n} from \"utils/CommonUtil\";\nimport {\n  DOCUMENT_CATEGORY,\n  PAGE_MODE,\n  STATIC_MASTER_TYPE_TOAST_TEXT,\n  TOAST_STYLE_TYPE,\n} from \"utils/Constant\";\nimport { prepareAttributes, prepareDocSections } from \"../../../Login/Helper\";\nimport { isLegalSectionAccessDisabled } from \"../../Helper\";\nimport { ILegalSectionProps } from \"../../PageReport/PageReport\";\n\ninterface IProps extends ILegalSectionProps {\n  data: ILegalUploadReportPageObj;\n  getDetailsCallback: () => void;\n}\n\nexport interface ILegalUploadReportPageObj {\n  legalUid: string;\n  savedDocuments: any[];\n}\n\nexport const initialLegalUploadReportPageOj: ILegalUploadReportPageObj = {\n  legalUid: \"\",\n  savedDocuments: [],\n};\n\nconst UploadReport: React.FC<IProps> = forwardRef((props, ref) => {\n  const params: { loanUid?: string } = useParams();\n\n  const { data, getDetailsCallback, isLoading } = props;\n\n  /*\n    -------------------------------------------------------\n      State\n    -------------------------------------------------------\n    */\n  const [pageObj, setPageObj] = useState<ILegalUploadReportPageObj>({\n    ...initialLegalUploadReportPageOj,\n  });\n  const [pageMode, setPageMode] = useState(PAGE_MODE.VIEW);\n  const [toastMessage, setToastMessage] = useState(\"\");\n  const [triggerToast, setTriggerToast] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [showDialogAPIError, setShowDialogAPIError] = useState(false);\n  // ref\n  const toastMessageRef = useRef(null);\n  const documentUploaderRef = useRef<IDocumentUploaderRef | null>(null);\n\n  // --------------------------- validator initialization ---------------------- //\n  const [, forceUpdate] = useState<boolean>(false);\n\n  const simpleValidator = useRef(\n    new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    })\n  );\n\n  useImperativeHandle(ref, () => ({\n    save: onSave,\n    onCancel: onCancel,\n  }));\n\n  // --------------------------- global variables ---------------------- //\n\n  /*\n     -------------------------------------------------------\n       useEffect\n     -------------------------------------------------------\n   */\n  useEffect(() => {\n    if (data?.legalUid) {\n      setPageObj((prevObj) => ({\n        ...prevObj,\n        ...data,\n      }));\n    }\n  }, [data]);\n\n  useEffect(() => {\n    if (toastMessageRef?.current && toastMessage !== \"\") {\n      // @ts-ignore: will be fixed in future\n      toastMessageRef?.current?.showFunction();\n      setToastMessage(\"\");\n    }\n  }, [toastMessage, triggerToast]);\n\n  useEffect(() => {\n    if (errorMessage) {\n      setShowDialogAPIError(true);\n    }\n  }, [errorMessage]);\n\n  /*\n    -------------------------------------------------------\n      Service Calls\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n      Handlers\n    -------------------------------------------------------\n  */\n\n  /* \n    --------------------------------------------------------\n    Validators:\n    --------------------------------------------------------\n  */\n\n  const validateForm = () => {\n    let isValid = false;\n    isValid = simpleValidator?.current?.allValid() ?? false;\n    if (isValid) {\n      return isValid;\n    } else {\n      forceUpdate((prev) => !prev);\n      simpleValidator?.current?.showMessages();\n      forceUpdate((prev) => !prev);\n      return false;\n    }\n  };\n\n  /*\n    -------------------------------------------------------\n      Button Click Handlers\n    -------------------------------------------------------\n  */\n\n  const onSave = async () => {\n    console.log(\"save\");\n\n    if (!validateForm()) {\n      return;\n    }\n\n    const unSavedDocuments: IDocumentInfo | undefined =\n      documentUploaderRef.current?.getUploadedData();\n    if (!unSavedDocuments) {\n      return;\n    }\n    const payload = enrichForSave(unSavedDocuments);\n    try {\n      const res = await LegalService.uploadDocument(payload);\n\n      setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.SAVED);\n      setTriggerToast(!triggerToast);\n      setPageMode(PAGE_MODE.VIEW);\n      getDetailsCallback?.();\n    } catch (error) {\n      setErrorMessage(parseStandardAPIErrorMessage(error));\n    }\n  };\n\n  const onEdit = () => setPageMode(PAGE_MODE.EDIT);\n\n  const onCancel = () => {\n    setPageMode(PAGE_MODE.VIEW);\n    // resetValidator();\n    // need to reset the document uploader\n    documentUploaderRef?.current?.resetDocUpload();\n    getDetailsCallback?.();\n  };\n\n  /*\n    -------------------------------------------------------\n      Helper Functions\n    -------------------------------------------------------\n  */\n  const enrichForSave = (unSavedDocument: IDocumentInfo) => {\n    return {\n      uid: pageObj.legalUid,\n      loan: {\n        uid: params?.loanUid,\n      },\n      loanDocuments: unSavedDocument?.documentUid\n        ? [\n            {\n              uid: unSavedDocument?.uid,\n              docType: {\n                uid: unSavedDocument?.documentUid,\n              },\n              docNo: unSavedDocument?.[`${unSavedDocument.primaryKeyAttributeName}`] ?? null,\n              dob: unSavedDocument.dob ? unSavedDocument.dob : null,\n              // loanSectionKey: LOAN_SECTION_KEY.PERMANENT_ADDRESS_PROOF,\n              docCategory: unSavedDocument?.documentCategory,\n              attributes: prepareAttributes(unSavedDocument),\n              documentSections: prepareDocSections(unSavedDocument?.documentSectionUrls),\n            },\n          ]\n        : [],\n    };\n  };\n\n  /*\n    -------------------------------------------------------\n      Sectional Rendering\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n    Main Rendering\n    -------------------------------------------------------\n  */\n\n  return (\n    <div>\n      <SaveComponent\n        title=\"heading.legal.uploadLegalReport\"\n        pageMode={pageMode}\n        disabled={isLoading}\n        onSave={onSave}\n        onCancel={onCancel}\n        onEdit={onEdit}\n      >\n        {isLoading ? (\n          <SkeletonCustom height=\"19.375rem\" width=\"100%\" borderRadius=\"8px\" animation=\"wave\" />\n        ) : (\n          <AclGuard override={{ read: pageMode === PAGE_MODE.VIEW }}>\n            <div className=\" grid grid-cols-4 gap-3 \">\n              <div className=\"col-span-4\">\n                <DocumentUploader\n                  ref={documentUploaderRef}\n                  savedDocument={data.savedDocuments?.[0] ? data.savedDocuments?.[0] : {}}\n                  mode={\n                    pageMode === PAGE_MODE.VIEW ? DOC_UPLOADER_MODE.VIEW : DOC_UPLOADER_MODE.EDIT\n                  }\n                  mandatoryDocUpload\n                  queryParamForDocList={DOCUMENT_CATEGORY.DOCUMENT_CATEGORY_LEGAL_DOCUMENT}\n                />\n              </div>\n            </div>\n          </AclGuard>\n        )}\n      </SaveComponent>\n\n      <ToastCustom\n        position={\"bottom-right\"}\n        ref={toastMessageRef}\n        toastText={toastMessage}\n        variant={TOAST_STYLE_TYPE.PRIMARY}\n      />\n\n      <ErrorDialog\n        onHide={() => {\n          setShowDialogAPIError(false);\n          setErrorMessage(\"\");\n        }}\n        visible={showDialogAPIError}\n        errorMessage={errorMessage}\n      />\n    </div>\n  );\n});\n\nexport default UploadReport;\n","import AclGuard from \"components/AclGuard/AclGuard\";\nimport ErrorDialog from \"components/ErrorDialog/ErrorDialog\";\nimport Info from \"components/Info/Info\";\nimport Section from \"components/Section/Section\";\nimport React, { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useParams } from \"react-router-dom\";\nimport StaticMasterDataService from \"services/masterdata/StaticMaster/StaticMasterDataService\";\nimport LegalService from \"services/transaction/DDE/LegalService\";\nimport StageService from \"services/transaction/DDE/StageService\";\nimport { parseStandardAPIErrorMessage, validateGetAPIResponse } from \"utils/CommonUtil\";\nimport { LEGAL_TEXT_EDITOR_SECTIONS, LOAN_STAGE_STATUS, SAHAYYA_USER_TYPE } from \"utils/Constant\";\nimport { IDropDownOptions } from \"../../Login/Helper\";\nimport {\n  updateLegalBoundaryDetailsObj,\n  updateLegalDocumentScrutinizedObj,\n  updateLegalFinalOpinionsObj,\n  updateLegalInitiationInfoObj,\n  updateLegalLoanSummaryObj,\n  updateLegalOtherProvisionObj,\n  updateLegalPropertyAddressObj,\n  updateLegalPropertyDetailsObj,\n  updateLegalTitleObservationsObj,\n  updateLegalTitleSearchObj,\n  updateUploadReportPageObj,\n} from \"../Helper\";\nimport { initialLegalBoundaryDetailsPageOj } from \"../Sections/BoundaryDetails\";\nimport BoundaryDetails, {\n  ILegalLoanSummaryPageObj,\n} from \"../Sections/BoundaryDetails/BoundaryDetails\";\nimport {\n  IDocumentScrutinizedRef,\n  LEGAL_DISBURSEMENT_CODE,\n  initialDocumentScrutinizedProps,\n} from \"../Sections/DocumentScrutinized\";\nimport DocumentScrutinized, {\n  ILegalDocumentScrutinizedData,\n} from \"../Sections/DocumentScrutinized/DocumentScrutinized\";\nimport DocumentScrutinizedPostAndPre from \"../Sections/DocumentScrutinizedPostAndPre/DocumentScrutinizedPostAndPre\";\nimport { initialLegalFinalOpinionPageOj } from \"../Sections/FinalOpinion\";\nimport FinalOpinion, { ILegalFinalOpinionPageObj } from \"../Sections/FinalOpinion/FinalOpinion\";\nimport InitiationInfo, {\n  ILegalInitiationInfo,\n  initialLegalInitiationInfoPageOj,\n} from \"../Sections/InitiationInfo\";\nimport { initialLegalSummaryPageOj } from \"../Sections/LoanSummary\";\nimport LoanSummary, { ILoanSummaryPageObj } from \"../Sections/LoanSummary/LoanSummary\";\nimport OtherProvisions, {\n  ILegalOtherProvisionPageObj,\n  initialLegalOtherProvisionPageObj,\n} from \"../Sections/OtherProvisions/OtherProvisions\";\nimport { initialLegalPropertyAddressPageOj } from \"../Sections/PropertyAddressAsDocument\";\nimport PropertyAddressAsDocument, {\n  ILegalPropertyAddressPageObj,\n} from \"../Sections/PropertyAddressAsDocument/PropertyAddressAsDocument\";\nimport PropertyDetails, {\n  ILegalPropertyDetailsPageObj,\n  initialLegalPropertyDetailsPageOj,\n} from \"../Sections/PropertyDetails\";\nimport { initialTextEditorPageOj } from \"../Sections/SaveContentTextEditor\";\nimport SaveContentTextEditor, {\n  ILegalTextContentPageObj,\n} from \"../Sections/SaveContentTextEditor/SaveContentTextEditor\";\nimport { initialLegalUploadReportPageOj } from \"../Sections/UploadReport\";\nimport UploadReport, { ILegalUploadReportPageObj } from \"../Sections/UploadReport/UploadReport\";\nexport interface ILegalSectionProps {\n  isLoading?: boolean;\n  ref?: any;\n}\n\nexport interface ILegalDropdownList {\n  addressType?: IDropDownOptions[];\n  venderType?: IDropDownOptions[];\n  stage?: IDropDownOptions[];\n  typeOfLoan?: IDropDownOptions[];\n  natureOfTransactions?: IDropDownOptions[];\n  typeOfMortgage?: IDropDownOptions[];\n  natureOfLand?: IDropDownOptions[];\n  units?: IDropDownOptions[];\n  status?: IDropDownOptions[];\n  documentCopyType?: IDropDownOptions[];\n  otherProvisions?: IDropDownOptions[];\n}\ninterface IPageObj {\n  showInfo: boolean;\n  dropdownOptions: ILegalDropdownList;\n  stageInfo: any;\n  initiationInfo: ILegalInitiationInfo;\n  loanSummary: ILoanSummaryPageObj;\n  propertyDetails: ILegalPropertyDetailsPageObj;\n  propertyAddress: ILegalPropertyAddressPageObj;\n  boundaryDetails: ILegalLoanSummaryPageObj;\n  finalOpinion: ILegalFinalOpinionPageObj;\n  titleObservations: ILegalTextContentPageObj;\n  titleSearch: ILegalTextContentPageObj;\n  documentScrutinized: ILegalDocumentScrutinizedData;\n  otherProvisions: ILegalOtherProvisionPageObj;\n  isLoading: {\n    loanSummary: boolean;\n    propertyAddress: boolean;\n    boundaryDetails: boolean;\n    finalOpinion: boolean;\n    titleObservations: boolean;\n    titleSearch: boolean;\n    propertyDetails: boolean;\n    otherProvisions: boolean;\n    uploadReport: boolean;\n  };\n  stageUid: string;\n  isStageDetailsInitialLoad: boolean;\n  uploadReport: ILegalUploadReportPageObj;\n}\nconst allInOneApiLoading = {\n  loanSummary: false,\n  propertyAddress: false,\n  boundaryDetails: false,\n  finalOpinion: false,\n  titleObservations: false,\n  titleSearch: false,\n  propertyDetails: false,\n};\nconst initialPageOj: IPageObj = {\n  showInfo: true,\n  stageInfo: {},\n  dropdownOptions: {\n    addressType: [],\n    venderType: [],\n    stage: [],\n    typeOfLoan: [],\n    natureOfTransactions: [],\n    typeOfMortgage: [],\n    natureOfLand: [],\n    units: [],\n    status: [],\n    documentCopyType: [],\n    otherProvisions: [],\n  },\n  initiationInfo: { ...initialLegalInitiationInfoPageOj },\n  loanSummary: { ...initialLegalSummaryPageOj },\n  propertyDetails: { ...initialLegalPropertyDetailsPageOj },\n  propertyAddress: { ...initialLegalPropertyAddressPageOj },\n  boundaryDetails: { ...initialLegalBoundaryDetailsPageOj },\n  finalOpinion: { ...initialLegalFinalOpinionPageOj },\n  titleObservations: { ...initialTextEditorPageOj },\n  titleSearch: { ...initialTextEditorPageOj },\n  documentScrutinized: { ...initialDocumentScrutinizedProps },\n  otherProvisions: { ...initialLegalOtherProvisionPageObj },\n  isLoading: {\n    ...allInOneApiLoading,\n    otherProvisions: false,\n    uploadReport: false,\n  },\n  isStageDetailsInitialLoad: true,\n  stageUid: \"\",\n  uploadReport: { ...initialLegalUploadReportPageOj },\n};\n\nconst PageReport = () => {\n  const params: { loanUid?: string; stageUid?: string } = useParams();\n  /*\n    -------------------------------------------------------\n      State\n    -------------------------------------------------------\n  */\n\n  const [showDialogAPIError, setShowDialogAPIError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState<any>(\"\");\n  const [pageObj, setPageObj] = useState<IPageObj>({ ...initialPageOj });\n  const [isReadMode, setIsReadMode] = useState(false);\n\n  // ref\n  const documentScrutinizedRef = React.useRef<IDocumentScrutinizedRef>(null);\n  const documentScrutinizedPreDisbursementRef = React.useRef<IDocumentScrutinizedRef>(null);\n  const documentScrutinizedPostDisbursementRef = React.useRef<IDocumentScrutinizedRef>(null);\n\n  const userProfile = useSelector((state: any) => state.UserProfileReducers.profileObj);\n  const isPartnerUser = userProfile?.sahayyaUserType === SAHAYYA_USER_TYPE.PARTNER_USER;\n\n  // --------------------------- global variables ---------------------- //\n\n  /*\n     -------------------------------------------------------\n       useEffect\n     -------------------------------------------------------\n   */\n  useEffect(() => {\n    init();\n  }, []);\n\n  useEffect(() => {\n    if (params.stageUid) {\n      init();\n    }\n  }, [params.stageUid]);\n\n  useEffect(() => {\n    if (pageObj.stageUid) {\n      getStageDetails();\n      getOtherProvisionDetails();\n    }\n  }, [pageObj.stageUid]);\n\n  useEffect(() => {\n    if (pageObj.initiationInfo.legalUid && !pageObj.uploadReport.legalUid) {\n      getUploadReport();\n    }\n  }, [pageObj.initiationInfo.legalUid]);\n\n  useEffect(() => {\n    if (errorMessage) {\n      setShowDialogAPIError(true);\n    }\n  }, [errorMessage]);\n\n  useEffect(() => {\n    if (pageObj.stageInfo?.status === LOAN_STAGE_STATUS.IN_REVIEW) {\n      setIsReadMode(true);\n    } else if (!isPartnerUser) {\n      setIsReadMode(true);\n    } else if (pageObj.stageInfo?.status === LOAN_STAGE_STATUS.COMPLETED) {\n      setIsReadMode(true);\n    } else if (pageObj.stageInfo?.status === LOAN_STAGE_STATUS.CANCELLED) {\n      setIsReadMode(true);\n    } else {\n      setIsReadMode(false);\n    }\n  }, [pageObj.stageInfo?.status, isPartnerUser]);\n\n  const init = () => {\n    setPageObj((prevPageObj) => ({ ...prevPageObj, stageUid: params?.stageUid ?? \"\" }));\n    getVendorTypeOptions();\n    getLoanTypeOptions();\n    getNatureOfLandOptions();\n    getAddressTypeOptions();\n    getDocumentCopyTypeOptions();\n    getUnitsOptions();\n    getTypeOfMortgageOptions();\n    getNatureOfTransactionOptions();\n    getOtherProvisionOptions();\n  };\n\n  /*\n    -------------------------------------------------------\n      Service Calls\n    -------------------------------------------------------\n  */\n\n  const getStageDetails = async (ignoreAdditionAddress?: boolean) => {\n    setPageObj((prevObj) => ({\n      ...prevObj,\n      isLoading: {\n        ...prevObj.isLoading,\n        loanSummary: true,\n        propertyAddress: true,\n        boundaryDetails: true,\n        finalOpinion: true,\n        titleObservations: true,\n        titleSearch: true,\n        propertyDetails: true,\n      },\n    }));\n    try {\n      const res = await StageService.getStageDetails(pageObj.stageUid);\n      let stagePropertyAddress: any;\n      if (!ignoreAdditionAddress) {\n        stagePropertyAddress = await StageService.getPropertyDetails(\n          0,\n          10,\n          `uid=${res?.data?.stage?.address?.uid ?? \"\"}`\n        );\n      }\n      if (validateGetAPIResponse(res)) {\n        setPageObj((prevState: IPageObj) => {\n          return {\n            ...prevState,\n            stageInfo: res?.data?.stage,\n            initiationInfo: {\n              ...prevState.initiationInfo,\n              ...updateLegalInitiationInfoObj(res?.data, stagePropertyAddress?.data?.results?.[0]),\n            },\n            loanSummary: {\n              ...prevState.loanSummary,\n              ...updateLegalLoanSummaryObj(res?.data),\n            },\n            propertyDetails: {\n              ...prevState.propertyAddress,\n              ...updateLegalPropertyDetailsObj(res?.data),\n            },\n            propertyAddress: {\n              ...prevState.propertyAddress,\n              ...updateLegalPropertyAddressObj(res?.data),\n            },\n            boundaryDetails: {\n              ...prevState.boundaryDetails,\n              ...updateLegalBoundaryDetailsObj(res?.data),\n            },\n            finalOpinion: {\n              ...prevState.finalOpinion,\n              ...updateLegalFinalOpinionsObj(res?.data),\n            },\n            titleObservations: {\n              ...prevState.titleObservations,\n              ...updateLegalTitleObservationsObj(res?.data),\n            },\n            titleSearch: {\n              ...prevState.titleSearch,\n              ...updateLegalTitleSearchObj(res?.data),\n            },\n            documentScrutinized: {\n              ...prevState.documentScrutinized,\n              ...updateLegalDocumentScrutinizedObj(res?.data),\n            },\n            isLoading: {\n              ...prevState.isLoading,\n              ...allInOneApiLoading,\n            },\n            isStageDetailsInitialLoad: false,\n          };\n        });\n      }\n    } catch (error) {\n      setErrorMessage(parseStandardAPIErrorMessage(error));\n      setPageObj((prevState: IPageObj) => {\n        return {\n          ...prevState,\n          isLoading: {\n            ...prevState.isLoading,\n            ...initialPageOj.isLoading,\n          },\n          isStageDetailsInitialLoad: false,\n        };\n      });\n    }\n  };\n\n  const getOtherProvisionDetails = async (ignoreLoader?: boolean) => {\n    if (!ignoreLoader) {\n      setPageObj((prevObj) => ({\n        ...prevObj,\n        isLoading: {\n          ...prevObj.isLoading,\n          otherProvisions: true,\n        },\n      }));\n    }\n\n    try {\n      const res = await LegalService.getOtherProvisionDetails(pageObj.stageUid);\n      if (validateGetAPIResponse(res)) {\n        setPageObj((prevState: IPageObj) => {\n          return {\n            ...prevState,\n            otherProvisions: {\n              ...prevState.otherProvisions,\n              isTableLoaded: true,\n              isTableDataEmptyFromApi: res?.data?.results?.length === 0,\n              tableData: updateLegalOtherProvisionObj(res?.data?.results),\n              loanUid: params?.loanUid ?? \"\",\n              stageUid: pageObj.stageUid, // stage uid will come from params\n            },\n            isLoading: {\n              ...prevState.isLoading,\n              ...initialPageOj.isLoading,\n            },\n          };\n        });\n      }\n    } catch (error) {\n      setErrorMessage(parseStandardAPIErrorMessage(error));\n      setPageObj((prevState: IPageObj) => {\n        return {\n          ...prevState,\n          isLoading: {\n            ...prevState.isLoading,\n            otherProvisions: false,\n          },\n        };\n      });\n    }\n  };\n\n  const getUploadReport = async (ignoreLoader?: boolean) => {\n    if (!ignoreLoader) {\n      setPageObj((prevObj) => ({\n        ...prevObj,\n        isLoading: {\n          ...prevObj.isLoading,\n          uploadReport: true,\n        },\n      }));\n    }\n\n    try {\n      const res = await LegalService.getSavedDocuments(pageObj.initiationInfo.legalUid ?? \"\");\n      if (validateGetAPIResponse(res)) {\n        setPageObj((prevState: IPageObj) => {\n          return {\n            ...prevState,\n            uploadReport: {\n              ...prevState.uploadReport,\n              ...updateUploadReportPageObj(res?.data),\n            },\n            isLoading: {\n              ...prevState.isLoading,\n              ...initialPageOj.isLoading,\n            },\n          };\n        });\n      }\n    } catch (error) {\n      setErrorMessage(parseStandardAPIErrorMessage(error));\n      setPageObj((prevState: IPageObj) => {\n        return {\n          ...prevState,\n          isLoading: {\n            ...prevState.isLoading,\n            uploadReport: false,\n          },\n        };\n      });\n    }\n  };\n\n  const getVendorTypeOptions = () => {\n    StaticMasterDataService.getAll(0, 1000, \"staticMasterType.code=VENDOR_TYPE&\")\n      .then((res) => {\n        if (validateGetAPIResponse(res)) {\n          /// res.data.results\n          updateDropdownOptions(\"venderType\", res?.data?.results);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setErrorMessage(parseStandardAPIErrorMessage(err));\n      });\n  };\n\n  const getLoanTypeOptions = () => {\n    StaticMasterDataService.getAll(0, 1000, \"staticMasterType.code=LOAN_TYPE&\")\n      .then((res) => {\n        if (validateGetAPIResponse(res)) {\n          /// res.data.results\n          updateDropdownOptions(\"typeOfLoan\", res?.data?.results);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setErrorMessage(parseStandardAPIErrorMessage(err));\n      });\n  };\n\n  const getNatureOfLandOptions = () => {\n    StaticMasterDataService.getAll(0, 1000, \"staticMasterType.code=LAND_USE\")\n      .then((res) => {\n        if (validateGetAPIResponse(res)) {\n          /// res.data.results\n          updateDropdownOptions(\"natureOfLand\", res?.data?.results);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setErrorMessage(parseStandardAPIErrorMessage(err));\n      });\n  };\n\n  const getAddressTypeOptions = () => {\n    StaticMasterDataService.getAll(0, 1000, \"staticMasterType.code=ADDRESS_TYPE&\")\n      .then((res) => {\n        if (validateGetAPIResponse(res)) {\n          updateDropdownOptions(\"addressType\", res?.data?.results);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setErrorMessage(parseStandardAPIErrorMessage(err));\n      });\n  };\n\n  const getDocumentCopyTypeOptions = () => {\n    StaticMasterDataService.getAll(\n      0,\n      1000,\n      \"staticMasterType.code=DOCUMENT_COPY_TYPE\"\n    )\n      .then((res) => {\n        if (validateGetAPIResponse(res)) {\n          /// res.data.results\n          updateDropdownOptions(\"documentCopyType\", res?.data?.results);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setErrorMessage(parseStandardAPIErrorMessage(err));\n      });\n  };\n\n  const getNatureOfTransactionOptions = () => {\n    StaticMasterDataService.getAll(0, 1000, \"staticMasterType.code=LOAN_PURPOSE\")\n      .then((res) => {\n        if (validateGetAPIResponse(res)) {\n          /// res.data.results\n          updateDropdownOptions(\"natureOfTransactions\", res?.data?.results);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setErrorMessage(parseStandardAPIErrorMessage(err));\n      });\n  };\n\n  const getUnitsOptions = () => {\n    StaticMasterDataService.getAll(0, 1000, \"staticMasterType.code=UNIT\")\n      .then((res) => {\n        if (validateGetAPIResponse(res)) {\n          /// res.data.results\n          updateDropdownOptions(\"units\", res?.data?.results);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setErrorMessage(parseStandardAPIErrorMessage(err));\n      });\n  };\n\n  const getTypeOfMortgageOptions = () => {\n    StaticMasterDataService.getAll(0, 1000, \"staticMasterType.code=TYPE_OF_MORTGAGE\")\n      .then((res) => {\n        if (validateGetAPIResponse(res)) {\n          /// res.data.results\n          updateDropdownOptions(\"typeOfMortgage\", res?.data?.results);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setErrorMessage(parseStandardAPIErrorMessage(err));\n      });\n  };\n\n  const getOtherProvisionOptions = () => {\n    StaticMasterDataService.getAll(\n      0,\n      1000,\n      \"staticMasterType.code=OTHER_PROVISION_QUESTIONS\"\n    )\n      .then((res) => {\n        if (validateGetAPIResponse(res)) {\n          updateDropdownOptions(\"otherProvisions\", res?.data?.results);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setErrorMessage(parseStandardAPIErrorMessage(err));\n      });\n  };\n\n  /*\n    -------------------------------------------------------\n      Handlers\n    -------------------------------------------------------\n  */\n\n  const onCloseInfo = () => {\n    setPageObj((prevPageObj) => ({ ...prevPageObj, showInfo: false }));\n  };\n\n  /* \n    --------------------------------------------------------\n    Validators:\n    --------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n      Button Click Handlers\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n      Helper Functions\n    -------------------------------------------------------\n  */\n\n  const onRefreshDocumentScrutinized = () => {\n    documentScrutinizedPreDisbursementRef?.current?.refresh();\n    documentScrutinizedPostDisbursementRef?.current?.refresh();\n  };\n\n  const onRefreshDocumentScrutinizedPreDisbursement = () => {\n    documentScrutinizedRef?.current?.refresh();\n  };\n\n  const onRefreshDocumentScrutinizedPostDisbursement = () => {\n    documentScrutinizedRef?.current?.refresh();\n  };\n\n  const updateDropdownOptions = (key: keyof ILegalDropdownList, options: any[]) => {\n    setPageObj((prevState: any) => ({\n      ...prevState,\n      dropdownOptions: {\n        ...prevState?.dropdownOptions,\n        [key]: options ?? [],\n      },\n    }));\n  };\n\n  const getInitiationInfoDropdownOptions = () => {\n    return {\n      venderType: pageObj.dropdownOptions?.venderType,\n      addressType: pageObj.dropdownOptions?.addressType,\n    };\n  };\n\n  const getPropertyDetailsDropdownOptions = () => {\n    return {\n      typeOfLoan: pageObj.dropdownOptions.typeOfLoan,\n      natureOfTransactions: pageObj.dropdownOptions.natureOfTransactions,\n      units: pageObj.dropdownOptions.units,\n      typeOfMortgage: pageObj.dropdownOptions.typeOfMortgage,\n      natureOfLand: pageObj.dropdownOptions.natureOfLand,\n    };\n  };\n\n  /*\n    -------------------------------------------------------\n      Sectional Rendering\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n    Main Rendering\n    -------------------------------------------------------\n  */\n  return (\n    <div className=\"grid gap-5 mb-5\">\n      {pageObj?.showInfo ? (\n        <Info description=\"description.legal.info\" onClose={onCloseInfo} />\n      ) : null}\n      <InitiationInfo\n        isLoadingInitial={pageObj.isStageDetailsInitialLoad}\n        data={pageObj?.initiationInfo}\n        dropdownOptions={getInitiationInfoDropdownOptions()}\n      />\n      <AclGuard override={{ read: isReadMode }}>\n        {!pageObj.initiationInfo.showOnlyUploadReport ? (\n          <Section title=\"heading.legal.legalReport\" className=\"\">\n            <>\n              <LoanSummary\n                isLoading={pageObj.isLoading.loanSummary}\n                isLoadingInitial={pageObj.isStageDetailsInitialLoad}\n                data={pageObj?.loanSummary}\n                getDetailsCallback={() => getStageDetails(true)}\n              />\n              <PropertyDetails\n                dropDownOptions={getPropertyDetailsDropdownOptions()}\n                isLoading={pageObj.isLoading.propertyDetails}\n                isLoadingInitial={pageObj.isStageDetailsInitialLoad}\n                data={pageObj?.propertyDetails}\n                getDetailsCallback={() => getStageDetails(true)}\n              />\n              <PropertyAddressAsDocument\n                isLoading={pageObj.isLoading.propertyAddress}\n                isLoadingInitial={pageObj.isStageDetailsInitialLoad}\n                data={pageObj?.propertyAddress}\n                getDetailsCallback={getStageDetails}\n              />\n\n              <BoundaryDetails\n                isLoading={pageObj.isLoading.propertyAddress}\n                isLoadingInitial={pageObj.isStageDetailsInitialLoad}\n                data={pageObj?.boundaryDetails}\n                getDetailsCallback={() => getStageDetails(true)}\n              />\n\n              <DocumentScrutinized\n                dropDownOptions={{\n                  documentCopyType: pageObj?.dropdownOptions?.documentCopyType ?? [],\n                }}\n                data={{\n                  stageUid: pageObj.stageUid,\n                  applicantUid: pageObj?.documentScrutinized.applicantUid,\n                  loanUid: pageObj?.documentScrutinized.loanUid,\n                }}\n                ref={documentScrutinizedRef}\n                updatedRelatedTableCallback={onRefreshDocumentScrutinized}\n                // section={DOCUMENT_SCRUTINIZED.ALL.code}\n              />\n\n              <SaveContentTextEditor\n                title=\"heading.legal.flowOfProperty\"\n                section={LEGAL_TEXT_EDITOR_SECTIONS.TITLE_OBSERVATION}\n                isLoading={pageObj.isLoading.titleObservations}\n                isLoadingInitial={pageObj.isStageDetailsInitialLoad}\n                data={pageObj?.titleObservations}\n                getDetailsCallback={() => getStageDetails(true)}\n              />\n              <SaveContentTextEditor\n                title=\"heading.legal.titleSearch*\"\n                section={LEGAL_TEXT_EDITOR_SECTIONS.TITLE_SEARCH}\n                isLoading={pageObj.isLoading.titleSearch}\n                isLoadingInitial={pageObj.isStageDetailsInitialLoad}\n                data={pageObj?.titleSearch}\n                getDetailsCallback={() => getStageDetails(true)}\n              />\n              <FinalOpinion\n                isLoading={pageObj.isLoading.propertyAddress}\n                isLoadingInitial={pageObj.isStageDetailsInitialLoad}\n                data={pageObj?.finalOpinion}\n                getDetailsCallback={() => getStageDetails(true)}\n              />\n              <OtherProvisions\n                isLoading={pageObj.isLoading.otherProvisions}\n                dropDownOptions={{\n                  otherProvisions: pageObj?.dropdownOptions?.otherProvisions ?? [],\n                }}\n                data={pageObj?.otherProvisions ?? []}\n                getDetailsCallback={() => getOtherProvisionDetails(true)}\n              />\n              <DocumentScrutinizedPostAndPre\n                dropDownOptions={{\n                  documentCopyType: pageObj?.dropdownOptions?.documentCopyType ?? [],\n                }}\n                data={{\n                  stageUid: pageObj.stageUid,\n                  applicantUid: pageObj?.documentScrutinized.applicantUid,\n                  loanUid: pageObj?.documentScrutinized.loanUid,\n                }}\n                section={LEGAL_DISBURSEMENT_CODE.PRE_DISBURSEMENT}\n                ref={documentScrutinizedPreDisbursementRef}\n                updatedRelatedTableCallback={onRefreshDocumentScrutinizedPreDisbursement}\n              />\n              <DocumentScrutinizedPostAndPre\n                dropDownOptions={{\n                  documentCopyType: pageObj?.dropdownOptions?.documentCopyType ?? [],\n                }}\n                data={{\n                  stageUid: pageObj.stageUid,\n                  applicantUid: pageObj?.documentScrutinized.applicantUid,\n                  loanUid: pageObj?.documentScrutinized.loanUid,\n                }}\n                section={LEGAL_DISBURSEMENT_CODE.POST_DISBURSEMENT}\n                ref={documentScrutinizedPostDisbursementRef}\n                updatedRelatedTableCallback={onRefreshDocumentScrutinizedPostDisbursement}\n              />\n            </>\n          </Section>\n        ) : null}\n\n        <Section title=\"heading.legal.legalReport\">\n          <UploadReport\n            isLoading={pageObj.isLoading.uploadReport}\n            data={pageObj.uploadReport}\n            getDetailsCallback={() => getUploadReport(true)}\n          />\n        </Section>\n      </AclGuard>\n      <ErrorDialog\n        onHide={() => {\n          setShowDialogAPIError(false);\n          setErrorMessage(\"\");\n        }}\n        visible={showDialogAPIError}\n        errorMessage={errorMessage}\n      />\n    </div>\n  );\n};\n\nexport default PageReport;\n"],"names":["initialLegalBoundaryDetailsPageOj","BoundaryDetails","forwardRef","props","ref","data","getDetailsCallback","isLoadingInitial","isLoading","pageObj","setPageObj","useState","pageMode","setPageMode","PAGE_MODE","toastMessage","setToastMessage","triggerToast","setTriggerToast","errorMessage","setErrorMessage","showDialogAPIError","setShowDialogAPIError","toastMessageRef","useRef","forceUpdate","simpleValidator","SimpleReactValidator","getStandardValidator","messageReplace","prev","useImperativeHandle","onSave","onCancel","useEffect","prevObj","_a","handleChange","e","validate","_b","validateForm","isValid","payload","enrichForSave","res","LegalService","STATIC_MASTER_TYPE_TOAST_TEXT","error","parseStandardAPIErrorMessage","onEdit","resetValidator","eastBy","westBy","northBy","southBy","jsx","SaveComponent","SkeletonCustom","AclGuard","jsxs","InputTextArea","INPUT_STYLE_TYPE","_c","_d","ToastCustom","TOAST_STYLE_TYPE","ErrorDialog","LEGAL_DISBURSEMENT_CODE","LEGAL_DISBURSEMENT","initialDocumentScrutinizedProps","initialTableRowData","DocumentScrutinized","dropDownOptions","updatedRelatedTableCallback","tableRef","React","onSearch","options","rowDataObj","handlePreDisbursementChange","rowData","handlePostDisbursementChange","onAddDocument","onDeleteRow","addRows","deletedRows","updatedRows","updateLegalDocumentScrutinizedRowDataObj","renderColumnHeader","column","Text","infoIcon","SimpleToolTip","renderDateOfDocument","SystemDatePicker","renderNameOfDocument","InputBox","renderDocumentCopyType","SimpleDropDown","renderPreDisbursementCollection","CheckBox","CHECKBOX_STYLE_TYPE","renderPostDisbursementCollection","renderActions","IconButton","BUTTON_TYPES","renderSaveComponentHeader","ButtonBox","BUTTON_TYPE","EditableTableV2","StageService","Column","i18n","LEGAL_DOCUMENT_SCRUTINIZED_MESSAGE","DocumentScrutinizedPostAndPre","section","service","initialLegalInitiationInfoPageOj","InitiationInfo","dropdownOptions","showMediaGallery","setShowMediaGallery","currentItemToViewInGallery","setCurrentItemToViewInGallery","initialMediaGallerySectionInfo","chipRef","addressRef","selectedDocsTableRef","textConverter","useTextConverter","onViewFile","preparedInfoInList","_e","_g","_f","_j","_i","_h","_k","_l","_o","_n","_m","_p","_q","_t","_s","_r","_u","_v","addressData","useMemo","address","pincode","city","state","propertyType","latitude","longitude","renderDocCategory","renderDocType","renderDocSection","renderAction","renderSelectedExistingDocs","ReadOnlyTable","dateOfInitiation","vendorType","stage","externalVendor","internalAssignee","CCEmails","description","Section","INITIATE_STAGE_OPTIONS","AutoComplete","ChipsBox","Address","VARIANTS","MediaGallery","initialLegalSummaryPageOj","LoanSummary","handleDateOfReportingChange","loanNo","branchNo","agency","dateOfReport","IS_TRUE","INPUT","initialLegalOtherProvisionPageObj","OtherProvisions","useTranslation","otherProvisionOptions","updatePageObj","tableData","option","input","questionIndex","question","prevPageObj","updatedPageObj","renderQuestion","renderYesOrNo","RadioButton","InputError","renderComment","initialLegalPropertyAddressPageOj","PropertyAddressAsDocument","Fragment","initialLegalPropertyDetailsPageOj","PropertyDetails","gridDivRef","typeOfLoan","natureOfTransactions","subRegistrarOffice","nameOfPresentOwner","areaOfProperty","units","typeOfMortgage","natureOfLand","initialTextEditorPageOj","SaveContentTextEditor","title","editorRef","handleEditorValidation","validateEditor","prevState","updateService","LEGAL_TEXT_EDITOR_SECTIONS","richText","RichTextEditor","initialLegalUploadReportPageOj","UploadReport","params","useParams","documentUploaderRef","unSavedDocuments","unSavedDocument","prepareAttributes","prepareDocSections","DocumentUploader","DOC_UPLOADER_MODE","DOCUMENT_CATEGORY","allInOneApiLoading","initialPageOj","initialLegalFinalOpinionPageOj","PageReport","isReadMode","setIsReadMode","documentScrutinizedRef","documentScrutinizedPreDisbursementRef","documentScrutinizedPostDisbursementRef","userProfile","useSelector","isPartnerUser","SAHAYYA_USER_TYPE","init","getStageDetails","getOtherProvisionDetails","getUploadReport","LOAN_STAGE_STATUS","getVendorTypeOptions","getLoanTypeOptions","getNatureOfLandOptions","getAddressTypeOptions","getDocumentCopyTypeOptions","getUnitsOptions","getTypeOfMortgageOptions","getNatureOfTransactionOptions","getOtherProvisionOptions","ignoreAdditionAddress","stagePropertyAddress","validateGetAPIResponse","updateLegalInitiationInfoObj","updateLegalLoanSummaryObj","updateLegalPropertyDetailsObj","updateLegalPropertyAddressObj","updateLegalBoundaryDetailsObj","updateLegalFinalOpinionsObj","updateLegalTitleObservationsObj","updateLegalTitleSearchObj","updateLegalDocumentScrutinizedObj","ignoreLoader","updateLegalOtherProvisionObj","updateUploadReportPageObj","StaticMasterDataService","updateDropdownOptions","err","onCloseInfo","onRefreshDocumentScrutinized","onRefreshDocumentScrutinizedPreDisbursement","onRefreshDocumentScrutinizedPostDisbursement","key","getInitiationInfoDropdownOptions","getPropertyDetailsDropdownOptions","Info","FinalOpinion"],"mappings":"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"}