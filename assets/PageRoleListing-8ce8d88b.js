import{w as at,r as a,aG as p,j as e,T as Y,J as A,aH as z,ao as G,aI as de,aJ as me,aK as F,cS as pe,aF as ue,o as P,az as rt,aM as ot,av as it,p as xe,z as ct,aN as K}from"./index-e8217573.js";import{s as L,a as w,b as $}from"./sortIcon-54357a29.js";import{e as nt}from"./eye_icon-081bddb3.js";import{A as ve}from"./AutoComplete-0bca608a.js";import{B as g}from"./ButtonBox-9e46519a.js";import{D as X}from"./DatePicker-b1c13861.js";import{D as lt}from"./Dialog-adadaf64.js";import{I as dt}from"./InputBox-b9e88f52.js";import{M as mt}from"./MenuBox-defc36b0.js";import{R as pt}from"./ReadOnlyTable-86accb69.js";import{S as ut}from"./SectionTitle-9f9277ec.js";import{S as xt}from"./SimpleDropDown-061a3470.js";import{T as vt}from"./Toast-ae99ea5b.js";import{C as D}from"./column.esm-938bad7d.js";import{R as se}from"./RolesService-6aea899d.js";import{S as he}from"./StaticMasterTypeService-480bff1a.js";import"./search_icon-459d6871.js";import"./withAuth-6de36ebf.js";import"./virtualscroller.esm-9939945c.js";import"./kebab-menu-8835ad2e.js";import"./No_data-1720c54e.js";import"./datatable.esm-f474a654.js";import"./paginator.esm-11c2c115.js";import"./TransitionGroup-c8afe0ce.js";const ht=ae=>{const[re,fe]=a.useState(!1),[Ae,j]=a.useState(!1),[ge,y]=a.useState(!1),[n,oe]=a.useState({}),[_,N]=a.useState(void 0),[ft,I]=a.useState(void 0),[At,B]=a.useState(void 0),[M,u]=a.useState(void 0),[J,O]=a.useState(void 0),[U,T]=a.useState(void 0),[k,C]=a.useState(void 0),[H,S]=a.useState(void 0),E=a.useRef(null),[Z,x]=a.useState(""),[ie,v]=a.useState(p.PRIMARY),[m,h]=a.useState(!1),[b,ce]=a.useState(!1),[je,gt]=a.useState(""),[ye,jt]=a.useState(""),[r,Q]=a.useState({name:"",code:"",roles:"",description:"",createdFrom:"",createdTo:"",updatedFrom:"",updatedTo:"",isActive:"",createdBy:{name:"",id:""},updatedBy:{name:"",id:""}}),[l,f]=a.useState({limit:10,loading:!1,totalRecords:0,start:0,search:"",runCustomQuery:!1,records:[]}),q=a.useRef(null),[Ne,Te]=a.useState([{items:[{label:"Activate",className:""},{label:"Deactivate",className:""}]}]),Ce=(t,s)=>{var W;console.log("rowData=",t);const o={label:"label.common.deactivate",command:()=>{Re(t)}},c={label:"label.common.active",command:()=>{be(t)}},R=[{items:[t.isActive?o:c]}];Te(R),(W=q==null?void 0:q.current)==null||W.toggle(s)},i=a.useRef(null),[ee,Se]=a.useState([]);a.useEffect(()=>{var t;(t=i==null?void 0:i.current)==null||t.search()},[l==null?void 0:l.search]),a.useEffect(()=>{var t;E!=null&&E.current&&Z!==""&&((t=E==null?void 0:E.current)==null||t.showFunction())},[Z,ie,m]);const te=t=>{const{name:s,value:o}=t.target;console.log(s,o),Q(typeof o=="object"?c=>({...c,[s]:{name:o==null?void 0:o.name,id:o.userId}}):c=>({...c,[s]:o}))},V=t=>{const{name:s,value:o}=t.target;Q({...r,[s]:o})},Ee=t=>{let s="";_||_==null?(s='sort={"name":"DESC"}&',N(!1)):(s='sort={"name":"ASC"}&',N(!_)),I(void 0),u(void 0),O(void 0),S(void 0),T(void 0),C(void 0),B(void 0),f({...l,search:s})},be=t=>{oe({...t}),y(!0),ce(!0)},Re=t=>{oe({...t}),j(!0),ce(!1)},De=t=>{let s="";M||M==null?(s='sort={"createdAt":"DESC"}&',u(!1)):(s='sort={"createdAt":"ASC"}&',u(!M)),N(void 0),I(void 0),B(void 0),O(void 0),S(void 0),T(void 0),C(void 0),f({...l,search:s})},Ie=t=>{let s="";J||J==null?(s='sort={"createdBy":"DESC"}&',O(!1)):(s='sort={"createdBy":"ASC"}&',u(!M)),N(void 0),I(void 0),B(void 0),u(void 0),S(void 0),T(void 0),C(void 0),f({...l,search:s})},Be=t=>{let s="";U||U==null?(s='sort={"updatedAt":"DESC"}&',T(!1)):(s='sort={"updatedAt":"ASC"}&',T(!U)),N(void 0),I(void 0),B(void 0),u(void 0),S(void 0),O(void 0),C(void 0),f({...l,search:s})},Me=t=>{let s="";H||H==null?(s='sort={"isActive":"DESC"}&',S(!1)):(s='sort={"isActive":"ASC"}&',S(!0)),N(void 0),I(void 0),B(void 0),u(void 0),T(void 0),O(void 0),C(void 0),f({...l,search:s})},Oe=t=>{let s="";k||k==null?(s='sort={"updatedBy":"DESC"}&',C(!1)):(s='sort={"updatedBy":"ASC"}&',C(!k)),N(void 0),I(void 0),B(void 0),u(void 0),T(void 0),O(void 0),S(void 0),f({...l,search:s})},Ye=async()=>(console.log(n.uid),se.Inactivate(n==null?void 0:n.uid).then(t=>{var s;v(p.PRIMARY),x(z.DEACTIVATED),h(!m),j(!1),y(!1),(s=i==null?void 0:i.current)==null||s.search()}).catch(t=>{v(p.QUATERNARY),x(G(t)),h(!m)})),Fe=()=>({...n},se.activate(n==null?void 0:n.uid).then(t=>{var s;v(p.PRIMARY),x(z.ACTIVATED),h(!m),j(!1),y(!1),(s=i==null?void 0:i.current)==null||s.search()}).catch(t=>{v(p.QUATERNARY),x(G(t)),h(!m)})),Pe=()=>{const t={...n},s={...t,isActive:!0},o={name:n.name,operationType:de.ACTIVE,entity:me.ACL_ROLE,initialStateJson:F(t),finalStateJson:F(s),reasonForChange:"Activate",reqPayload:F(s)};return he.approve(o).then(c=>{var d;v(p.PRIMARY),x(z.SENT_FOR_APPROVAL),h(!m),j(!1),y(!1),(d=i==null?void 0:i.current)==null||d.search()}).catch(c=>{v(p.QUATERNARY),x(G(c)),h(!m)})},Le=()=>{const t={...n},s={...t,isActive:!1},o={name:n.name,operationType:de.INACTIVE,entity:me.ACL_ROLE,initialStateJson:F(t),finalStateJson:F(s),reasonForChange:"Deactivate",reqPayload:F(s)};return he.approve(o).then(c=>{var d;v(p.PRIMARY),x(z.SENT_FOR_APPROVAL),h(!m),j(!1),y(!1),(d=i==null?void 0:i.current)==null||d.search()}).catch(c=>{v(p.QUATERNARY),x(G(c)),h(!m)})},ne=async t=>{let s=[];t.query.trim().length?(await ct.getAll(0,10,`name=${t.query}&`).then(o=>{o.status===200&&(s=[...o.data])}),s.length===0&&s.push({name:void 0,designation:void 0,emailId:void 0})):s=ee,Se(s)},we=()=>{var s,o,c,d;if(ye!==""||je!=="")return;let t="";if(r.roles&&(t=`${t}name:lk=${r.roles}&`),r.code&&(t=`${t}code:lk=${r.code}&`),r.description&&(t=`${t}description:lk=${r.description}&`),r.createdFrom&&(console.log(r.createdFrom),t=`${t}createdAt:gt=${K(r.createdFrom)}&`),r.createdTo&&(t=`${t}createdAt:lt=${K(r.createdTo)}&`),r.updatedFrom&&(t=`${t}updatedAt:gt=${K(r.updatedFrom)}&`),r.updatedTo&&(t=`${t}updatedAt:lt=${K(r.updatedTo)}&`),r.isActive){let R=!0;r.isActive==="YES"?R=!0:r.isActive==="NO"&&(R=!1),t=`${t}isActive:lk=${R}&`}(s=r.createdBy)!=null&&s.id&&(t=`${t}&createdBy=${(o=r.createdBy)==null?void 0:o.id}&`),(c=r.updatedBy)!=null&&c.id&&(t=`${t}&updatedBy=${(d=r.updatedBy)==null?void 0:d.id}&`),f({...l,search:t})},$e=()=>{Q({name:"",code:"",description:"",createdFrom:"",roles:"",createdTo:"",updatedFrom:"",updatedTo:"",isActive:"",createdBy:{name:"",id:""},updatedBy:{name:"",id:""}}),f({...l,search:""})},_e=()=>{fe(!re)},Ue=()=>{ae.navigate(`${pe}?mode=${ue.CREATE}`)},ke=()=>{const{createdFrom:t,createdTo:s,roles:o,updatedFrom:c,updatedTo:d,isActive:R,createdBy:W,updatedBy:st}=r;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-3 flex flex-col gap-6 bg-primary-sapphireBlue-100 rounded-lg",children:[e.jsx("div",{className:"flex ",children:e.jsx(ut,{title:"text.masterData.types.search"})}),e.jsxs("div",{className:" grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsx(dt,{label:"label.accessControl.roles.roles",name:"roles",variant:P.SECONDARY,onChange:te,value:o}),e.jsx(xt,{label:"input.masterData.staticMaster.isActive",name:"isActive",variant:rt.SECONDARY,options:ot,onChange:V,value:R}),e.jsx(X,{label:"input.masterData.staticMaster.createdFrom",name:"createdFrom",showTime:!0,value:t,placeholder:"DD-MMM-YYYY",onChange:V}),e.jsx(X,{showTime:!0,label:"input.masterData.staticMaster.createdTo",name:"createdTo",variant:P.PRIMARY,value:s,placeholder:"DD-MMM-YYYY",onChange:V}),e.jsx(ve,{label:"input.masterData.staticMaster.createdBy",name:"createdBy",field:"name",value:W,variant:P.PRIMARY,suggestions:ee,completeMethod:ne,onChange:te,itemTemplate:le}),e.jsx(X,{showTime:!0,label:"input.masterData.staticMaster.updatedFrom",name:"updatedFrom",variant:P.PRIMARY,value:c,placeholder:"DD-MMM-YYYY",onChange:V}),e.jsx(X,{showTime:!0,label:"input.masterData.staticMaster.updatedTo",name:"updatedTo",variant:P.PRIMARY,value:d,placeholder:"DD-MMM-YYYY",onChange:V}),e.jsx(ve,{field:"name",label:"input.masterData.staticMaster.updatedBy",name:"updatedBy",variant:P.PRIMARY,value:st,suggestions:ee,completeMethod:ne,onChange:te,itemTemplate:le}),e.jsxs("div",{className:"flex gap-5",children:[e.jsx(g,{buttonType:A.RESET_OUTLINE,onClick:$e}),e.jsx(g,{buttonType:A.SEARCH_OUTLINE,onClick:we})]})]})]})})},le=t=>t.name===void 0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-39",children:[e.jsx("img",{src:it,alt:"search-icon",className:" h-7 w-7"}),e.jsx(Y,{className:"text-primary-labelColor mt-2",label:"Loading..."})]}):e.jsx("div",{className:"flex flex-col",children:e.jsx(Y,{className:"text-primary-labelColor",label:`${t.name}`})}),Ve=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left truncate",children:t.name})}),Je=()=>e.jsxs("div",{className:"flex gap-1",children:[e.jsx(Y,{label:"label.accessControl.roles.roles"}),e.jsx("img",{src:_==null?L:_==!0?w:$,alt:"Sort Icon",onClick:Ee,className:"cursor-pointer"})]}),He=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Created On"}),e.jsx("img",{src:M==null?L:M==!0?w:$,alt:"Sort Icon",onClick:De,className:"cursor-pointer"})]}),Qe=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Created By"}),e.jsx("img",{src:J==null?L:J==!0?w:$,alt:"Sort Icon",onClick:Ie,className:"cursor-pointer"})]}),qe=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Updated On"}),e.jsx("img",{src:U==null?L:U==!0?w:$,alt:"Sort Icon",onClick:Be,className:"cursor-pointer"})]}),We=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Updated By"}),e.jsx("img",{src:k==null?L:k==!0?w:$,alt:"Sort Icon",onClick:Oe,className:"cursor-pointer"})]}),ze=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Is Active"}),e.jsx("img",{src:H==null?L:H==!0?w:$,alt:"Sort Icon",onClick:Me,className:"cursor-pointer"})]}),Ge=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left truncate",children:`${xe(t.createdAt)}`})}),Ke=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left truncate",children:t.createdByUserName})}),Xe=t=>e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left truncate",children:`${xe(t.updatedAt)}`}),Ze=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left truncate",children:t.updatedByUserName})}),et=t=>e.jsx(e.Fragment,{children:t.isActive?e.jsxs("div",{className:"flex items-center ",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-primaryBlue border-none"}),e.jsx("div",{className:"ml-2 ",children:"YES"})]}):e.jsxs("div",{className:"flex items-center ",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-secondary-gray-300 border-none"}),e.jsx("div",{className:"ml-2 ",children:"NO"})]})}),tt=t=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center ",children:[e.jsx("div",{className:"w-4 h-4 flex items-center",children:e.jsx("img",{src:nt,alt:"Sahayya Logo",className:"cursor-pointer",onClick:s=>{ae.navigate(`${pe}?mode=${ue.VIEW}&uid=${t.uid}`)}})}),e.jsx("div",{className:"ml ",children:e.jsx(g,{buttonType:A.MENU,onClick:s=>{Ce(t,s)},className:"!rounded-none bg-transparent !hover:bg-primary-gray-300"})})]})});return e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex w-full justify-between items-center",children:[e.jsx(Y,{label:"Roles",className:"text-primary-ptext-1000 text-h2 font-bold flex"}),e.jsxs("div",{className:"flex gap-10",children:[e.jsx(g,{buttonType:A.FILTER_OUTLINE,onClick:_e}),e.jsx(g,{buttonType:A.CREATE,className:"create-button",onClick:Ue})]})]}),re&&ke(),e.jsxs(pt,{standardDataFormatPromise:se.getAll,dataKey:"id",search:l.search,ref:i,children:[e.jsx(D,{className:"text-primary-ptext-1000 text-left text-xs max-w-35  p-1 h-12 pl-6",header:Je,body:Ve}),e.jsx(D,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:He,body:Ge}),e.jsx(D,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:Qe,body:Ke}),e.jsx(D,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:qe,body:Xe}),e.jsx(D,{className:"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6",header:We,body:Ze}),e.jsx(D,{className:"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6",header:ze,body:et}),e.jsx(D,{className:"text-primary-ptext-1000  text-left text-xs p-1 h-12 pl-6",header:"Actions",body:tt})]}),e.jsxs(lt,{onHide:b?()=>y(!1):()=>j(!1),visible:b?ge:Ae,modal:!0,closable:!1,dismissableMask:!0,children:[e.jsx(Y,{label:b?"dialog.staticMaster.activate":"dialog.staticMaster.deactivate",className:"text-primary-ptext-1000 text-base font-Roboto font-bold flex items-center justify-center"}),e.jsx(Y,{label:b?"dialog.staticMaster.message.activate":"dialog.staticMaster.message",className:"text-primary-ptext-1000 text-xs font-Roboto flex mt text-center justify-center mx-2 mt-4"}),e.jsxs("div",{className:"flex justify-center mt-4",children:[e.jsx("div",{className:"mr-3",children:e.jsx(g,{buttonType:A.CANCEL_OUTLINE,onClick:b?()=>y(!1):()=>j(!1)})}),e.jsx("div",{className:"mr-3",children:e.jsx(g,{buttonType:A.SAVE_OUTLINE,onClickWithLoader:b?()=>Fe():()=>Ye()})}),e.jsx("div",{className:"",children:e.jsx(g,{buttonType:A.SEND_FOR_APPROVAL,className:"approve-primary",onClickWithLoader:b?()=>Pe():()=>Le()})})]})]}),e.jsx(mt,{className:"w-20 bg-white font-Roboto text-xs text-primary-pText-1300 pt-2 rounded-lg mt-0.5 flex justify-center align-center shadow-autoCompletePanel",model:Ne,ref:q}),e.jsx("div",{className:"",children:e.jsx(vt,{position:"bottom-right",ref:E,toastText:Z,variant:ie})})]})},Ht=at(ht);export{Ht as default};
//# sourceMappingURL=PageRoleListing-8ce8d88b.js.map
