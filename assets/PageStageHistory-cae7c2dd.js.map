{"version":3,"file":"PageStageHistory-cae7c2dd.js","sources":["../../src/views/transaction/PageDDE/StageAndStatus/PageStageHistory/PageStageHistory.tsx"],"sourcesContent":["import { useTextConverter } from \"hook/CustomHooks\";\nimport { useEffect, useRef } from \"react\";\nimport { useParams } from \"react-router-dom\";\n\n// --------- ---------- //\nimport ReadOnlyTable from \"components/ReadOnlyTable\";\nimport Text from \"components/Text\";\nimport { Column } from \"primereact/column\";\n\n// --------- ---------- //\nimport StageService from \"services/transaction/DDE/StageService\";\nimport { formattedDateLong } from \"utils/CommonUtil\";\nimport { STAGE_MAPPING, STAGE_OPTIONS } from \"utils/Constant\";\n\n// --------------------------------- page interface ---------------------------------------------- //\n\n// ----------------------------------------- Functional component ------------------------------------- //\nconst PageStageHistory = () => {\n  const params = useParams();\n  const loanId = params.loanUid ?? \"\";\n\n  // ----------------- states ---------------------- //\n  // main page functionality states\n\n  // error handling states\n\n  // --------------------- ref ---------------------------- //\n  const dataTableRef = useRef(null);\n\n  // --------------------- custom hooks ---------------------------- //\n  const textConverter = useTextConverter();\n\n  // --------------------------- global variables ---------------------- //\n\n  /*\n    --------------------------------------------------------------------------------------------------\n    LifeCycle Methods: \n    --------------------------------------------------------------------------------------------------\n  */\n\n  useEffect(() => {\n    // @ts-ignore: will fix later\n    dataTableRef?.current?.search();\n  }, []);\n\n  /*\n    -------------------------------------------------------------------------------------------------------\n    Service Calls: For Getting Data from service/API\n    -------------------------------------------------------------------------------------------------------\n  */\n\n  /*\n    -----------------------------------------------------------------------------------------------\n    on-Handlers: Event handler for onClick, onToggle etc\n    -----------------------------------------------------------------------------------------------\n  */\n\n  /* \n    ------------------------------------------------------------------------------------------------\n    Sectional Render Functions: For Sub components / section wise renders\n    ------------------------------------------------------------------------------------------------\n  */\n\n  const renderStage = (rowData: any) => {\n    return <div className=\"flex items-center\">{STAGE_OPTIONS?.[rowData?.stage?.stageName as keyof typeof STAGE_OPTIONS]?.label ?? \"-\"}</div>;\n  };\n\n  const renderStatus = (rowData: any) => {\n    return <div className=\"flex items-center\">{rowData?.stageStatus ?? \"-\"}</div>;\n  };\n\n  const renderInitiatedBy = (rowData: any) => {\n    return (\n      <div className=\"flex items-center justify-start\">\n        {rowData?.stage?.createdByUserName ?? \"-\"}\n      </div>\n    );\n  };\n\n  const renderAssignedTo = (rowData: any) => {\n    return <div className=\"flex items-center\">{rowData?.assignedTo?.name ?? \"-\"}</div>;\n  };\n\n  const renderDelegatedTo = (rowData: any) => {\n    return <div className=\"flex items-center\">{rowData?.delegatedTo?.name ?? \"-\"}</div>;\n  };\n\n  const renderExternalVendor = (rowData: any) => {\n    return <div className=\"flex items-center\">{rowData?.partner?.name ?? \"-\"}</div>;\n  };\n\n  const renderActionDate = (rowData: any) => {\n    return <div className=\"flex items-center\">{formattedDateLong(rowData.createdAt)}</div>;\n  };\n\n  const renderDescription = (rowData: any) => {\n    return <div className=\"flex items-center\">{rowData?.description ?? \"-\"}</div>;\n  };\n\n  const renderTable = () => {\n    return (\n      <ReadOnlyTable\n        standardDataFormatPromise={StageService.getStageHistory}\n        dataKey=\"id\"\n        search={`&loan.uid=${loanId}&isActive=true`}\n        ref={dataTableRef}\n      >\n        <Column\n          className=\"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6\"\n          header={textConverter(\"label.stages.history.stage\")}\n          body={renderStage}\n        />\n        <Column\n          className=\"text-primary-ptext-1000 text-left text-xs w-1/12  p-1 h-12 pl-6\"\n          header={textConverter(\"label.stages.history.status\")}\n          body={renderStatus}\n        />\n        <Column\n          className=\"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6\"\n          header={textConverter(\"label.stages.history.initiated.by\")}\n          body={renderInitiatedBy}\n        />\n        <Column\n          className=\"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6\"\n          header={textConverter(\"label.stages.history.assigned.to\")}\n          body={renderAssignedTo}\n        />\n        <Column\n          className=\"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6\"\n          header={textConverter(\"label.stages.history.delegated.to\")}\n          body={renderDelegatedTo}\n        />\n        <Column\n          className=\"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6\"\n          header={textConverter(\"label.stages.history.external.vendor\")}\n          body={renderExternalVendor}\n        />\n        <Column\n          className=\"text-primary-ptext-1000 text-left text-xs  pr-4 h-12 pl-6\"\n          header={textConverter(\"label.stages.history.action.date\")}\n          body={renderActionDate}\n        />\n\n        <Column\n          className=\"text-primary-ptext-1000 text-left text-xs  pr-4 h-12 pl-6\"\n          header={textConverter(\"label.stages.history.description\")}\n          body={renderDescription}\n        />\n      </ReadOnlyTable>\n    );\n  };\n\n  /* \n    -----------------------------------------------------------------------------------------\n    render: The Main return()\n    -----------------------------------------------------------------------------------------\n  */\n  return (\n    <div className=\"p-3 rounded-masterDataPageRadius bg-white flex flex-col gap-3 overflow-auto\">\n      <div className=\"flex w-full justify-between items-center py-0.5\">\n        <Text\n          label={\"heading.transaction.stage.history\"}\n          className=\"text-xl font-bold text-primary-ptext-1000\"\n        />\n      </div>\n\n      {renderTable()}\n    </div>\n  );\n};\n\nexport default PageStageHistory;\n"],"names":["PageStageHistory","loanId","useParams","dataTableRef","useRef","textConverter","useTextConverter","useEffect","_a","renderStage","rowData","jsx","_c","_b","STAGE_OPTIONS","renderStatus","renderInitiatedBy","renderAssignedTo","renderDelegatedTo","renderExternalVendor","renderActionDate","formattedDateLong","renderDescription","renderTable","jsxs","ReadOnlyTable","StageService","Column","Text"],"mappings":"0dAiBA,MAAMA,EAAmB,IAAM,CAEvB,MAAAC,EADSC,IACO,SAAW,GAQ3BC,EAAeC,SAAO,IAAI,EAG1BC,EAAgBC,IAUtBC,EAAAA,UAAU,IAAM,QAEdC,EAAAL,GAAA,YAAAA,EAAc,UAAd,MAAAK,EAAuB,QACzB,EAAG,CAAE,CAAA,EAoBC,MAAAC,EAAeC,GAAiB,WAC7B,OAAAC,EAAA,IAAC,MAAI,CAAA,UAAU,oBAAqB,WAAAC,GAAAC,EAAAC,IAAA,YAAAD,GAAgBL,EAAAE,GAAA,YAAAA,EAAS,QAAT,YAAAF,EAAgB,aAAhC,YAAAI,EAA0E,QAAS,GAAI,CAAA,CAAA,EAG9HG,EAAgBL,SACZ,MAAI,CAAA,UAAU,oBAAqB,UAAAA,GAAA,YAAAA,EAAS,cAAe,GAAI,CAAA,EAGnEM,EAAqBN,GAAiB,OAC1C,aACG,MAAI,CAAA,UAAU,kCACZ,WAASF,EAAAE,GAAA,YAAAA,EAAA,QAAA,YAAAF,EAAO,oBAAqB,GACxC,CAAA,CAAA,EAIES,EAAoBP,GAAiB,OACzC,aAAQ,MAAI,CAAA,UAAU,oBAAqB,WAASF,EAAAE,GAAA,YAAAA,EAAA,aAAA,YAAAF,EAAY,OAAQ,GAAI,CAAA,CAAA,EAGxEU,EAAqBR,GAAiB,OAC1C,aAAQ,MAAI,CAAA,UAAU,oBAAqB,WAASF,EAAAE,GAAA,YAAAA,EAAA,cAAA,YAAAF,EAAa,OAAQ,GAAI,CAAA,CAAA,EAGzEW,EAAwBT,GAAiB,OAC7C,aAAQ,MAAI,CAAA,UAAU,oBAAqB,WAASF,EAAAE,GAAA,YAAAA,EAAA,UAAA,YAAAF,EAAS,OAAQ,GAAI,CAAA,CAAA,EAGrEY,EAAoBV,SAChB,MAAI,CAAA,UAAU,oBAAqB,SAAkBW,EAAAX,EAAQ,SAAS,CAAE,CAAA,EAG5EY,EAAqBZ,SACjB,MAAI,CAAA,UAAU,oBAAqB,UAAAA,GAAA,YAAAA,EAAS,cAAe,GAAI,CAAA,EAGnEa,EAAc,IAEhBC,EAAA,KAACC,EAAA,CACC,0BAA2BC,EAAa,gBACxC,QAAQ,KACR,OAAQ,aAAazB,kBACrB,IAAKE,EAEL,SAAA,CAAAQ,EAAA,IAACgB,EAAA,CACC,UAAU,2DACV,OAAQtB,EAAc,4BAA4B,EAClD,KAAMI,CAAA,CACR,EACAE,EAAA,IAACgB,EAAA,CACC,UAAU,kEACV,OAAQtB,EAAc,6BAA6B,EACnD,KAAMU,CAAA,CACR,EACAJ,EAAA,IAACgB,EAAA,CACC,UAAU,0DACV,OAAQtB,EAAc,mCAAmC,EACzD,KAAMW,CAAA,CACR,EACAL,EAAA,IAACgB,EAAA,CACC,UAAU,2DACV,OAAQtB,EAAc,kCAAkC,EACxD,KAAMY,CAAA,CACR,EACAN,EAAA,IAACgB,EAAA,CACC,UAAU,2DACV,OAAQtB,EAAc,mCAAmC,EACzD,KAAMa,CAAA,CACR,EACAP,EAAA,IAACgB,EAAA,CACC,UAAU,2DACV,OAAQtB,EAAc,sCAAsC,EAC5D,KAAMc,CAAA,CACR,EACAR,EAAA,IAACgB,EAAA,CACC,UAAU,4DACV,OAAQtB,EAAc,kCAAkC,EACxD,KAAMe,CAAA,CACR,EAEAT,EAAA,IAACgB,EAAA,CACC,UAAU,4DACV,OAAQtB,EAAc,kCAAkC,EACxD,KAAMiB,CAAA,CACR,CAAA,CAAA,CAAA,EAWJ,OAAAE,EAAA,KAAC,MAAI,CAAA,UAAU,8EACb,SAAA,CAACb,EAAAA,IAAA,MAAA,CAAI,UAAU,kDACb,SAAAA,EAAA,IAACiB,EAAA,CACC,MAAO,oCACP,UAAU,2CAAA,CAAA,EAEd,EAECL,EAAY,CACf,CAAA,CAAA,CAEJ"}