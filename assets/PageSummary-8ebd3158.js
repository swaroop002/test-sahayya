import{q as ne,r as x,aG as rs,R as Re,ad as Ee,ae as Pe,af as $e,j as e,d$ as g,aF as _e,o as S,T as c,f as Le,J as Je,d7 as ps,aH as fs,ao as G,a8 as Te,eq as Ye,v as ce,er as bs,es as Ns,aA as Ze,et as ms,eu as gs,ax as Ke,ev as vs,ew as Ve,ex as js,ey as De,ez as we,eA as Be,eB as ke,eC as es,w as Ss,dG as ss,d4 as xe}from"./index-e8217573.js";import{E as Ne}from"./ErrorDialog-d5eef4d7.js";import{i as os,M as xs}from"./MediaGallery-5884b284.js";import{R as He}from"./RichTextEditor-a03bd2fb.js";import{S as X}from"./Section-00ef9f2b.js";import{S as he}from"./Skeleton-7e12d019.js";import{C as se}from"./CamService-5ccef840.js";import{S as ts}from"./StageService-c1c03c89.js";import{s as ge,g as qe,u as As,a as Ts,b as Cs,c as Rs,d as Ls,e as Es,f as Ps,h as $s,i as Us,j as Ms}from"./Helper-54d1e873.js";import{D as us,B as Is,i as Os}from"./DynamicColumnTable-7d520ba8.js";import{S as Ys,i as Hs,a as ks,b as Fs,c as _s,d as Bs,e as Vs,f as qs}from"./Summary-8a53bc7e.js";import{i as Gs,a as Ws}from"./PurposeOfLoan-867db4ec.js";import Ks,{DOCUMENT_CHECK_MODULE as Qs}from"./PageAssetDocumentCheck-f0428b47.js";import{D as ls}from"./DatePicker-b1c13861.js";import{C as j}from"./EditableTableV2-6afcb42b.js";import{I as Ge,B as We}from"./IconButton-36693dd9.js";import{I as Y}from"./InputBox-b9e88f52.js";import{M as zs}from"./MenuBox-defc36b0.js";import{S as w}from"./SimpleDropDown-061a3470.js";import{R as ve}from"./ReadOnlyTable-86accb69.js";import{B as is}from"./ButtonBox-9e46519a.js";import{D as Xs}from"./Dialog-adadaf64.js";import{I as Ce}from"./InputTextArea-b90aad1d.js";import{S as Js}from"./SimpleOverlayPanel-f23b2f6a.js";import{T as Zs}from"./Toast-ae99ea5b.js";import{C as re}from"./column.esm-938bad7d.js";import{C as as}from"./CreditQueryService-75543be7.js";import{A as ns}from"./AutoComplete-0bca608a.js";import{D as Ds}from"./DeviationTable-bfb232d0.js";import{S as be}from"./StaticMasterDataService-689a6eca.js";import{P as ws}from"./PointOfInterestService-2753b8c5.js";import{R as ds}from"./RadioButton-86c37166.js";import{P as et}from"./PDService-c0e55969.js";import{A as st}from"./ApplicantService-924aa5cb.js";import{E as tt}from"./EmploymentDetailsService-b3cd805d.js";import"./Download_Icon-51fc7f46.js";import"./index-8739acfd.js";import"./FileUploadService-1aaf11f7.js";import"./Helper-03e9d878.js";import"./DocumentUploader-e2ec1a13.js";import"./loader-5f2cfb31.js";import"./FileUploadCustom-5ab7fd25.js";import"./Loading-783a01c7.js";import"./FileUploadMenuBox-f47dc693.js";import"./kebab-menu-8835ad2e.js";import"./DocumentService-a293b5f4.js";import"./SaveComponent-160c5b32.js";import"./link-0172a3d4.js";import"./InputAddon-04f948e7.js";import"./TextButton-41b4a67e.js";import"./WarningDialog-77a1cb18.js";import"./SimpleTab-27fa8860.js";import"./QcService-39051cda.js";import"./ImagePreview-952ca75e.js";import"./useSelector-dc41929a.js";import"./AddressService-27926b64.js";import"./FinalOpinion-c6d0ce35.js";import"./LegalService-c6087928.js";import"./withAuth-6de36ebf.js";import"./datatable.esm-f474a654.js";import"./paginator.esm-11c2c115.js";import"./virtualscroller.esm-9939945c.js";import"./sortIcon-54357a29.js";import"./eye_icon-081bddb3.js";import"./No_data-1720c54e.js";import"./TransitionGroup-c8afe0ce.js";import"./search_icon-459d6871.js";const lt={businessProof:[],pageMode:{businessProof:_e.VIEW},isLoading:{businessProof:!1}},it=L=>{const{data:r}=L,m=ne(),[b,d]=x.useState(!1),[s,f]=x.useState("");x.useState({...lt}),x.useState(""),x.useState(rs.PRIMARY),x.useState(!1);const[R,T]=x.useState(!1),[A,M]=x.useState({...os});x.useRef(null);const E=Re.useRef(null),U=x.useRef(null),[,O]=x.useState(!1);x.useRef(new Ee({validators:{...Pe()},...$e(),autoForceUpdate:{forceUpdate:()=>O(a=>!a)}}));const h=[{items:[]}];x.useEffect(()=>{s&&d(!0)},[s]),x.useEffect(()=>{var a;(a=E.current)==null||a.search()},[r]);const v=(a,u)=>{var _,W,J,n,K,Z,ie,z,ye,pe,de,fe,me,ae,l,I,k,te,le,ee,o;let $={uid:"",placeOfUpload:"",name:"",fileName:"",fileType:"",download:"",category:"",type:"",sectionName:"",url:""};u!=null&&u.loanDocument&&($={uid:((_=u==null?void 0:u.loanDocument)==null?void 0:_.uid)??"",placeOfUpload:"",name:((J=(W=u==null?void 0:u.loanDocument)==null?void 0:W.applicant)==null?void 0:J.firstName)??"-",fileName:((Z=(K=(n=u==null?void 0:u.loanDocument)==null?void 0:n.documentSections)==null?void 0:K[0])==null?void 0:Z.fileName)??"-",fileType:((ye=(z=(ie=u==null?void 0:u.loanDocument)==null?void 0:ie.documentSections)==null?void 0:z[0])==null?void 0:ye.fileType)??"-",download:"",category:((me=(fe=(de=(pe=u==null?void 0:u.loanDocument)==null?void 0:pe.documentSections)==null?void 0:de[0])==null?void 0:fe.loanDocument)==null?void 0:me.docCategory)??"-",type:((l=(ae=u==null?void 0:u.loanDocument)==null?void 0:ae.docType)==null?void 0:l.name)??"-",sectionName:((te=(k=(I=u==null?void 0:u.loanDocument)==null?void 0:I.documentSections)==null?void 0:k[0])==null?void 0:te.sectionName)??"-",url:((o=(ee=(le=u==null?void 0:u.loanDocument)==null?void 0:le.documentSections)==null?void 0:ee[0])==null?void 0:o.url)??""}),M($),T(!0)},P=a=>{var u,$,_,W;return e.jsx("div",{className:"pt-4",children:e.jsx(w,{hideLabel:!0,placeholder:"placeholder.legal.documentCopyType",name:`documentProof${a==null?void 0:a.uid}`,value:($=(u=a==null?void 0:a.loanDocument)==null?void 0:u.docType)==null?void 0:$.name,variant:S.PRIMARY,options:[`${(W=(_=a==null?void 0:a.loanDocument)==null?void 0:_.docType)==null?void 0:W.name}`],disabled:!0})})},B=a=>e.jsx("div",{className:"pt-4",children:e.jsx(ls,{hideLabel:!0,name:`docYearFrom${a.uid}`,maxDate:new Date,showMinMaxRange:!0,value:a!=null&&a.docYearFrom?new Date(a==null?void 0:a.docYearFrom):"",variant:S.SECONDARY,disabled:!0})}),V=a=>e.jsx("div",{className:"pt-4",children:e.jsx(ls,{hideLabel:!0,name:`docYearTo${a.uid}`,maxDate:new Date,showMinMaxRange:!0,value:a!=null&&a.docYearTo?new Date(a==null?void 0:a.docYearTo):"",variant:S.SECONDARY,disabled:!0})}),q=a=>{var u,$,_,W;return e.jsx("div",{className:"pt-4",children:e.jsx(Y,{name:`remarks${a==null?void 0:a.uid}`,hideLabel:!0,variant:S.SECONDARY,value:((W=(_=($=(u=a==null?void 0:a.loanDocument)==null?void 0:u.documentSections)==null?void 0:$[0])==null?void 0:_.loanDocument)==null?void 0:W.docNo)??"",disabled:!0})})},H=a=>e.jsx("div",{className:"pt-4",children:e.jsx(Y,{name:`remarks${a==null?void 0:a.uid}`,hideLabel:!0,variant:S.SECONDARY,value:a==null?void 0:a.remarks,disabled:!0})}),N=a=>e.jsx("div",{className:"flex gap-2 justify-center items-center",children:e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Ge,{buttonType:We.VIEW,onClick:u=>v(u,a)})})});return e.jsxs("div",{className:"grid gap-5",children:[m!=null&&m.loanUid&&(r!=null&&r.stageUid)?e.jsxs(ve,{ref:E,uniqueKey:"uid",standardDataFormatPromise:se.getIncomeDocumentList,search:`&isActive=${!0}&loanUid=${(m==null?void 0:m.loanUid)??""}&stageUid=${(r==null?void 0:r.stageUid)??""}`,mode:"UPDATE",variant:"secondary",children:[e.jsx(j,{header:g.t("label.cam.documentProof"),className:"text-primary-ptext-1000 text-left text-xs h-12 pl-6",body:P}),e.jsx(j,{header:g.t("label.cam.documentYearFrom"),className:" text-primary-ptext-1000 text-xs h-12 pl-6",body:B}),e.jsx(j,{header:g.t("label.cam.documentYearTo"),className:" text-primary-ptext-1000 text-xs h-12 pl-6",body:V}),e.jsx(j,{header:g.t("label.summary.documentNo"),className:" text-primary-ptext-1000 text-xs h-12 pl-6",body:q}),e.jsx(j,{header:g.t("label.cam.Remark"),className:" text-primary-ptext-1000 text-xs h-12 pl-6",body:H}),e.jsx(j,{header:g.t("label.investmentInfo.table.colTitle.action"),className:"text-primary-ptext-1000 text-right text-xs h-12 px-6",style:{minWidth:"50px",width:"50px"},body:N})]}):null,e.jsx(xs,{visible:R,onToggleVisibility:()=>T(a=>!a),list:[],currentSection:A}),e.jsx(zs,{ref:U,model:h,variant:"SECONDARY",buttonClassName:"!bg-transparent",className:"width-full-menubox bg-white  w-max p-1.5 rounded-md mt-0.5 border shadow-autoCompletePanel"}),e.jsx(Ne,{onHide:()=>{d(!1),f("")},visible:b,errorMessage:s})]})},at={uid:"",stage:"",query:"",raisedOn:"",raisedBy:"",updatedOn:"",updatedBy:"",status:"",reply:"",action:""},nt={IN_PRINCIPAL_APPROVAL:"In Principal Approval",FINANCIAL_APPROVAL:"Financial Approval",FINAL_APPROVAL:"Final Approval",CAM_AND_RECOMMENDATION:"CAM and Recommendation"},Fe={IN_PROGRESS:"In Progress",CLOSED:"Closed"},cs={IN_PROGRESS:"IN_PROGRESS",CLOSED:"CLOSED"},dt=()=>{var ee;const L=ne(),[r,m]=x.useState(at),[b,d]=x.useState(!1),[s,f]=x.useState(""),[R,T]=x.useState(!1),[A,M]=x.useState(""),[E,U]=x.useState(!1),[,O]=x.useState(!1),h=x.useRef(new Ee({validators:{...Pe()},...$e(),autoForceUpdate:{forceUpdate:()=>O(o=>!o)}})),v=x.useRef(null),P=x.useRef(null),B=x.useRef(null);x.useEffect(()=>{L.loanUid&&V()},[L.loanUid]),x.useEffect(()=>{r.uid&&d(!0)},[r]),x.useEffect(()=>{var o;P!=null&&P.current&&s!==""&&((o=P==null?void 0:P.current)==null||o.showFunction(),f(""))},[s,R]),x.useEffect(()=>{A&&U(!0)},[A]);const V=async()=>{var o;(o=v==null?void 0:v.current)==null||o.search()},q=o=>{var Q;const F={uid:(o==null?void 0:o.uid)??null,stage:((Q=o==null?void 0:o.stage)==null?void 0:Q.stageName)??"",query:(o==null?void 0:o.queryMessage)??"",raisedOn:(o==null?void 0:o.createdAt)??new Date().toISOString(),raisedBy:(o==null?void 0:o.createdByUserName)??"",updatedOn:(o==null?void 0:o.updatedAt)??new Date().toISOString(),updatedBy:(o==null?void 0:o.updatedByUserName)??"",status:Fe[`${o==null?void 0:o.status}`]??"",reply:(o==null?void 0:o.queryResponse)??"",action:""};m(F)},H=o=>{var Q;const F={uid:(o==null?void 0:o.uid)??null,stage:((Q=o==null?void 0:o.stage)==null?void 0:Q.stageName)??"",query:(o==null?void 0:o.queryMessage)??"",raisedOn:(o==null?void 0:o.createdAt)??new Date().toISOString(),raisedBy:(o==null?void 0:o.createdByUserName)??"",updatedOn:(o==null?void 0:o.updatedAt)??new Date().toISOString(),updatedBy:(o==null?void 0:o.updatedByUserName)??"",status:Fe[`${o==null?void 0:o.status}`]??"",reply:"",action:""};m(F)},N=()=>{d(!1),W()},a=async()=>{var F;if(!_())return;const o={uid:r.uid,status:cs.CLOSED,queryResponse:r.reply};try{const Q=await as.updateQueryResponse(o);ps(Q)&&((F=v==null?void 0:v.current)==null||F.search(),f(fs.SAVED),T(!R),d(!1))}catch(Q){console.log(Q),d(!1),W(),M(G(Q))}},u=o=>{m(F=>({...F,reply:o.target.value}))},$=o=>{var F,Q;(Q=h==null?void 0:h.current)==null||Q.showMessageFor((F=o==null?void 0:o.target)==null?void 0:F.name)},_=()=>{var F,Q;let o=!1;return o=(F=h==null?void 0:h.current)==null?void 0:F.allValid(),o||(O(oe=>!oe),(Q=h==null?void 0:h.current)==null||Q.showMessages(),O(oe=>!oe),!1)},W=()=>{var o;h.current=new Ee({validators:{...Pe()},...$e(),autoForceUpdate:{forceUpdate:()=>O(F=>!F)}}),(o=h==null?void 0:h.current)==null||o.hideMessages()},J=()=>e.jsx("div",{className:"flex",children:e.jsx(Te,{label:`${g.t("label.cq.stage")}`,className:"mr-1"})}),n=o=>{var F;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-1000 text-xs text-left w-30",children:nt[`${(F=o==null?void 0:o.stage)==null?void 0:F.stageName}`]??""})})},K=()=>e.jsx("div",{className:"flex",children:e.jsx(Te,{label:`${g.t("label.cq.query")}`,className:"mr-1"})}),Z=o=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-1000 text-xs text-left ",dangerouslySetInnerHTML:{__html:o.queryMessage}})}),ie=()=>e.jsx("div",{className:"flex",children:e.jsx(Te,{label:`${g.t("label.cq.raisedOn")}`,className:"mr-1"})}),z=o=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-1000 text-xs text-left w-30",children:Le(o==null?void 0:o.createdAt)??"-"})}),ye=()=>e.jsx("div",{className:"flex",children:e.jsx(Te,{label:`${g.t("label.cq.raisedBy")}`,className:"mr-1"})}),pe=o=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-1000 text-xs text-left w-30",children:(o==null?void 0:o.createdByUserName)??""})}),de=()=>e.jsx("div",{className:"flex",children:e.jsx(Te,{label:`${g.t("label.cq.respondedOn")}`,className:"mr-1"})}),fe=o=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-1000 text-xs text-left w-30",children:Le(o==null?void 0:o.updatedAt)??"-"})}),me=()=>e.jsx("div",{className:"flex",children:e.jsx(Te,{label:`${g.t("label.cq.respondedBy")}`,className:"mr-1"})}),ae=o=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-1000 text-xs text-left w-30",children:(o==null?void 0:o.updatedByUserName)??""})}),l=()=>e.jsx("div",{children:e.jsx(Te,{label:`${g.t("label.cq.status")}`,className:"mr-1"})}),I=o=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-1000 text-xs text-left",children:Fe[`${o==null?void 0:o.status}`]??""})}),k=()=>e.jsx("div",{children:e.jsx(Te,{label:`${g.t("label.cq.action")}`,className:"mr-1"})}),te=o=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center items-center text-primary-ptext-1000 text-xs cursor-pointer",children:o.status===cs.CLOSED?e.jsx(Ge,{className:"select-none",buttonType:We.VIEW,onClick:()=>{q(o)}}):e.jsx(Ge,{className:"select-none",buttonType:We.REPLY,onClick:()=>H(o)})})}),le=()=>e.jsxs("div",{className:"flex flex-col gap-4 p-5 ",children:[e.jsxs("div",{className:"flex flex-row justify-between items-center  ",children:[e.jsx("div",{className:"text-sm text-secondary-stext-900",children:"Assigned to :"}),e.jsx("div",{className:"text-sm text-secondary-stext-900 font-bold ml-2"})]}),e.jsxs("div",{className:"flex flex-row justify-between items-center  ",children:[e.jsx("div",{className:"text-sm text-secondary-stext-900",children:"Delegated to :"}),e.jsx("div",{className:"text-sm text-secondary-stext-900 font-bold ml-2"})]}),e.jsxs("div",{className:"flex flex-row justify-between items-center  ",children:[e.jsx("div",{className:"text-sm text-secondary-stext-900",children:"Date of Initiation :"}),e.jsx("div",{className:"text-sm text-secondary-stext-900 font-bold ml-2"})]})]});return e.jsxs("div",{className:" flex flex-col gap-8",children:[e.jsx("div",{className:" bg-white rounded-xl pt-6 px-7 pb-7",children:L.loanUid&&e.jsx("div",{children:e.jsxs(ve,{ref:v,standardDataFormatPromise:as.getAll,search:`&loan.uid=${L.loanUid}&isActive=${!0}`,dataKey:"uid",style:{width:"100%"},children:[e.jsx(re,{className:"text-primary-ptext-1000 text-left text-xs h-12 px-4",header:J,body:n}),e.jsx(re,{className:"text-primary-ptext-1000 text-left text-xs h-12 px-4",header:K,body:Z}),e.jsx(re,{className:"text-primary-ptext-1000 text-left text-xs h-12 px-4",header:ie,body:z}),e.jsx(re,{className:"text-primary-ptext-1000 text-left text-xs h-12 px-4",header:ye,body:pe}),e.jsx(re,{className:"text-primary-ptext-1000 text-left text-xs h-12 px-4",header:de,body:fe}),e.jsx(re,{className:"text-primary-ptext-1000 text-left text-xs h-12 px-4",header:me,body:ae}),e.jsx(re,{className:"text-primary-ptext-1000 text-left text-xs h-12 px-4",header:l,body:I}),e.jsx(re,{className:"text-primary-ptext-1000 text-xs h-12 pr-4",header:k,body:te})]})})}),e.jsx(Xs,{className:"min-w-[780px] !p-0",visible:b,closable:!1,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-2.5",children:[e.jsx("div",{className:"text-base font-bold text-primary-primaryTextColor",children:e.jsx(c,{label:"label.cq.responseToQuery"})}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:e.jsx(c,{label:"label.cq.raisedOn"})}),e.jsx("span",{className:"ml-2",children:Le(r.raisedOn)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:e.jsx(c,{label:"label.cq.raisedBy"})}),e.jsx("span",{className:"ml-2",children:r.raisedBy})]})]})]}),e.jsxs("div",{className:"self-start flex items-center gap-5 text-xs text-primary-ptext-1000",children:[e.jsx("div",{children:e.jsx(is,{className:"",buttonType:Je.CANCEL_OUTLINE,onClick:N})}),r.status===Fe.IN_PROGRESS&&e.jsx("div",{children:e.jsx(is,{className:"",buttonType:Je.SUBMIT_OUTLINE,onClickWithLoader:a,disabled:!0})})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"h-40",children:e.jsx(Ce,{name:"query",label:"label.cq.query",value:r.query,autoResize:!0,maxCount:200,disabled:!0})}),e.jsxs("div",{className:"mb-3 flex items-center gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:e.jsx(c,{label:"label.cq.updatedOn"})}),e.jsx("span",{className:"ml-2",children:Le(r.updatedOn)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:e.jsx(c,{label:"label.cq.updatedBy"})}),e.jsx("span",{className:"ml-2",children:r.updatedBy})]})]}),e.jsx("div",{className:"h-40",children:e.jsx(Ce,{name:"reply",label:"label.cq.reply",onBlur:$,validation:(ee=h==null?void 0:h.current)==null?void 0:ee.message("reply",r.reply,"mandatory"),value:r.reply,maxCount:200,onChange:u,autoResize:!0,disabled:!0})})]})]})}),e.jsx(Zs,{position:"bottom-right",ref:P,toastText:s,variant:rs.PRIMARY}),e.jsx(Js,{className:"rounded-lg shadow-lg !w-80 p-1.5 ",ref:B,content:le()}),e.jsx(Ne,{onHide:()=>{U(!1),M("")},visible:E,errorMessage:A})]})},ct={columns:[],rows:[],inputFields:[]},Oe="DATA_CAPTURE",rt=[Ye.PD.value,Ye.LEGAL_REPORT.value,Ye.RCU_REPORT.value,Ye.TECHNICAL_REPORT.value],mt=x.forwardRef((L,r)=>{const{data:m,isLoading:b}=L;ne();const[d,s]=x.useState({...ct}),[f,R]=x.useState(""),[T,A]=x.useState(!1);return x.useEffect(()=>{var U,O,h,v,P,B,V;console.log("call api");const M=[],E=[];if(console.log("Data Capture ",m),(m==null?void 0:m.length)>0){E.push({label:"Data Capture",key:Oe});let q={[Oe]:"Data Captured By"},H={[Oe]:"Designation"},N={[Oe]:"Manager"},a={[Oe]:"Date Of Entry"};for(const u of m){const $=`${u==null?void 0:u.stageName}`;let _="";rt.includes((u==null?void 0:u.stageName)??"")&&(_=((U=E.filter(J=>J.key===(u==null?void 0:u.stageName)))==null?void 0:U.length)+1);const W=`${(O=Ye[u==null?void 0:u.stageName])==null?void 0:O.label} ${_}`;E.push({label:W,key:$}),u!=null&&u.stageName&&(q={...q,[u.stageName]:(h=u==null?void 0:u.assignee)==null?void 0:h.name},H={...H,[u.stageName]:(P=(v=u==null?void 0:u.assignee)==null?void 0:v.designation)==null?void 0:P.name},N={...N,[u.stageName]:(V=(B=u==null?void 0:u.assignee)==null?void 0:B.parent)==null?void 0:V.name},a={...a,[u.stageName]:Le(u==null?void 0:u.stageCompletionDate)})}M.push(q),M.push(H),M.push(N),M.push(a),s(u=>({...u,columns:E,rows:M}))}},[m]),x.useEffect(()=>{f&&A(!0)},[f]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"",children:b?e.jsx(he,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"}):e.jsx(us,{rows:d==null?void 0:d.rows,columns:d==null?void 0:d.columns,inputFields:d==null?void 0:d.inputFields})}),e.jsx(Ne,{onHide:()=>{A(!1),R("")},visible:T,errorMessage:f})]})}),ot={dropdownOptions:{deviationType:[],deviationForAutomatic:[],deviationCategory:[],deviationLevel:[]}},xt=L=>{const{data:r}=L,m=ne(),[b,d]=x.useState({...ot});x.useState("bottom-right");const[s,f]=x.useState(!1),[R,T]=x.useState(""),[,A]=x.useState(!1),M=Re.useRef(null);x.useRef(null),x.useRef(new Ee({validators:{...Pe()},...$e(),autoForceUpdate:{forceUpdate:()=>A(n=>!n)}})),x.useEffect(()=>{E(),U(),O()},[]),x.useEffect(()=>{R&&f(!0)},[R]),x.useEffect(()=>{var n;r.camStageUid&&((n=M==null?void 0:M.current)==null||n.search())},[r.camStageUid]);const E=()=>{be.getAll(0,10,"staticMasterType.code=TYPE_OF_DEVIATION&").then(n=>{var K;ce(n)&&h("deviationType",(K=n==null?void 0:n.data)==null?void 0:K.results)}).catch(n=>{console.log(n),T(G(n))})},U=()=>{se.getDeviationCategories(0,30,"").then(n=>{var K;ce(n)&&h("deviationCategory",(K=n==null?void 0:n.data)==null?void 0:K.results)}).catch(n=>{console.log(n),T(G(n))})},O=()=>{se.getDeviationLevel(0,30,"").then(n=>{var K;ce(n)&&h("deviationLevel",(K=n==null?void 0:n.data)==null?void 0:K.results)}).catch(n=>{console.log(n),T(G(n))})},h=(n,K)=>{d(Z=>({...Z,dropdownOptions:{...Z==null?void 0:Z.dropdownOptions,[n]:K??[]}}))},v=n=>(n==null?void 0:n.name)===void 0?e.jsx("div",{className:"flex flex-col items-center justify-center h-39 pointer-events-none cursor-default",children:e.jsx(c,{className:"text-primary-labelColor mt-2",label:"label.noDataFound"})}):e.jsx("div",{className:"flex flex-col",children:e.jsx(c,{className:"text-primary-labelColor",label:n==null?void 0:n.name})}),P=()=>e.jsx("div",{className:"flex items-center",children:e.jsx(c,{label:g.t("label.cam.recommendation.table.typeofdeviation")})}),B=n=>e.jsx("div",{className:"h-24",children:e.jsx(w,{placeholder:"placeholder.legal.deviationType",name:`typeOfDeviation${n==null?void 0:n.uid}`,value:n==null?void 0:n.smDeviationType,variant:S.PRIMARY,options:b.dropdownOptions.deviationType,optionLabel:"name",optionValue:"code",hideLabel:!0,disabled:!0})}),V=()=>e.jsx("div",{className:"flex items-center",children:e.jsx(c,{label:g.t("label.cam.recommendation.table.deviationCategory")})}),q=n=>e.jsx("div",{className:"h-24",children:e.jsx(w,{name:`deviationCat${n.uid}`,options:b.dropdownOptions.deviationCategory,optionLabel:"name",optionValue:"name",value:n.smDeviationCategory??"",hideLabel:!0,disabled:!0})}),H=()=>e.jsx("div",{className:"flex items-center",children:e.jsx(c,{label:g.t("label.cam.recommendation.table.deviation")})}),N=n=>{var K,Z,ie;return e.jsx("div",{className:"h-24",children:(n==null?void 0:n.smDeviationType)===bs.TYPE_OF_DEVIATION_MANUAL?e.jsx(ns,{variant:S.PRIMARY,placeholder:"",name:`deviation${n==null?void 0:n.uid}`,value:(K=n==null?void 0:n.deviation)==null?void 0:K.name,suggestions:[`${(Z=n==null?void 0:n.deviation)==null?void 0:Z.name}`],itemTemplate:v,hideLabel:!0,disabled:!0}):e.jsx(ns,{variant:S.PRIMARY,placeholder:"",name:`deviation${n==null?void 0:n.uid}`,value:(ie=n==null?void 0:n.deviation)==null?void 0:ie.name,hideLabel:!0,disabled:!0})})},a=()=>e.jsx("div",{className:"flex items-center",children:e.jsx(c,{label:g.t("label.cam.recommendation.table.deviationlevel")})}),u=n=>e.jsx("div",{className:"h-24",children:e.jsx(w,{name:`deviationLevel${n.uid}`,options:b.dropdownOptions.deviationLevel,optionLabel:"name",optionValue:"name",value:n.maxApprovalLevel??"",hideLabel:!0,disabled:!0})}),$=()=>e.jsx("div",{className:"flex items-center",children:e.jsx(c,{label:g.t("label.cam.recommendation.table.actualDeviation")})}),_=n=>e.jsx("div",{className:"h-24",children:e.jsx(Ce,{name:`actualDeviation${n==null?void 0:n.uid}`,className:"!h-full",variant:S.SECONDARY,maxCount:1e3,autoResize:!0,value:n==null?void 0:n.actualDeviation,disabled:!0,hideLabel:!0})}),W=()=>e.jsx("div",{className:"flex items-center",children:e.jsx(c,{label:g.t("label.cam.recommendation.table.mitigants")})}),J=n=>e.jsx("div",{className:"h-24",children:e.jsx(Ce,{name:`mitigants${n==null?void 0:n.uid}`,className:"!h-full",variant:S.SECONDARY,maxCount:1e3,autoResize:!0,value:n==null?void 0:n.mitigation,disabled:!0,hideLabel:!0})});return e.jsxs("div",{className:"grid gap-5 mb-5",children:[e.jsx(e.Fragment,{children:e.jsx("div",{className:"border border-secondary-concrete rounded-xl p-5",children:e.jsx("div",{className:"flex flex-col gap-3",children:e.jsx("div",{children:m.loanUid&&(r!=null&&r.camStageUid)?e.jsxs(Ds,{ref:M,standardDataFormatPromise:se.getCamDeviations,search:`?loanUid=${m.loanUid}&stageUid=${r==null?void 0:r.camStageUid}&reEvalDeviations=false`,uniqueKey:"uid",mode:"UPDATE",isIgnoreInitialLoad:!0,children:[e.jsx(j,{header:P,className:"text-primary-ptext-1000 text-left text-xs h-12 pl-6",style:{minWidth:"170px",width:"170px"},body:B}),e.jsx(j,{header:V,className:"pl-6 py-3 text-primary-ptext-1000 text-left text-xs",style:{minWidth:"170px",width:"170px"},body:q}),e.jsx(j,{header:H,className:"!w-64 pl-6 py-3 text-primary-ptext-1000 text-left text-xs",body:N}),e.jsx(j,{header:a,className:"pl-6 py-3 text-primary-ptext-1000 text-left text-xs",style:{minWidth:"170px",width:"170px"},body:u}),e.jsx(j,{header:$,className:"pl-6 py-3 text-primary-ptext-1000 text-left text-xs",body:_}),e.jsx(j,{header:W,className:"px-6 py-3 text-primary-ptext-1000 text-left text-xs",body:J})]}):null})})})}),e.jsx(Ne,{onHide:()=>{f(!1),T("")},visible:s,errorMessage:R})]})},ut=()=>{const L=ne();x.useState(!1);const[r,m]=x.useState(""),[b,d]=x.useState(!1),s=R=>e.jsx("div",{className:"",children:e.jsx(c,{className:" font-medium text-primary-ptext-1000  ",label:R==null?void 0:R.name})}),f=R=>e.jsx("div",{className:"flex items-center",children:e.jsx(Y,{className:"text-right",variant:S.SECONDARY,value:Ns((R==null?void 0:R.distance)??"")??"-",disabled:!0})});return e.jsxs("div",{className:"grid gap-5 mb-5",children:[e.jsx("div",{className:"border border-secondary-concrete rounded-xl p-5",children:e.jsx("div",{className:"flex flex-col gap-3",children:e.jsx("div",{children:L.loanUid?e.jsxs(ve,{standardDataFormatPromise:ws.getAll,showAll:!0,routeParams:L.loanUid,dataKey:"id",paginator:!1,children:[e.jsx(j,{header:`${g.t("table.summary.distanceDetails.particulars")}`,className:"!w-64 pl-6 py-3 text-primary-ptext-1000 text-left text-xs",body:s}),e.jsx(j,{header:`${g.t("table.summary.distanceDetails.distanceSysGen")}`,className:"!w-30 px-6 py-3 text-primary-ptext-1000 text-left text-xs",body:f})]}):null})})}),e.jsx(Ne,{onHide:()=>{d(!1),m("")},visible:b,errorMessage:r})]})},ht=L=>{var v,P,B,V,q,H,N,a,u,$,_,W,J;const{data:r,isLoading:m,dropdownOptions:b}=L,d=ne();x.useState(!1);const[s,f]=x.useState(""),[R,T]=x.useState(!1),[,A]=x.useState(!1);x.useRef(new Ee({validators:{...Pe()},...$e(),autoForceUpdate:{forceUpdate:()=>A(n=>!n)}})),x.useEffect(()=>{s&&T(!0)},[s]);const M=n=>e.jsx("div",{className:"pt-4",children:e.jsx(w,{hideLabel:!0,placeholder:"placeholder.cam.Tags",name:`tags${n==null?void 0:n.uid}`,value:n==null?void 0:n.smTagName,variant:S.PRIMARY,options:b==null?void 0:b.loanTags,optionLabel:"name",optionValue:"code",disabled:!0})}),E=n=>e.jsx("div",{className:"mt-5 ",children:e.jsxs("div",{className:"flex flex-shrink-0 justify-center ",children:[e.jsxs("div",{className:"mr-5 flex",children:[e.jsx(ds,{hideLabel:!0,hideErrorRow:!0,variant:Ze.PRIMARY,value:!0,checked:(n==null?void 0:n.isApplicable)===!0,disabled:!0}),e.jsx(c,{className:"ml-1.5 text-xs ",label:"label.dde.yes"})]}),e.jsxs("div",{className:"flex",children:[e.jsx(ds,{hideLabel:!0,hideErrorRow:!0,variant:Ze.PRIMARY,value:!1,checked:(n==null?void 0:n.isApplicable)===!1,disabled:!0}),e.jsx(c,{className:"ml-1.5 text-xs ",label:"label.dde.no"})]})]})}),U=n=>e.jsx("div",{className:"flex items-start mt-1",children:e.jsx(Y,{name:`comment${n==null?void 0:n.uid}`,variant:S.SECONDARY,value:n==null?void 0:n.remarks,disabled:!0})}),O=n=>e.jsx("div",{className:"",children:e.jsx(Y,{name:`loanNumber${n==null?void 0:n.uid}`,variant:S.SECONDARY,value:n==null?void 0:n.loanNumber,disabled:!0})}),h=n=>e.jsx("div",{className:"flex items-start mt-1",children:e.jsx(Y,{name:`remarks${n==null?void 0:n.uid}`,variant:S.SECONDARY,value:n==null?void 0:n.remarks,disabled:!0})});return m?e.jsx(he,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"}):e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{className:"self-end flex text-xs",children:e.jsx(c,{label:"label.dataSource.cam"})}),e.jsx("div",{className:"border border-secondary-concrete rounded-xl p-5",children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx(c,{className:"text-base",label:"label.summary.eligibility.schemeDetails"}),e.jsxs("div",{className:"flex flex-col text-xs",children:[e.jsx(c,{label:"label.summary.eligibility.productIncomeScheme"}),e.jsx(c,{label:((v=r==null?void 0:r.productIncomeScheme)==null?void 0:v.name)??""})]}),e.jsxs("div",{className:"flex flex-wrap gap-x-40 gap-y-10",children:[e.jsxs("div",{className:"flex flex-col text-xs",children:[e.jsx(c,{label:"label.summary.eligibility.incomeScheme"}),e.jsx(c,{label:((B=(P=r==null?void 0:r.productIncomeScheme)==null?void 0:P.incomeSchemeName)==null?void 0:B.name)??""})]}),e.jsxs("div",{className:"flex flex-col text-xs",children:[e.jsx(c,{label:"label.summary.eligibility.bankFinancierName"}),e.jsx(c,{label:((q=(V=r==null?void 0:r.productIncomeScheme)==null?void 0:V.bank)==null?void 0:q.name)??""})]}),e.jsxs("div",{className:"flex flex-col text-xs",children:[e.jsx(c,{label:"label.summary.eligibility.lendingType"}),e.jsx(c,{label:((N=(H=r==null?void 0:r.productIncomeScheme)==null?void 0:H.lendingType)==null?void 0:N.name)??""})]})]})]})}),e.jsx("div",{className:"border border-secondary-concrete rounded-xl p-5",children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx(c,{className:"text-base",label:"label.summary.eligibility.finalLoanDetails"}),e.jsxs("div",{className:"grid grid-cols-4 gap-x-16 gap-y-5 ",children:[e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx(c,{className:"text-primary-gray-700 text-xs mb-1",label:"label.summary.eligibility.recommendedLoanAmt"}),e.jsx(c,{className:"text-black text-xs",label:`${(r==null?void 0:r.recommendedLoanAmount)??""}`})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx(c,{className:"text-primary-gray-700 text-xs mb-1",label:"label.summary.eligibility.insurancePremium"}),e.jsx(c,{className:"text-black text-xs",label:`${(r==null?void 0:r.insurancePremium)??""}`})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx(c,{className:"text-primary-gray-700 text-xs mb-1",label:"label.summary.eligibility.totalLoanAmt"}),e.jsx(c,{className:"text-black text-xs",label:`${(r==null?void 0:r.totalLoanAmount)??""}`})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx(c,{className:"text-primary-gray-700 text-xs mb-1",label:"label.summary.eligibility.roi"}),e.jsx(c,{className:"text-black text-xs",label:`${(r==null?void 0:r.roi)??""}`})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx(c,{className:"text-primary-gray-700 text-xs mb-1",label:"label.summary.eligibility.tenure"}),e.jsx(c,{className:"text-black text-xs",label:`${(r==null?void 0:r.tenure)??""}`})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx(c,{className:"text-primary-gray-700 text-xs mb-1",label:"label.summary.eligibility.interestType"}),e.jsx(c,{className:"text-black text-xs",label:`${(($=(u=(a=b==null?void 0:b.interestType)==null?void 0:a.find)==null?void 0:u.call(a,n=>(n==null?void 0:n.code)===(r==null?void 0:r.interestType)))==null?void 0:$.name)??""}`})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx(c,{className:"text-primary-gray-700 text-xs mb-1",label:"label.summary.eligibility.emi"}),e.jsx(c,{className:"text-black text-xs",label:`${(r==null?void 0:r.emi)??""}`})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx(c,{className:"text-primary-gray-700 text-xs mb-1",label:"label.summary.eligibility.totalDeductions"}),e.jsx(c,{className:"text-black text-xs",label:`${(r==null?void 0:r.totalDeduction)??""}`})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx(c,{className:"text-primary-gray-700 text-xs mb-1",label:"label.summary.eligibility.netDisbursal"}),e.jsx(c,{className:"text-black text-xs",label:`${(r==null?void 0:r.netDisbursal)??""}`})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx(c,{className:"text-primary-gray-700 text-xs mb-1",label:"label.summary.eligibility.transactionType"}),e.jsx(c,{className:"text-black text-xs",label:`${((J=(W=(_=b==null?void 0:b.transactionType)==null?void 0:_.find)==null?void 0:W.call(_,n=>(n==null?void 0:n.code)===(r==null?void 0:r.transactionType)))==null?void 0:J.name)??""}`})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx(c,{className:"text-primary-gray-700 text-xs mb-1",label:"label.summary.eligibility.balanceTransfer"}),e.jsx(c,{className:"text-black text-xs",label:`${(r==null?void 0:r.balanceTransfer)??""}`})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx(c,{className:"text-primary-gray-700 text-xs mb-1",label:"label.summary.eligibility.employeeLoan"}),e.jsx(c,{className:"text-black text-xs",label:`${(r==null?void 0:r.employeeLoan)??""}`})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx(c,{className:"text-primary-gray-700 text-xs mb-1",label:"label.summary.eligibility.employeeId"}),e.jsx(c,{className:"text-black text-xs",label:`${(r==null?void 0:r.employeeId)??""}`})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx(c,{className:"text-primary-gray-700 text-xs mb-1",label:"label.summary.eligibility.employeeName"}),e.jsx(c,{className:"text-black text-xs",label:`${(r==null?void 0:r.employeeName)??""}`})]}),e.jsx("div",{}),e.jsx("div",{})]})]})}),e.jsx("div",{className:"border border-secondary-concrete rounded-xl p-5",children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx(c,{className:"text-base",label:"label.summary.eligibility.loanTags"}),r!=null&&r.camStageUid&&(d!=null&&d.loanUid)?e.jsx("div",{children:e.jsxs(ve,{className:"border border-secondary-concrete px-0 mt-4 rounded-lg  w-full  overflow-auto approval-request-wrapper",standardDataFormatPromise:se.getLoanTags,dataKey:"uid",search:`?stage.uid=${r==null?void 0:r.camStageUid}&loan.uid=${d==null?void 0:d.loanUid}&isActive=${!0}`,paginator:!0,style:{width:"100%"},children:[e.jsx(re,{className:"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6",header:`${g.t("label.summary.eligibility.tags")}`,body:M}),e.jsx(re,{className:"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6",header:`${g.t("label.summary.eligibility.yesNo")}`,body:E}),e.jsx(re,{className:"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6",header:`${g.t("label.summary.eligibility.comment")}`,body:U})]})}):null]})}),e.jsx("div",{className:"border border-secondary-concrete rounded-xl p-5",children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx(c,{className:"text-base",label:"label.summary.eligibility.financierLoanNumbers"}),r!=null&&r.camStageUid&&(d!=null&&d.loanUid)?e.jsx("div",{children:e.jsxs(ve,{className:"border border-secondary-concrete px-0 mt-4 rounded-lg  w-full  overflow-auto ",standardDataFormatPromise:se.getFinancierLoanNumber,dataKey:"uid",search:`&stage.uid=${(r==null?void 0:r.camStageUid)??""}&loan.uid=${d==null?void 0:d.loanUid}&isActive=true`,paginator:!0,style:{width:"100%"},children:[e.jsx(re,{className:"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6",header:`${g.t("label.summary.eligibility.financierLoanNumber")}`,body:O}),e.jsx(re,{className:"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6",header:`${g.t("label.summary.eligibility.financierLoanNumber.description")}`,body:h})]})}):null]})})]})},hs={camStageUid:"",total:{appraisedNetMonthlyIncome:0,monthlyObligation:0},roi:0,tenure:0,row:{isCalculating:!1,uid:""}},yt=x.forwardRef((L,r)=>{const{data:m,isLoading:b}=L,d=ne(),[s,f]=x.useState({...hs}),R=Re.useRef(null),[,T]=x.useState(!1);x.useRef(new Ee({validators:{...Pe()},...$e(),autoForceUpdate:{forceUpdate:()=>T(a=>!a)}})),x.useEffect(()=>{f(a=>({...a,total:{...m.total},camStageUid:m==null?void 0:m.camStageUid}))},[m]);const A=a=>{var u;return e.jsx("div",{className:"pt-4",children:e.jsx(w,{hideLabel:!0,placeholder:"placeholder.cam.applicantType",name:`applicantType${a==null?void 0:a.uid}`,value:(u=a==null?void 0:a.applicant)==null?void 0:u.applicantType,variant:S.PRIMARY,options:ms,optionLabel:"name",optionValue:"code",disabled:!0})})},M=a=>{var u,$;return e.jsx("div",{className:"pt-4",children:e.jsx(w,{hideLabel:!0,placeholder:"placeholder.cam.customerName",name:`customerName${a==null?void 0:a.uid}`,value:(u=a==null?void 0:a.applicant)==null?void 0:u.fullName,variant:S.PRIMARY,options:[`${($=a==null?void 0:a.applicant)==null?void 0:$.fullName}`],disabled:!0})})},E=a=>{var u,$;return e.jsx("div",{className:"pt-4 w-84 pr-3",children:e.jsx(w,{hideLabel:!0,placeholder:"placeholder.cam.incomeScheme",className:"truncate",value:(u=a==null?void 0:a.incomeScheme)==null?void 0:u.name,variant:S.PRIMARY,options:[`${($=a==null?void 0:a.incomeScheme)==null?void 0:$.name}`],disabled:!0})})},U=a=>e.jsx("div",{className:"pt-4",children:e.jsx(Y,{name:`appraisedNetMonthlyIncome${a==null?void 0:a.uid}`,variant:S.SECONDARY,className:"text-right",value:ge(a==null?void 0:a.appraisedNetMonthlyIncome),hideLabel:!0,disabled:!0})}),O=a=>e.jsx("div",{className:"pt-4",children:e.jsx(w,{hideLabel:!0,placeholder:"placeholder.cam.incomeScheme",name:`isIncomeConsidered${a==null?void 0:a.uid}`,value:a==null?void 0:a.isIncomeConsidered,variant:S.PRIMARY,options:gs,optionLabel:"name",optionValue:"code",disabled:!0})}),h=a=>e.jsx("div",{className:"pt-4",children:e.jsx(Y,{name:`monthlyObligation${a==null?void 0:a.uid}`,variant:S.SECONDARY,value:a==null?void 0:a.monthlyObligation,className:"text-right ",disabled:!0,hideLabel:!0})}),v=a=>e.jsx("div",{className:"pt-4",children:e.jsx(Y,{name:`foir${a==null?void 0:a.uid}`,variant:S.SECONDARY,value:a==null?void 0:a.foir,disabled:!0,className:"text-right ",hideLabel:!0})}),P=a=>e.jsx("div",{className:"pt-4",children:e.jsx(Y,{name:`maxEmi${a==null?void 0:a.uid}`,variant:S.SECONDARY,value:a==null?void 0:a.maxEmi,className:"text-right",disabled:!0,hideLabel:!0})}),B=a=>e.jsx("div",{className:"pt-4",children:e.jsx(Y,{variant:S.SECONDARY,value:a==null?void 0:a.emiFactor,className:"text-right",disabled:!0,hideLabel:!0})}),V=a=>e.jsx("div",{className:"pt-4",children:e.jsx(Y,{name:`eligibility${a==null?void 0:a.uid}`,variant:S.SECONDARY,value:a==null?void 0:a.eligibility,className:"text-right",disabled:!0,hideLabel:!0})}),q=()=>e.jsx(c,{className:" font-medium text-primary-ptext-1000  ",label:"label.cibilDetails.enquirySummary.thead.total"}),H=()=>{var u,$;const a=ge((u=s==null?void 0:s.total)==null?void 0:u.appraisedNetMonthlyIncome);return e.jsx(c,{className:" font-medium text-primary-ptext-1000 text-right",label:(($=s==null?void 0:s.total)==null?void 0:$.appraisedNetMonthlyIncome)>0?`₹${a}`:""})},N=()=>{var u,$;const a=ge((u=s==null?void 0:s.total)==null?void 0:u.monthlyObligation);return e.jsx(c,{className:" font-medium text-primary-ptext-1000 text-right",label:(($=s==null?void 0:s.total)==null?void 0:$.monthlyObligation)>0?`₹${a}`:""})};return e.jsx("div",{children:e.jsx("div",{className:" border border-primary-ptext-500 rounded-xl p-5 flex flex-col gap-3",children:b?e.jsx(he,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"}):e.jsx("div",{className:"col-span-4",children:d!=null&&d.loanUid&&(s!=null&&s.camStageUid)?e.jsxs(ve,{ref:R,uniqueKey:"uid",standardDataFormatPromise:se.getIncomeDetails,search:`&loan.uid=${d==null?void 0:d.loanUid}&isActive=true&stage.uid=${s==null?void 0:s.camStageUid}`,children:[e.jsx(j,{header:g.t("label.cam.applicantType"),className:"text-primary-ptext-1000 text-left text-xs h-12 pl-6 min-w-35",body:A,footer:q}),e.jsx(j,{header:g.t("label.cam.customerName"),className:"text-primary-ptext-1000 text-left text-xs h-12 pl-6 min-w-50",body:M}),e.jsx(j,{header:g.t("label.cam.incomeScheme"),className:" text-primary-ptext-1000 text-xs h-12 pl-6 max-w-84 w-84 ",body:E}),e.jsx(j,{header:g.t("label.cam.appraisedNetMonthlyIncome"),className:"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6",body:U,footer:H,footerClassName:" text-right"}),e.jsx(j,{header:g.t("label.cam.isIncomeConsidered"),className:"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6",body:O}),e.jsx(j,{header:g.t("label.cam.monthlyObligation"),className:"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6",body:h,footer:N,footerClassName:" text-right"}),e.jsx(j,{header:g.t("label.cam.foir(AsPerPolicy)"),className:"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6",body:v}),e.jsx(j,{header:g.t("label.cam.maxEmi"),className:"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6",body:P}),e.jsx(j,{header:g.t("label.cam.emiFactor"),className:"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6",body:B}),e.jsx(j,{header:g.t("label.cam.eligibility"),className:"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6",body:V})]}):null})})})}),pt={collateralProperties:[],totalPropertyValuation:"",property:{uid:"",isCalculating:!1}},ft=x.forwardRef((L,r)=>{const{data:m,isLoading:b}=L,[d,s]=x.useState({...pt});x.useState(""),x.useState(!1),x.useState(""),x.useState(!1),x.useRef(null);const f=Re.useRef(null);x.useState(!1),x.useImperativeHandle(r,()=>({refresh:R})),x.useEffect(()=>{s(h=>({...h,collateralProperties:(m==null?void 0:m.collateralProperties)??[],totalPropertyValuation:(m==null?void 0:m.totalPropertyValuation)??""}))},[m]);const R=()=>{var h;(h=f.current)==null||h.search()},T=()=>{let h="";for(let v=0;v<d.collateralProperties.length;v++)v===d.collateralProperties.length-1?h+=` ${Ve[v]}`:h+=`${Ve[v]} + `;return d.collateralProperties.length>0?`( ${h} )`:""},A=(h,v)=>{var P;return e.jsxs("div",{className:"flex ",children:[e.jsx("div",{className:"w-30 mr-3",children:e.jsx(w,{hideLabel:!0,name:`smValuationOperationType${v}`,value:((P=h==null?void 0:h.propertyValuation)==null?void 0:P.smValuationOperationType)??"",variant:S.PRIMARY,options:vs,optionLabel:"name",optionValue:"code",disabled:!0})}),e.jsx(c,{className:" text-xs font-medium ",label:`(${Ve[v]})`})]})},M=h=>{var v,P;return e.jsx(c,{className:"text-right",label:`${(v=h.propertyValuation)!=null&&v.finalValuation?"₹ "+ge((P=h.propertyValuation)==null?void 0:P.finalValuation):""}`})},E=h=>{var v;return e.jsx(c,{className:"  text-primary-ptext-1000 ",label:`${((v=h==null?void 0:h.partner)==null?void 0:v.name)??""}`})},U=h=>e.jsx(c,{className:"  text-primary-ptext-1000 ",label:`${Le(h==null?void 0:h.stageCompletionDate)}`}),O=h=>{var v;return e.jsx(c,{className:"  text-primary-ptext-1000 text-right",label:`${ge((v=h==null?void 0:h.technical)==null?void 0:v.govtTotalValuationOfProperty)}`})};return e.jsx(e.Fragment,{children:b?e.jsx(he,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"}):e.jsxs(e.Fragment,{children:[d.collateralProperties.map((h,v)=>{var P,B,V,q,H,N,a;return e.jsx("div",{children:e.jsx("div",{className:" border border-primary-ptext-500 rounded-xl p-5 flex flex-col gap-3",children:e.jsx(Ke,{override:{read:h.pageMode===_e.VIEW},children:e.jsxs("div",{className:"grid grid-cols-4 gap-5",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx(c,{className:"text-primary-gray-600 text-xs",label:"label.dde.propertyAddress"}),e.jsx(c,{className:"text-primary-ptext-1000 text-xs ",label:(h==null?void 0:h.address)??""})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(c,{className:"text-primary-gray-600 text-xs",label:"heading.pincode"}),e.jsx(c,{className:"text-primary-ptext-1000 text-xs",label:((P=h==null?void 0:h.pincode)==null?void 0:P.pinCode)??""})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(c,{className:"text-primary-gray-600 text-xs",label:"input.pincode.city"}),e.jsx(c,{className:"text-primary-ptext-1000 text-xs",label:((B=h==null?void 0:h.city)==null?void 0:B.name)??""})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(c,{className:"text-primary-gray-600 text-xs",label:"input.pincode.state"}),e.jsx(c,{className:"text-primary-ptext-1000 text-xs",label:((q=(V=h==null?void 0:h.city)==null?void 0:V.state)==null?void 0:q.name)??""})]}),e.jsxs("div",{className:"col-span-4",children:[e.jsx("div",{className:"mb-3",children:e.jsx(c,{className:"text-primary-ptext-1000  text-xs ",label:"label.cam.valuation"})}),e.jsxs(ve,{value:h==null?void 0:h.valuationTable,className:` ${(H=h==null?void 0:h.valuationTable)!=null&&H.length?"  ":" rcu-stage-document-verification"}`,ref:f,dataKey:"uid",children:[e.jsx(j,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:g.t("label.cam.vendorName"),body:E,footer:((N=h==null?void 0:h.valuationTable)==null?void 0:N.length)!=0?()=>A(h,v):void 0}),e.jsx(j,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:g.t("label.cam.dateOfValuation"),body:U}),e.jsx(j,{className:"text-primary-ptext-1000 text-right text-xs  p-1 h-12 pl-6 pr-5",header:g.t("label.cam.totalValuation(₹)"),body:O,style:{maxWidth:"168px"},footer:((a=h==null?void 0:h.valuationTable)==null?void 0:a.length)!=0?()=>M(h):void 0})]})]})]})})})},v)}),(d==null?void 0:d.collateralProperties.length)>0?e.jsxs("div",{className:"bg-[#fbfbff] flex justify-between pl-7 pr-11 py-6",children:[e.jsx("div",{children:e.jsx(c,{className:" font-medium text-xs",label:"label.cam.totalValuationBeingConsidered",args:{properties:T()}})}),e.jsx("div",{children:e.jsx(c,{className:" font-medium text-xs",label:d!=null&&d.totalPropertyValuation?"₹ "+ge(d==null?void 0:d.totalPropertyValuation):""})})]}):null]})})}),ys={stageUid:"",total:{outstandingAmount:0,emiAmount:0,roi:0}},bt=x.forwardRef((L,r)=>{const{data:m,isLoading:b}=L,d=ne(),[s,f]=x.useState({...ys}),[R,T]=x.useState(_e.VIEW);x.useState(""),x.useState(!1);const[A,M]=x.useState(""),[E,U]=x.useState(!1);x.useRef(null);const O=Re.useRef(null),[,h]=x.useState(!1);x.useRef(new Ee({validators:{...Pe()},...$e(),autoForceUpdate:{forceUpdate:()=>h(l=>!l)}})),x.useEffect(()=>{m!=null&&m.stageUid&&f(l=>({...l,...m}))},[m]),x.useEffect(()=>{A&&U(!0)},[A]);const v=l=>{var I,k;return e.jsx("div",{className:"pt-4",children:e.jsx(w,{hideLabel:!0,placeholder:"placeholder.cam.applicantType",name:`applicantType${l==null?void 0:l.uid}`,value:(k=(I=l==null?void 0:l.stage)==null?void 0:I.applicant)==null?void 0:k.applicantType,variant:S.PRIMARY,options:ms,optionLabel:"name",optionValue:"code",disabled:!0})})},P=l=>{var I;return e.jsx("div",{className:"pt-4",children:e.jsx(Y,{name:`customerName${l==null?void 0:l.uid}`,variant:S.SECONDARY,value:`${((I=l==null?void 0:l.applicant)==null?void 0:I.fullName)??""}`,disabled:!0,hideLabel:!0})})},B=l=>{var I,k,te,le,ee;return e.jsx("div",{className:"pt-4",children:e.jsx(w,{hideLabel:!0,placeholder:"placeholder.cam.applicantType",name:`source${l==null?void 0:l.uid}`,value:(k=(I=l==null?void 0:l.bank)==null?void 0:I.type)==null?void 0:k.name,variant:S.PRIMARY,options:(te=l==null?void 0:l.bank)!=null&&te.name?[`${(ee=(le=l==null?void 0:l.bank)==null?void 0:le.type)==null?void 0:ee.name}`]:[],disabled:!0})})},V=l=>e.jsx("div",{className:"pt-4",children:e.jsx(w,{hideLabel:!0,placeholder:"placeholder.cam.purposeOfLoan",name:`purpose${l==null?void 0:l.uid}`,value:l==null?void 0:l.smPurpose,variant:S.PRIMARY,options:js,optionLabel:"name",optionValue:"value",disabled:!0})}),q=l=>{var I;return e.jsx("div",{className:"pt-4",children:e.jsx(Y,{name:`nameOfInstitute${l==null?void 0:l.uid}`,variant:S.SECONDARY,value:((I=l==null?void 0:l.bank)==null?void 0:I.name)??"",disabled:!0,hideLabel:!0})})},H=l=>e.jsx("div",{className:"pt-4",children:e.jsx(Y,{name:`sanctionAmount${l==null?void 0:l.uid}`,variant:S.SECONDARY,className:"text-right",value:l==null?void 0:l.sanctionedAmount,disabled:!0,hideLabel:!0})}),N=l=>e.jsx("div",{className:"pt-4",children:e.jsx(Y,{name:`outstandingAmount${l==null?void 0:l.uid}`,variant:S.SECONDARY,className:"text-right",value:l==null?void 0:l.outstandingAmount,disabled:!0,hideLabel:!0})}),a=l=>e.jsx("div",{className:"pt-4",children:e.jsx(Y,{name:`balanceTenor${l==null?void 0:l.uid}`,variant:S.SECONDARY,className:"text-right",value:l==null?void 0:l.balanceTenor,disabled:!0,hideLabel:!0})}),u=l=>e.jsx("div",{className:"pt-4",children:e.jsx(Y,{name:`emi${l==null?void 0:l.uid}`,variant:S.SECONDARY,className:"text-right",value:l==null?void 0:l.emiAmount,disabled:!0,hideLabel:!0})}),$=l=>e.jsx("div",{className:"pt-4",children:e.jsx(Y,{name:`pastDefault${l==null?void 0:l.uid}`,placeholder:"placeholder.cam.pastDefaults",variant:S.SECONDARY,className:"text-right",value:l==null?void 0:l.pastDefaults,disabled:!0,hideLabel:!0})}),_=l=>e.jsx("div",{className:"pt-4",children:e.jsx(Y,{name:`sanctionTenor${l==null?void 0:l.uid}`,variant:S.SECONDARY,className:"text-right",value:l==null?void 0:l.sanctionedTenor,hideLabel:!0,disabled:!0})}),W=l=>e.jsx("div",{className:"pt-4",children:e.jsx(Y,{name:`noOfBounces${l==null?void 0:l.uid}`,variant:S.SECONDARY,className:"text-right",value:l==null?void 0:l.noOfBounces,hideLabel:!0,disabled:!0})}),J=l=>e.jsx("div",{className:"pt-4",children:e.jsx(Y,{name:`roi${l==null?void 0:l.uid}`,variant:S.SECONDARY,className:"text-right",value:l==null?void 0:l.roi,hideLabel:!0,disabled:!0})}),n=l=>e.jsx("div",{className:"pt-4",children:e.jsx(Y,{name:`emiPaid${l==null?void 0:l.uid}`,variant:S.SECONDARY,className:"text-right",value:l==null?void 0:l.emiPaid,hideLabel:!0})}),K=l=>e.jsx("div",{className:"pt-4",children:e.jsx(w,{hideLabel:!0,placeholder:"placeholder.cam.obligated",name:`obligated${l==null?void 0:l.uid}`,value:l==null?void 0:l.obligated,variant:S.PRIMARY,options:De,optionLabel:"label",optionValue:"value",disabled:!0})}),Z=l=>e.jsx("div",{className:"pt-4",children:e.jsx(Y,{name:`highestDpd${l==null?void 0:l.uid}`,variant:S.SECONDARY,className:"text-right",value:l==null?void 0:l.highestDpd})}),ie=l=>e.jsx("div",{className:"pt-4",children:e.jsx(Y,{name:`highestDpdMonth${l==null?void 0:l.uid}`,variant:S.SECONDARY,className:"text-right",value:l==null?void 0:l.highestDpdMonth,hideLabel:!0})}),z=l=>e.jsx("div",{className:"pt-4",children:e.jsx(Y,{name:`overdueAmount${l==null?void 0:l.uid}`,variant:S.SECONDARY,className:"text-right",value:l==null?void 0:l.overdueAmount,hideLabel:!0,disabled:!0})}),ye=l=>e.jsx("div",{className:"pt-4",children:e.jsx(Y,{name:`remarks${l==null?void 0:l.uid}`,variant:S.SECONDARY,value:l==null?void 0:l.remarks,hideLabel:!0,disabled:!0})}),pe=l=>e.jsx("div",{className:"pt-4",children:e.jsx(w,{hideLabel:!0,placeholder:"placeholder.cam.consideredForBt",name:`smConsideredForBt${l==null?void 0:l.uid}`,value:l==null?void 0:l.smConsideredForBt,variant:S.PRIMARY,options:De,optionLabel:"label",optionValue:"value",disabled:!0})}),de=()=>e.jsx(c,{className:" font-medium text-primary-ptext-1000  ",label:"label.cibilDetails.enquirySummary.thead.total/avg"}),fe=()=>{var I,k;const l=ge((I=s==null?void 0:s.total)==null?void 0:I.outstandingAmount);return e.jsx(c,{className:" font-medium text-primary-ptext-1000 text-right",label:((k=s==null?void 0:s.total)==null?void 0:k.outstandingAmount)>0?`₹${l}`:""})},me=()=>{var I,k;const l=ge((I=s==null?void 0:s.total)==null?void 0:I.emiAmount);return e.jsx(c,{className:" font-medium text-primary-ptext-1000 text-right",label:((k=s==null?void 0:s.total)==null?void 0:k.emiAmount)>0?`₹${l}`:""})},ae=()=>{var I,k;const l=ge((I=s==null?void 0:s.total)==null?void 0:I.roi);return e.jsx(c,{className:" font-medium text-primary-ptext-1000 text-right",label:((k=s==null?void 0:s.total)==null?void 0:k.roi)>0?`₹${l}`:""})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(Ke,{override:{read:R===_e.VIEW},children:e.jsx("div",{className:" grid grid-cols-4 gap-3  ",children:e.jsx("div",{className:"col-span-4",children:b?e.jsx(he,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"}):e.jsxs(ve,{ref:O,uniqueKey:"uid",standardDataFormatPromise:se.getRepaymentHistoryTable,search:`&loan.uid=${d==null?void 0:d.loanUid}&isActiveCam=true`,mode:"UPDATE",children:[e.jsx(j,{header:g.t("label.cam.typeOfApplicant"),className:"text-primary-ptext-1000 text-left text-xs h-12 pl-6",body:v,footer:de}),e.jsx(j,{header:g.t("label.cam.customerName"),className:"text-primary-ptext-1000 text-left text-xs h-12 pl-6",body:P}),e.jsx(j,{header:g.t("label.cam.source(Bank/Financier)"),className:"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6",body:B}),e.jsx(j,{header:g.t("label.cam.purpose(home/personal)"),className:"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6",body:V}),e.jsx(j,{header:g.t("label.cam.nameOfInstitution"),className:" text-primary-ptext-1000 text-xs h-12 pl-6",body:q}),e.jsx(j,{header:g.t("label.cam.sanctionAmount"),className:"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6",body:H}),e.jsx(j,{header:g.t("label.cam.outstandingAmount"),className:"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6",body:N,footer:fe,footerClassName:" text-right"}),e.jsx(j,{header:g.t("label.cam.balanceTenor"),className:"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6",body:a}),e.jsx(j,{header:g.t("label.cam.emi(₹)"),className:"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6",body:u,footer:me,footerClassName:" text-right"}),e.jsx(j,{header:g.t("label.cam.pastDefaults"),className:"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6",body:$}),e.jsx(j,{header:g.t("label.cam.sanctionTenor"),className:"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6",body:_}),e.jsx(j,{header:g.t("label.cam.noOfBounces"),className:"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6",body:W}),e.jsx(j,{header:g.t("label.cam.roi(%)"),className:"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6",body:J,footer:ae,footerClassName:" text-right"}),e.jsx(j,{header:g.t("label.cam.emiPaid"),className:"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6",body:n}),e.jsx(j,{header:g.t("label.cam.obligated(y/n)"),className:" text-primary-ptext-1000 text-xs h-12 pl-6 min-w-30",body:K}),e.jsx(j,{header:g.t("label.cam.highestDpd's"),className:"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6",body:Z}),e.jsx(j,{header:g.t("label.cam.highestDpd'sMonth"),className:"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6",body:ie}),e.jsx(j,{header:g.t("label.cam.overdueAmount(₹)"),className:"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6",body:z}),e.jsx(j,{header:g.t("label.cam.remarks/clarifications"),className:" text-primary-ptext-1000 text-xs h-12 pl-6",body:ye}),e.jsx(j,{header:g.t("label.cam.considerForBt(yes/no)"),className:" text-primary-ptext-1000 text-xs h-12 px-6",body:pe})]})})})})}),e.jsx(Ne,{onHide:()=>{U(!1),M("")},visible:E,errorMessage:A})]})}),Nt=L=>{const{data:r}=L,m=ne(),b=()=>e.jsx("div",{className:"flex items-center",children:e.jsx(c,{label:g.t("label.cam.recommendation.table.riskStrength")})}),d=A=>e.jsx("div",{className:"h-24",children:e.jsx(w,{name:`smRiskStrength${A.uid}`,className:"!w-30",options:[{label:"Risk",value:we.RISK},{label:"Strength",value:we.STRENGTH}],optionLabel:"label",optionValue:"value",value:A.smRiskStrength??"",hideLabel:!0,disabled:!0})}),s=()=>e.jsx("div",{className:"flex items-center",children:e.jsx(c,{label:g.t("label.cam.recommendation.table.desc")})}),f=A=>e.jsx("div",{className:"h-24",children:e.jsx(Ce,{name:`description${A==null?void 0:A.uid}`,className:"!h-full",variant:S.SECONDARY,maxCount:200,autoResize:!0,value:A==null?void 0:A.description,hideLabel:!0,disabled:!0})}),R=()=>e.jsx("div",{className:"flex items-center",children:e.jsx(c,{label:g.t("label.cam.recommendation.table.remarkMitigants")})}),T=A=>e.jsx("div",{className:"h-24",children:e.jsx(Y,{name:`remarks${A==null?void 0:A.uid}`,className:"!h-full",variant:S.SECONDARY,value:A==null?void 0:A.remarks,hideLabel:!0,disabled:!0})});return e.jsx(Re.Fragment,{children:e.jsx("div",{className:"grid gap-5 mb-5",children:e.jsx("div",{className:"p-5 flex flex-col gap-3 border border-primary-ptext-500 rounded-xl",children:e.jsx("div",{className:"flex flex-col gap-3",children:(m==null?void 0:m.loanUid)&&r.camStageUid&&e.jsx("div",{children:e.jsxs(ve,{uniqueKey:"uid",standardDataFormatPromise:se.getRiskAndStrength,search:`&loan.uid=${m.loanUid}&stage.uid=${r==null?void 0:r.camStageUid}`,paginator:!0,mode:"UPDATE",children:[e.jsx(j,{header:b,className:"w-30 pl-6 py-3 text-primary-ptext-1000 text-left text-xs",body:d}),e.jsx(j,{header:s,className:"pl-6 py-3 text-primary-ptext-1000 text-left text-xs",body:f}),e.jsx(j,{header:R,className:"pl-6 py-3 text-primary-ptext-1000 text-left text-xs",body:T})]})})})})})})},gt=L=>{const{className:r,data:m,isLoading:b}=L,[d,s]=x.useState([]);return x.useEffect(()=>{s([...m])},[m]),e.jsx("div",{children:b?e.jsx(he,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"}):e.jsx(Ke,{override:{read:!0},children:e.jsx("div",{className:`flex flex-col gap-3 ${r??""}`,children:e.jsx(Re.Fragment,{children:d.length>0?d.map((f,R)=>e.jsxs("div",{className:" p-5 flex flex-col gap-3 border border-primary-ptext-500 rounded-xl",children:[e.jsx("div",{children:e.jsx(c,{className:"text-primary-sideBarBgColor text-sm font-bold mb-1",label:"label.cam.recommendation.recommendation",args:{count:`${R+1}`}})}),e.jsxs("div",{className:"grid grid-cols-4 gap-x-16 gap-y-5 ",children:[e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx(c,{className:"text-primary-gray-700 text-xs mb-1",label:"label.summary.salesRecommendation.dateOfrecommend"}),e.jsx(c,{className:"text-black text-xs",label:`${Le(f.recommendationDate)}`})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx(c,{className:"text-primary-gray-700 text-xs mb-1",label:"label.summary.salesRecommendation.recommendBy"}),e.jsx(c,{className:"text-black text-xs",label:f.recommendedBy??""})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx(c,{className:"text-primary-gray-700 text-xs mb-1",label:"label.summary.salesRecommendation.recommend"}),e.jsx(c,{className:"text-black text-xs",label:f.recommendation})]}),e.jsx("div",{})]})]},`recommendation-card-${f.uid}`)):e.jsx("div",{className:" p-5 w-full h-56 flex items-center justify-center border border-primary-ptext-500 rounded-xl",children:e.jsx(c,{className:"text-secondary-steelBlue-500",label:"No Data"})})})})})})},vt={dropdownOptions:{sanctionCategory:[],sanctionType:[]},stageUid:"",tableObj:{search:""}},jt=L=>{const{data:r}=L,m=ne(),[b,d]=x.useState({...vt});x.useState(!1);const[s,f]=x.useState(""),[R,T]=x.useState(!1),A=x.useRef(null);x.useEffect(()=>{M(),E()},[]),x.useEffect(()=>{var N;A&&A.current&&b.tableObj.search&&((N=A.current)==null||N.search())},[b.tableObj.search]),x.useEffect(()=>{s&&T(!0)},[s]);const M=async()=>{be.getAll(0,30,"staticMasterType.code=SANCTION_CONDITION_TYPE&&").then(N=>{var a;ce(N)&&U("sanctionType",(a=N==null?void 0:N.data)==null?void 0:a.results)}).catch(N=>{console.log(N),f(G(N))})},E=async()=>{be.getAll(0,10,"staticMasterType.code=SANCTION_CONDITION_CATEGORY&&").then(N=>{var a;ce(N)&&U("sanctionCategory",(a=N==null?void 0:N.data)==null?void 0:a.results)}).catch(N=>{console.log(N),f(G(N))})},U=(N,a)=>{d(u=>({...u,dropdownOptions:{...u==null?void 0:u.dropdownOptions,[N]:a??[]}}))},O=()=>e.jsx("div",{className:"flex items-center",children:e.jsx(c,{label:g.t("label.cam.recommendation.table.sancCondition")})}),h=N=>e.jsx("div",{className:"h-24",children:e.jsx(Ce,{name:`sanctionCondition${N==null?void 0:N.uid}`,className:"!h-full",variant:S.SECONDARY,maxCount:200,autoResize:!0,value:N==null?void 0:N.sanctionCondition,disabled:!0,hideLabel:!0})}),v=()=>e.jsx("div",{className:"flex items-center",children:e.jsx(c,{label:g.t("label.cam.recommendation.table.type")})}),P=N=>e.jsx("div",{className:"h-24",children:e.jsx(w,{name:`smSanctionType${N==null?void 0:N.uid}`,className:"!w-30",options:b.dropdownOptions.sanctionType,optionLabel:"name",optionValue:"code",value:(N==null?void 0:N.smSanctionType)??"",disabled:!0,hideLabel:!0})}),B=()=>e.jsx("div",{className:"flex items-center",children:e.jsx(c,{label:g.t("label.cam.recommendation.table.category")})}),V=N=>e.jsx("div",{className:"h-24",children:e.jsx(w,{name:`smCategory${N==null?void 0:N.uid}`,className:"!w-30",options:b.dropdownOptions.sanctionCategory,optionLabel:"name",optionValue:"code",value:(N==null?void 0:N.smCategory)??"",disabled:!0,hideLabel:!0})}),q=()=>e.jsx("div",{className:"flex items-center",children:e.jsx(c,{label:g.t("label.cam.recommendation.table.remark")})}),H=N=>e.jsx("div",{className:"h-24",children:e.jsx(Y,{name:`remarks${N==null?void 0:N.uid}`,className:"!h-6",variant:S.SECONDARY,value:N==null?void 0:N.remarks,disabled:!0,hideLabel:!0})});return e.jsx(Re.Fragment,{children:e.jsxs("div",{className:"grid gap-5 mb-5",children:[e.jsx("div",{className:"border border-secondary-concrete rounded-xl p-5",children:e.jsx("div",{className:"flex flex-col gap-3",children:(m==null?void 0:m.loanUid)&&(r==null?void 0:r.camStageUid)&&e.jsx("div",{children:e.jsxs(ve,{ref:A,standardDataFormatPromise:se.getSanctionConditions,search:`&loan.uid=${m.loanUid}&stage.uid=${r==null?void 0:r.camStageUid}`,uniqueKey:"uid",paginator:!0,children:[e.jsx(j,{header:O,className:"!w-64 pl-6 py-3 text-primary-ptext-1000 text-left text-xs",body:h}),e.jsx(j,{header:v,className:"!w-30 pl-6 py-3 text-primary-ptext-1000 text-left text-xs",body:P}),e.jsx(j,{header:B,className:"!w-30 pl-6 py-3 text-primary-ptext-1000 text-left text-xs",body:V}),e.jsx(j,{header:q,className:"!w-64 px-6 py-3 text-primary-ptext-1000 text-left text-xs",body:H})]})})})}),e.jsx(Ne,{onHide:()=>{T(!1),f("")},visible:R,errorMessage:s})]})})},St=L=>{const{isLoading:r,data:m}=L;ne(),x.useState(!1);const[b,d]=x.useState(""),[s,f]=x.useState(!1);return e.jsxs("div",{className:"grid gap-5 mb-5",children:[e.jsx("div",{className:"border border-secondary-concrete rounded-xl p-5",children:e.jsx("div",{className:"flex flex-col gap-3",children:r?e.jsx(he,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"}):m.length>0?m.map(R=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"self-end flex text-xs",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx(c,{label:"label.dataSource.pd"}),e.jsx(c,{label:R.sourceDescription})]})}),e.jsx(He,{ref:null,validation:{errorMessage:""},initialValue:R==null?void 0:R.workProfileDescription,height:"400x",disabled:!0})]})):e.jsx("div",{className:" p-5 w-full h-56 flex items-center justify-center border border-primary-ptext-500 rounded-xl",children:e.jsx(c,{className:"text-secondary-steelBlue-500",label:"No Data"})})})}),e.jsx(Ne,{onHide:()=>{f(!1),d("")},visible:s,errorMessage:b})]})},At=L=>{const{isLoading:r,data:m,dropdownOptions:b}=L;ne(),x.useState(!1);const[d,s]=x.useState(""),[f,R]=x.useState(!1);return r?e.jsx(he,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"}):e.jsxs(e.Fragment,{children:[m.length>0?m.map(T=>{var A,M,E,U,O,h;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"self-end flex text-xs",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx(c,{label:"label.dataSource.pd",className:"mb-1.5"}),e.jsx(c,{label:T.sourceDescription})]})}),e.jsx("div",{className:"grid gap-5 mb-5",children:e.jsxs("div",{className:"border border-secondary-concrete rounded-xl p-5 grid grid-cols-3 gap-x-16 gap-y-5 ",children:[e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx(c,{className:" text-black text-xs mb-1",label:"label.summary.famHouseholdDetails.familyType"}),e.jsx(c,{className:"text-primary-gray-700 text-xs",label:((E=(M=(A=b==null?void 0:b.familyType)==null?void 0:A.find)==null?void 0:M.call(A,v=>(v==null?void 0:v.code)===T.smFamilyType))==null?void 0:E.name)??"-"})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx(c,{className:"text-black text-xs mb-1",label:"label.summary.famHouseholdDetails.noOfHouseholdMembers"}),e.jsx(c,{className:"text-primary-gray-700 text-xs",label:`${(T==null?void 0:T.noOfHouseholdMembers)??"-"}`})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx(c,{className:"text-black text-xs mb-1",label:"label.summary.famHouseholdDetails.noOfDependantMembers"}),e.jsx(c,{className:"text-primary-gray-700 text-xs",label:`${(T==null?void 0:T.noOfDependentMembers)??"-"}`})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx(c,{className:"text-black text-xs mb-1",label:"label.summary.famHouseholdDetails.ownershipOfCurrentResidence"}),e.jsx(c,{className:"text-primary-gray-700 text-xs",label:`${((h=(O=(U=b==null?void 0:b.ownerShipOfCurrentResidence)==null?void 0:U.find)==null?void 0:O.call(U,v=>(v==null?void 0:v.code)===(T==null?void 0:T.smOwnershipOfCurrentResidence)))==null?void 0:h.name)??"-"}`})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx(c,{className:"text-black text-xs mb-1",label:"label.summary.famHouseholdDetails.areaOfCurrentResidence"}),e.jsx(c,{className:"text-primary-gray-700 text-xs",label:`${(T==null?void 0:T.areaOfCurrentResidence)??"-"}`})]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx(c,{className:"text-black text-xs mb-1",label:"label.summary.famHouseholdDetails.yearsInCurrentCity"}),e.jsx(c,{className:"text-primary-gray-700 text-xs",label:`${(T==null?void 0:T.noYearsInCurrentCity)??"-"}`})]}),e.jsx("div",{className:"col-span-2  h-40",children:e.jsx(Ce,{name:"detailsOnNeighborhood",className:"!h-full",label:"label.summary.famHouseholdDetails.detailsOnNeighborhood",labelClassNames:"text-xs !text-primary-gray-700",value:T.neighbourhoodDescription,variant:S.SECONDARY,disabled:!0})}),e.jsx("div",{}),e.jsx("div",{className:"col-span-2 h-40",children:e.jsx(Ce,{name:"storyboard",className:"!h-full",label:"label.summary.famHouseholdDetails.storyboard",labelClassNames:"text-xs !text-primary-gray-700",value:T.storyboard,variant:S.SECONDARY,disabled:!0})}),e.jsx("div",{})]})})]})}):e.jsx("div",{className:" p-5 w-full h-56 flex items-center justify-center border border-primary-ptext-500 rounded-xl",children:e.jsx(c,{className:"text-secondary-steelBlue-500",label:"No Data"})}),e.jsx(Ne,{onHide:()=>{R(!1),s("")},visible:f,errorMessage:d})]})},Tt=L=>{const r=[];return L==null||L.forEach(m=>{var d,s,f;const b={sourceDescription:`${((s=Be)==null?void 0:s[(d=m==null?void 0:m.applicant)==null?void 0:d.applicantType])??""} | ${((f=m==null?void 0:m.applicant)==null?void 0:f.fullName)??""}`,smFamilyType:(m==null?void 0:m.smFamilyType)??"",noOfHouseholdMembers:(m==null?void 0:m.noOfHouseholdMembers)??"",noOfDependentMembers:(m==null?void 0:m.noOfDependentMembers)??"",smOwnershipOfCurrentResidence:(m==null?void 0:m.smOwnershipOfCurrentResidence)??"",areaOfCurrentResidence:(m==null?void 0:m.areaOfCurrentResidence)??"",noYearsInCurrentCity:(m==null?void 0:m.noYearsInCurrentCity)??"",neighbourhoodDescription:(m==null?void 0:m.neighbourhoodDescription)??"",storyboard:(m==null?void 0:m.storyboard)??""};r.push(b)}),r},Ct=L=>{const r=[];return L==null||L.forEach(m=>{var d,s,f;const b={sourceDescription:`${((s=Be)==null?void 0:s[(d=m==null?void 0:m.applicant)==null?void 0:d.applicantType])??""} | ${((f=m==null?void 0:m.applicant)==null?void 0:f.fullName)??""}`,workProfileDescription:(m==null?void 0:m.workProfileDescription)??""};r.push(b)}),r},Rt={columns:[],rows:[],inputFields:[]},ue="FACTOR",Lt=x.forwardRef((L,r)=>{const{data:m,isLoading:b,dropdownOptions:d}=L;ne();const[s,f]=x.useState({...Rt}),[R,T]=x.useState(""),[A,M]=x.useState(!1);return x.useEffect(()=>{var O,h,v,P,B,V,q,H,N,a,u,$,_,W,J,n,K,Z,ie,z,ye,pe,de,fe,me,ae,l,I;console.log("call api");const E=[],U=[];if((m==null?void 0:m.allApplicants.length)>0&&!b){U.push({label:"",key:ue});let k={[ue]:"Name"},te={[ue]:"Gender"},le={[ue]:"Age (Years)"},ee={[ue]:"Loan Tenure (Months)"},o={[ue]:"Age at Maturity"},F={[ue]:"Relationship with applicant"},Q={[ue]:"Income Considered"},oe={[ue]:"Employment Type"},je={[ue]:"Monthly Income"},Se={[ue]:"Educational Qualification"},Ae={[ue]:"Work Experience (years)"};for(const y of m.allApplicants){let Ue=[];const i=(O=m==null?void 0:m.allIncomeDetails)==null?void 0:O.find(t=>t.applicant.uid===y.uid);if((m==null?void 0:m.allEmploymentDetails.length)>0&&(Ue=m==null?void 0:m.allEmploymentDetails.filter(t=>t.applicant.uid===y.uid)),Ue.length===0){const t=`${y==null?void 0:y.uid}`,p=((h=Be)==null?void 0:h[y==null?void 0:y.applicantType])??"";U.push({label:p,key:t}),k={...k,[y.uid]:(y==null?void 0:y.fullName)??"-"},te={...te,[y.uid]:((B=(P=(v=d==null?void 0:d.gender)==null?void 0:v.find)==null?void 0:P.call(v,C=>C.code===(y==null?void 0:y.smGender)))==null?void 0:B.name)??"-"},le={...le,[y.uid]:ke(y==null?void 0:y.dateOfBirth)??"-"},ee={...ee,[y.uid]:((V=y==null?void 0:y.loan)==null?void 0:V.tenure)??"-"},o={...o,[y.uid]:ke(y==null?void 0:y.dateOfBirth)+es((q=y==null?void 0:y.loan)==null?void 0:q.tenure)},F={...F,[y.uid]:((a=(N=(H=d==null?void 0:d.relationshipWithApplicant)==null?void 0:H.find)==null?void 0:N.call(H,C=>C.code===(y==null?void 0:y.smRelationship)))==null?void 0:a.name)??"-"},Q={...Q,[y.uid]:(i==null?void 0:i.isIncomeConsidered)===!0?"Yes":(i==null?void 0:i.isIncomeConsidered)===!1?"No":"-"},oe={...oe,[y.uid]:"-"},je={...je,[y.uid]:"-"},Se={...Se,[y.uid]:((_=($=(u=d==null?void 0:d.educationalQualifications)==null?void 0:u.find)==null?void 0:$.call(u,C=>C.code===(y==null?void 0:y.smEducation)))==null?void 0:_.name)??"-"},Ae={...Ae,[y.uid]:"-"};continue}for(const t of Ue){const p=`${y==null?void 0:y.uid}|${t.uid}`,C=((W=Be)==null?void 0:W[y==null?void 0:y.applicantType])??"";U.push({label:C,key:p}),t.uid&&(k={...k,[`${y.uid}|${t.uid}`]:(y==null?void 0:y.fullName)??"-"},te={...te,[`${y.uid}|${t.uid}`]:((K=(n=(J=d==null?void 0:d.gender)==null?void 0:J.find)==null?void 0:n.call(J,D=>D.code===(y==null?void 0:y.smGender)))==null?void 0:K.name)??"-"},le={...le,[`${y.uid}|${t.uid}`]:ke(y==null?void 0:y.dateOfBirth)??"-"},ee={...ee,[`${y.uid}|${t.uid}`]:((Z=y==null?void 0:y.loan)==null?void 0:Z.tenure)??"-"},o={...o,[`${y.uid}|${t.uid}`]:ke(y==null?void 0:y.dateOfBirth)+es((ie=y==null?void 0:y.loan)==null?void 0:ie.tenure)},F={...F,[`${y.uid}|${t.uid}`]:((pe=(ye=(z=d==null?void 0:d.relationshipWithApplicant)==null?void 0:z.find)==null?void 0:ye.call(z,D=>D.code===(y==null?void 0:y.smRelationship)))==null?void 0:pe.name)??"-"},Q={...Q,[`${y.uid}|${t.uid}`]:(i==null?void 0:i.isIncomeConsidered)===!0?"Yes":(i==null?void 0:i.isIncomeConsidered)===!1?"No":"-"},oe={...oe,[`${y.uid}|${t.uid}`]:((me=(fe=(de=d==null?void 0:d.employmentType)==null?void 0:de.find)==null?void 0:fe.call(de,D=>D.code===(t==null?void 0:t.smEmploymentNature)))==null?void 0:me.name)??"-"},je={...je,[`${y.uid}|${t.uid}`]:ge(t==null?void 0:t.netIncomeMonth)??"-"},Se={...Se,[`${y.uid}|${t.uid}`]:((I=(l=(ae=d==null?void 0:d.educationalQualifications)==null?void 0:ae.find)==null?void 0:l.call(ae,D=>D.code===(y==null?void 0:y.smEducation)))==null?void 0:I.name)??"-"},Ae={...Ae,[`${y.uid}|${t.uid}`]:(t==null?void 0:t.expInYear)??"-"})}}E.push(k),E.push(te),E.push(le),E.push(ee),E.push(o),E.push(F),E.push(Q),E.push(oe),E.push(je),E.push(Se),E.push(Ae),f(y=>({...y,columns:U,rows:E}))}},[m,b]),x.useEffect(()=>{console.log("stage data",s)},[s]),x.useEffect(()=>{R&&M(!0)},[R]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"",children:b?e.jsx(he,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"}):e.jsx(us,{rows:s==null?void 0:s.rows,columns:s==null?void 0:s.columns,inputFields:s==null?void 0:s.inputFields})}),e.jsx(Ne,{onHide:()=>{M(!1),T("")},visible:A,errorMessage:R})]})}),Et={camStageUid:"",dropdownOptions:{educationalQualifications:[],employmentType:[],familyType:[],gender:[],interestType:[],loanTags:[],ownerShipOfCurrentResidence:[],transactionType:[],relationshipWithApplicant:[]},loanTags:{...Hs},financierLoanNumbers:{...ks},dataCapturedBy:[],propertyValuation:{...Fs},incomeDetails:{...hs},summary:{..._s},repaymentHistoryTable:{...ys},repaymentHistoryComment:{...Bs},incomeEligibilityCalculations:{...Os},purposeOfLoan:{...Gs},overallComments:{...Ws},salesRecommendation:[],eligibility:{camStageUid:"",...Vs,...qs},bankingSummary:[],writeUpOnProfile:[],familyOrHouseHoldDetails:[],allApplicants:[],allEmploymentDetails:[],allIncomeDetails:[],isLoading:{purposeOfLoan:!1,incomeEligibilityCalculations:!1,dataCapturedBy:!1,propertyValuation:!1,eligibility:!1,summary:!1,repaymentHistoryComment:!1,repaymentHistoryTable:!1,bankingSummary:!1,incomeDetails:!1,salesRecommendation:!1,overallComments:!1,familyOrHouseHoldDetails:!1,writeUpOnProfile:!1,allApplicants:!1,allEmploymentDetails:!1,allIncomeDetails:!1,customerLoanDetails:!0}},Pt=()=>{var me,ae,l,I,k,te,le,ee,o,F,Q,oe,je,Se,Ae,y,Ue;const[L,r]=x.useState(!1),[m,b]=x.useState(""),d=ne(),[s,f]=x.useState({...Et}),[R,T]=x.useState(!1),[A,M]=x.useState({...os});x.useEffect(()=>{m&&r(!0)},[m]),x.useEffect(()=>{d!=null&&d.loanUid&&E()},[d==null?void 0:d.loanUid]),x.useEffect(()=>{s!=null&&s.camStageUid&&(P(),B(),O(),a())},[s==null?void 0:s.camStageUid]),x.useEffect(()=>{s!=null&&s.camStageUid&&(P(),B(),O(),a())},[s==null?void 0:s.camStageUid]),x.useEffect(()=>{var i,t,p;s!=null&&s.camStageUid&&!((i=s==null?void 0:s.isLoading)!=null&&i.allApplicants)&&!((t=s==null?void 0:s.isLoading)!=null&&t.allEmploymentDetails)&&!((p=s==null?void 0:s.isLoading)!=null&&p.allIncomeDetails)&&f(C=>({...C,isLoading:{...C.isLoading,customerLoanDetails:!1}}))},[(me=s==null?void 0:s.isLoading)==null?void 0:me.allApplicants,(ae=s==null?void 0:s.isLoading)==null?void 0:ae.allEmploymentDetails,(l=s==null?void 0:s.isLoading)==null?void 0:l.allIncomeDetails,s==null?void 0:s.camStageUid]),x.useEffect(()=>{var i,t;(t=(i=s==null?void 0:s.eligibility)==null?void 0:i.productIncomeScheme)!=null&&t.uid&&Z()},[s==null?void 0:s.eligibility]);const E=()=>{v(),U(),q(),h(),H(),N(),u(),$(),_(),W(),J(),n(),K(),ie()},U=async()=>{var i;f(t=>({...t,isLoading:{...t.isLoading,repaymentHistoryComment:!0,summary:!0,eligibility:!0,propertyValuation:!0,bankingSummary:!0,incomeDetails:!0,overallComments:!0,repaymentHistoryTable:!0,allIncomeDetails:!0}}));try{const t=await ts.stageSearch(`&stageName=${(i=ss)==null?void 0:i.CAM_AND_RECOMMENDATION}&loan.uid=${d==null?void 0:d.loanUid}`);f(p=>{var C,D;return{...p,camStageUid:(D=(C=t.data.results)==null?void 0:C[0])==null?void 0:D.uid}})}catch(t){b(G(t)),f(p=>({...p,isLoading:{...p.isLoading,repaymentHistoryComment:!1,summary:!1,eligibility:!1,propertyValuation:!1,bankingSummary:!1,incomeDetails:!1,overallComments:!1,repaymentHistoryTable:!1,allIncomeDetails:!1}}))}},O=async()=>{try{const i=fe(),t=await se.engine(i);f(p=>{var C,D,Ie;return{...p,repaymentHistoryTable:{...p.repaymentHistoryTable,stageUid:s==null?void 0:s.camStageUid,total:{...p.repaymentHistoryTable.total,emiAmount:qe((C=t==null?void 0:t.data)==null?void 0:C.totalRepaymentEmiPaid),outstandingAmount:qe((D=t==null?void 0:t.data)==null?void 0:D.totalRepaymentOutstandingAmount),roi:qe((Ie=t==null?void 0:t.data)==null?void 0:Ie.repaymentAvgRoi)}},isLoading:{...p.isLoading,repaymentHistoryTable:!1}}})}catch(i){console.log(i),f(t=>({...t,isLoading:{...t.isLoading,repaymentHistoryTable:!1}})),b(G(i))}},h=async()=>{f(i=>({...i,isLoading:{...i.isLoading,familyOrHouseHoldDetails:!0,writeUpOnProfile:!0}}));try{const i=await et.search(`?loan.uid=${d==null?void 0:d.loanUid}`);f(t=>{var p,C;return{...t,familyOrHouseHoldDetails:Tt((p=i==null?void 0:i.data)==null?void 0:p.results),writeUpOnProfile:Ct((C=i==null?void 0:i.data)==null?void 0:C.results),isLoading:{...t.isLoading,familyOrHouseHoldDetails:!1,writeUpOnProfile:!1}}})}catch(i){console.log(i),f(t=>({...t,isLoading:{...t.isLoading,familyOrHouseHoldDetails:!1,writeUpOnProfile:!1}})),b(G(i))}},v=async()=>{f(i=>({...i,isLoading:{...i.isLoading,dataCapturedBy:!0}}));try{const i=await ts.stageSearch(`&loan.uid=${d==null?void 0:d.loanUid}&stageName:nq=${ss.CAM_AND_RECOMMENDATION}&start=0&limit=100`);f(t=>({...t,dataCapturedBy:i.data.results,isLoading:{...t.isLoading,dataCapturedBy:!1}}))}catch(i){b(G(i)),f(t=>({...t,isLoading:{...t.isLoading,dataCapturedBy:!1}}))}},P=async i=>{try{const t=await se.getCamStageDetails((s==null?void 0:s.camStageUid)??"");f(p=>({...p,purposeOfLoan:{...p.purposeOfLoan,...As(t==null?void 0:t.data)},repaymentHistoryComment:{...p.repaymentHistoryComment,...Ts(t==null?void 0:t.data)},incomeEligibilityCalculations:{...p.incomeEligibilityCalculations,...Cs(t==null?void 0:t.data)},summary:{...p.summary,...Rs(t==null?void 0:t.data)},eligibility:{...p.eligibility,camStageUid:s==null?void 0:s.camStageUid,...Ls(t==null?void 0:t.data),...Es(t==null?void 0:t.data)},incomeDetails:{...p.incomeDetails,camStageUid:s==null?void 0:s.camStageUid,...Ps(t==null?void 0:t.data)},overallComments:{...p.overallComments,...$s(t==null?void 0:t.data)},isLoading:{...p.isLoading,repaymentHistoryComment:!1,summary:!1,eligibility:!1,incomeDetails:!1,overallComments:!1}})),V(t==null?void 0:t.data)}catch(t){b(G(t)),V(void 0),f(p=>({...p,isLoading:{...p.isLoading,repaymentHistoryComment:!1,summary:!1,eligibility:!1,propertyValuation:!1,incomeDetails:!1,overallComments:!1}}))}},B=async()=>{try{const i=await se.getBankingAnalysisTabs((s==null?void 0:s.camStageUid)??"",(d==null?void 0:d.loanUid)??""),t=[];f(p=>{var C;return{...p,bankingSummary:[...Us((C=i==null?void 0:i.data)==null?void 0:C.results)],isLoading:{...p.isLoading,bankingSummary:!1}}})}catch(i){f(t=>({...t,isLoading:{...t.isLoading,bankingSummary:!1}})),b(G(i))}},V=async i=>{try{const t=await se.getValuationList((d==null?void 0:d.loanUid)??"",(s==null?void 0:s.camStageUid)??"");f(p=>({...p,propertyValuation:{...p.propertyValuation,...Ms(i,t==null?void 0:t.data)},isLoading:{...p.isLoading,propertyValuation:!1}}))}catch(t){f(p=>({...p,isLoading:{...p.isLoading,propertyValuation:!1}})),b(G(t))}},q=async()=>{var i;f(t=>({...t,isLoading:{...t.isLoading,salesRecommendation:!0}}));try{const t=await se.getSalesRecommendation((d==null?void 0:d.loanUid)??""),p=(i=t==null?void 0:t.data)==null?void 0:i.map(C=>{var D;return{uid:C==null?void 0:C.uid,recommendationDate:C!=null&&C.recommendationDate?new Date(C==null?void 0:C.recommendationDate):"",recommendedBy:((D=C==null?void 0:C.recommendedBy)==null?void 0:D.name)??"",recommendation:(C==null?void 0:C.recommendation)??""}});f(C=>({...C,salesRecommendation:[...p],isLoading:{...C.isLoading,salesRecommendation:!1}}))}catch(t){console.log(t),f(p=>({...p,isLoading:{...p.isLoading,salesRecommendation:!1}})),b(G(t))}},H=async()=>{f(i=>({...i,isLoading:{...i.isLoading,allApplicants:!0}}));try{const i=await st.getAll(0,1e3,`loan.uid=${d==null?void 0:d.loanUid}&isActive=true&applicantType:in=[${xe.PRIMARY},${xe.CO_APPLICANT},${xe.GUARANTOR},${xe.DEPENDANT},${xe.CORPORATE_CO_APPLICANT},${xe.CORPORATE_GUARANTOR}]`);f(t=>{var p;return{...t,allApplicants:((p=i.data)==null?void 0:p.results)??[],isLoading:{...t.isLoading,allApplicants:!1}}})}catch(i){console.log(i),f(t=>({...t,isLoading:{...t.isLoading,allApplicants:!1}})),b(G(i))}},N=async()=>{f(i=>({...i,isLoading:{...i.isLoading,allEmploymentDetails:!0}}));try{const i=await tt.searchAll(`loan.uid=${d==null?void 0:d.loanUid}&isActive=true&applicant.isActive=true&applicant.applicantType:in=[${xe.PRIMARY},${xe.CO_APPLICANT},${xe.GUARANTOR},${xe.DEPENDANT},${xe.CORPORATE_CO_APPLICANT},${xe.CORPORATE_GUARANTOR}]`);f(t=>{var p;return{...t,allEmploymentDetails:((p=i==null?void 0:i.data)==null?void 0:p.results)??[],isLoading:{...t.isLoading,allEmploymentDetails:!1}}})}catch(i){console.log(i),f(t=>({...t,isLoading:{...t.isLoading,allEmploymentDetails:!1}})),b(G(i))}},a=async()=>{try{const i=await se.getIncomeDetails(0,1e3,`&loan.uid=${d==null?void 0:d.loanUid}&isActive=true&stage.uid=${s==null?void 0:s.camStageUid}`);f(t=>{var p;return{...t,allIncomeDetails:((p=i==null?void 0:i.data)==null?void 0:p.results)??[],isLoading:{...t.isLoading,allIncomeDetails:!1}}})}catch(i){console.log(i),f(t=>({...t,isLoading:{...t.isLoading,allIncomeDetails:!1}})),b(G(i))}},u=()=>{be.getAll(0,50,"staticMasterType.code=GENDER&").then(i=>{var t;ce(i)&&(z("gender",(t=i==null?void 0:i.data)==null?void 0:t.results),f(p=>({...p})))}).catch(i=>{console.log(i),b(G(i))})},$=()=>{be.getAll(0,50,"staticMasterType.code=EMPLOYMENT_TYPE&").then(i=>{var t;ce(i)&&(z("employmentType",(t=i==null?void 0:i.data)==null?void 0:t.results),f(p=>({...p})))}).catch(i=>{console.log(i),b(G(i))})},_=()=>{be.getAll(0,50,"staticMasterType.code=EDUCATION&").then(i=>{var t;ce(i)&&(z("educationalQualifications",(t=i==null?void 0:i.data)==null?void 0:t.results),f(p=>({...p})))}).catch(i=>{console.log(i),b(G(i))})},W=()=>{be.getAll(0,50,"staticMasterType.code=FAMILY_TYPE&").then(i=>{var t;ce(i)&&(z("familyType",(t=i==null?void 0:i.data)==null?void 0:t.results),f(p=>({...p})))}).catch(i=>{console.log(i),b(G(i))})},J=()=>{be.getAll(0,50,"staticMasterType.code=RESIDENTIAL_OWNERSHIP&").then(i=>{var t;ce(i)&&(z("ownerShipOfCurrentResidence",(t=i==null?void 0:i.data)==null?void 0:t.results),f(p=>({...p})))}).catch(i=>{console.log(i),b(G(i))})},n=()=>{be.getAll(0,50,"staticMasterType.code=LOAN_TAGS&").then(i=>{var t;ce(i)&&(z("loanTags",(t=i==null?void 0:i.data)==null?void 0:t.results),f(p=>({...p})))}).catch(i=>{console.log(i),b(G(i))})},K=()=>{be.getAll(0,50,"staticMasterType.code=TRANSACTION_TYPE&").then(i=>{var t;ce(i)&&(z("transactionType",(t=i==null?void 0:i.data)==null?void 0:t.results),f(p=>({...p})))}).catch(i=>{console.log(i),b(G(i))})},Z=async()=>{var i,t,p,C,D,Ie,Qe,ze,Xe;try{const Me=await se.getInterestType(`bankUid=${(p=(t=(i=s==null?void 0:s.eligibility)==null?void 0:i.productIncomeScheme)==null?void 0:t.bank)==null?void 0:p.uid}&lendingTypeUid=${(Ie=(D=(C=s==null?void 0:s.eligibility)==null?void 0:C.productIncomeScheme)==null?void 0:D.lendingType)==null?void 0:Ie.uid}&productUid=${(Xe=(ze=(Qe=s==null?void 0:s.eligibility)==null?void 0:Qe.productIncomeScheme)==null?void 0:ze.product)==null?void 0:Xe.uid}`);z("interestType",Me==null?void 0:Me.data)}catch(Me){console.log(Me),b(G(Me))}},ie=()=>{be.getAll(0,50,"staticMasterType.code=RELATION_TYPE&").then(i=>{var t;ce(i)&&(z("relationshipWithApplicant",(t=i==null?void 0:i.data)==null?void 0:t.results),f(p=>({...p})))}).catch(i=>{console.log(i),b(G(i))})},z=(i,t)=>{f(p=>({...p,dropdownOptions:{...p==null?void 0:p.dropdownOptions,[i]:t??[]}}))},ye=()=>{var i,t,p,C;return{gender:(i=s==null?void 0:s.dropdownOptions)==null?void 0:i.gender,relationshipWithApplicant:(t=s==null?void 0:s.dropdownOptions)==null?void 0:t.relationshipWithApplicant,employmentType:(p=s==null?void 0:s.dropdownOptions)==null?void 0:p.employmentType,educationalQualifications:(C=s==null?void 0:s.dropdownOptions)==null?void 0:C.educationalQualifications}},pe=()=>{var i,t;return{familyType:(i=s==null?void 0:s.dropdownOptions)==null?void 0:i.familyType,ownerShipOfCurrentResidence:(t=s==null?void 0:s.dropdownOptions)==null?void 0:t.ownerShipOfCurrentResidence}},de=()=>{var i,t,p;return{interestType:(i=s==null?void 0:s.dropdownOptions)==null?void 0:i.interestType,transactionType:(t=s==null?void 0:s.dropdownOptions)==null?void 0:t.transactionType,loanTags:(p=s==null?void 0:s.dropdownOptions)==null?void 0:p.loanTags}},fe=()=>({loanUid:d==null?void 0:d.loanUid,stageUid:s==null?void 0:s.camStageUid});return e.jsxs("div",{children:[e.jsx("div",{className:"mb-5 flex items-center",children:e.jsx(c,{className:"text-primary-ptext-1000 font-bold",label:"label.heading.summary"})}),e.jsxs("div",{className:"flex flex-col gap-5 summary-layout-body-content",children:[e.jsx(X,{title:"heading.section.summary.datacaptured",children:e.jsx("div",{children:e.jsx(mt,{isLoading:(I=s==null?void 0:s.isLoading)==null?void 0:I.dataCapturedBy,data:s==null?void 0:s.dataCapturedBy})})}),e.jsx(X,{title:"heading.section.summary.loanCustomerDetails",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"self-end flex text-xs",children:e.jsx(c,{label:"label.dataSource.login"})}),e.jsx(Lt,{isLoading:(k=s==null?void 0:s.isLoading)==null?void 0:k.customerLoanDetails,data:{allApplicants:s==null?void 0:s.allApplicants,allEmploymentDetails:s==null?void 0:s.allEmploymentDetails,allIncomeDetails:s==null?void 0:s.allIncomeDetails},dropdownOptions:ye()})]})}),e.jsx(X,{title:"heading.section.summary.distanceDetails",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"self-end flex text-xs",children:e.jsx(c,{label:"label.dataSource.pointOfInterest"})}),e.jsx(ut,{})]})}),e.jsx(X,{title:"heading.section.summary.famHouseholdDetails",children:e.jsx("div",{className:"flex flex-col gap-3",children:e.jsx(At,{isLoading:(te=s==null?void 0:s.isLoading)==null?void 0:te.familyOrHouseHoldDetails,data:s==null?void 0:s.familyOrHouseHoldDetails,dropdownOptions:pe()})})}),e.jsx(X,{title:"heading.section.summary.writeupOnWorkProfile",children:e.jsx("div",{className:"flex flex-col gap-3",children:e.jsx(St,{isLoading:(le=s==null?void 0:s.isLoading)==null?void 0:le.writeUpOnProfile,data:s==null?void 0:s.writeUpOnProfile})})}),e.jsx(X,{title:"heading.section.summary.purposeOfLoan",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{className:"self-end flex text-xs",children:e.jsx(c,{label:"label.dataSource.cam"})}),(ee=s==null?void 0:s.isLoading)!=null&&ee.purposeOfLoan?e.jsx(he,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"}):e.jsx(He,{ref:null,validation:{errorMessage:""},initialValue:s==null?void 0:s.purposeOfLoan.editorText,height:"400x",disabled:!0})]})}),e.jsx(X,{title:"heading.section.summary.businessProof/IncDoc",className:"",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"self-end flex text-xs mb-3",children:e.jsx(c,{label:"label.dataSource.cam"})}),e.jsx(it,{data:{stageUid:s==null?void 0:s.camStageUid}})]})}),e.jsx(X,{title:"heading.section.summary.incomeEligibilityCalcBriefSummary",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{className:"self-end flex text-xs",children:e.jsx(c,{label:"label.dataSource.cam"})}),(o=s==null?void 0:s.isLoading)!=null&&o.incomeEligibilityCalculations?e.jsx(he,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"}):e.jsx(He,{ref:null,validation:{errorMessage:""},initialValue:s==null?void 0:s.incomeEligibilityCalculations.editorText,height:"400x",disabled:!0})]})}),e.jsx(X,{title:"heading.section.summary.repaymentHistory",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{className:"self-end flex text-xs mb-3",children:e.jsx(c,{label:"label.dataSource.cam"})}),e.jsx(bt,{isLoading:(F=s==null?void 0:s.isLoading)==null?void 0:F.repaymentHistoryTable,data:s==null?void 0:s.repaymentHistoryTable}),e.jsxs("div",{className:"mt-5",children:[e.jsx(c,{label:"label.summary.repaymentHistoryComment",className:" text-xs "}),e.jsx(He,{ref:null,validation:{errorMessage:""},initialValue:(Q=s==null?void 0:s.repaymentHistoryComment)==null?void 0:Q.editorText,height:"400x",disabled:!0})]})]})}),e.jsx(X,{title:"heading.section.summary.bureauAnalysis",children:e.jsx("div",{className:"flex flex-col gap-3",children:e.jsx("div",{className:"self-end flex text-xs",children:e.jsx(c,{label:"label.dataSource"})})})}),e.jsx(X,{title:"heading.section.summary.bankingSummary",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{className:"self-end flex text-xs",children:e.jsx(c,{label:"label.dataSource.cam"})}),e.jsx(Is,{isLoading:(oe=s==null?void 0:s.isLoading)==null?void 0:oe.bankingSummary,data:s==null?void 0:s.bankingSummary})]})}),e.jsx(X,{title:"heading.section.summary.eligibility",children:e.jsx(ht,{isLoading:s.isLoading.eligibility,data:s==null?void 0:s.eligibility,dropdownOptions:de()})}),e.jsx(X,{title:"heading.section.summary.propertyValuation",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{className:"self-end flex text-xs",children:e.jsx(c,{label:"label.dataSource.cam"})}),e.jsx(ft,{isLoading:(je=s==null?void 0:s.isLoading)==null?void 0:je.propertyValuation,data:s==null?void 0:s.propertyValuation})]})}),e.jsx(X,{title:"heading.section.summary.incomeDetails",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{className:"self-end flex text-xs",children:e.jsx(c,{label:"label.dataSource.cam"})}),e.jsx(yt,{isLoading:(Se=s==null?void 0:s.isLoading)==null?void 0:Se.incomeDetails,data:s==null?void 0:s.incomeDetails})]})}),e.jsx(X,{title:"heading.section.summary.summary",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{className:"self-end flex text-xs",children:e.jsx(c,{label:"label.dataSource.cam"})}),e.jsx(Ys,{isLoading:s==null?void 0:s.isLoading.summary,data:s==null?void 0:s.summary})]})}),e.jsx(X,{title:"heading.section.summary.overallComments",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{className:"self-end flex text-xs",children:e.jsx(c,{label:"label.dataSource.cam"})}),(Ae=s==null?void 0:s.isLoading)!=null&&Ae.overallComments?e.jsx(he,{height:"19.375rem",width:"100%",borderRadius:"8px",animation:"wave"}):e.jsx(He,{ref:null,validation:{errorMessage:""},initialValue:((y=s==null?void 0:s.overallComments)==null?void 0:y.editorText)??"s",height:"400x",disabled:!0})]})}),e.jsx(X,{title:"heading.section.summary.salesRecommendation",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{className:"self-end flex text-xs",children:e.jsx(c,{label:"label.dataSource.login"})}),e.jsx("div",{className:"flex flex-col gap-5",children:e.jsx(gt,{isLoading:(Ue=s==null?void 0:s.isLoading)==null?void 0:Ue.salesRecommendation,data:s==null?void 0:s.salesRecommendation})})]})}),e.jsx(Ks,{module:Qs.CAM,showDataSource:!0}),e.jsx(X,{title:"heading.section.summary.riskStrength",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{className:"self-end flex text-xs",children:e.jsx(c,{label:"label.dataSource.cam"})}),e.jsx(Nt,{data:{camStageUid:s==null?void 0:s.camStageUid}})]})}),e.jsx(X,{title:"heading.section.summary.deviations",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{className:"self-end flex text-xs",children:e.jsx(c,{label:"label.dataSource.cam"})}),e.jsx(xt,{data:{camStageUid:s==null?void 0:s.camStageUid}})]})}),e.jsx(X,{title:"heading.section.summary.sanctionConditions",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{className:"self-end flex text-xs",children:e.jsx(c,{label:"label.dataSource.cam"})}),e.jsx(jt,{data:{camStageUid:s==null?void 0:s.camStageUid}})]})}),e.jsx(X,{title:"heading.section.summary.query",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{className:"self-end flex text-xs",children:e.jsx(c,{label:"label.dataSource.credit"})}),e.jsx(dt,{})]})}),e.jsx(xs,{visible:R,onToggleVisibility:()=>T(i=>!i),list:[],currentSection:A}),e.jsx(Ne,{onHide:()=>{r(!1),b("")},visible:L,errorMessage:m})]})]})},Gl=Ss(Pt);export{Gl as default};
//# sourceMappingURL=PageSummary-8ebd3158.js.map
