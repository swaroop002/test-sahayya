import{w as bt,r as s,aG as S,j as e,T as k,J as I,z as X,p as he,aH as Z,ao as ee,aI as fe,aJ as ge,aK as U,aY as Ne,aF as Ae,az as ie,o as M,aM as It,av as Mt,aN as te}from"./index-e8217573.js";import{s as D,a as B,b as O}from"./sortIcon-54357a29.js";import{e as Dt}from"./eye_icon-081bddb3.js";import{A as je}from"./AutoComplete-0bca608a.js";import{B as R}from"./ButtonBox-9e46519a.js";import{D as ae}from"./DatePicker-b1c13861.js";import{D as Bt}from"./Dialog-adadaf64.js";import{I as ne}from"./InputBox-b9e88f52.js";import{M as Ot}from"./MenuBox-defc36b0.js";import{R as Rt}from"./ReadOnlyTable-86accb69.js";import{S as Yt}from"./SectionTitle-9f9277ec.js";import{S as oe}from"./SimpleDropDown-061a3470.js";import{T as Lt}from"./Toast-ae99ea5b.js";import{C as m}from"./column.esm-938bad7d.js";import{O as Ft}from"./Department-d5551750.js";import{O as Pt}from"./Designation-408fa03d.js";import{S as ye}from"./StaticMasterTypeService-480bff1a.js";import"./search_icon-459d6871.js";import"./withAuth-6de36ebf.js";import"./virtualscroller.esm-9939945c.js";import"./kebab-menu-8835ad2e.js";import"./No_data-1720c54e.js";import"./datatable.esm-f474a654.js";import"./paginator.esm-11c2c115.js";import"./TransitionGroup-c8afe0ce.js";const $t=ce=>{const[le,Se]=s.useState(!1),[Ce,Y]=s.useState(!1),[Te,L]=s.useState(!1),[l,de]=s.useState({}),[_,u]=s.useState(void 0),[w,v]=s.useState(void 0);s.useState(void 0);const[V,h]=s.useState(void 0),[H,f]=s.useState(void 0);s.useState(void 0);const[Ut,C]=s.useState(void 0),[J,g]=s.useState(void 0),[Q,N]=s.useState(void 0),[q,A]=s.useState(void 0),[W,j]=s.useState(void 0),F=s.useRef(null),[se,T]=s.useState(""),[me,E]=s.useState(S.PRIMARY),[y,b]=s.useState(!1),[P,xe]=s.useState(!1),[Ee,be]=s.useState([]),[Ie,Me]=s.useState([]),[r,z]=s.useState({department:"",designation:"",partnerName:"",name:"",lastName:"",email:"",createdFrom:"",createdTo:"",updatedFrom:"",updatedTo:"",isActive:"",createdBy:{name:"",id:""},updatedBy:{name:"",id:""}}),[c,x]=s.useState({limit:10,loading:!1,totalRecords:0,start:0,search:"",runCustomQuery:!1,records:[]}),G=s.useRef(null),[De,Be]=s.useState([{items:[{label:"Activate",className:""},{label:"Deactivate",className:""}]}]),Oe=(t,a)=>{var K;console.log("rowData=",t);const i={label:"label.common.deactivate",command:()=>{Le(t)}},n={label:"label.common.active",command:()=>{Ye(t)}},$=[{items:[t.isActive?i:n]}];Be($),(K=G==null?void 0:G.current)==null||K.toggle(a)},o=s.useRef(null),[re,Re]=s.useState([]);s.useEffect(()=>{ut(),vt()},[]),s.useEffect(()=>{var t;(t=o==null?void 0:o.current)==null||t.search()},[c==null?void 0:c.search]),s.useEffect(()=>{var t;F!=null&&F.current&&se!==""&&((t=F==null?void 0:F.current)==null||t.showFunction())},[se,me,y]);const pe=t=>{const{name:a,value:i}=t.target;z(typeof i=="object"?n=>({...n,[a]:{name:i==null?void 0:i.name,id:i.userId}}):n=>({...n,[a]:i}))},p=t=>{const{name:a,value:i}=t.target;z(n=>({...n,[a]:i}))},Ye=t=>{de({...t}),L(!0),xe(!0)},Le=t=>{de({...t}),Y(!0),xe(!1)},Fe=t=>{let a="";_||_===void 0?(a='sort={"name":"DESC"}&',u(!1)):(a='sort={"name":"ASC"}&',u(!0)),x({...c,search:a}),v(void 0),g(void 0),C(void 0),h(void 0),f(void 0),j(void 0),N(void 0),A(void 0)},Pe=t=>{let a="";w||w===void 0?(a='sort={"lastName":"DESC"}&',v(!1)):(a='sort={"lastName":"ASC"}&',v(!0)),x({...c,search:a}),u(void 0),g(void 0),C(void 0),h(void 0),f(void 0),j(void 0),N(void 0),A(void 0)},$e=t=>{let a="";J||J===void 0?(a='sort={"designation.name":"DESC"}&',g(!1)):(a='sort={"designation.name":"ASC"}&',g(!0)),u(void 0),v(void 0),C(void 0),h(void 0),f(void 0),j(void 0),N(void 0),A(void 0),x({...c,search:a})},Ue=t=>{let a="";V||V===void 0?(a='sort={"createdAt":"DESC"}&',h(!1)):(a='sort={"createdAt":"ASC"}&',h(!0)),u(void 0),v(void 0),g(void 0),C(void 0),f(void 0),j(void 0),N(void 0),A(void 0),x({...c,search:a})},ke=t=>{let a="";H||H===void 0?(a='sort={"createdBy":"DESC"}&',f(!1)):(a='sort={"createdBy":"ASC"}&',f(!0)),u(void 0),v(void 0),g(void 0),C(void 0),h(void 0),j(void 0),N(void 0),A(void 0),x({...c,search:a})},_e=t=>{let a="";Q||Q===void 0?(a='sort={"updatedAt":"DESC"}&',N(!1)):(a='sort={"updatedAt":"ASC"}&',N(!0)),u(void 0),v(void 0),g(void 0),C(void 0),h(void 0),f(void 0),j(void 0),A(void 0),x({...c,search:a})},we=t=>{let a="";q||q===void 0?(a='sort={"updatedBy":"DESC"}&',A(!1)):(a='sort={"updatedBy":"ASC"}&',A(!0)),u(void 0),v(void 0),g(void 0),C(void 0),h(void 0),f(void 0),j(void 0),N(void 0),x({...c,search:a})},Ve=t=>{let a="";W||W===void 0?(a='sort={"isActive":"DESC"}&',j(!1)):(a='sort={"isActive":"ASC"}&',j(!0)),u(void 0),v(void 0),g(void 0),C(void 0),h(void 0),f(void 0),N(void 0),A(void 0),x({...c,search:a})},He=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Name"}),e.jsx("img",{src:_==null?D:_==!0?B:O,alt:"Sort Icon",onClick:Fe,className:"cursor-pointer"})]}),Je=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight w-25  text-left truncate",title:t.name,children:t.name})}),Qe=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:" Last Name"}),e.jsx("img",{src:w==null?D:w==!0?B:O,alt:"Sort Icon",onClick:Pe,className:"cursor-pointer"})]}),qe=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight w-25  text-left truncate",title:t.lastName,children:t.lastName})}),We=()=>e.jsx("div",{className:"flex",children:e.jsx("p",{className:"mr-1",children:"Email ID"})}),ze=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight w-40 text-left truncate",title:t.email,children:t.email})}),Ge=t=>{var a,i;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left truncate",children:(i=(a=t==null?void 0:t.designation)==null?void 0:a.department)==null?void 0:i.name})})},Ke=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Designation"}),e.jsx("img",{src:J==null?D:J==!0?B:O,alt:"Sort Icon",onClick:$e,className:"cursor-pointer"})]}),Xe=()=>e.jsx("div",{className:"flex",children:e.jsx("p",{className:"mr-1",children:"Department"})}),Ze=t=>{var a;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left truncate",children:(a=t==null?void 0:t.designation)==null?void 0:a.name})})},et=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Created On"}),e.jsx("img",{src:V==null?D:V==!0?B:O,alt:"Sort Icon",onClick:Ue,className:"cursor-pointer"})]}),tt=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left truncate",children:`${he(t.createdAt)}`})}),at=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Created By"}),e.jsx("img",{src:H==null?D:H==!0?B:O,alt:"Sort Icon",onClick:ke,className:"cursor-pointer"})]}),st=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left truncate",children:t.createdByUserName})}),rt=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Updated On"}),e.jsx("img",{src:Q==null?D:Q==!0?B:O,alt:"Sort Icon",onClick:_e,className:"cursor-pointer"})]}),it=t=>e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left truncate",children:`${he(t.updatedAt)}`}),nt=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Updated By"}),e.jsx("img",{src:q==null?D:q==!0?B:O,alt:"Sort Icon",onClick:we,className:"cursor-pointer"})]}),ot=t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-primary-ptext-900 font-BrownLight text-left truncate",children:t.updatedByUserName})}),ct=()=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"mr-1",children:"Is Active"}),e.jsx("img",{src:W==null?D:W==!0?B:O,alt:"Sort Icon",onClick:Ve,className:"cursor-pointer"})]}),lt=t=>e.jsx(e.Fragment,{children:t.isActive?e.jsxs("div",{className:"flex items-center ",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-primaryBlue border-none"}),e.jsx("div",{className:"ml-2 ",children:"YES"})]}):e.jsxs("div",{className:"flex items-center ",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-secondary-gray-300 border-none"}),e.jsx("div",{className:"ml-2 ",children:"NO"})]})}),dt=async()=>X.Inactivate(l==null?void 0:l.uid).then(t=>{var a;E(S.PRIMARY),T(Z.ACTIVATED),b(!y),Y(!1),L(!1),(a=o==null?void 0:o.current)==null||a.search()}).catch(t=>{E(S.QUATERNARY),T(ee(t)),b(!y)}),mt=async()=>X.activate(l==null?void 0:l.uid).then(t=>{var a;E(S.PRIMARY),T(Z.ACTIVATED),b(!y),Y(!1),L(!1),(a=o==null?void 0:o.current)==null||a.search()}).catch(t=>{E(S.QUATERNARY),T(ee(t)),b(!y)}),xt=async()=>{const t={...l},a={...t,isActive:!0},i={uid:l.uid,name:l.name,operationType:fe.ACTIVE,entity:ge.USER_PROFILE,initialStateJson:U(t),finalStateJson:U(a),reqPayload:U(a),reasonForChange:"Activate"};return ye.approve(i).then(n=>{var d;E(S.PRIMARY),T(Z.SENT_FOR_APPROVAL),b(!y),Y(!1),L(!1),(d=o==null?void 0:o.current)==null||d.search()}).catch(n=>{E(S.QUATERNARY),T(ee(n)),b(!y)})},pt=async()=>{const t={...l},a={...t,isActive:!1},i={uid:l.uid,name:l.name,operationType:fe.INACTIVE,entity:ge.USER_PROFILE,initialStateJson:U(t),reqPayload:U(a),finalStateJson:U(a),reasonForChange:"Deactivate"};return ye.approve(i).then(n=>{var d;E(S.PRIMARY),T(Z.SENT_FOR_APPROVAL),b(!y),Y(!1),L(!1),(d=o==null?void 0:o.current)==null||d.search()}).catch(n=>{E(S.QUATERNARY),T(ee(n)),b(!y)})},ue=async t=>{let a=[];t.query.trim().length?(await X.getAll(0,10,`name=${t.query}&`).then(i=>{i.status===200&&(a=[...i.data])}),a.length===0&&a.push({name:void 0,designation:void 0,emailId:void 0})):a=re,Re(a)},ut=()=>{Ft.getAll().then(t=>{Me([...t.data.results]),console.log(t,"check")}).catch(t=>{console.log(t)})},vt=()=>{Pt.getAll().then(t=>{be([...t.data.results]),console.log(t,"check")}).catch(t=>{console.log("err")})},ht=()=>{var a,i,n,d;let t="";if(r.name&&(t=`${t}name:lk=${r.name}&`),r.email&&(t=`${t}email:lk=${r.email}&`),r.designation&&(t=`${t}designation.uid:lk=${r.designation}&`),r.department&&(t=`${t}designation.department.uid=${r.department}&`),r.lastName&&(t=`${t}lastName:lk=${r.lastName}&`),r.createdFrom&&(console.log(r.createdFrom),t=`${t}createdAt:gt=${te(r.createdFrom)}&`),r.createdTo&&(t=`${t}createdAt:lt=${te(r.createdTo)}&`),r.updatedFrom&&(t=`${t}updatedAt:gt=${te(r.updatedFrom)}&`),r.updatedTo&&(t=`${t}updatedAt:lt=${te(r.updatedTo)}&`),r.isActive){let $=!0;r.isActive==="YES"?$=!0:r.isActive==="NO"&&($=!1),t=`${t}isActive:lk=${$}&`}(a=r.createdBy)!=null&&a.id&&(t=`${t}&createdBy=${(i=r.createdBy)==null?void 0:i.id}&`),(n=r.updatedBy)!=null&&n.id&&(t=`${t}&updatedBy=${(d=r.updatedBy)==null?void 0:d.id}&`),x({...c,search:t})},ft=()=>{z({partnerName:"",department:"",designation:"",name:"",lastName:"",email:"",createdFrom:"",createdTo:"",updatedFrom:"",updatedTo:"",isActive:"",createdBy:{name:"",id:""},updatedBy:{name:"",id:""}}),x({...c,search:""})},gt=()=>{Se(!le)},Nt=()=>{ce.navigate(`${Ne}?mode=${Ae.CREATE}`)},At=()=>{const{name:t,lastName:a,email:i,createdFrom:n,createdTo:d,updatedFrom:$,updatedTo:K,isActive:yt,createdBy:St,updatedBy:Ct,designation:Tt,department:Et}=r;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-3 flex flex-col gap-6 bg-primary-sapphireBlue-100 rounded-lg",children:[e.jsx("div",{className:"flex ",children:e.jsx(Yt,{title:"text.masterData.types.search"})}),e.jsxs("div",{className:" grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsx(oe,{label:"label.userManagement.filter.department",name:"department",variant:ie.SECONDARY,onChange:p,options:Ie,value:Et,optionLabel:"name",optionValue:"uid"}),e.jsx(oe,{label:"label.userManagement.filter.designation",name:"designation",variant:ie.SECONDARY,onChange:p,options:Ee,value:Tt,optionLabel:"name",optionValue:"uid"}),e.jsx(ne,{label:"input.userManagement.filter.name",name:"name",variant:M.SECONDARY,onChange:p,value:t}),e.jsx(ne,{label:"input.userManagement.filter.lastName",name:"lastName",variant:M.SECONDARY,onChange:p,value:a}),e.jsx(ne,{label:"input.userManagement.filter.email",name:"email",variant:M.SECONDARY,onChange:p,value:i}),e.jsx(oe,{label:"input.masterData.staticMaster.isActive",name:"isActive",variant:ie.SECONDARY,options:It,onChange:p,value:yt}),e.jsx(ae,{label:"input.masterData.staticMaster.createdFrom",name:"createdFrom",showTime:!0,value:n,placeholder:"DD-MMM-YYYY",onChange:p}),e.jsx(ae,{showTime:!0,label:"input.masterData.staticMaster.createdTo",name:"createdTo",variant:M.PRIMARY,value:d,placeholder:"DD-MMM-YYYY",onChange:p}),e.jsx(je,{label:"input.masterData.staticMaster.createdBy",name:"createdBy",field:"name",value:St,variant:M.PRIMARY,suggestions:re,completeMethod:ue,onChange:pe,itemTemplate:ve}),e.jsx(ae,{showTime:!0,label:"input.masterData.staticMaster.updatedFrom",name:"updatedFrom",variant:M.PRIMARY,value:$,placeholder:"DD-MMM-YYYY",onChange:p}),e.jsx("div",{children:e.jsx(ae,{showTime:!0,label:"input.masterData.staticMaster.updatedTo",name:"updatedTo",variant:M.PRIMARY,value:K,placeholder:"DD-MMM-YYYY",onChange:p})}),e.jsx(je,{field:"name",label:"input.masterData.staticMaster.updatedBy",name:"updatedBy",variant:M.PRIMARY,value:Ct,suggestions:re,completeMethod:ue,onChange:pe,itemTemplate:ve}),e.jsxs("div",{className:"flex gap-5",children:[e.jsx(R,{buttonType:I.RESET_OUTLINE,onClick:ft}),e.jsx(R,{buttonType:I.SEARCH_OUTLINE,onClick:ht})]})]})]})})},ve=t=>t.name===void 0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-39",children:[e.jsx("img",{src:Mt,alt:"search-icon",className:" h-7 w-7"}),e.jsx(k,{className:"text-primary-labelColor mt-2",label:"Loading..."})]}):e.jsx("div",{className:"flex flex-col",children:e.jsx(k,{className:"text-primary-labelColor",label:`${t.name}`})}),jt=t=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center ",children:[e.jsx("div",{className:"w-4 h-4 flex items-center",children:e.jsx("img",{src:Dt,alt:"Sahayya Logo",className:"cursor-pointer",onClick:a=>{ce.navigate(`${Ne}?mode=${Ae.VIEW}&uid=${t.uid}`)}})}),e.jsx("div",{className:"ml ",children:e.jsx(R,{buttonType:I.MENU,onClick:a=>{Oe(t,a)},className:"!rounded-none bg-transparent !hover:bg-primary-gray-300"})})]})});return e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex w-full justify-between items-center",children:[e.jsx(k,{label:"heading.userManagement.userListing",className:"text-primary-ptext-1000 text-h2 font-bold flex"}),e.jsxs("div",{className:"flex gap-10",children:[e.jsx(R,{buttonType:I.FILTER_OUTLINE,onClick:gt}),e.jsx(R,{buttonType:I.CREATE,className:"create-button",onClick:Nt})]})]}),le&&At(),e.jsxs(Rt,{standardDataFormatPromise:X.getAllPartnerUser,dataKey:"id",search:`${c.search}sahayyaUserType=EMPLOYEE_USER`,ref:o,children:[e.jsx(m,{className:"text-primary-ptext-1000 text-left text-xs w-1/12  p-1 h-12 pl-6",header:He,body:Je}),e.jsx(m,{className:"text-primary-ptext-1000 text-left text-xs w-1/12  p-1 h-12 pl-6",header:Qe,body:qe}),e.jsx(m,{className:"text-primary-ptext-1000 text-left text-xs w-1/12  p-1 h-12 pl-6",header:We,body:ze}),e.jsx(m,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:Xe,body:Ge}),e.jsx(m,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:Ke,body:Ze}),e.jsx(m,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:et,body:tt}),e.jsx(m,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:at,body:st}),e.jsx(m,{className:"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6",header:rt,body:it}),e.jsx(m,{className:"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6",header:nt,body:ot}),e.jsx(m,{className:"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6",header:ct,body:lt}),e.jsx(m,{className:"text-primary-ptext-1000 text-left text-xs p-1 h-12 pl-6",header:"Actions",body:jt})]}),e.jsxs(Bt,{onHide:P?()=>L(!1):()=>Y(!1),visible:P?Te:Ce,modal:!0,closable:!1,dismissableMask:!0,children:[e.jsx(k,{label:P?"dialog.staticMaster.activate":"dialog.staticMaster.deactivate",className:"text-primary-ptext-1000 text-base font-Roboto font-bold flex items-center justify-center"}),e.jsx(k,{label:P?"dialog.staticMaster.message.activate":"dialog.staticMaster.message",className:"text-primary-ptext-1000 text-xs font-Roboto flex mt text-center justify-center mx-2 mt-4"}),e.jsxs("div",{className:"flex justify-center mt-4",children:[e.jsx("div",{className:"mr-3",children:e.jsx(R,{buttonType:I.CANCEL_OUTLINE,onClick:P?()=>L(!1):()=>Y(!1)})}),e.jsx("div",{className:"mr-3",children:e.jsx(R,{buttonType:I.SAVE_OUTLINE,onClickWithLoader:P?()=>mt():()=>dt()})}),e.jsx("div",{className:"",children:e.jsx(R,{buttonType:I.SEND_FOR_APPROVAL,className:"approve-primary",onClickWithLoader:P?()=>xt():()=>pt()})})]})]}),e.jsx(Ot,{className:"w-20 bg-white font-Roboto text-xs text-primary-pText-1300 pt-2 rounded-lg mt-0.5 flex justify-center align-center shadow-autoCompletePanel",model:De,ref:G}),e.jsx("div",{className:"",children:e.jsx(Lt,{position:"bottom-right",ref:F,toastText:se,variant:me})})]})},ma=bt($t);export{ma as default};
//# sourceMappingURL=PageUserManagementList-b892713d.js.map
