{"version":3,"file":"ProductIncomeSchemeCM-77a6d3b9.js","sources":["../../src/views/masterData/productConfiguration/ProductIncomeScheme/ProductIncomeSchemeCM/ProductIncomeSchemeCM.tsx"],"sourcesContent":["/**\n * Author : Kaviraj Manampadi\n * Created on : 28 June, 2023\n * maintained by sachin pandey on 1-November-2023\n **/\n\n/*\n  -------------------------------------------------------\n   Imports:\n  -------------------------------------------------------\n*/\n\nimport LoadingIcon from \"assets/img/common/Loading.svg\";\nimport AclGuard from \"components/AclGuard/AclGuard\";\nimport AutoComplete from \"components/AutoComplete/AutoComplete\";\nimport ButtonBox from \"components/ButtonBox\";\nimport CheckBox from \"components/CheckBox/CheckBox\";\nimport DatePicker from \"components/DatePicker/DatePicker\";\nimport EditableTableV2, { MODE } from \"components/EditableTableV2\";\nimport InputBox from \"components/InputBox\";\nimport InputTextArea from \"components/InputTextArea\";\nimport Menubox from \"components/MenuBox\";\nimport PageTitle from \"components/PageTitle/PageTitle\";\nimport SimpleDropDown from \"components/SimpleDropDown/SimpleDropDown\";\nimport Text from \"components/Text/Text\";\nimport ToastCustom from \"components/Toast\";\nimport { RouteProps, withRouter } from \"hoc/withRouter\";\nimport { Column } from \"primereact/column\";\nimport queryString from \"query-string\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { linkProductIncomeSchemeList } from \"routes\";\nimport IncomeSchemeService from \"services/masterdata/ProductConfig/IncomeSchemeService\";\nimport {\n  currencyFormatToNumber,\n  formatDate,\n  getStandardValidator,\n  messageReplace,\n  parseStandardAPIErrorMessage,\n  stringifyObject,\n  validateGetAPIResponse,\n} from \"utils/CommonUtil\";\nimport {\n  BUTTON_TYPE,\n  CHECKBOX_STYLE_TYPE,\n  ENTITY,\n  INPUT_STYLE_TYPE,\n  OPERATION_TYPE,\n  PAGE_MODE,\n  STATIC_MASTER_TYPE_TOAST_TEXT,\n  TOAST_STYLE_TYPE,\n  VARIANTS,\n} from \"utils/Constant\";\n\nimport EditableTable from \"components/EditableTable/EditableTable\";\nimport ErrorDialog from \"components/ErrorDialog/ErrorDialog\";\nimport FileUploadBox from \"components/FileUploadBox/FileUploadBox\";\nimport MenuBox from \"components/MenuBox\";\nimport SimpleTab from \"components/SimpleTab/SimpleTab\";\nimport { useTranslateText } from \"hook/CustomHooks\";\nimport { numberFormatter } from \"locale\";\nimport { ToastPositionType } from \"primereact/toast\";\nimport FileUploadService from \"services/FileUploadService\";\nimport BankMasterDataService from \"services/masterdata/Banks/BankMasterDataService\";\nimport ProductConfigProductService from \"services/masterdata/ProductConfig/ProductConfigProductService\";\nimport StaticMasterDataService from \"services/masterdata/StaticMaster/StaticMasterDataService\";\nimport StaticMasterTypeService from \"services/masterdata/StaticMaster/StaticMasterTypeService\";\nimport SystemDate from \"services/masterdata/SystemDate\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport { getParsedDate } from \"utils/Util\";\nimport ApprovalRequestService from \"services/masterdata/Approval/ApprovalRequestService\";\n\n/*\n  -------------------------------------------------------\n  PROPS:\n  -------------------------------------------------------\n*/\n\nconst ProductIncomeSchemeCM = (props: RouteProps) => {\n  /*\n    -------------------------------------------------------\n      States\n    -------------------------------------------------------\n  */\n  const [pageObj, setPageObj] = useState<any>({\n    product: \"\",\n    incomeScheme: \"\",\n    name: \"\",\n    bank: \"\",\n    lendingType: \"\",\n    reason: \"\",\n    notes: \"\",\n    salientFeatures: \"\",\n    description: \"\",\n    attachments: [],\n  });\n  const initialObj = {\n    minLoanAmount: \"\",\n    maxLoanAmount: \"\",\n    minYearlyIncome: \"\",\n    minTenor: \"\",\n    maxTenor: \"\",\n    minAge: \"\",\n    maxAge: \"\",\n    minRoi: \"\",\n    maxRoi: \"\",\n    isCoapplicant: false,\n    isGuarantor: false,\n    isBanking: false,\n    abb: {\n      uid: \"\",\n    },\n    isLtvApplicable: false,\n    maxLtv: \"\",\n    maxFoir: \"\",\n    applicableFrom: \"\",\n    applicableTo: \"\",\n    product: {\n      uid: \"\",\n    },\n    bank: {\n      uid: \"\",\n    },\n    lendingType: {\n      uid: \"\",\n    },\n  };\n  const [activeIndex, setActiveIndex] = useState(0);\n  const [pageMode, setPageMode] = useState(PAGE_MODE.CREATE);\n  const [currentDate, setCurrentDate] = useState<any>(\"\");\n  const [uid, setUid] = useState<any>(\"\");\n  const [arrayOfInit, setArrayOfInit] = useState<any>([]);\n  const [initialData, setInitData] = useState<any>({\n    product: \"\",\n    incomeScheme: \"\",\n    name: \"\",\n    bank: \"\",\n    lendingType: \"\",\n    reason: \"\",\n    notes: \"\",\n    salientFeatures: \"\",\n    description: \"\",\n  });\n  const deleteRowRef = useRef(null);\n  const [position, setPosition] = useState<ToastPositionType | undefined>(\"bottom-right\");\n  const [toastMessageVariant, setToastMessageVariant] = useState(TOAST_STYLE_TYPE.PRIMARY);\n  const [toastMessage, setToastMessage] = useState<any>(\"\");\n  const [triggerToast, setTriggerToast] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [navigateBack, setNavigateBack] = useState(false);\n  const [productList, setProductList] = useState<any>([]);\n  const [abbList, setAbbList] = useState<any>([]);\n  const [suggestionsTemplate, setSuggestionsTemplate] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [showDialogAPIError, setShowDialogAPIError] = useState(false);\n  const toastMessageRef = useRef(null);\n  const dataTableRef = useRef<any>(null);\n  const [isUploading, setIsUploading] = useState(false);\n  const isFirstRender = useRef(true);\n  const [firstTimeRendering, setFirstTimeRendering] = useState(true);\n  const [attachmentTypeRecordsAdded, setAttachmentTypeRecordsAdded] = useState([]);\n  const [initialAttachmentTypeTableObj, setInitialAttachmentTypeTableObj] = useState({\n    name: \"\",\n    createdAt: \"\",\n    isUploaded: false,\n    isAdded: true,\n    url: \"\",\n  });\n  const [attachmentTypeRecordsDeleted, setAttachmentTypeRecordsDeleted] = useState([]);\n  const dataTableAttachmentsTypeRef = useRef<any>(null);\n  const [attachmentTypeRecordsUpdated, setAttachmentTypeRecordsUpdated] = useState([]);\n  const activeRowRef = useRef(null);\n  const [, forceUpdate] = useState<boolean>(false);\n  const deleteTableRowRef = useRef(null);\n  const [concatenatedValue, setConcatenatedValue] = useState<string>(``);\n  const [Iname, setIname] = useState(\"\");\n  const [dataTableLoanInterest, setDataTableLoanInterest] = useState<any[]>([]);\n  const [dataTableAttachmentsType, setDataTableAttachmentsType] = useState<any[]>([]);\n  const [dataForReview, setDataForReview] = useState<any>({});\n  const [editModuleCardMenu, setEditModuleCardMenu] = useState<any[]>([\n    {\n      items: [\n        {\n          label: \"Delete\",\n          className: \"\",\n        },\n      ],\n    },\n  ]);\n  const [kebabOptionMenu, setKebabOption] = useState([\n    {\n      items: [\n        {\n          label: \"Delete\",\n          className: \"\",\n        },\n      ],\n    },\n  ]);\n  /*\n    -------------------------------------------------------\n      Hooks: useEffect\n    -------------------------------------------------------\n  */\n\n  useEffect(() => {\n    getProduct();\n    getAbbList();\n    getCurrentDate();\n    const parsed: {\n      mode?: string;\n      uid?: string;\n      reviewMode?: string;\n      finalData?: any;\n      initialData?: any;\n      approvalUid?: any;\n    } = queryString.parse(props.location.search);\n    if (parsed?.mode && parsed?.mode !== undefined) {\n      setPageMode(parsed.mode);\n    }\n    setDataForReview(parsed.finalData ?? parsed.initialData);\n    setUid(parsed.uid);\n    if (parsed.uid) {\n      getInitialData(parsed.uid);\n    }\n    if (parsed.approvalUid) {\n      getFinalData(parsed.approvalUid);\n    }\n    console.log(parsed, \"hars\");\n  }, []);\n\n  useEffect(() => {\n    if (toastMessageRef?.current && toastMessage !== \"\") {\n      // @ts-ignore: will be fixed in future\n      toastMessageRef?.current?.showFunction();\n    }\n  }, [toastMessage, toastMessageVariant, triggerToast]);\n  useEffect(() => {\n    if (errorMessage) {\n      setShowDialogAPIError(true);\n    }\n  }, [errorMessage]);\n\n  useEffect(() => {\n    if (pageMode !== \"CREATE\") {\n      if (isFirstRender.current) {\n        // Skip the effect on initial render\n        isFirstRender.current = false;\n\n        // @ts-ignore: will fix later\n        dataTableRef?.current?.search();\n      }\n    }\n  }, [pageMode]);\n  useEffect(() => {\n    prepareName();\n  }, [pageObj.product, pageObj.incomeScheme, pageObj.bank, pageObj.lendingType]);\n  useEffect(() => {\n    if (activeIndex === 0) {\n      dataTableRef.current?.search();\n    } else if (activeIndex === 1) {\n      dataTableAttachmentsTypeRef.current?.search();\n    }\n  }, [activeIndex]);\n  /*\n    -------------------------------------------------------\n      Handlers: Event handler for onChange, onBlur etc\n    -------------------------------------------------------\n  */\n  const handleFilterChange = (event: any) => {\n    const { name, value } = event.target;\n    if (value.length < concatenatedValue?.length && name === \"name\") {\n      return;\n    }\n    if (name === \"name\") {\n      let val: any = value;\n      val = value.split(concatenatedValue);\n      val = val[val.length - 1];\n      setIname(val);\n    } else {\n      setPageObj((prevFilterObj: any) => ({\n        ...prevFilterObj,\n        [name]: value,\n      }));\n    }\n  };\n\n  const handleInputChange = (event: any) => {\n    const { name, value } = event.target;\n    setPageObj((prevPageObj: any) => ({\n      ...prevPageObj,\n      [name]: value,\n    }));\n  };\n\n  /*\n    -------------------------------------------------------\n      Validators Functions:\n    -------------------------------------------------------\n  */\n  const resetValidator = () => {\n    simpleValidator.current = new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    });\n  };\n  const simpleValidator = useRef(\n    new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    })\n  );\n  const validate = (e: any) => {\n    simpleValidator?.current?.showMessageFor(e?.target?.name);\n  };\n  const validateForm = async () => {\n    let isValid = false;\n    isValid = simpleValidator?.current?.allValid() ?? false;\n\n    if (isValid) {\n      return isValid;\n    } else {\n      forceUpdate((prev) => !prev);\n      simpleValidator?.current?.showMessages();\n      forceUpdate((prev) => !prev);\n      return false;\n    }\n  };\n  /*\n    -------------------------------------------------------\n      Helper  Functions:\n    -------------------------------------------------------\n  */\n  const getInitialData = (uid: any) => {\n    IncomeSchemeService.getPrimaryData(uid)\n\n      .then((res: any) => {\n        console.log(res);\n\n        setPageObj({\n          ...pageObj,\n          product: res?.data?.product?.uid,\n          incomeScheme: {\n            uid: res?.data?.incomeSchemeName?.uid,\n            name: res?.data?.incomeSchemeName?.name,\n          },\n          name: res.data.name,\n          lendingType: { uid: res?.data?.lendingType?.uid, name: res?.data?.lendingType?.name },\n          bank: { uid: res?.data?.bank?.uid, name: res?.data?.bank?.name },\n          reason: res.data?.reason,\n          notes: res.data?.notes,\n          salientFeatures: res.data?.salientFeatures,\n          description: res.data?.description,\n        });\n        setInitData({\n          product: res.data?.product?.uid,\n          incomeScheme: {\n            uid: res.data?.incomeSchemeName.uid,\n            name: res.data?.incomeSchemeName.name,\n          },\n          name: res.data?.name,\n          lendingType: { uid: res.data?.lendingType.uid, name: res.data.lendingType.name },\n          bank: { uid: res.data?.bank.uid, name: res?.data.bank.name },\n          reason: res.data?.reason,\n          notes: res.data?.notes,\n          salientFeatures: res.data?.salientFeatures,\n          description: res.data?.description,\n        });\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n  const getFinalData = (uid: any) => {\n   \n    ApprovalRequestService.getAllForApprovalRequestSummary(0, 10, `/uid/${uid}`)\n\n      .then((res: any) => {\n        console.log(res);\n        const dataForNewValue = JSON.parse(res.data.finalStateJson);\n        setPageObj({\n          ...pageObj,\n          product: dataForNewValue?.product?.uid,\n          incomeScheme: {\n            uid: dataForNewValue?.incomeSchemeName?.uid,\n            // name: dataForNewValue?.incomeSchemeName?.name,\n          },\n          name: dataForNewValue.name,\n          lendingType: { uid: dataForNewValue?.lendingType?.uid },\n          // lendingType: { uid: dataForNewValue?.lendingType?.uid, name: dataForNewValue?.lendingType?.name },\n          bank: { uid: dataForNewValue?.bank?.uid, name: dataForNewValue?.bank?.name },\n          reason: dataForNewValue?.reason,\n          notes: dataForNewValue?.notes,\n          salientFeatures: dataForNewValue?.salientFeatures,\n          description: dataForNewValue?.description,\n        });\n       \n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  async function fetchDataFromAPI1(value: any) {\n    const response = await ProductConfigProductService.getAll();\n    const data = await response.data.results;\n    const filteredDataAPI1 = await data.find((item: any) => item.uid === value);\n\n    return filteredDataAPI1.name;\n  }\n  const prepareName = async () => {\n    let name = \"\";\n    if (pageObj?.product) {\n      const productName = await fetchDataFromAPI1(pageObj?.product);\n      name = name + productName;\n    }\n    if (pageObj?.incomeScheme?.name) {\n      name = name + \"-\" + pageObj?.incomeScheme?.name ?? \"\";\n    }\n    if (pageObj?.bank) {\n      name = name + \"-\" + pageObj?.bank?.name ?? \"\";\n    }\n    if (pageObj?.lendingType) {\n      name = name + \"-\" + pageObj?.lendingType?.name ?? \"\";\n    }\n    setConcatenatedValue(name);\n  };\n  // n\n  /*\n    -------------------------------------------------------\n      ButtonClick Functions:\n    -------------------------------------------------------\n  */\n\n  const payloadForSave = () => {\n    const detailRecords = [\n      ...(dataTableRef?.current?.getAddedRecords() ?? []),\n      ...(dataTableRef?.current?.getDeletedRecords() ?? []),\n      ...(dataTableRef?.current?.getUpdatedRecords() ?? []),\n    ];\n\n    const attachmentRecords = dataTableAttachmentsTypeRef.current\n      ? [\n          ...(dataTableAttachmentsTypeRef?.current?.getAddedRecords() ?? []),\n          ...(dataTableAttachmentsTypeRef?.current?.getDeletedRecords() ?? []),\n          ...(dataTableAttachmentsTypeRef?.current?.getUpdatedRecords() ?? []),\n        ]\n      : dataTableAttachmentsType;\n\n    const obj = {\n      uid: uid,\n      product: {\n        uid: pageObj?.product,\n      },\n      incomeSchemeName: {\n        uid: pageObj?.incomeScheme?.uid,\n      },\n      name: Iname.length > 0 ? `${concatenatedValue}` + `${Iname}` : concatenatedValue,\n      bank: {\n        uid: pageObj?.bank?.uid,\n      },\n      lendingType: {\n        uid: pageObj?.lendingType?.uid,\n      },\n      reason: pageObj?.reason,\n      notes: pageObj?.notes,\n      salientFeatures: pageObj?.salientFeatures,\n      description: pageObj?.description,\n      details: detailRecords.length > 0 ? detailRecords : dataTableLoanInterest,\n      attachments: attachmentRecords.map((record: any) => {\n        return {\n          uid: record.uid,\n\n          attachment:\n            record.isActive === false\n              ? null\n              : {\n                  url: record.url,\n                  name: record.name,\n                },\n          isActive: record.isInactive ? false : record.isActive,\n        };\n      }),\n    };\n\n    const preparedAssets: any = obj.details.map((asset) => {\n      return {\n        ...asset,\n        minLoanAmount: currencyFormatToNumber(asset.minLoanAmount?.toString())?.toString(),\n        maxLoanAmount: currencyFormatToNumber(asset.maxLoanAmount?.toString())?.toString(),\n        minYearlyIncome: currencyFormatToNumber(asset.minYearlyIncome?.toString())?.toString(),\n      };\n    });\n\n    obj.details = preparedAssets;\n\n    if (initialData.length !== 0) {\n      obj?.details.forEach((detail) => {\n        if (pageObj?.product) {\n          detail.product =\n            {\n              uid: pageObj?.product,\n            } ?? \"\";\n        }\n        (detail.lendingType = {\n          uid: pageObj?.lendingType?.uid,\n        }),\n          (detail.bank = {\n            uid: pageObj?.bank?.uid,\n          });\n        if (detail?.isBanking === false) {\n          detail.abb = null;\n        }\n        if (detail?.isLtvApplicable === false) {\n          detail.maxLtv = null;\n        }\n        if (detail?.applicableTo === \"\") {\n          detail.applicableTo = null;\n        }\n      });\n    }\n\n    return obj;\n  };\n  console.log(dataTableRef.current, \"sachin\");\n  const prepareToApprove = () => {\n    const payloadForApprove = {\n      uid: uid,\n      product: {\n        uid: pageObj.product,\n      },\n      incomeSchemeName: {\n        uid: pageObj.incomeScheme.uid,\n      },\n      name: Iname.length > 0 ? `${concatenatedValue}` + `${Iname}` : concatenatedValue,\n      bank: {\n        uid: pageObj.bank.uid,\n      },\n      lendingType: {\n        uid: pageObj.lendingType.uid,\n      },\n      reason: pageObj.reason,\n      notes: pageObj.notes,\n      salientFeatures: pageObj.salientFeatures,\n      description: pageObj.description,\n      details: [\n        ...(dataTableRef.current?.getAddedRecords() ?? []),\n        ...(dataTableRef.current?.getDeletedRecords() ?? []),\n        ...(dataTableRef.current?.getUpdatedRecords() ?? []),\n      ],\n      attachments: [...(dataTableAttachmentsTypeRef?.current?.getAddedRecords() ?? [])],\n    };\n    const preparedAssets: any = payloadForApprove.details.map((asset) => {\n      return {\n        ...asset,\n        minLoanAmount: currencyFormatToNumber(asset.minLoanAmount?.toString())?.toString(),\n        maxLoanAmount: currencyFormatToNumber(asset.maxLoanAmount?.toString())?.toString(),\n        minYearlyIncome: currencyFormatToNumber(asset.minYearlyIncome?.toString())?.toString(),\n      };\n    });\n    payloadForApprove.details = preparedAssets;\n    payloadForApprove.details.forEach((detail) => {\n      if (pageObj.product) {\n        detail.product = {\n          uid: pageObj.product,\n        };\n      }\n      (detail.lendingType = {\n        uid: pageObj.lendingType.uid,\n      }),\n        (detail.bank = {\n          uid: pageObj.bank.uid,\n        });\n      if (!pageObj.isBanking) {\n        detail.abb = null;\n      }\n      if (!pageObj.isLtvApplicable) {\n        detail.maxLtv = null;\n      }\n    });\n    let enrichForSave;\n    const finalJsonObject = payloadForSave();\n    const initialJsonObject = initialData;\n\n    if (pageMode === PAGE_MODE.CREATE) {\n      enrichForSave = {\n        name: Iname.length > 0 ? `${concatenatedValue}` + `${Iname}` : concatenatedValue,\n\n        operationType: OPERATION_TYPE.CREATE,\n        entity: ENTITY.INCOME_SCHEME,\n        initialStateJson: \"\",\n        finalStateJson: stringifyObject(finalJsonObject),\n        reqPayload: stringifyObject(finalJsonObject),\n        reasonForChange: pageObj?.reason ?? \"\",\n      };\n    } else {\n      enrichForSave = {\n        name: Iname.length > 0 ? `${concatenatedValue}` + `${Iname}` : concatenatedValue,\n\n        operationType: OPERATION_TYPE.UPDATE,\n        entity: ENTITY.INCOME_SCHEME,\n        initialStateJson: stringifyObject(initialJsonObject),\n        finalStateJson: stringifyObject(finalJsonObject),\n        reqPayload: stringifyObject(finalJsonObject),\n        reasonForChange: pageObj?.reason ?? \"\",\n      };\n    }\n    return enrichForSave;\n  };\n  const onSaveClick = async () => {\n    setErrorMessage(\"\");\n    let isValid = false;\n\n    isValid = await validateForm();\n\n    if (!isValid) {\n      setPosition(\"top-right\");\n      setToastMessageVariant(TOAST_STYLE_TYPE.QUATERNARY);\n      setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.ERROR);\n      setTriggerToast(!triggerToast);\n      return;\n    }\n\n    if (simpleValidator?.current?.allValid()) {\n      const enrichedObj = payloadForSave();\n      if (pageMode === PAGE_MODE.CREATE) {\n        return IncomeSchemeService.save(enrichedObj)\n          .then((res) => {\n            setToastMessageVariant(TOAST_STYLE_TYPE.PRIMARY);\n            setToastMessage(\"Saved Successfully\");\n            setTriggerToast(!triggerToast);\n            setNavigateBack(true);\n          })\n          .catch((err) => {\n            setErrorMessage(parseStandardAPIErrorMessage(err));\n            setNavigateBack(false);\n          });\n      } else {\n        return IncomeSchemeService.update(uid, enrichedObj)\n          .then((res) => {\n            setToastMessageVariant(TOAST_STYLE_TYPE.PRIMARY);\n            setToastMessage(\"Saved Successfully\");\n            setTriggerToast(!triggerToast);\n            setNavigateBack(true);\n          })\n          .catch((err) => {\n            setErrorMessage(parseStandardAPIErrorMessage(err));\n            setNavigateBack(false);\n          });\n      }\n    } else {\n      setPosition(\"top-right\");\n      setToastMessageVariant(TOAST_STYLE_TYPE.QUATERNARY);\n      setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.ERROR);\n      setTriggerToast(!triggerToast);\n      forceUpdate((prev) => !prev);\n      simpleValidator?.current?.showMessages();\n      forceUpdate((prev) => !prev);\n    }\n  };\n  const onCancelClick = () => {\n    props.navigate(linkProductIncomeSchemeList);\n  };\n  const onApproveClick = async () => {\n    setErrorMessage(\"\");\n    let isValid = false;\n    isValid = await validateForm();\n    if (!isValid) {\n      return;\n    }\n    const enrichedObj = prepareToApprove();\n    return StaticMasterTypeService.approve(enrichedObj)\n      .then((res) => {\n        setToastMessageVariant(TOAST_STYLE_TYPE.PRIMARY);\n        setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.SENT_FOR_APPROVAL);\n        setTriggerToast(!triggerToast);\n        setNavigateBack(true);\n      })\n      .catch((err) => {\n        setErrorMessage(parseStandardAPIErrorMessage(err));\n      });\n  };\n  const onBackClick = () => {\n    props.navigate(linkProductIncomeSchemeList);\n  };\n  const onEditClick = () => {\n    setPageMode(PAGE_MODE.EDIT);\n  };\n  const onAddRow = () => {\n    // @ts-ignore : will do it later\n    dataTableRef?.current?.addRow(initialObj);\n    setArrayOfInit(dataTableRef.current.getCurrentRecords());\n  };\n  const deleteRow = (rowData: any, props: any) => {\n    // @ts-ignore: will fix later\n    dataTableRef?.current?.deleteRow(rowData);\n\n    simpleValidator.current = new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    });\n  };\n\n  /*\n    -------------------------------------------------------\n      Helper Functions:\n    -------------------------------------------------------\n  */\n  const getPageTitle = () => {\n    switch (pageMode) {\n      case PAGE_MODE.CREATE:\n        return \"Product Income Scheme - Create\";\n      case PAGE_MODE.VIEW:\n        return \"Product Income Scheme - View\";\n      case PAGE_MODE.EDIT:\n        return \"Product Income Scheme - Edit\";\n      default:\n        return \"Product Income Scheme - Create\";\n    }\n  };\n  const getCurrentDate = async () => {\n    try {\n      const res = await SystemDate.getCurrentDate();\n      setCurrentDate(formatDate(res.data?.date));\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  /*\n    -------------------------------------------------------\n      Table Render Texts:-\n    -------------------------------------------------------\n  */\n\n  const renderMinLoanAmount = (rowData: any) => {\n    return (\n      <InputBox\n        className=\"text-right\"\n        name={`minLoanAmount${rowData.uid}`}\n        variant={INPUT_STYLE_TYPE.SECONDARY}\n        onChange={(e) => {\n          const rowDataObj = { ...rowData };\n          const amt = currencyFormatToNumber(e.target.value);\n          rowDataObj.minLoanAmount = numberFormatter(amt, \"en-IN\", 0);\n          dataTableRef.current?.reportDataChange(rowDataObj);\n        }}\n        onBlur={validate}\n        value={rowData.minLoanAmount}\n        disabled={!rowData.temp && pageMode === PAGE_MODE.EDIT}\n        validation={simpleValidator?.current?.message(\n          `minLoanAmount${rowData.uid}`,\n          rowData.minLoanAmount,\n          \"mandatory|onlyInteger\"\n        )}\n      />\n    );\n  };\n\n  const renderMaxLoanAmount = (rowData: any) => {\n    console.log(rowData.minLoanAmount, \"minLoanAmount\");\n    return (\n      <InputBox\n        className=\"text-right\"\n        name={`maxLoanAmount${rowData.uid}`}\n        variant={INPUT_STYLE_TYPE.SECONDARY}\n        onChange={(e) => {\n          const rowDataObj = { ...rowData };\n          const amt = currencyFormatToNumber(e.target.value);\n          rowDataObj.maxLoanAmount = numberFormatter(amt, \"en-IN\", 0);\n          dataTableRef.current?.reportDataChange(rowDataObj);\n        }}\n        onBlur={validate}\n        validation={simpleValidator?.current?.message(\n          `maxLoanAmount${rowData.uid}`,\n          currencyFormatToNumber(rowData.maxLoanAmount),\n          `mandatory:num|onlyPositive|min:${currencyFormatToNumber(rowData.minLoanAmount)},num`\n        )}\n        value={rowData.maxLoanAmount}\n        disabled={!rowData.temp && pageMode === PAGE_MODE.EDIT}\n      />\n    );\n  };\n  const renderMinYearlyIncome = (rowData: any) => {\n    return (\n      <InputBox\n        className=\"text-right\"\n        name={`minYearlyIncome${rowData.uid}`}\n        onBlur={validate}\n        variant={INPUT_STYLE_TYPE.SECONDARY}\n        onChange={(e) => {\n          const rowDataObj = { ...rowData };\n          const amt = currencyFormatToNumber(e.target.value);\n          rowDataObj.minYearlyIncome = numberFormatter(amt, \"en-IN\", 0);\n          dataTableRef.current?.reportDataChange(rowDataObj);\n        }}\n        validation={simpleValidator?.current?.message(\n          `minYearlyIncome${rowData.uid}`,\n          currencyFormatToNumber(rowData.minYearlyIncome),\n          `mandatory:num|onlyPositive|min:${currencyFormatToNumber(rowData.minYearlyIncome)},num`\n        )}\n        value={rowData.minYearlyIncome}\n        disabled={!rowData.temp && pageMode === PAGE_MODE.EDIT}\n      />\n    );\n  };\n  const renderMinAge = (rowData: any) => {\n    return (\n      <InputBox\n        className=\"text-right\"\n        name={`minAge${rowData.uid}`}\n        onBlur={validate}\n        variant={INPUT_STYLE_TYPE.SECONDARY}\n        onChange={(e) => {\n          const rowDataObj = { ...rowData };\n          rowDataObj.minAge = e.target.value;\n          dataTableRef.current?.reportDataChange(rowDataObj);\n        }}\n        validation={simpleValidator?.current?.message(\n          `minAge${rowData.uid}`,\n          rowData.minAge,\n          \"mandatory|onlyInteger|min:0,num\"\n        )}\n        value={rowData.minAge}\n        disabled={!rowData.temp && pageMode === PAGE_MODE.EDIT}\n      />\n    );\n  };\n  const renderMaxAge = (rowData: any) => {\n    return (\n      <InputBox\n        className=\"text-right\"\n        name={`maxAge${rowData.uid}`}\n        variant={INPUT_STYLE_TYPE.SECONDARY}\n        onChange={(e) => {\n          const rowDataObj = { ...rowData };\n          rowDataObj.maxAge = e.target.value;\n          dataTableRef.current?.reportDataChange(rowDataObj);\n        }}\n        onBlur={validate}\n        validation={\n          parseInt(rowData.maxAge) < parseInt(rowData.minAge)\n            ? \"Max age  cannot be less than Min age \"\n            : simpleValidator?.current?.message(\n                `maxAge${rowData.uid}`,\n                rowData.maxAge,\n                \"mandatory|checkNumber|onlyPositive|maxDecimal:2|maxDigits:9\"\n              )\n        }\n        value={rowData.maxAge}\n        disabled={!rowData.temp && pageMode === PAGE_MODE.EDIT}\n      />\n    );\n  };\n  const renderMinTenure = (rowData: any) => {\n    return (\n      <InputBox\n        className=\"text-right\"\n        name={`minTenor${rowData.uid}`}\n        variant={INPUT_STYLE_TYPE.SECONDARY}\n        onChange={(e) => {\n          const rowDataObj = { ...rowData };\n          rowDataObj.minTenor = e.target.value;\n          dataTableRef.current?.reportDataChange(rowDataObj);\n        }}\n        onBlur={validate}\n        validation={simpleValidator?.current?.message(\n          `minTenor${rowData.uid}`,\n          rowData.minTenor,\n          \"mandatory|onlyInteger|min:0,num\"\n        )}\n        value={rowData.minTenor}\n        disabled={!rowData.temp && pageMode === PAGE_MODE.EDIT}\n      />\n    );\n  };\n  const renderMaxTenure = (rowData: any) => {\n    return (\n      <InputBox\n        className=\"text-right\"\n        name={`maxTenor${rowData.uid}`}\n        variant={INPUT_STYLE_TYPE.SECONDARY}\n        onChange={(e) => {\n          const rowDataObj = { ...rowData };\n          rowDataObj.maxTenor = e.target.value;\n          dataTableRef.current?.reportDataChange(rowDataObj);\n        }}\n        onBlur={validate}\n        validation={\n          parseInt(rowData.maxTenor) < parseInt(rowData.minTenor)\n            ? \"Max Tenure  cannot be less than Min Tenure \"\n            : simpleValidator?.current?.message(\n                `maxTenor${rowData.uid}`,\n                rowData.maxTenor,\n                \"mandatory|checkNumber|onlyPositive|maxDecimal:2|maxDigits:9\"\n              )\n        }\n        value={rowData.maxTenor}\n        disabled={!rowData.temp && pageMode === PAGE_MODE.EDIT}\n      />\n    );\n  };\n  const renderMinRoi = (rowData: any) => {\n    return (\n      <InputBox\n        className=\"text-right\"\n        name={`minRoi${rowData.uid}`}\n        variant={INPUT_STYLE_TYPE.SECONDARY}\n        onChange={(e) => {\n          const rowDataObj = { ...rowData };\n          rowDataObj.minRoi = e.target.value;\n          dataTableRef.current?.reportDataChange(rowDataObj);\n        }}\n        onBlur={validate}\n        validation={simpleValidator?.current?.message(\n          `minRoi${rowData.uid}`,\n          rowData.minRoi,\n          \"mandatory|min:0,num|maxDecimal:2\"\n        )}\n        value={rowData.minRoi}\n        disabled={!rowData.temp && pageMode === PAGE_MODE.EDIT}\n      />\n    );\n  };\n  const renderMaxRoi = (rowData: any) => {\n    return (\n      <InputBox\n        className=\"text-right\"\n        name={`maxRoi${rowData.uid}`}\n        variant={INPUT_STYLE_TYPE.SECONDARY}\n        onChange={(e) => {\n          const rowDataObj = { ...rowData };\n          rowDataObj.maxRoi = e.target.value;\n          dataTableRef.current?.reportDataChange(rowDataObj);\n        }}\n        onBlur={validate}\n        validation={\n          parseInt(rowData.maxRoi) < parseInt(rowData.minRoi)\n            ? \"Max ROI  cannot be less than Min ROI\"\n            : simpleValidator?.current?.message(\n                `maxRoi${rowData.uid}`,\n                rowData.maxRoi,\n                \"mandatory|checkNumber|onlyPositive|maxDecimal:2|maxDigits:9\"\n              )\n        }\n        value={rowData.maxRoi}\n        disabled={!rowData.temp && pageMode === PAGE_MODE.EDIT}\n      />\n    );\n  };\n  const renderTextLTV = (rowData: any) => {\n    return (\n      <InputBox\n        className=\"text-right\"\n        name={`maxLtv${rowData.uid}`}\n        variant={INPUT_STYLE_TYPE.SECONDARY}\n        onChange={(e) => {\n          const rowDataObj = { ...rowData };\n          rowDataObj.maxLtv = e.target.value;\n          dataTableRef.current?.reportDataChange(rowDataObj);\n        }}\n        value={rowData.maxLtv}\n        disabled={!rowData.temp || !rowData.isLtvApplicable}\n      />\n    );\n  };\n  const renderTextFOIR = (rowData: any) => {\n    return (\n      <InputBox\n        className=\"text-right\"\n        name={`maxFoir${rowData.uid}`}\n        variant={INPUT_STYLE_TYPE.SECONDARY}\n        onChange={(e) => {\n          const rowDataObj = { ...rowData };\n          rowDataObj.maxFoir = e.target.value;\n          dataTableRef.current?.reportDataChange(rowDataObj);\n        }}\n        onBlur={validate}\n        validation={simpleValidator?.current?.message(\n          `maxFoir${rowData.uid}`,\n          rowData.maxFoir,\n          \"mandatory|onlyInteger|min:0,num|maxDecimal:2\"\n        )}\n        value={rowData.maxFoir}\n        disabled={!rowData.temp && pageMode === PAGE_MODE.EDIT}\n      />\n    );\n  };\n  const renderIsCoApplicant = (rowData: any) => {\n    return (\n      <CheckBox\n        name=\"isCoapplicant\"\n        variant={CHECKBOX_STYLE_TYPE.PRIMARY}\n        onChange={(e) => {\n          const rowDataObj = { ...rowData };\n          rowDataObj.isCoapplicant = e.target.checked;\n          dataTableRef.current?.reportDataChange(rowDataObj);\n        }}\n        checked={rowData.isCoapplicant}\n        disabled={!rowData.temp && pageMode === PAGE_MODE.EDIT}\n      />\n    );\n  };\n  const renderIsGarantor = (rowData: any) => {\n    return (\n      <CheckBox\n        name=\"isGuarantor\"\n        variant={CHECKBOX_STYLE_TYPE.PRIMARY}\n        onChange={(e) => {\n          const rowDataObj = { ...rowData };\n          rowDataObj.isGuarantor = e.target.checked;\n          dataTableRef.current?.reportDataChange(rowDataObj);\n        }}\n        checked={rowData.isGuarantor}\n        disabled={!rowData.temp && pageMode === PAGE_MODE.EDIT}\n      />\n    );\n  };\n  const renderIsBanking = (rowData: any) => {\n    return (\n      <CheckBox\n        name=\"isBanking\"\n        variant={CHECKBOX_STYLE_TYPE.PRIMARY}\n        onChange={(e) => {\n          const rowDataObj = { ...rowData };\n          if (!e.target.checked) {\n            rowDataObj.abb.uid = \"\";\n          }\n          rowDataObj.isBanking = e.target.checked;\n          dataTableRef.current?.reportDataChange(rowDataObj);\n        }}\n        checked={rowData.isBanking}\n        disabled={!rowData.temp && pageMode === PAGE_MODE.EDIT}\n      />\n    );\n  };\n\n  const renderAbb = (rowData: any) => {\n    return (\n      <SimpleDropDown\n        name=\"abb\"\n        variant={INPUT_STYLE_TYPE.SECONDARY}\n        onChange={(e) => {\n          const rowDataObj = { ...rowData };\n          rowDataObj.abb.uid = e.target.value;\n          dataTableRef.current?.reportDataChange(rowDataObj);\n        }}\n        value={rowData?.abb?.uid}\n        options={abbList}\n        optionLabel=\"name\"\n        optionValue=\"uid\"\n        disabled={!rowData.temp || !rowData.isBanking}\n      />\n    );\n  };\n  const renderIsLtvApplicable = (rowData: any) => {\n    return (\n      <CheckBox\n        name=\"isLtvApplicable\"\n        variant={CHECKBOX_STYLE_TYPE.PRIMARY}\n        onChange={(e) => {\n          const rowDataObj = { ...rowData };\n          if (!e.target.checked) {\n            rowDataObj.maxLtv = \"\";\n          }\n          rowDataObj.isLtvApplicable = e.target.checked;\n          dataTableRef.current?.reportDataChange(rowDataObj);\n        }}\n        checked={rowData.isLtvApplicable}\n        disabled={!rowData.temp}\n      />\n    );\n  };\n  const renderActions = (rowData: any, props: any) => {\n    return (\n      <div className=\"flex items-center justify-center w-20 ml-2\">\n        <ButtonBox\n          buttonType={BUTTON_TYPE.MENU}\n          onClick={(e: any) => onToggleKebabMenu(rowData, dataTableRef, e)}\n          className=\"!rounded-none bg-transparent !hover:bg-primary-gray-300\"\n        />\n      </div>\n    );\n  };\n  const renderDateFrom = (rowData: any) => {\n    const applicableFromDate = new Date(rowData.applicableFrom);\n    const parsedYear = applicableFromDate.getFullYear();\n    const parsedMonth = applicableFromDate.getMonth();\n    const parsedDay = applicableFromDate.getDate();\n    const parsedDate = new Date(parsedYear, parsedMonth, parsedDay);\n\n    return (\n      <DatePicker\n        disabled={!rowData.temp && pageMode === PAGE_MODE.EDIT}\n        name={`applicableFrom${rowData.uid}`}\n        value={rowData.applicableFrom != \"\" ? parsedDate : \"\"}\n        variant={INPUT_STYLE_TYPE.SECONDARY}\n        onChange={(e) => {\n          const rowDataObj = { ...rowData };\n          rowDataObj.applicableFrom = e.target.value;\n          dataTableRef.current?.reportDataChange(rowDataObj);\n        }}\n        onBlur={validate}\n        validation={\n          new Date(rowData.expiryDate) < new Date(currentDate)\n            ? \"Applicable from Date should not be less than System Date\"\n            : simpleValidator?.current?.message(\n                `applicableFrom${rowData.uid}`,\n                rowData.applicableFrom,\n                \"mandatory\"\n              )\n        }\n        placeholder=\"DD-MMM-YYYY\"\n      />\n    );\n  };\n  const renderDateTo = (rowData: any) => {\n    return (\n      <DatePicker\n        // disabled={\n        //   !rowData.temp && pageMode === PAGE_MODE.EDIT\n        //     ? rowData.applicableTo\n        //       ? true\n        //       : false\n        //     : false\n        // }\n        name={`applicableTo${rowData.uid}`}\n        value={rowData.applicableTo != null ? getParsedDate(rowData.applicableTo) : \"\"}\n        variant={INPUT_STYLE_TYPE.SECONDARY}\n        onChange={(e) => {\n          const rowDataObj = { ...rowData };\n          rowDataObj.applicableTo = e.target.value ?? \"\";\n          dataTableRef.current?.reportDataChange(rowDataObj);\n        }}\n        minDate={getParsedDate(rowData.applicableFrom)}\n        placeholder=\"DD-MMM-YYYY\"\n      />\n    );\n  };\n  /*\n    -------------------------------------------------------\n    simpleDropDown  AutoCompletes and itemTemplate :-\n    -------------------------------------------------------\n  */\n  // DropDowns-\n  const getProduct = () => {\n    ProductConfigProductService.getAll()\n      .then((res: any) => {\n        setProductList([...res.data.results] ?? []);\n      })\n      .catch((err) => {\n        console.log(\"err\");\n      });\n  };\n  const getAbbList = () => {\n    StaticMasterDataService.getAll(0, 10, \"&staticMasterType.code=ABB_MONTHS\")\n      .then((res: any) => {\n        setAbbList([...res.data.results] ?? []);\n      })\n      .catch((err) => {\n        console.log(\"err\");\n      });\n  };\n  // autoCompletes-\n  const searchAutoCompleteIncomeScheme = async (event: any) => {\n    let suggestionsTemplate: any = [];\n    setIsLoading(true);\n    await StaticMasterDataService.getAll(\n      0,\n      10,\n      `&staticMasterType.code=INCOME_SCHEME_NAME&name:lk=${event.query}`\n    ).then((res) => {\n      if (validateGetAPIResponse(res)) {\n        suggestionsTemplate = [...res.data.results];\n        setIsLoading(false);\n      }\n    });\n    setSuggestionsTemplate(suggestionsTemplate);\n  };\n  const itemTemplateForIncomeScheme = (item: any) => {\n    if (item.code === undefined) {\n      return (\n        <div className=\"flex flex-col items-center justify-center h-39\">\n          <img src={LoadingIcon} alt=\"search-icon\" className=\" h-7 w-7\" />\n          <Text className=\"mt-2 text-primary-labelColor\" label=\"Loading...\" />\n        </div>\n      );\n    }\n    return (\n      <div className=\"flex flex-col\">\n        <Text className=\"text-primary-labelColor\" label={item.name} />\n      </div>\n    );\n  };\n  const searchAutoCompleteLendingType = async (event: any) => {\n    let suggestionsTemplate: any = [];\n    setIsLoading(true);\n    await StaticMasterDataService.getAll(\n      0,\n      10,\n      `&staticMasterType.code=PRODUCT_LENDING_TYPE&name:lk=${event.query}`\n    ).then((res) => {\n      if (validateGetAPIResponse(res)) {\n        suggestionsTemplate = [...res.data.results];\n        setIsLoading(false);\n      }\n    });\n    setSuggestionsTemplate(suggestionsTemplate);\n  };\n  const searchAutoCompleteBankFinancier = async (event: any) => {\n    let suggestionsTemplate: any = [];\n    setIsLoading(true);\n    await BankMasterDataService.getAll(0, 10, `&isActive=true&name:lk=${event.query}&`).then(\n      (res) => {\n        if (validateGetAPIResponse(res)) {\n          suggestionsTemplate = [...res.data.results];\n          setIsLoading(false);\n        }\n      }\n    );\n    setSuggestionsTemplate(suggestionsTemplate);\n  };\n  // itemTemplate-\n  const itemTemplateForLandingType = (item: any) => {\n    if (item.code === undefined) {\n      return (\n        <div className=\"flex flex-col items-center justify-center h-39\">\n          <img src={LoadingIcon} alt=\"search-icon\" className=\" h-7 w-7\" />\n          <Text className=\"mt-2 text-primary-labelColor\" label=\"Loading...\" />\n        </div>\n      );\n    }\n    return (\n      <div className=\"flex flex-col\">\n        <Text className=\"text-primary-labelColor\" label={item.name} />\n        {/* <Text className=\"text-secondary-gray-500 text-xxs\" label={item.designation} /> */}\n        {/* <Text className=\"text-secondary-gray-500 text-xxs\" label={item.emailId} /> */}\n      </div>\n    );\n  };\n  const itemTemplateForBank = (item: any) => {\n    if (item.name === undefined) {\n      return (\n        <div className=\"flex flex-col items-center justify-center h-39\">\n          <img src={LoadingIcon} alt=\"search-icon\" className=\" h-7 w-7\" />\n          <Text className=\"mt-2 text-primary-labelColor\" label=\"Loading...\" />\n        </div>\n      );\n    }\n    return (\n      <div className=\"flex flex-col\">\n        <Text className=\"text-primary-labelColor\" label={item.name} />\n      </div>\n    );\n  };\n\n  const onToggleMenu = (rowData: any, props: any, e: any) => {\n    setEditModuleCardMenu((prevState) => [\n      {\n        ...prevState[0], // Retain the other properties of the first object\n        items: [\n          {\n            ...prevState[0].items[0], // Retain the other properties of the first item\n            command: () => {\n              deleteRow(rowData, props);\n            }, // Add the new key-value pair\n          },\n        ],\n      },\n    ]);\n\n    // @ts-ignore: will fix later\n    deleteTableRowRef?.current?.toggle(e);\n    console.log(editModuleCardMenu);\n  };\n  const renderActionsAttachments = (rowData: any) => {\n    return (\n      <div className=\"flex items-center justify-center w-20\">\n        <ButtonBox\n          buttonType={BUTTON_TYPE.MENU}\n          onClick={(e: any) => onToggleKebabMenu(rowData, dataTableAttachmentsTypeRef, e)}\n          className=\"!rounded-none bg-transparent !hover:bg-primary-gray-300\"\n        />\n      </div>\n    );\n  };\n  const onToggleKebabMenu = (rowData: any, ref: any, e: any) => {\n    setKebabOption((prevState) => [\n      {\n        ...prevState[0], // Retain the other properties of the first object\n        items: [\n          {\n            ...prevState[0].items[0], // Retain the other properties of the first item\n            command: () => {\n              ref?.current?.deleteRow(rowData);\n              console.log(\"Delete Row\");\n            }, // Add the new key-value pair\n          },\n        ],\n      },\n    ]);\n\n    // @ts-ignore: will fix later\n    deleteTableRowRef?.current?.toggle(e);\n  };\n  const renderTabContent = (tab: any, index: any) => {\n    const key = tab.key;\n    switch (key) {\n      case \"Tab1\":\n        return (\n          <div className=\"w-full\">\n            <div className=\"flex justify-between w-full mt-3 mb-2\">\n              <div></div>\n              <ButtonBox buttonType={BUTTON_TYPE.ICON_TEXT_ROW} onClick={onAddRow} />\n            </div>\n            <div className=\"w-full\">\n              <EditableTableV2\n                ref={dataTableRef}\n                uniqueKey=\"uid\"\n                standardDataFormatPromise={IncomeSchemeService.getAllForTable}\n                search={`&incomeSchemeProduct.uid=${uid}&isActive=true`}\n                mode={pageMode === PAGE_MODE.CREATE ? \"CREATE\" : \"UPDATE\"}\n                allRecords={dataTableLoanInterest}\n              >\n                <Column\n                  className=\"h-12 p-1 pl-6 text-xs text-left text-primary-ptext-1000\"\n                  header=\"Min Loan amount*(₹)\"\n                  body={renderMinLoanAmount}\n                  style={{ minWidth: \"150px\" }}\n                />\n                <Column\n                  className=\"h-12 p-1 pl-6 text-xs text-left text-primary-ptext-1000\"\n                  header=\"Max Loan amount*(₹)\"\n                  body={renderMaxLoanAmount}\n                  style={{ minWidth: \"150px\" }}\n                />\n                <Column\n                  className=\"h-12 p-1 pl-6 text-xs text-left text-primary-ptext-1000\"\n                  header=\"Min Yearly Income*(₹)\"\n                  body={renderMinYearlyIncome}\n                  style={{ minWidth: \"150px\", width: \"150px\" }}\n                />\n                <Column\n                  className=\"h-12 p-1 pl-6 text-xs text-left text-primary-ptext-1000\"\n                  header=\"Min age*\"\n                  body={renderMinAge}\n                  style={{ minWidth: \"150px\" }}\n                />\n                <Column\n                  className=\"h-12 p-1 pl-6 text-xs text-left text-primary-ptext-1000\"\n                  header=\"Max age*\"\n                  body={renderMaxAge}\n                  style={{ minWidth: \"150px\" }}\n                />\n                <Column\n                  className=\"h-12 p-1 pl-6 text-xs text-left text-primary-ptext-1000\"\n                  header=\"Min. tenure (Month)*\"\n                  body={renderMinTenure}\n                  style={{ minWidth: \"150px\" }}\n                />\n                <Column\n                  className=\"h-12 p-1 pl-6 text-xs text-left text-primary-ptext-1000\"\n                  header=\"Max tenure (Month)*\"\n                  body={renderMaxTenure}\n                  style={{ minWidth: \"150px\" }}\n                />\n                <Column\n                  className=\"h-12 p-1 pl-6 text-xs text-left text-primary-ptext-1000\"\n                  header=\"Min. ROI (%)*\"\n                  body={renderMinRoi}\n                  style={{ minWidth: \"150px\" }}\n                />\n                <Column\n                  className=\"h-12 p-1 pl-6 text-xs text-left text-primary-ptext-1000\"\n                  header=\"Max ROI (%)*\"\n                  body={renderMaxRoi}\n                  style={{ minWidth: \"150px\" }}\n                />\n                <Column\n                  className=\"h-12 p-1 pl-6 text-xs text-left text-primary-ptext-1000\"\n                  header=\"Coapplicant\"\n                  body={renderIsCoApplicant}\n                  style={{ minWidth: \"150px\" }}\n                />\n                <Column\n                  className=\"h-12 p-1 pl-6 text-xs text-left text-primary-ptext-1000\"\n                  header=\"Guarantor\"\n                  body={renderIsGarantor}\n                  style={{ minWidth: \"150px\" }}\n                />\n                <Column\n                  className=\"h-12 p-1 pl-6 text-xs text-left text-primary-ptext-1000\"\n                  header=\"Banking\"\n                  body={renderIsBanking}\n                  style={{ minWidth: \"150px\" }}\n                />\n                <Column\n                  className=\"h-12 p-1 pl-6 text-xs text-left text-primary-ptext-1000\"\n                  header=\"ABB (Months)\"\n                  body={renderAbb}\n                  style={{ minWidth: \"150px\" }}\n                />\n                <Column\n                  className=\"h-12 p-1 pl-6 text-xs text-left text-primary-ptext-1000\"\n                  header=\"LTV Applicable\"\n                  body={renderIsLtvApplicable}\n                  style={{ minWidth: \"150px\" }}\n                />\n                <Column\n                  className=\"h-12 p-1 pl-6 text-xs text-left text-primary-ptext-1000\"\n                  header=\"Max. LTV(%)\"\n                  body={renderTextLTV}\n                  style={{ minWidth: \"150px\" }}\n                />\n                <Column\n                  className=\"h-12 p-1 pl-6 text-xs text-left text-primary-ptext-1000\"\n                  header=\"Max. FOIR(%)*\"\n                  body={renderTextFOIR}\n                  style={{ minWidth: \"150px\" }}\n                />\n\n                <Column\n                  className=\"h-12 p-1 pt-2 pl-6 text-xs text-left text-primary-ptext-1000\"\n                  header={\"From*\"}\n                  body={renderDateFrom}\n                  style={{ minWidth: \"150px\" }}\n                />\n                <Column\n                  className=\"h-12 p-1 pt-2 pl-6 text-xs text-left text-primary-ptext-1000\"\n                  header=\"To\"\n                  body={renderDateTo}\n                  style={{ minWidth: \"150px\" }}\n                />\n                <Column\n                  className=\"h-12 text-xs text-primary-ptext-1000 \"\n                  header={\"Actions\"}\n                  style={{ minWidth: \"200px\", width: \"200px\" }}\n                  body={renderActions}\n                />\n              </EditableTableV2>\n            </div>\n          </div>\n        );\n      case \"Tab2\":\n        return (\n          <div className=\"w-full\">\n            <div className=\"flex justify-between w-full mt-2 mb-1\">\n              <div></div>\n              <div>\n                <FileUploadBox onSelect={onUploadAttachment} variant={VARIANTS.PRIMARY} />\n              </div>\n            </div>\n            <div className=\"w-full\">\n              <EditableTableV2\n                standardDataFormatPromise={IncomeSchemeService.getAllAttachmentDataForIncomeScheme}\n                style={{ width: \"100%\" }}\n                breakpoint=\"767px\"\n                className=\"border border-secondary-concrete px-0 overflow-x-auto mt-4 rounded-lg read-only-table !min-h-111 w-full\"\n                dataKey=\"id\"\n                search={`incomeSchemeProduct.uid=${uid}&isActive=true&`}\n                ref={dataTableAttachmentsTypeRef}\n                paginator={PAGE_MODE.CREATE === pageMode}\n                mode={pageMode === PAGE_MODE.CREATE ? \"CREATE\" : \"UPDATE\"}\n                uniqueKey=\"uid\"\n                allRecords={dataTableAttachmentsType}\n              >\n                <Column\n                  className=\"w-2/12 h-12 pt-3 pl-6 text-xs text-left text-primary-ptext-1000\"\n                  header={useTranslateText(\n                    \"table.header.productConfiguration.productDetails.attachment\"\n                  )}\n                  body={(rowData: any) => {\n                    return rowData?.attachment?.name ? rowData?.attachment?.name : rowData?.name;\n                  }}\n                />\n\n                <Column\n                  className=\"w-2/12 h-12 pt-3 pl-6 text-xs text-left text-primary-ptext-1000\"\n                  header={useTranslateText(\n                    \"table.header.productConfiguration.productDetails.uploadedDate\"\n                  )}\n                  body={(rowData: any) => {\n                    if (rowData?.attachment?.createdAt) {\n                      return formatDate(rowData.attachment.createdAt);\n                    } else {\n                      return rowData.createdAt;\n                    }\n                  }}\n                />\n                <Column\n                  className=\"w-2/12 h-12 pt-3 pl-6 text-xs text-left text-primary-ptext-1000\"\n                  header={useTranslateText(\n                    \"table.header.productConfiguration.productDetails.status\"\n                  )}\n                  body={(rowData: any) => {\n                    if (isUploading) {\n                      return \"Uploading\";\n                    } else {\n                      return \"Uploaded\";\n                    }\n                  }}\n                />\n\n                <Column\n                  className=\"flex items-baseline w-2/12 h-12 pt-4 pl-6 text-xs text-left text-primary-ptext-1000\"\n                  header={useTranslateText(\n                    \"table.header.productConfiguration.productDetails.actions\"\n                  )}\n                  body={renderActionsAttachments}\n                />\n              </EditableTableV2>\n            </div>\n          </div>\n        );\n      default:\n        return <></>;\n    }\n  };\n  const handleChangeTab = (e: any) => {\n    resetValidator();\n    setActiveIndex(e.index);\n  };\n  const handleBeforeChangeTab = (e: any) => {\n    if (activeIndex === 0) {\n      const records = [\n        ...(dataTableRef.current?.getAddedRecords() ?? []),\n        ...(dataTableRef.current?.getUpdatedRecords() ?? []),\n        ...(dataTableRef.current?.getDeletedRecords() ?? []),\n      ];\n      setDataTableLoanInterest(records);\n    } else if (activeIndex === 1) {\n      const records = [\n        ...(dataTableAttachmentsTypeRef.current?.getAddedRecords() ?? []),\n        ...(dataTableAttachmentsTypeRef.current?.getUpdatedRecords() ?? []),\n        ...(dataTableAttachmentsTypeRef.current?.getDeletedRecords() ?? []),\n      ];\n      setDataTableAttachmentsType(records);\n    }\n  };\n  const INITIAL_ATTACHMENT_TYPE_OBJ = JSON.parse(\n    JSON.stringify({\n      name: \"\",\n      createdAt: \"\",\n      isUploaded: false,\n      isAdded: true,\n      url: \"\",\n    })\n  );\n  const onUploadAttachment = async (event: any) => {\n    setIsUploading(true);\n    console.log(\"Upload Attachment\");\n    const file = event.files[0];\n    const curDate = new Date();\n    const timestamp = new Date().getTime();\n    const randomString = Math.random().toString(36).substring(2, 8);\n    const objectName = `${file.name}_${timestamp}_${randomString}`;\n    dataTableAttachmentsTypeRef.current?.addRow({\n      ...INITIAL_ATTACHMENT_TYPE_OBJ,\n      name: file.name,\n      isUploading: false,\n    });\n    setIsUploading(true);\n    try {\n      const res = await FileUploadService.saveFile(file, objectName);\n      console.log(res);\n      const newAddRows = dataTableAttachmentsTypeRef.current?.getLastAddedRecord();\n      dataTableAttachmentsTypeRef.current?.reportDataChange({\n        ...newAddRows,\n        name: file.name,\n        url: res.data?.url,\n        isUploaded: true,\n        createdAt: formatDate(curDate),\n        isUploading: false,\n      });\n      setIsUploading(false);\n    } catch (error) {\n      console.log(error);\n      setIsUploading(true);\n    }\n  };\n\n  /*\n    -------------------------------------------------------\n      Sectional Render Functions: For Sub components / section wise renders\n    -------------------------------------------------------\n  */\n  const {\n    product,\n    incomeScheme,\n    name,\n    bank,\n    lendingType,\n    reason,\n    notes,\n    salientFeatures,\n    description,\n  } = pageObj;\n\n  return (\n    <AclGuard>\n      <div className=\"flex flex-col gap-3\">\n        <div className=\"flex items-center justify-between w-full\">\n          <div className=\" h-7.5\">\n            <PageTitle title={getPageTitle()} />\n          </div>\n          <div className=\"flex mr-5\">\n            {pageMode === PAGE_MODE.CREATE || pageMode === PAGE_MODE.EDIT ? (\n              <>\n                <div className=\"mr-5\">\n                  <ButtonBox buttonType={BUTTON_TYPE.CANCEL_OUTLINE} onClick={onCancelClick} />\n                </div>\n                <div className=\"mr-10\">\n                  <ButtonBox\n                    buttonType={BUTTON_TYPE.SAVE_OUTLINE}\n                    onClickWithLoader={onSaveClick}\n                  />\n                </div>\n                <div>\n                  <ButtonBox\n                    className=\"approve-primary\"\n                    buttonType={BUTTON_TYPE.SEND_FOR_APPROVAL}\n                    onClickWithLoader={onApproveClick}\n                  />\n                </div>\n              </>\n            ) : (\n              <>\n                <div className=\"mr-5\">\n                  <ButtonBox buttonType={BUTTON_TYPE.BACK_OUTLINE} onClick={onBackClick} />\n                </div>\n                <div className=\"\">\n                  <ButtonBox\n                    buttonType={BUTTON_TYPE.EDIT_OUTLINE}\n                    className=\"blue-primary\"\n                    onClick={onEditClick}\n                  />\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n        <AclGuard override={{ read: [PAGE_MODE.VIEW, PAGE_MODE.REVIEW].includes(pageMode) }}>\n          <div className=\"grid grid-cols-1 gap-3 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-4\">\n            <div className=\"col-span-1 sm:col-span-1 md:col-span-1 lg:col-span-1\">\n              <SimpleDropDown\n                label=\"input.productConfiguration.incomeScheme.product\"\n                name=\"product\"\n                variant={INPUT_STYLE_TYPE.SECONDARY}\n                onChange={handleFilterChange}\n                value={product}\n                options={productList}\n                optionLabel=\"name\"\n                optionValue=\"uid\"\n                onBlur={validate}\n                disabled={pageMode !== PAGE_MODE.CREATE}\n                validation={simpleValidator?.current?.message(\"product\", product, \"mandatory\")}\n              />\n            </div>\n            <div className=\"col-span-1 sm:col-span-1 md:col-span-1 lg:col-span-1\">\n              <AutoComplete\n                label=\"input.productConfiguration.incomeScheme.incomeScheme\"\n                name=\"incomeScheme\"\n                field=\"name\"\n                value={incomeScheme}\n                variant={INPUT_STYLE_TYPE.PRIMARY}\n                suggestions={suggestionsTemplate}\n                completeMethod={searchAutoCompleteIncomeScheme}\n                onChange={handleFilterChange}\n                itemTemplate={itemTemplateForIncomeScheme}\n                onBlur={validate}\n                disabled={pageMode !== PAGE_MODE.CREATE}\n                validation={simpleValidator?.current?.message(\n                  \"incomeScheme\",\n                  incomeScheme,\n                  \"mandatory|max:100\"\n                )}\n                loader={isLoading}\n              />\n            </div>\n\n            <div className=\"col-span-1 sm:col-span-1 md:col-span-1 lg:col-span-1\">\n              <AutoComplete\n                label=\"label.productConfiguration.incomeScheme.bankOrFinancier\"\n                name=\"bank\"\n                field=\"name\"\n                value={bank}\n                variant={INPUT_STYLE_TYPE.PRIMARY}\n                suggestions={suggestionsTemplate}\n                completeMethod={searchAutoCompleteBankFinancier}\n                onChange={handleFilterChange}\n                itemTemplate={itemTemplateForBank}\n                onBlur={validate}\n                validation={simpleValidator?.current?.message(\"bank\", bank, \"mandatory\")}\n                disabled={pageMode !== PAGE_MODE.CREATE}\n                loader={isLoading}\n              />\n            </div>\n            <div className=\"col-span-1 sm:col-span-1 md:col-span-1 lg:col-span-1\">\n              <AutoComplete\n                label=\"label.productConfiguration.incomeScheme.lendingType\"\n                name=\"lendingType\"\n                field=\"name\"\n                value={lendingType}\n                variant={INPUT_STYLE_TYPE.PRIMARY}\n                suggestions={suggestionsTemplate}\n                completeMethod={searchAutoCompleteLendingType}\n                onChange={handleFilterChange}\n                itemTemplate={itemTemplateForLandingType}\n                onBlur={validate}\n                validation={simpleValidator?.current?.message(\n                  \"lendingType\",\n                  lendingType,\n                  \"mandatory\"\n                )}\n                disabled={pageMode !== PAGE_MODE.CREATE}\n              />\n            </div>\n            <div className=\"col-span-1 sm:col-span-3 md:col-span-3 lg:col-span-3\">\n              <InputBox\n                label=\"label.productConfiguration.incomeScheme.name\"\n                name=\"name\"\n                variant={INPUT_STYLE_TYPE.SECONDARY}\n                onChange={handleFilterChange}\n                value={Iname ? `${concatenatedValue}${Iname}` : concatenatedValue}\n                disabled\n              />\n            </div>\n            <div className=\"hidden  md:col-span-1\"></div>\n\n            <div className=\"col-span-2 md:col-span-2 lg:col-span-2\">\n              <InputTextArea\n                label=\"input.productConfiguration.incomeScheme.salientFeatures\"\n                name=\"salientFeatures\"\n                variant={INPUT_STYLE_TYPE.SECONDARY}\n                maxCount={200}\n                onChange={handleInputChange}\n                value={salientFeatures}\n                disabled={pageMode !== PAGE_MODE.CREATE}\n              />\n            </div>\n            <div className=\"col-span-2 md:col-span-2 lg:col-span-2\">\n              <InputTextArea\n                label=\"input.productConfiguration.incomeScheme.note\"\n                name=\"notes\"\n                variant={INPUT_STYLE_TYPE.SECONDARY}\n                maxCount={200}\n                onChange={handleInputChange}\n                value={notes}\n                disabled={pageMode !== PAGE_MODE.CREATE}\n              />\n            </div>\n\n            <div className=\"col-span-2 md:col-span-2 lg:col-span-2\">\n              <InputTextArea\n                label=\"input.systemConfiguration.description\"\n                name=\"description\"\n                variant={INPUT_STYLE_TYPE.SECONDARY}\n                maxCount={200}\n                onChange={handleInputChange}\n                value={description}\n                disabled={pageMode !== PAGE_MODE.CREATE}\n              />\n            </div>\n            {pageMode !== PAGE_MODE.VIEW && (\n              <div className=\"col-span-2 md:col-span-2 lg:col-span-2\">\n                <InputTextArea\n                  label=\"input.systemConfiguration.reasons\"\n                  name=\"reason\"\n                  variant={INPUT_STYLE_TYPE.SECONDARY}\n                  maxCount={200}\n                  onChange={handleInputChange}\n                  value={reason}\n                  onBlur={validate}\n                  validation={simpleValidator?.current?.message(\n                    \"reason\",\n                    reason,\n                    \"mandatory|onlyInteger|min:0,num\"\n                  )}\n                />\n              </div>\n            )}\n          </div>\n          <div className=\"flex justify-between w-full mt-3\">\n            <Text\n              label=\"Income Scheme Details\"\n              className=\"flex text-base font-bold text-primary-ptext-1000 font-Roboto\"\n            />\n          </div>\n          {/* here is the section of simpleTab */}\n          <div className=\"mt-6\">\n            <SimpleTab\n              onTabChange={handleChangeTab}\n              onBeforeTabChange={handleBeforeChangeTab}\n              activeIndex={activeIndex}\n              tabs={[\n                {\n                  name: \"Income Scheme*\",\n                  key: \"Tab1\",\n                  disabled: isUploading,\n                },\n\n                {\n                  name: \"Attachment\",\n                  key: \"Tab2\",\n                  disabled: isUploading,\n                },\n              ]}\n              renderContent={(tab: any, index: any) => renderTabContent(tab, index)}\n            />\n          </div>{\" \"}\n        </AclGuard>\n        <Menubox\n          className=\"w-20 bg-white  font-Roboto text-xs text-primary-pText-1300 pt-2 rounded-lg mt-0.5 flex justify-center align-center shadow-autoCompletePanel\"\n          model={editModuleCardMenu}\n          ref={deleteRowRef}\n        />\n        <ErrorDialog\n          onHide={() => setShowDialogAPIError(false)}\n          visible={showDialogAPIError}\n          errorMessage={errorMessage}\n        />\n        <ToastCustom\n          position={position}\n          ref={toastMessageRef}\n          toastText={toastMessage}\n          variant={toastMessageVariant}\n          onRemove={() => {\n            if (navigateBack) {\n              props.navigate(linkProductIncomeSchemeList);\n            }\n          }}\n        />\n        <MenuBox\n          className=\"w-20 bg-white font-Roboto text-xs text-primary-pText-1300 rounded-lg mt-0.5 flex justify-center align-center shadow-autoCompletePanel\"\n          model={kebabOptionMenu}\n          ref={deleteTableRowRef}\n        />\n      </div>\n    </AclGuard>\n  );\n};\n\nexport default withRouter(ProductIncomeSchemeCM);\n"],"names":["ProductIncomeSchemeCM","props","pageObj","setPageObj","useState","initialObj","activeIndex","setActiveIndex","pageMode","setPageMode","PAGE_MODE","currentDate","setCurrentDate","uid","setUid","arrayOfInit","setArrayOfInit","initialData","setInitData","deleteRowRef","useRef","position","setPosition","toastMessageVariant","setToastMessageVariant","TOAST_STYLE_TYPE","toastMessage","setToastMessage","triggerToast","setTriggerToast","errorMessage","setErrorMessage","navigateBack","setNavigateBack","productList","setProductList","abbList","setAbbList","suggestionsTemplate","setSuggestionsTemplate","isLoading","setIsLoading","showDialogAPIError","setShowDialogAPIError","toastMessageRef","dataTableRef","isUploading","setIsUploading","isFirstRender","dataTableAttachmentsTypeRef","forceUpdate","deleteTableRowRef","concatenatedValue","setConcatenatedValue","Iname","setIname","dataTableLoanInterest","setDataTableLoanInterest","dataTableAttachmentsType","setDataTableAttachmentsType","dataForReview","setDataForReview","editModuleCardMenu","setEditModuleCardMenu","kebabOptionMenu","setKebabOption","useEffect","getProduct","getAbbList","getCurrentDate","parsed","queryString","getInitialData","getFinalData","_a","prepareName","_b","handleFilterChange","event","name","value","val","prevFilterObj","handleInputChange","prevPageObj","resetValidator","simpleValidator","SimpleReactValidator","getStandardValidator","messageReplace","prev","validate","validateForm","isValid","IncomeSchemeService","res","_d","_c","_f","_e","_h","_g","_j","_i","_l","_k","_n","_m","_o","_p","_q","_r","_t","_s","_u","_v","_w","_x","_y","_z","_A","_B","_C","err","ApprovalRequestService","dataForNewValue","fetchDataFromAPI1","ProductConfigProductService","item","productName","payloadForSave","detailRecords","attachmentRecords","obj","record","preparedAssets","asset","currencyFormatToNumber","detail","prepareToApprove","payloadForApprove","enrichForSave","finalJsonObject","initialJsonObject","OPERATION_TYPE","ENTITY","stringifyObject","onSaveClick","STATIC_MASTER_TYPE_TOAST_TEXT","enrichedObj","parseStandardAPIErrorMessage","onCancelClick","linkProductIncomeSchemeList","onApproveClick","StaticMasterTypeService","onBackClick","onEditClick","onAddRow","getPageTitle","SystemDate","formatDate","error","renderMinLoanAmount","rowData","jsx","InputBox","INPUT_STYLE_TYPE","e","rowDataObj","amt","numberFormatter","renderMaxLoanAmount","renderMinYearlyIncome","renderMinAge","renderMaxAge","renderMinTenure","renderMaxTenure","renderMinRoi","renderMaxRoi","renderTextLTV","renderTextFOIR","renderIsCoApplicant","CheckBox","CHECKBOX_STYLE_TYPE","renderIsGarantor","renderIsBanking","renderAbb","SimpleDropDown","renderIsLtvApplicable","renderActions","ButtonBox","BUTTON_TYPE","onToggleKebabMenu","renderDateFrom","applicableFromDate","parsedYear","parsedMonth","parsedDay","parsedDate","DatePicker","renderDateTo","getParsedDate","StaticMasterDataService","searchAutoCompleteIncomeScheme","validateGetAPIResponse","itemTemplateForIncomeScheme","jsxs","LoadingIcon","Text","searchAutoCompleteLendingType","searchAutoCompleteBankFinancier","BankMasterDataService","itemTemplateForLandingType","itemTemplateForBank","renderActionsAttachments","ref","prevState","renderTabContent","tab","index","EditableTableV2","Column","FileUploadBox","onUploadAttachment","VARIANTS","useTranslateText","Fragment","handleChangeTab","handleBeforeChangeTab","records","INITIAL_ATTACHMENT_TYPE_OBJ","file","curDate","timestamp","randomString","objectName","FileUploadService","newAddRows","product","incomeScheme","bank","lendingType","reason","notes","salientFeatures","description","AclGuard","PageTitle","AutoComplete","InputTextArea","SimpleTab","Menubox","ErrorDialog","ToastCustom","MenuBox","ProductIncomeSchemeCM$1","withRouter"],"mappings":"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"}