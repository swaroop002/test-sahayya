import{r as n,ao as S,j as r,T as g}from"./index-e8217573.js";import{n as E}from"./No_data-1720c54e.js";import{S as I}from"./SimpleDropDown-061a3470.js";import{D as A}from"./datatable.esm-f474a654.js";const B=n.forwardRef((e,C)=>{var R,w,y,j,P,v;const{standardDataFormatPromise:m,search:u,showAll:h,routeParams:D,...O}=e,[a,c]=n.useState({limit:((R=e.tableObj)==null?void 0:R.limit)??10,loading:((w=e.tableObj)==null?void 0:w.loading)??!1,totalRecords:((y=e.tableObj)==null?void 0:y.totalRecords)??0,start:((j=e.tableObj)==null?void 0:j.start)??0,records:[],search:((P=e.tableObj)==null?void 0:P.search)??"",page:((v=e.tableObj)==null?void 0:v.page)??0}),[b]=n.useState(0),[T,x]=n.useState("");n.useEffect(()=>{m&&i()},[]),n.useImperativeHandle(C,()=>({search:i,getCurrentRecords:L}));const i=t=>{if(!m)return;c({...a,loading:!0});function f(){return e.avoidStartOffset?a.start:a.start===0?b:a.start}const o={start:f(),limit:e.rows?e.rows:a.limit,search:""};if(t){const s=t.page?t.page:0,l=t.rows?t.rows:0;let d=s*l;d=e.avoidStartOffset?d:d+b,o.start=d}u&&(o.search=u);const N=u&&e.standardDataFormatSearchPromise?e.standardDataFormatSearchPromise:m;return h?N(D).then(s=>{if(console.log(s),s.data&&(c({...a,loading:!1,records:s.data.results??s.data,totalRecords:s.data.totalRecords,start:o.start,search:o.search}),e.onUpdateCallback&&e.onUpdateCallback(),e.scrollToTopOnUpdate)){const l=document.querySelector(".p-datatable-scrollable-body tr");l==null||l.scrollIntoView({behavior:"smooth"})}}).catch(s=>{c({...a,loading:!1,records:[],start:0,totalRecords:0}),x(S(s))}):N(o.start,o.limit,o.search).then(s=>{if(console.log(s),s.data&&(c({...a,loading:!1,records:s.data.results??s.data,totalRecords:s.data.totalRecords,start:o.start,search:o.search}),e.onUpdateCallback&&e.onUpdateCallback(),e.scrollToTopOnUpdate)){const l=document.querySelector(".p-datatable-scrollable-body tr");l==null||l.scrollIntoView({behavior:"smooth"})}}).catch(s=>{c({...a,loading:!1,records:[],start:0,totalRecords:0}),x(S(s))})},L=()=>a.records,k=t=>{c({...a,limit:t.value})},F=t=>t!=null&&t.uid?{"row-highlight":t.uid%2}:"",M=()=>r.jsx("div",{className:"flex flex-col w-full h-16 justify-center items-center",children:r.jsx("div",{className:"text-sm text-inputBorderColour pt-3 font-medium",children:e.showLoader?r.jsx("div",{children:"Loading..."}):e.emptymessage??r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex justify-center items-center",children:r.jsx("img",{src:E,alt:"search-icon",className:" w-120 mt-84"})}),r.jsx("div",{className:"flex justify-center mt-7 ml-4",children:r.jsx(g,{label:T||"No Data Found",className:"text-primary-primaryTextColor text-h1 font-Roboto font-bold"})})]})})}),U={layout:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown ",RowsPerPageDropdown:t=>{const f=[{label:10,value:10},{label:20,value:20},{label:50,value:50},{label:"All",value:t.totalRecords}];return r.jsxs("div",{className:"flex ml-auto",children:[r.jsx("div",{className:"flex",children:r.jsx(g,{label:"Rows Per Page",className:"text-secondary-gray-500 text-xs ml-4 flex items-center"})}),r.jsx(I,{value:t.value,options:f,onChange:k,className:"border-none !w-20 !text-primary-gray-700 !text-xss !font-Roboto"})]})}};return r.jsx(A,{headerClassName:e.headerClassName,emptyMessage:M,search:"",dataLoaderFunction:i,value:a.records,first:a.start,rows:a.limit,totalRecords:a.totalRecords,onPage:i,loading:a.loading,selection:e.selection,onRowSelect:t=>e.onRowSelect?e.selectThisRow(t):"",selectionMode:e.selectionMode,dataKey:e.dataKey,resizableColumns:!1,paginator:h?!1:a.totalRecords>0&&!e.hidePaginator,paginatorTemplate:U,onsort:e.sortFunction,paginatorLeft:r.jsx(g,{label:`${a.start+1}-${a.start+a.limit>a.totalRecords?a.totalRecords:a.start+a.limit} of ${a.totalRecords}`,className:"text-secondary-gray-500 text-xs ml-4"}),lazy:!0,rowClassName:F,responsiveLayout:"scroll",breakpoint:"768px",variant:"tertiary",...O,className:`border border-secondary-concrete px-0  rounded-lg read-only-table ${e.className?e.className:""}`,children:e.children})});export{B as R};
//# sourceMappingURL=ReadOnlyTable-86accb69.js.map
