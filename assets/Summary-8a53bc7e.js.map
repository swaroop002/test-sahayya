{"version":3,"file":"Summary-8a53bc7e.js","sources":["../../src/views/transaction/PageCAM/Sections/FinalLoanDetails/FinalLoanDetails.tsx","../../src/views/transaction/PageCAM/Sections/FinancierLoanNumber/FinancierLoanNumber.tsx","../../src/views/transaction/PageCAM/Sections/LoanTags/LoanTags.tsx","../../src/views/transaction/PageCAM/Sections/PropertyValuation/PropertyValuation.tsx","../../src/views/transaction/PageCAM/Sections/RepaymentHistoryComment/RepaymentHistoryComment.tsx","../../src/views/transaction/PageCAM/Sections/SchemeDetails/SchemeDetails.tsx","../../src/views/transaction/PageCAM/Sections/Summary/Summary.tsx"],"sourcesContent":["import AclGuard from \"components/AclGuard\";\nimport { EditableComponentRef } from \"components/EditableTableV2/EditableTableV2\";\nimport ErrorDialog from \"components/ErrorDialog/ErrorDialog\";\nimport InputBox from \"components/InputBox\";\nimport SaveComponent from \"components/Save/SaveComponent\";\nimport SimpleDropDown from \"components/SimpleDropDown/SimpleDropDown\";\nimport SkeletonCustom from \"components/Skeleton/Skeleton\";\nimport ToastCustom from \"components/Toast\";\nimport { numberFormatter } from \"locale\";\nimport React, { forwardRef, useEffect, useRef, useState } from \"react\";\nimport LegalService from \"services/transaction/DDE/LegalService\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport {\n  currencyFormatToNumber,\n  currencyFormatToNumberIncludeNull,\n  getStandardValidator,\n  messageReplace,\n  parseStandardAPIErrorMessage,\n} from \"utils/CommonUtil\";\nimport {\n  INPUT_STYLE_TYPE,\n  PAGE_MODE,\n  STATIC_MASTER_TYPE_TOAST_TEXT,\n  TOAST_STYLE_TYPE,\n  YES_NO,\n  YES_NO_OPTIONS,\n} from \"utils/Constant\";\nimport { getNumber, getString, showCurrency } from \"../../Helper\";\nimport { ICamLoanDetailsDropdownList } from \"../../PageLoanDetails/PageLoanDetails\";\nimport { useParams } from \"react-router-dom\";\nimport CamService from \"services/transaction/CamService\";\n\nexport interface ICamFinalLoanDetailsPageObj {\n  recommendedLoanAmount: number | string;\n  insurancePremium: number | string;\n  totalLoanAmount: number | string;\n  roi: number | string;\n  tenure: string;\n  interestType: string;\n  emi: string | number;\n  totalDeduction: number | string;\n  netDisbursal: string | number;\n  transactionType: string;\n  balanceTransfer: string;\n  employeeLoan: string;\n  employeeId: string;\n  employeeName: string;\n  isCalculating?: boolean;\n  // properties: ICamSinglePropertyValuationData[];\n  // totalValuation: number | \"\";\n}\ninterface IProps {\n  isLoading: boolean;\n  dropDownOptions: ICamLoanDetailsDropdownList;\n  data: ICamFinalLoanDetailsPageObj;\n  getDetailsCallback?: () => void;\n}\n\nexport const initialCamFinalLoanDetailsData: ICamFinalLoanDetailsPageObj = {\n  recommendedLoanAmount: \"\",\n  insurancePremium: \"\",\n  totalLoanAmount: \"\",\n  roi: 0,\n  tenure: \"\",\n  interestType: \"\",\n  emi: \"\",\n  totalDeduction: \"\",\n  netDisbursal: \"\",\n  transactionType: \"\",\n  balanceTransfer: \"\",\n  employeeLoan: \"\",\n  employeeId: \"\",\n  employeeName: \"\",\n  isCalculating: false,\n  // totalValuation: \"\",\n};\n\nconst transactionTypeBalanceTransfer = \"TRANSACTION_TYPE_BALANCE_TRANSFER\";\n\nconst FinalLoanDetails: React.FC<IProps> = forwardRef((props, ref) => {\n  const { data, dropDownOptions, isLoading, getDetailsCallback } = props;\n  const params: { loanUid?: string; stageUid?: string } = useParams();\n  /*\n    -------------------------------------------------------\n      State\n    -------------------------------------------------------\n    */\n  const [pageObj, setPageObj] = useState<ICamFinalLoanDetailsPageObj>({\n    ...initialCamFinalLoanDetailsData,\n  });\n  const [timeOutLocal, setTimeOutLocal] = useState<any>(undefined);\n  const [pageMode, setPageMode] = useState(PAGE_MODE.VIEW);\n  const [toastMessage, setToastMessage] = useState(\"\");\n  const [triggerToast, setTriggerToast] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [showDialogAPIError, setShowDialogAPIError] = useState(false);\n  // ref\n  const toastMessageRef = useRef(null);\n  const tableRef = React.useRef<EditableComponentRef>(null);\n\n  // --------------------------- validator initialization ---------------------- //\n  const [, forceUpdate] = useState<boolean>(false);\n\n  const simpleValidator = useRef(\n    new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    })\n  );\n\n  // --------------------------- global variables ---------------------- //\n\n  /*\n     -------------------------------------------------------\n       useEffect\n     -------------------------------------------------------\n   */\n\n  useEffect(() => {\n    setPageObj((prevObj) => ({\n      ...prevObj,\n      ...data,\n    }));\n    // when add the properties  add the  validations for the properties\n    // resetAllSectionValidations(data?.properties?.length);\n  }, [data]);\n\n  useEffect(() => {\n    if (toastMessageRef?.current && toastMessage !== \"\") {\n      // @ts-ignore: will be fixed in future\n      toastMessageRef?.current?.showFunction();\n      setToastMessage(\"\");\n    }\n  }, [toastMessage, triggerToast]);\n\n  useEffect(() => {\n    if (errorMessage) {\n      setShowDialogAPIError(true);\n    }\n  }, [errorMessage]);\n  // pageObj\n\n  /*\n    -------------------------------------------------------\n      Service Calls\n    -------------------------------------------------------\n  */\n\n  const calculate = async (data: ICamFinalLoanDetailsPageObj) => {\n    setPageObj((prevObj) => ({\n      ...prevObj,\n      isCalculating: true,\n    }));\n    try {\n      const payload = enrichForCalculation(data);\n      const res = await CamService.engine(payload);\n      // data\n\n      setPageObj((prevObj) => ({\n        ...prevObj,\n        isCalculating: false,\n        totalLoanAmount: showCurrency(res?.data?.totalLoanAmount),\n        emi: showCurrency(res?.data?.emi),\n        totalDeduction: showCurrency(res?.data?.totalDeductions),\n        netDisbursal: showCurrency(res?.data?.netDisbursal),\n      }));\n      // tableRef.current?.reportDataChange(updatedRowDataObj);\n    } catch (err) {\n      console.log(err);\n      setPageObj((prevObj) => ({\n        ...prevObj,\n        isCalculating: false,\n      }));\n      setErrorMessage(parseStandardAPIErrorMessage(err));\n    }\n  };\n\n  /*\n    -------------------------------------------------------\n      Handlers\n    -------------------------------------------------------\n  */\n\n  const handleChange = (\n    e: any,\n    options?: { currency?: true; field?: keyof ICamFinalLoanDetailsPageObj }\n  ) => {\n    setPageObj((prevObj) => {\n      let updatedPageObj = { ...prevObj };\n      if (options?.currency) {\n        // const unformattedValue = currencyFormatToNumber(e.target.value);\n        updatedPageObj = {\n          ...updatedPageObj,\n          [e.target.name]: showCurrency(e.target.value),\n        };\n      } else {\n        updatedPageObj = { ...updatedPageObj, [e.target.name]: e.target.value };\n      }\n\n      if (options?.field === \"employeeLoan\") {\n        if (e?.target?.value === YES_NO.NO) {\n          updatedPageObj = {\n            ...updatedPageObj,\n            employeeId: \"\",\n            employeeName: \"\",\n          };\n        }\n      }\n      if (\n        e.target.name === \"transactionType\" &&\n        e.target.value !== \"TRANSACTION_TYPE_BALANCE_TRANSFER\"\n      ) {\n        updatedPageObj = { ...updatedPageObj, balanceTransfer: \"0\" };\n      }\n\n      if (\n        options?.field === \"recommendedLoanAmount\" ||\n        options?.field === \"roi\" ||\n        options?.field === \"tenure\"\n      ) {\n        debounce(() => calculate(updatedPageObj), 1200);\n      }\n      return updatedPageObj;\n    });\n  };\n\n  // const handleRecommendedLoanAmountChange = (e: any) => {\n  //   setPageObj((prevObj) => {\n  //     let updatedPageObj = { ...prevObj };\n  //     const unformattedValue = currencyFormatToNumber(e.target.value);\n  //     updatedPageObj = {\n  //       ...updatedPageObj,\n  //       recommendedLoanAmount: numberFormatter(unformattedValue, \"en-IN\", 0),\n  //     };\n  //     debounce(() => calculate(updatedPageObj), 1200);\n  //     return updatedPageObj;\n  //   });\n  // };\n\n  /* \n    --------------------------------------------------------\n    Validators:\n    --------------------------------------------------------\n  */\n\n  const validate = (e: any) => {\n    simpleValidator?.current?.showMessageFor(e?.target?.name);\n  };\n\n  const validateForm = () => {\n    let isValid = false;\n    isValid = simpleValidator?.current?.allValid() ?? false;\n\n    if (isValid) {\n      return isValid;\n    } else {\n      forceUpdate((prev) => !prev);\n      simpleValidator?.current?.showMessages();\n      forceUpdate((prev) => !prev);\n      return false;\n    }\n  };\n  const resetValidator = () => {\n    simpleValidator.current = new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    });\n    simpleValidator?.current?.hideMessages();\n  };\n\n  /*\n    -------------------------------------------------------\n      Button Click Handlers\n    -------------------------------------------------------\n  */\n\n  const onSave = async () => {\n    if (!validateForm()) {\n      return;\n    }\n    const payload = enrichForSave();\n    try {\n      await CamService.updateFinalLoanDetails(payload);\n      setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.SAVED);\n      setTriggerToast(!triggerToast);\n      setPageMode(PAGE_MODE.VIEW);\n      getDetailsCallback?.();\n    } catch (error) {\n      setErrorMessage(parseStandardAPIErrorMessage(error));\n    }\n  };\n\n  const onEdit = () => setPageMode(PAGE_MODE.EDIT);\n\n  const onCancel = () => {\n    setPageMode(PAGE_MODE.VIEW);\n    resetValidator();\n    // if  form has existing saved  data then call api else clear all\n    getDetailsCallback?.();\n  };\n\n  /*\n    -------------------------------------------------------\n      Helper Functions\n    -------------------------------------------------------\n  */\n\n  const enrichForCalculation = (data: ICamFinalLoanDetailsPageObj) => {\n    const enrichObj = {\n      loanUid: params?.loanUid,\n      stageUid: params?.stageUid,\n      recommendedLoanAmount: getNumber(data?.recommendedLoanAmount),\n      roi: getNumber(data?.roi),\n      tenure: getNumber(data?.tenure),\n    };\n    return enrichObj;\n  };\n\n  const debounce = (func: any, delay: any) => {\n    // for amount incl gst calc\n    clearTimeout(timeOutLocal);\n    setTimeOutLocal(setTimeout(func, delay));\n  };\n\n  const enrichForSave = () => {\n    const enrichObj = {\n      loan: {\n        uid: params?.loanUid,\n      },\n      stage: {\n        uid: params?.stageUid,\n      },\n      recommendedLoanAmount: getNumber(pageObj?.recommendedLoanAmount),\n      insurancePremium: getNumber(pageObj?.insurancePremium),\n      totalLoanAmount: getNumber(pageObj?.totalLoanAmount),\n      roi: getNumber(pageObj?.roi),\n      tenure: pageObj?.tenure,\n      smInterestType: pageObj?.interestType,\n      emi: getNumber(pageObj?.emi),\n      totalDeductions: getNumber(pageObj?.totalDeduction),\n      netDisbursal: getNumber(pageObj?.netDisbursal),\n      smTransactionType: pageObj?.transactionType,\n      balanceTransferInMonths: pageObj?.balanceTransfer,\n      smEmployeeLoan: pageObj?.employeeLoan,\n      employeeId: pageObj?.employeeId,\n      employeeName: pageObj?.employeeName,\n    };\n    return enrichObj;\n  };\n\n  const getValidationForEmployeeID = () => {\n    if (pageObj?.employeeLoan === YES_NO.YES) {\n      // return \"mandatory|onlyAlphaNumUnderscoreUpperScore\"\n      return \"mandatory\";\n    }\n    return \"optional\";\n  };\n\n  const getValidationForEmployeeName = () => {\n    if (pageObj?.employeeLoan === YES_NO.YES) {\n      return \"mandatory\";\n    }\n    return \"optional\";\n  };\n\n  const getValidationForBalanceTransfer = () => {\n    if (pageObj?.transactionType === transactionTypeBalanceTransfer) {\n      return \"mandatory\";\n    }\n    return \"optional\";\n  };\n\n  /*\n    -------------------------------------------------------\n      Sectional Rendering\n    -------------------------------------------------------\n  */\n  /*\n    -------------------------------------------------------\n    Main Rendering\n    -------------------------------------------------------\n  */\n  const {\n    recommendedLoanAmount,\n    insurancePremium,\n    totalLoanAmount,\n    roi,\n    tenure,\n    interestType,\n    emi,\n    totalDeduction,\n    netDisbursal,\n    transactionType,\n    balanceTransfer,\n    employeeLoan,\n    employeeId,\n    employeeName,\n  } = pageObj;\n  console.log(\"pageObj====\", pageObj);\n\n  return (\n    <>\n      <SaveComponent\n        title=\"label.summary.eligibility.finalLoanDetails\"\n        pageMode={pageMode}\n        disabled={pageObj?.isCalculating}\n        onSave={onSave}\n        onCancel={onCancel}\n        onEdit={onEdit}\n      >\n        {isLoading ? (\n          <SkeletonCustom height=\"19.375rem\" width=\"100%\" borderRadius=\"8px\" animation=\"wave\" />\n        ) : (\n          <AclGuard override={{ read: pageMode === PAGE_MODE.VIEW }}>\n            <div className=\" grid grid-cols-4 gap-3  \">\n              <div className=\"\">\n                <InputBox\n                  label=\"label.cam.recommendedLoanAmt*\"\n                  name=\"recommendedLoanAmount\"\n                  variant={INPUT_STYLE_TYPE.SECONDARY}\n                  value={recommendedLoanAmount ?? \"\"}\n                  onChange={(e) =>\n                    handleChange(e, { currency: true, field: \"recommendedLoanAmount\" })\n                  }\n                  className=\"text-right\"\n                  validation={simpleValidator?.current?.message(\n                    `recommendedLoanAmount`,\n                    currencyFormatToNumberIncludeNull(recommendedLoanAmount),\n                    \"mandatory|checkNumber|onlyPositive\"\n                  )}\n                  onBlur={validate}\n                />\n              </div>\n              <div>\n                <InputBox\n                  label=\"label.cam.insurancePremium*\"\n                  name=\"insurancePremium\"\n                  className=\"text-right\"\n                  variant={INPUT_STYLE_TYPE.SECONDARY}\n                  value={insurancePremium ?? \"\"}\n                  // onChange={handleChange}\n                  disabled\n                />\n              </div>\n              <div>\n                <InputBox\n                  label=\"label.cam.totalLoanAmount*\"\n                  name=\"totalLoanAmount\"\n                  className=\"text-right\"\n                  variant={INPUT_STYLE_TYPE.SECONDARY}\n                  value={totalLoanAmount ?? \"\"}\n                  disabled\n                />\n              </div>\n              <div>\n                <InputBox\n                  label=\"label.cam.ROI*\"\n                  name=\"roi\"\n                  variant={INPUT_STYLE_TYPE.SECONDARY}\n                  value={roi ?? \"\"}\n                  className=\"text-right\"\n                  onChange={(e) => handleChange(e, { currency: true, field: \"roi\" })}\n                  validation={simpleValidator?.current?.message(\n                    `roi`,\n                    currencyFormatToNumberIncludeNull(roi),\n                    \"mandatory|checkNumber|onlyPositive\"\n                  )}\n                  onBlur={validate}\n                />\n              </div>\n              <div>\n                <InputBox\n                  label=\"label.cam.tenure(Months)*\"\n                  name=\"tenure\"\n                  className=\"text-right\"\n                  variant={INPUT_STYLE_TYPE.SECONDARY}\n                  value={tenure ?? \"\"}\n                  onChange={(e) => handleChange(e, { field: \"tenure\" })}\n                  validation={simpleValidator?.current?.message(`tenure`, tenure, \"mandatory\")}\n                  onBlur={validate}\n                />\n              </div>\n              <div>\n                <SimpleDropDown\n                  label=\"label.cam.interestType*\"\n                  placeholder=\"placeholder.cam.interestType\"\n                  name=\"interestType\"\n                  value={interestType}\n                  onChange={handleChange}\n                  validation={simpleValidator?.current?.message(\n                    `interestType`,\n                    interestType,\n                    \"mandatory\"\n                  )}\n                  onBlur={validate}\n                  options={dropDownOptions.interestType}\n                  optionLabel=\"name\"\n                  optionValue=\"code\"\n                  // disabled={productIncomeScheme === \"\"}\n                />\n              </div>\n              <div>\n                <InputBox\n                  label=\"label.cam.emi*\"\n                  name=\"emi\"\n                  className=\"text-right\"\n                  variant={INPUT_STYLE_TYPE.SECONDARY}\n                  value={emi ?? \"\"}\n                  disabled\n                />\n              </div>\n              <div>\n                <InputBox\n                  label=\"label.cam.TotalDeductions*\"\n                  name=\"totalDeduction\"\n                  className=\"text-right\"\n                  variant={INPUT_STYLE_TYPE.SECONDARY}\n                  value={totalDeduction ?? \"\"}\n                  onChange={(e) => handleChange(e, { currency: true })}\n                  disabled\n                />\n              </div>\n              <div>\n                <InputBox\n                  label=\"label.cam.netDisbursal*\"\n                  name=\"netDisbursal\"\n                  className=\"text-right\"\n                  variant={INPUT_STYLE_TYPE.SECONDARY}\n                  value={netDisbursal ?? \"\"}\n                  disabled\n                />\n              </div>\n              <div>\n                <SimpleDropDown\n                  label=\"label.cam.transactionType*\"\n                  placeholder=\"placeholder.cam.transactionType\"\n                  name=\"transactionType\"\n                  value={transactionType}\n                  onChange={(e: any) => handleChange(e, { field: \"transactionType\" })}\n                  validation={simpleValidator?.current?.message(\n                    `transactionType`,\n                    transactionType,\n                    \"mandatory\"\n                  )}\n                  onBlur={validate}\n                  options={dropDownOptions.transactionType}\n                  optionLabel=\"name\"\n                  optionValue=\"code\"\n                  // disabled={productIncomeScheme === \"\"}\n                />\n              </div>\n              <div>\n                <InputBox\n                  label=\"label.cam.balanceTransfer(Months)*\"\n                  name=\"balanceTransfer\"\n                  className=\"text-right\"\n                  variant={INPUT_STYLE_TYPE.SECONDARY}\n                  value={balanceTransfer ?? \"\"}\n                  onChange={handleChange}\n                  validation={simpleValidator?.current?.message(\n                    `balanceTransfer`,\n                    balanceTransfer,\n                    getValidationForBalanceTransfer()\n                  )}\n                  onBlur={validate}\n                  disabled={pageObj?.transactionType !== transactionTypeBalanceTransfer}\n                />\n              </div>\n              <div>\n                <SimpleDropDown\n                  label=\"label.cam.employeeLoan*\"\n                  placeholder=\"placeholder.cam.employeeLoan\"\n                  name=\"employeeLoan\"\n                  value={employeeLoan}\n                  onChange={(e) => handleChange(e, { field: \"employeeLoan\" })}\n                  validation={simpleValidator?.current?.message(\n                    `employeeLoan`,\n                    employeeLoan,\n                    \"mandatory\"\n                  )}\n                  onBlur={validate}\n                  options={YES_NO_OPTIONS}\n                  optionLabel=\"label\"\n                  optionValue=\"value\"\n                />\n              </div>\n              <div>\n                <InputBox\n                  label={employeeLoan === \"YES\" ? \"label.cam.employeeID*\" : \"label.cam.employeeID\"}\n                  name=\"employeeId\"\n                  variant={INPUT_STYLE_TYPE.SECONDARY}\n                  value={employeeId ?? \"\"}\n                  onChange={handleChange}\n                  validation={simpleValidator?.current?.message(\n                    `employeeId`,\n                    employeeId,\n                    getValidationForEmployeeID()\n                  )}\n                  onBlur={validate}\n                  disabled={pageObj?.employeeLoan === YES_NO.NO}\n                />\n              </div>\n              <div>\n                <InputBox\n                  label={\n                    employeeLoan === \"YES\" ? \"label.cam.employeeName*\" : \"label.cam.employeeName\"\n                  }\n                  name=\"employeeName\"\n                  variant={INPUT_STYLE_TYPE.SECONDARY}\n                  value={employeeName ?? \"\"}\n                  onChange={handleChange}\n                  validation={simpleValidator?.current?.message(\n                    `employeeName`,\n                    employeeName,\n                    getValidationForEmployeeName()\n                  )}\n                  onBlur={validate}\n                  disabled={pageObj?.employeeLoan === YES_NO.NO}\n                />\n              </div>\n            </div>\n          </AclGuard>\n        )}\n      </SaveComponent>\n\n      <ToastCustom\n        position={\"bottom-right\"}\n        ref={toastMessageRef}\n        toastText={toastMessage}\n        variant={TOAST_STYLE_TYPE.PRIMARY}\n      />\n\n      <ErrorDialog\n        onHide={() => {\n          setShowDialogAPIError(false);\n          setErrorMessage(\"\");\n        }}\n        visible={showDialogAPIError}\n        errorMessage={errorMessage}\n      />\n    </>\n  );\n});\n\nexport default FinalLoanDetails;\n","import AclGuard from \"components/AclGuard\";\nimport ButtonBox from \"components/ButtonBox/ButtonBox\";\nimport EditableTableV2, {\n  Column,\n  EditableComponentRef,\n} from \"components/EditableTableV2/EditableTableV2\";\nimport ErrorDialog from \"components/ErrorDialog/ErrorDialog\";\nimport IconButton, { BUTTON_TYPES } from \"components/IconButton/IconButton\";\nimport InputBox from \"components/InputBox\";\nimport RadioButton from \"components/RadioButton/RadioButton\";\nimport SaveComponent from \"components/Save/SaveComponent\";\nimport SimpleDropDown from \"components/SimpleDropDown/SimpleDropDown\";\nimport SkeletonCustom from \"components/Skeleton/Skeleton\";\nimport Text from \"components/Text/Text\";\nimport ToastCustom from \"components/Toast\";\nimport i18n from \"i18n\";\nimport React, { forwardRef, useEffect, useRef, useState } from \"react\";\nimport LegalService from \"services/transaction/DDE/LegalService\";\nimport StageService from \"services/transaction/DDE/StageService\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport {\n  getStandardValidator,\n  messageReplace,\n  parseStandardAPIErrorMessage,\n} from \"utils/CommonUtil\";\nimport {\n  BUTTON_TYPE,\n  CHECKBOX_STYLE_TYPE,\n  INPUT_STYLE_TYPE,\n  IS_TRUE,\n  PAGE_MODE,\n  STATIC_MASTER_TYPE_TOAST_TEXT,\n  TOAST_STYLE_TYPE,\n} from \"utils/Constant\";\nimport { updateLegalDocumentScrutinizedRowDataObj } from \"views/transaction/PageDDE/Legal/Helper\";\nimport { ICamLoanDetailsDropdownList } from \"../../PageLoanDetails/PageLoanDetails\";\nimport { useParams } from \"react-router-dom\";\nimport { updateCamFinancierLoanNumbersRowDataObj } from \"../../Helper\";\nimport CamService from \"services/transaction/CamService\";\n\nexport interface ICamFinancierLoanNumberPageObj {\n  loanUid: string;\n  // properties: ICamSinglePropertyValuationData[];\n  // totalValuation: number | \"\";\n}\ninterface IProps {\n  // isLoading: boolean;\n  // dropDownOptions: ICamLoanDetailsDropdownList;\n  data: ICamFinancierLoanNumberPageObj;\n}\n\nexport interface ICamLoanFinancierLoanNumbersRowData {\n  uid: string;\n  loanNumber: string;\n  remarks: string;\n  isActive?: boolean;\n}\n\nexport const initialCamFinancierLoanNumberData: ICamFinancierLoanNumberPageObj = {\n  loanUid: \"\",\n  // totalValuation: \"\",\n};\n\nconst initialTableRowData: ICamLoanFinancierLoanNumbersRowData = {\n  uid: \"\",\n  loanNumber: \"\",\n  remarks: \"\",\n};\n\nconst FinancierLoanNumber: React.FC<IProps> = forwardRef((props, ref) => {\n  const { data } = props;\n  const params: { loanUid?: string; stageUid?: string } = useParams();\n\n  /*\n    -------------------------------------------------------\n      State\n    -------------------------------------------------------\n    */\n  const [pageObj, setPageObj] = useState<ICamFinancierLoanNumberPageObj>({\n    ...initialCamFinancierLoanNumberData,\n  });\n  const [pageMode, setPageMode] = useState(PAGE_MODE.VIEW);\n  const [toastMessage, setToastMessage] = useState(\"\");\n  const [triggerToast, setTriggerToast] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [showDialogAPIError, setShowDialogAPIError] = useState(false);\n  // ref\n  const toastMessageRef = useRef(null);\n  const tableRef = React.useRef<EditableComponentRef>(null);\n\n  // --------------------------- validator initialization ---------------------- //\n  const [, forceUpdate] = useState<boolean>(false);\n\n  const simpleValidator = useRef(\n    new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    })\n  );\n\n  // --------------------------- global variables ---------------------- //\n\n  /*\n     -------------------------------------------------------\n       useEffect\n     -------------------------------------------------------\n   */\n\n  useEffect(() => {\n    if (data?.loanUid) {\n      setPageObj((prevObj) => ({\n        ...prevObj,\n        ...data,\n      }));\n      // when add the properties  add the  validations for the properties\n      // resetAllSectionValidations(data?.properties?.length);\n    }\n  }, [data]);\n\n  useEffect(() => {\n    if (toastMessageRef?.current && toastMessage !== \"\") {\n      // @ts-ignore: will be fixed in future\n      toastMessageRef?.current?.showFunction();\n      setToastMessage(\"\");\n    }\n  }, [toastMessage, triggerToast]);\n\n  useEffect(() => {\n    if (errorMessage) {\n      setShowDialogAPIError(true);\n    }\n  }, [errorMessage]);\n\n  /*\n    -------------------------------------------------------\n      Service Calls\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n      Handlers\n    -------------------------------------------------------\n  */\n\n  const handleChange = (e: any) => {\n    setPageObj((prevObj) => ({\n      ...prevObj,\n      [e.target.name]: e.target.value,\n    }));\n  };\n\n  const handleTableFieldChange = (\n    e: any,\n    options: {\n      rowData: ICamLoanFinancierLoanNumbersRowData;\n      field: keyof ICamLoanFinancierLoanNumbersRowData;\n    }\n  ) => {\n    let rowDataObj: ICamLoanFinancierLoanNumbersRowData = { ...options.rowData };\n    rowDataObj = {\n      ...rowDataObj,\n      [`${options.field}`]: e.target.value,\n    };\n    tableRef.current?.reportDataChange(rowDataObj);\n  };\n\n  /* \n    --------------------------------------------------------\n    Validators:\n    --------------------------------------------------------\n  */\n\n  const validate = (e: any) => {\n    simpleValidator?.current?.showMessageFor(e?.target?.name);\n  };\n\n  const validateForm = () => {\n    let isValid = false;\n    isValid = simpleValidator?.current?.allValid() ?? false;\n    if (isValid) {\n      return isValid;\n    } else {\n      forceUpdate((prev) => !prev);\n      simpleValidator?.current?.showMessages();\n      forceUpdate((prev) => !prev);\n      return false;\n    }\n  };\n\n  /*\n    -------------------------------------------------------\n      Button Click Handlers\n    -------------------------------------------------------\n  */\n\n  const onSave = async () => {\n    if (!validateForm()) {\n      return;\n    }\n    const payload = enrichForSave();\n    try {\n      await CamService.updateFinancierLoanNumber(payload);\n      setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.SAVED);\n      setTriggerToast(!triggerToast);\n      setPageMode(PAGE_MODE.VIEW);\n      tableRef.current?.clearAll();\n      tableRef.current?.search();\n    } catch (error) {\n      setErrorMessage(parseStandardAPIErrorMessage(error));\n    }\n  };\n\n  const onEdit = () => setPageMode(PAGE_MODE.EDIT);\n\n  const onCancel = () => {\n    setPageMode(PAGE_MODE.VIEW);\n    resetValidator();\n    // if  form has existing saved  data then call api else clear all\n    tableRef.current?.clearAll();\n    tableRef.current?.search();\n  };\n\n  const onAdd = () => {\n    tableRef.current?.addRow({ ...initialTableRowData });\n  };\n\n  const onDeleteRow = (rowData: ICamLoanFinancierLoanNumbersRowData) => {\n    tableRef.current?.deleteRow(rowData);\n    simpleValidator.current = new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    });\n  };\n\n  /*\n    -------------------------------------------------------\n      Helper Functions\n    -------------------------------------------------------\n  */\n  const resetValidator = () => {\n    simpleValidator.current = new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    });\n    simpleValidator?.current?.hideMessages();\n  };\n\n  const enrichForSave = () => {\n    const addRows = tableRef.current?.getAddedRecords() ?? [];\n    let deletedRows = tableRef.current?.getDeletedRecords() ?? [];\n    let updatedRows = tableRef.current?.getUpdatedRecords() ?? [];\n    // addRows = addRows.map((rowData: any) => ({\n    //   ...rowData,\n    //   loan: {\n    //     uid: params?.loanUid,\n    //   },\n    //   stage: {\n    //     uid: params?.stageUid,\n    //   },\n    // }));\n\n    deletedRows = deletedRows.map((rowData: any) =>\n      updateCamFinancierLoanNumbersRowDataObj(rowData)\n    );\n    updatedRows = updatedRows.map((rowData: any) =>\n      updateCamFinancierLoanNumbersRowDataObj(rowData)\n    );\n\n    const financialLoanNumbers = [...addRows, ...deletedRows, ...updatedRows];\n    return {\n      loan: {\n        uid: params?.loanUid,\n      },\n      stage: {\n        uid: params?.stageUid,\n      },\n      financialLoanNumbers: financialLoanNumbers,\n    };\n  };\n\n  /*\n    -------------------------------------------------------\n      Sectional Rendering\n    -------------------------------------------------------\n  */\n  const renderFinancierLoanNumber = (rowData: ICamLoanFinancierLoanNumbersRowData) => {\n    return (\n      <div className=\"\">\n        <InputBox\n          name={`loanNumber${rowData?.uid}`}\n          variant={INPUT_STYLE_TYPE.SECONDARY}\n          onChange={(e) => handleTableFieldChange(e, { rowData, field: \"loanNumber\" })}\n          onBlur={validate}\n          value={rowData?.loanNumber}\n          validation={simpleValidator?.current?.message(\n            `loanNumber${rowData?.uid}`,\n            rowData?.loanNumber,\n            \"mandatory\"\n          )}\n          // hideLabel\n          // hideErrorRow\n        />\n      </div>\n    );\n  };\n\n  const renderDescription = (rowData: ICamLoanFinancierLoanNumbersRowData) => {\n    return (\n      <div className=\"flex items-start mt-1\">\n        <InputBox\n          name={`remarks${rowData?.uid}`}\n          variant={INPUT_STYLE_TYPE.SECONDARY}\n          onChange={(e) => handleTableFieldChange(e, { rowData, field: \"remarks\" })}\n          onBlur={validate}\n          value={rowData?.remarks}\n          validation={simpleValidator?.current?.message(\n            `remarks${rowData?.uid}`,\n            rowData?.remarks,\n            \"mandatory\"\n          )}\n        />\n      </div>\n    );\n  };\n\n  const renderActions = (rowData: any) => {\n    return (\n      <div className=\"\">\n        <IconButton\n          buttonType={BUTTON_TYPES.DELETE}\n          onClick={() => onDeleteRow(rowData)}\n          disabled={pageMode === PAGE_MODE.VIEW}\n          tooltipOptions={{\n            position: \"left\",\n            className: \"text-xs font-Roboto bg-black text-white !p-1 rounded-md \",\n            showDelay: \"1000,\",\n            hideDelay: \"300\",\n          }}\n        />\n      </div>\n    );\n  };\n  /*\n    -------------------------------------------------------\n    Main Rendering\n    -------------------------------------------------------\n  */\n  return (\n    <>\n      <SaveComponent\n        title=\"label.cam.financierLoanNumbers\"\n        pageMode={pageMode}\n        // disabled={isLoading || isLegalSectionAccessDisabled(legalStatus)}\n        onSave={onSave}\n        onCancel={onCancel}\n        onEdit={onEdit}\n      >\n        <AclGuard override={{ read: pageMode === PAGE_MODE.VIEW }}>\n          <div className=\" grid grid-cols-4 gap-3  \">\n            <div className=\"col-span-4\">\n              {typeof pageMode === \"string\" ? (\n                <>\n                  <div className=\"flex mb-3 justify-end\">\n                    <div className=\" mr-3 self-center\">\n                      <ButtonBox\n                        buttonType={BUTTON_TYPE.ICON_TEXT_ROW}\n                        customLabel={\"label.cam.add\"}\n                        onClick={onAdd}\n                      />\n                    </div>\n                  </div>\n\n                  <EditableTableV2\n                    ref={tableRef}\n                    uniqueKey=\"uid\"\n                    standardDataFormatPromise={CamService.getFinancierLoanNumber}\n                    search={`&stage.uid=${params?.stageUid}&loan.uid=${params?.loanUid}&isActive=true`}\n                    mode={\"UPDATE\"}\n                    className=\"table-auto-height\"\n                    paginator={false}\n                  >\n                    <Column\n                      header={i18n.t(\"label.cam.financierLoanNumber\")}\n                      className=\"text-primary-ptext-1000 text-left text-xs h-12 pl-6\"\n                      body={renderFinancierLoanNumber}\n                    />\n\n                    <Column\n                      header={i18n.t(\"label.cam.description\")}\n                      className=\"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6\"\n                      body={renderDescription}\n                    />\n                    <Column\n                      header={i18n.t(\"label.investmentInfo.table.colTitle.action\")}\n                      className=\"text-primary-ptext-1000 text-right text-xs h-12 px-6\"\n                      style={{ minWidth: \"50px\", width: \"50px\" }}\n                      body={renderActions}\n                    />\n                  </EditableTableV2>\n                </>\n              ) : null}\n            </div>\n          </div>\n        </AclGuard>\n      </SaveComponent>\n\n      <ToastCustom\n        position={\"bottom-right\"}\n        ref={toastMessageRef}\n        toastText={toastMessage}\n        variant={TOAST_STYLE_TYPE.PRIMARY}\n      />\n\n      <ErrorDialog\n        onHide={() => {\n          setShowDialogAPIError(false);\n          setErrorMessage(\"\");\n        }}\n        visible={showDialogAPIError}\n        errorMessage={errorMessage}\n      />\n    </>\n  );\n});\n\nexport default FinancierLoanNumber;\n","import AclGuard from \"components/AclGuard\";\nimport ButtonBox from \"components/ButtonBox/ButtonBox\";\nimport EditableTableV2, {\n  Column,\n  EditableComponentRef,\n} from \"components/EditableTableV2/EditableTableV2\";\nimport ErrorDialog from \"components/ErrorDialog/ErrorDialog\";\nimport IconButton, { BUTTON_TYPES } from \"components/IconButton/IconButton\";\nimport InputBox from \"components/InputBox\";\nimport InputError from \"components/InputError/InputError\";\nimport RadioButton from \"components/RadioButton/RadioButton\";\nimport SaveComponent from \"components/Save/SaveComponent\";\nimport SimpleDropDown from \"components/SimpleDropDown/SimpleDropDown\";\nimport Text from \"components/Text/Text\";\nimport ToastCustom from \"components/Toast\";\nimport i18n from \"i18n\";\nimport React, { forwardRef, useEffect, useRef, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport CamService from \"services/transaction/CamService\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport {\n  getStandardValidator,\n  messageReplace,\n  parseStandardAPIErrorMessage,\n} from \"utils/CommonUtil\";\nimport {\n  BUTTON_TYPE,\n  CHECKBOX_STYLE_TYPE,\n  INPUT_STYLE_TYPE,\n  PAGE_MODE,\n  STATIC_MASTER_TYPE_TOAST_TEXT,\n  TOAST_STYLE_TYPE,\n} from \"utils/Constant\";\nimport { updateCamLoanTagsRowDataObj } from \"../../Helper\";\nimport { ICamLoanDetailsDropdownList } from \"../../PageLoanDetails/PageLoanDetails\";\n\nexport interface ICamLoanTagsPageObj {\n  loanUid: string;\n  // properties: ICamSinglePropertyValuationData[];\n  // totalValuation: number | \"\";\n}\ninterface IProps {\n  // isLoading: boolean;\n  dropDownOptions: ICamLoanDetailsDropdownList;\n  // data?: ICamLoanTagsPageObj;\n  getDetailsCallback?: () => void;\n}\n\nexport interface ICamLoanTagsRowData {\n  uid?: string;\n  smTagName: string;\n  isApplicable: boolean | null;\n  remarks: string;\n  isActive: boolean;\n}\n\nexport const initialCamLoanTagsData: ICamLoanTagsPageObj = {\n  loanUid: \"\",\n  // totalValuation: \"\",\n};\n\nconst initialTableRowData: ICamLoanTagsRowData = {\n  uid: \"\",\n  smTagName: \"\",\n  remarks: \"\",\n  isApplicable: null,\n  isActive: true,\n};\n\nconst LoanTags: React.FC<IProps> = forwardRef((props, ref) => {\n  const { dropDownOptions, getDetailsCallback } = props;\n\n  const params: { loanUid?: string; stageUid?: string } = useParams();\n\n  /*\n    -------------------------------------------------------\n      State\n    -------------------------------------------------------\n    */\n\n  const [pageMode, setPageMode] = useState(PAGE_MODE.VIEW);\n  const [toastMessage, setToastMessage] = useState(\"\");\n  const [triggerToast, setTriggerToast] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [showDialogAPIError, setShowDialogAPIError] = useState(false);\n  // ref\n  const toastMessageRef = useRef(null);\n  const tableRef = React.useRef<EditableComponentRef>(null);\n\n  // --------------------------- validator initialization ---------------------- //\n  const [, forceUpdate] = useState<boolean>(false);\n\n  const simpleValidator = useRef(\n    new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    })\n  );\n\n  // --------------------------- global variables ---------------------- //\n\n  /*\n     -------------------------------------------------------\n       useEffect\n     -------------------------------------------------------\n   */\n\n  // useEffect(() => {\n  //   if (data?.loanUid) {\n  //     setPageObj((prevObj) => ({\n  //       ...prevObj,\n  //       ...data,\n  //     }));\n\n  //   }\n  // }, [data]);\n\n  useEffect(() => {\n    if (toastMessageRef?.current && toastMessage !== \"\") {\n      // @ts-ignore: will be fixed in future\n      toastMessageRef?.current?.showFunction();\n      setToastMessage(\"\");\n    }\n  }, [toastMessage, triggerToast]);\n\n  useEffect(() => {\n    if (errorMessage) {\n      setShowDialogAPIError(true);\n    }\n  }, [errorMessage]);\n\n  /*\n    -------------------------------------------------------\n      Service Calls\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n      Handlers\n    -------------------------------------------------------\n  */\n\n  const handleTableFieldChange = (\n    e: any,\n    options: {\n      rowData: ICamLoanTagsRowData;\n      field: keyof ICamLoanTagsRowData;\n      isCheckbox?: boolean;\n    }\n  ) => {\n    let rowDataObj: ICamLoanTagsRowData = { ...options.rowData };\n    if (options?.isCheckbox) {\n      rowDataObj = {\n        ...rowDataObj,\n        [`${options.field}`]: e.value,\n      };\n    } else {\n      rowDataObj = {\n        ...rowDataObj,\n        [`${options.field}`]: e.target.value,\n      };\n    }\n    tableRef.current?.reportDataChange(rowDataObj);\n  };\n\n  /* \n    --------------------------------------------------------\n    Validators:\n    --------------------------------------------------------\n  */\n\n  const validate = (e: any) => {\n    simpleValidator?.current?.showMessageFor(e?.target?.name);\n  };\n\n  const validateForm = () => {\n    let isValid = false;\n    isValid = simpleValidator?.current?.allValid() ?? false;\n    if (isValid) {\n      return isValid;\n    } else {\n      forceUpdate((prev) => !prev);\n      simpleValidator?.current?.showMessages();\n      forceUpdate((prev) => !prev);\n      return false;\n    }\n  };\n\n  /*\n    -------------------------------------------------------\n      Button Click Handlers\n    -------------------------------------------------------\n  */\n\n  const onSave = async () => {\n    if (!validateForm()) {\n      return;\n    }\n    const payload = enrichForSave();\n    try {\n      await CamService.updateLoanTags(payload);\n      setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.SAVED);\n      setTriggerToast(!triggerToast);\n      setPageMode(PAGE_MODE.VIEW);\n      tableRef.current?.clearAll();\n      tableRef.current?.search();\n    } catch (error) {\n      setErrorMessage(parseStandardAPIErrorMessage(error));\n    }\n  };\n\n  const onEdit = () => setPageMode(PAGE_MODE.EDIT);\n\n  const onCancel = () => {\n    setPageMode(PAGE_MODE.VIEW);\n    resetValidator();\n    tableRef.current?.clearAll();\n    tableRef.current?.search();\n  };\n\n  const onAddDocument = () => {\n    tableRef.current?.addRow({ ...initialTableRowData });\n  };\n\n  const onDeleteRow = (rowData: ICamLoanTagsRowData) => {\n    tableRef.current?.deleteRow(rowData);\n    simpleValidator.current = new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    });\n  };\n\n  /*\n    -------------------------------------------------------\n      Helper Functions\n    -------------------------------------------------------\n  */\n  const resetValidator = () => {\n    simpleValidator.current = new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    });\n    simpleValidator?.current?.hideMessages();\n  };\n\n  const enrichForSave = () => {\n    console.log(\"enrich for save\");\n    let addRows = tableRef.current?.getAddedRecords() ?? [];\n    let deletedRows = tableRef.current?.getDeletedRecords() ?? [];\n    let updatedRows = tableRef.current?.getUpdatedRecords() ?? [];\n    addRows = addRows.map((rowData: any) => ({\n      ...rowData,\n      smTagName: rowData?.smTagName,\n    }));\n\n    deletedRows = deletedRows.map((rowData: any) => updateCamLoanTagsRowDataObj(rowData));\n    updatedRows = updatedRows.map((rowData: any) => updateCamLoanTagsRowDataObj(rowData));\n\n    const loanTags = [...addRows, ...deletedRows, ...updatedRows];\n    return {\n      loan: {\n        uid: params?.loanUid,\n      },\n      stage: {\n        uid: params?.stageUid,\n      },\n      loanTags: loanTags,\n    };\n  };\n\n  /*\n    -------------------------------------------------------\n      Sectional Rendering\n    -------------------------------------------------------\n  */\n  const renderTags = (rowData: ICamLoanTagsRowData) => {\n    return (\n      <div className=\"pt-4\">\n        <SimpleDropDown\n          hideLabel\n          placeholder=\"placeholder.cam.Tags\"\n          name={`tags${rowData?.uid}`}\n          value={rowData?.smTagName}\n          variant={INPUT_STYLE_TYPE.PRIMARY}\n          options={dropDownOptions.tags}\n          optionLabel=\"name\"\n          optionValue=\"code\"\n          onChange={(e) => handleTableFieldChange(e, { rowData, field: \"smTagName\" })}\n          onBlur={validate}\n          validation={simpleValidator?.current?.message(\n            `tags${rowData?.uid}`,\n            rowData.smTagName,\n            \"mandatory\"\n          )}\n        />\n      </div>\n    );\n  };\n\n  const renderYesOrNo = (rowData: ICamLoanTagsRowData) => {\n    return (\n      <div className=\"mt-5 \">\n        <div className=\"flex flex-shrink-0 justify-center \">\n          <div className=\"mr-5 flex\">\n            <RadioButton\n              hideLabel\n              hideErrorRow\n              variant={CHECKBOX_STYLE_TYPE.PRIMARY}\n              value={true}\n              checked={rowData?.isApplicable === true}\n              onChange={(e) =>\n                handleTableFieldChange(e, { rowData, field: \"isApplicable\", isCheckbox: true })\n              }\n              disabled={pageMode === PAGE_MODE.VIEW}\n            />\n            <Text className=\"ml-1.5 text-xs \" label=\"label.dde.yes\" />\n          </div>\n          <div className=\"flex\">\n            <RadioButton\n              hideLabel\n              hideErrorRow\n              variant={CHECKBOX_STYLE_TYPE.PRIMARY}\n              value={false}\n              checked={rowData?.isApplicable === false}\n              onChange={(e) =>\n                handleTableFieldChange(e, { rowData, field: \"isApplicable\", isCheckbox: true })\n              }\n              disabled={pageMode === PAGE_MODE.VIEW}\n            />\n            <Text className=\"ml-1.5 text-xs \" label=\"label.dde.no\" />\n          </div>\n        </div>\n        <div className=\"h-4 flex ml-6 justify-center mb-1.5 \">\n          <InputError\n            validation={simpleValidator?.current?.message(\n              `value${rowData?.uid}`,\n              rowData.isApplicable,\n              \"mandatory\"\n            )}\n          />\n        </div>\n      </div>\n    );\n  };\n\n  const renderComment = (rowData: ICamLoanTagsRowData) => {\n    return (\n      <div className=\"flex items-start mt-1\">\n        <InputBox\n          name={`comment${rowData?.uid}`}\n          variant={INPUT_STYLE_TYPE.SECONDARY}\n          onChange={(e) => handleTableFieldChange(e, { rowData, field: \"remarks\" })}\n          onBlur={validate}\n          value={rowData?.remarks}\n          validation={simpleValidator?.current?.message(\n            `comment${rowData?.uid}`,\n            rowData?.remarks,\n            \"mandatory\"\n          )}\n          // hideLabel\n          // hideErrorRow\n        />\n      </div>\n    );\n  };\n\n  const renderActions = (rowData: any) => {\n    return (\n      <div className=\"\">\n        <IconButton\n          buttonType={BUTTON_TYPES.DELETE}\n          onClick={() => onDeleteRow(rowData)}\n          disabled={pageMode === PAGE_MODE.VIEW}\n          tooltipOptions={{\n            position: \"left\",\n            className: \"text-xs font-Roboto bg-black text-white !p-1 rounded-md \",\n            showDelay: \"1000,\",\n            hideDelay: \"300\",\n          }}\n        />\n      </div>\n    );\n  };\n  /*\n    -------------------------------------------------------\n    Main Rendering\n    -------------------------------------------------------\n  */\n  return (\n    <>\n      <SaveComponent\n        title=\"label.cam.loanTags\"\n        pageMode={pageMode}\n        // disabled={isLoading || isLegalSectionAccessDisabled(legalStatus)}\n        onSave={onSave}\n        onCancel={onCancel}\n        onEdit={onEdit}\n      >\n        <AclGuard override={{ read: pageMode === PAGE_MODE.VIEW }}>\n          <div className=\" grid grid-cols-4 gap-3  \">\n            <div className=\"col-span-4\">\n              {typeof pageMode === \"string\" ? (\n                <>\n                  <div className=\"flex mb-3 justify-end\">\n                    <div className=\" mr-3 self-center\">\n                      <ButtonBox\n                        buttonType={BUTTON_TYPE.ICON_TEXT_ROW}\n                        customLabel={\"label.cam.addTags\"}\n                        onClick={onAddDocument}\n                      />\n                    </div>\n                  </div>\n                  <EditableTableV2\n                    ref={tableRef}\n                    uniqueKey=\"uid\"\n                    standardDataFormatPromise={CamService.getLoanTags}\n                    search={`?stage.uid=${params?.stageUid}&loan.uid=${\n                      params?.loanUid\n                    }&isActive=${true}`}\n                    mode={\"UPDATE\"}\n                    className=\"table-auto-height\"\n                  >\n                    <Column\n                      header={i18n.t(\"label.cam.tags\")}\n                      className=\"text-primary-ptext-1000 text-left text-xs h-12 pl-6\"\n                      body={renderTags}\n                    />\n\n                    <Column\n                      header={i18n.t(\"label.cam.yes/no\")}\n                      className=\"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6\"\n                      body={renderYesOrNo}\n                    />\n                    <Column\n                      header={i18n.t(\"label.cam.comment\")}\n                      className=\"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6\"\n                      body={renderComment}\n                    />\n\n                    <Column\n                      header={i18n.t(\"label.investmentInfo.table.colTitle.action\")}\n                      className=\"text-primary-ptext-1000 text-right text-xs h-12 px-6\"\n                      style={{ minWidth: \"50px\", width: \"50px\" }}\n                      body={renderActions}\n                    />\n                  </EditableTableV2>\n                </>\n              ) : null}\n            </div>\n          </div>\n        </AclGuard>\n      </SaveComponent>\n\n      <ToastCustom\n        position={\"bottom-right\"}\n        ref={toastMessageRef}\n        toastText={toastMessage}\n        variant={TOAST_STYLE_TYPE.PRIMARY}\n      />\n\n      <ErrorDialog\n        onHide={() => {\n          setShowDialogAPIError(false);\n          setErrorMessage(\"\");\n        }}\n        visible={showDialogAPIError}\n        errorMessage={errorMessage}\n      />\n    </>\n  );\n});\n\nexport default LoanTags;\n","import AclGuard from \"components/AclGuard\";\nimport { Column, EditableComponentRef } from \"components/EditableTableV2/EditableTableV2\";\nimport ErrorDialog from \"components/ErrorDialog/ErrorDialog\";\nimport ReadOnlyTable from \"components/ReadOnlyTable/ReadOnlyTable\";\nimport SaveComponent from \"components/Save/SaveComponent\";\nimport Section from \"components/Section/Section\";\nimport SimpleDropDown from \"components/SimpleDropDown/SimpleDropDown\";\nimport Text from \"components/Text/Text\";\nimport ToastCustom from \"components/Toast\";\nimport i18n from \"i18n\";\nimport React, { forwardRef, useEffect, useImperativeHandle, useRef, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport CamService from \"services/transaction/CamService\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport {\n  formatDate,\n  getStandardValidator,\n  messageReplace,\n  parseStandardAPIErrorMessage,\n} from \"utils/CommonUtil\";\nimport {\n  INPUT_STYLE_TYPE,\n  PAGE_MODE,\n  PROPERTY_ANNOTATION,\n  PROPERTY_VALUATION_OPERATION_OPTIONS,\n  STATIC_MASTER_TYPE_TOAST_TEXT,\n  TCamPropertyValuationOperation,\n  TOAST_STYLE_TYPE,\n} from \"utils/Constant\";\nimport { getNumber, showCurrency } from \"../../Helper\";\nimport SkeletonCustom from \"components/Skeleton/Skeleton\";\n\nexport interface ICamCollateralPropertyData {\n  uid: string; // propertyAddress Uid\n  address: string;\n  pincode: {\n    pinCode: string;\n  };\n  city: {\n    name: string;\n    state: {\n      name: string;\n    };\n  };\n  valuationTable: ICamValuationRowData[];\n  pageMode: string;\n  propertyValuation: {\n    // field will not come for the first time\n    smValuationOperationType?: TCamPropertyValuationOperation;\n    finalValuation?: string | number;\n  };\n  isPropertyValuatedByMethodOperation: boolean; // it will be false  for First time\n  // valuationMethod: string;\n  // calculatedValuation: number | \"\";\n}\nexport interface ICamPropertyValuationData {\n  collateralProperties: ICamCollateralPropertyData[];\n  totalPropertyValuation: string | number; // sum of all the cards\n  property?: {\n    uid: string;\n    isCalculating: boolean;\n  };\n\n  // totalValuation: number | \"\";\n}\ninterface IProps {\n  isLoading: boolean;\n  // dropDownOptions: ICamLoanDetailsDropdownList;\n  data?: ICamPropertyValuationData;\n  getDetailsCallback?: (onlyFinalTotal?: boolean) => void;\n}\n\nexport interface ICamValuationRowData {\n  uid: string; //stage uid\n  partner: {\n    name: string;\n  };\n  stageCompletionDate: string;\n  technical: {\n    govtTotalValuationOfProperty: number | string;\n  };\n}\nexport const initialCamPropertyValuationData: ICamPropertyValuationData = {\n  collateralProperties: [],\n  totalPropertyValuation: \"\",\n  property: {\n    uid: \"\",\n    isCalculating: false,\n  },\n  // totalValuation: \"\",\n};\n\nconst PropertyValuation: React.FC<IProps> = forwardRef((props, ref) => {\n  const { data, getDetailsCallback, isLoading } = props;\n  const params: { loanUid?: string; stageUid?: string } = useParams();\n  /*\n    -------------------------------------------------------\n      State\n    -------------------------------------------------------\n    */\n  const [pageObj, setPageObj] = useState<ICamPropertyValuationData>({\n    ...initialCamPropertyValuationData,\n  });\n  // const [pageMode, setPageMode] = useState(PAGE_MODE.VIEW);\n  const [toastMessage, setToastMessage] = useState(\"\");\n  const [triggerToast, setTriggerToast] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [showDialogAPIError, setShowDialogAPIError] = useState(false);\n  // ref\n  const toastMessageRef = useRef(null);\n  const tableRef = React.useRef<EditableComponentRef>(null);\n\n  // --------------------------- validator initialization ---------------------- //\n  const [, forceUpdate] = useState<boolean>(false);\n\n  const simpleValidator = useRef<any[]>([]);\n  const actionMenuRef = useRef<any>(null);\n  const premiumAmountHeaderRef = useRef<any>(null);\n\n  useImperativeHandle(ref, () => ({\n    refresh: onSearch,\n  }));\n\n  // --------------------------- global variables ---------------------- //\n  const actionMenuModel: any[] = [\n    {\n      items: [],\n    },\n  ];\n\n  /*\n     -------------------------------------------------------\n       useEffect\n     -------------------------------------------------------\n   */\n\n  useEffect(() => {\n    setPageObj((prevObj) => ({\n      ...prevObj,\n      collateralProperties: data?.collateralProperties ?? [],\n      totalPropertyValuation: data?.totalPropertyValuation ?? \"\",\n    }));\n    // when add the properties  add the  validations for the properties\n    resetAllSectionValidations(data?.collateralProperties?.length ?? 0);\n  }, [data]);\n\n  useEffect(() => {\n    if (toastMessageRef?.current && toastMessage !== \"\") {\n      // @ts-ignore: will be fixed in future\n      toastMessageRef?.current?.showFunction();\n      setToastMessage(\"\");\n    }\n  }, [toastMessage, triggerToast]);\n\n  useEffect(() => {\n    if (errorMessage) {\n      setShowDialogAPIError(true);\n    }\n  }, [errorMessage]);\n\n  /*\n    -------------------------------------------------------\n      Service Calls\n    -------------------------------------------------------\n  */\n\n  const getPropertyValuationByOperation = async (property: ICamCollateralPropertyData) => {\n    setPageObj((prevObj) => ({\n      ...prevObj,\n      property: {\n        ...prevObj.property,\n        isCalculating: true,\n        uid: property?.uid,\n      },\n    }));\n    try {\n      const payload = enrichForCalculation(property);\n      const res = await CamService.engine(payload);\n      // data\n      \n      setPageObj((prevObj) => {\n        const updatedObj ={...prevObj, \n          property: {\n            ...prevObj.property,\n            isCalculating: false,\n            uid: \"\",\n          },\n\n        };\n        const propertyIndex =prevObj.collateralProperties?.findIndex(record=>record.uid===property?.uid);\n        // ...prevObj,\n        updatedObj.collateralProperties[propertyIndex].propertyValuation.finalValuation= showCurrency(res?.data?.propertyFinalValuation);\n        return updatedObj;\n      });\n      // tableRef.current?.reportDataChange(updatedRowDataObj);\n    } catch (err) {\n      console.log(err);\n      setPageObj((prevObj) => ({\n        ...prevObj,\n        property: {\n          ...prevObj.property,\n          isCalculating: false,\n          uid:\"\",\n        },\n      }));\n      setErrorMessage(parseStandardAPIErrorMessage(err));\n    }\n  };\n\n  /*\n    -------------------------------------------------------\n      Handlers\n    -------------------------------------------------------\n  */\n  const handleValuationMethodChange = (\n    e: any,\n    options: { index: number; property: ICamCollateralPropertyData }\n  ) => {\n    setPageObj((prevObj) => {\n      const updatedPageObj = { ...prevObj };\n      updatedPageObj.collateralProperties[\n        options.index\n      ].propertyValuation.smValuationOperationType = e.target.value;\n      getPropertyValuationByOperation(options.property);\n      return updatedPageObj;\n    });\n  };\n\n  /* \n    --------------------------------------------------------\n    Validators:\n    --------------------------------------------------------\n  */\n\n  const validate = (e: any, index: number) => {\n    simpleValidator?.current?.[index]?.showMessageFor(e?.target?.name);\n  };\n\n  const validateForm = (index: number) => {\n    let isValid = false;\n    isValid = simpleValidator?.current?.[index]?.allValid() ?? false;\n    if (isValid) {\n      return isValid;\n    } else {\n      forceUpdate((prev) => !prev);\n      simpleValidator?.current?.[index]?.showMessages();\n      forceUpdate((prev) => !prev);\n      return false;\n    }\n  };\n\n  /*\n    -------------------------------------------------------\n      Button Click Handlers\n    -------------------------------------------------------\n  */\n\n  const onSave = async (index: number, options: { data: ICamCollateralPropertyData }) => {\n    console.log(\"save\");\n\n    if (!validateForm(index)) {\n      return;\n    }\n    const payload = enrichForSave(options?.data);\n    try {\n      await CamService.updatePropertyValuation(payload);\n      setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.SAVED);\n      setTriggerToast(!triggerToast);\n      getDetailsCallback?.(true);\n      setPageObj((prevPageObj) => {\n        const updatedPageObj = { ...prevPageObj };\n        updatedPageObj.collateralProperties[index].pageMode = PAGE_MODE.VIEW;\n        return updatedPageObj;\n      });\n    } catch (error) {\n      setErrorMessage(parseStandardAPIErrorMessage(error));\n    }\n  };\n\n  const onEdit = (index: number) => {\n    // setPageMode(PAGE_MODE.EDIT);\n    setPageObj((prevPageObj) => {\n      const updatedPageObj = { ...prevPageObj };\n      updatedPageObj.collateralProperties[index].pageMode = PAGE_MODE.EDIT;\n      return updatedPageObj;\n    });\n  };\n\n  const onCancel = (index: number) => {\n    setPageObj((prevPageObj) => {\n      const updatedPageObj = { ...prevPageObj };\n      updatedPageObj.collateralProperties[index].pageMode = PAGE_MODE.VIEW;\n      return updatedPageObj;\n    });\n    getDetailsCallback?.();\n    resetSectionValidations(index);\n  };\n\n  /*\n    -------------------------------------------------------\n      Helper Functions\n    -------------------------------------------------------\n  */\n\n  const enrichForCalculation = (data: ICamCollateralPropertyData) => {\n    const enrichObj = {\n      loanUid: params?.loanUid,\n      stageUid: params?.stageUid,\n      smPropertyValuationOperationType: data?.propertyValuation?.smValuationOperationType,\n      propertyAddressUid: data?.uid,\n      // recommendedLoanAmount: getNumber(data?.recommendedLoanAmount),\n    };\n    return enrichObj;\n  };\n\n  const enrichForSave = (data: ICamCollateralPropertyData) => {\n    const enrichObj = {\n      loan: {\n        uid: params?.loanUid,\n      },\n      stage: {\n        uid: params?.stageUid,\n      },\n      address: {\n        uid: data?.uid,\n      },\n      smValuationOperationType: data?.propertyValuation?.smValuationOperationType,\n      finalValuation: getNumber(data?.propertyValuation?.finalValuation),\n    };\n    return enrichObj;\n  };\n\n  const resetAllSectionValidations = (totalSections: number) => {\n    for (let i = 0; i < totalSections; i++) {\n      simpleValidator.current[i] = new SimpleReactValidator({\n        validators: { ...getStandardValidator() },\n        ...messageReplace(),\n        autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n      });\n      simpleValidator?.current?.[i]?.hideMessages();\n    }\n  };\n\n  const resetSectionValidations = (index: number) => {\n    simpleValidator.current[index] = new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    });\n    simpleValidator?.current?.[index]?.hideMessages();\n  };\n\n  const onSearch = () => {\n    tableRef.current?.search();\n  };\n\n  const getAllPropertyAnnotations = () => {\n    let annotations = \"\";\n    for (let i = 0; i < pageObj.collateralProperties.length; i++) {\n      if (i === pageObj.collateralProperties.length - 1) {\n        annotations += ` ${PROPERTY_ANNOTATION[i]}`;\n      } else {\n        annotations += `${PROPERTY_ANNOTATION[i]} + `;\n      }\n    }\n\n    if (pageObj.collateralProperties.length > 0) {\n      return `( ${annotations} )`;\n    }\n    return \"\";\n  };\n\n  // const getAllPropertiesTotalValuation = () => {\n  //   let totalValuation = 0;\n  //   pageObj.properties.forEach((property, index) => {\n  //     if (property.calculatedValuation === \"\") {\n  //       totalValuation += 0;\n  //       return;\n  //     }\n  //     totalValuation += property.calculatedValuation;\n  //   });\n  //   return ` ${totalValuation ? \"₹ \" + numberFormatter(totalValuation, \"en-IN\", 0) : \"\"}`;\n  // };\n\n  /*\n    -------------------------------------------------------\n      Sectional Rendering\n    -------------------------------------------------------\n  */\n\n  const renderValuationMethod = (property: ICamCollateralPropertyData, index: number) => {\n    return (\n      <div className=\"flex \">\n        <div className=\"w-30 mr-3\">\n          <SimpleDropDown\n            hideLabel\n            // placeholder=\"placeholder.cam.typeOfApplicant\"\n            name={`smValuationOperationType${index}`}\n            value={property?.propertyValuation?.smValuationOperationType ?? \"\"}\n            variant={INPUT_STYLE_TYPE.PRIMARY}\n            options={PROPERTY_VALUATION_OPERATION_OPTIONS}\n            optionLabel=\"name\"\n            optionValue=\"code\"\n            onChange={(e) => handleValuationMethodChange(e, { index, property })}\n            onBlur={(e) => validate(e, index)}\n            // loader={isLoading}\n            validation={simpleValidator?.current?.[index].message(\n              `smValuationOperationType${index}`,\n              property.propertyValuation?.smValuationOperationType,\n              \"mandatory\"\n            )}\n            disabled={pageObj?.property?.isCalculating && pageObj?.property?.uid !== property?.uid}\n          />\n        </div>\n        <Text className=\" text-xs font-medium \" label={`(${PROPERTY_ANNOTATION[index]})`} />\n      </div>\n    );\n  };\n\n  const renderCalculatedValuation = (property: ICamCollateralPropertyData) => {\n    return (\n      <Text\n        className=\"text-right\"\n        label={`${\n          property.propertyValuation?.finalValuation\n            ? \"₹ \" + showCurrency(property.propertyValuation?.finalValuation)\n            : \"\"\n        }`}\n      />\n    );\n  };\n\n  const renderVenderName = (rowData: ICamValuationRowData) => {\n    return (\n      <Text className=\"  text-primary-ptext-1000 \" label={`${rowData?.partner?.name ?? \"\"}`} />\n    );\n  };\n\n  const renderDateOfValuation = (rowData: ICamValuationRowData) => {\n    return (\n      <Text\n        className=\"  text-primary-ptext-1000 \"\n        label={`${formatDate(rowData?.stageCompletionDate)}`}\n      />\n    );\n  };\n\n  const renderTotalValuation = (rowData: ICamValuationRowData) => {\n    return (\n      <Text\n        className=\"  text-primary-ptext-1000 text-right\"\n        label={`${showCurrency(rowData?.technical?.govtTotalValuationOfProperty)}`}\n      />\n    );\n  };\n\n  /*\n    -------------------------------------------------------\n    Main Rendering\n    -------------------------------------------------------\n  */\n\n  return (\n    <Section title=\"label.technical.propertyValuation\">\n      <>\n        {isLoading ? (\n          <SkeletonCustom height=\"19.375rem\" width=\"100%\" borderRadius=\"8px\" animation=\"wave\" />\n        ) : (\n          <>\n            {pageObj.collateralProperties.map(\n              (property: ICamCollateralPropertyData, index: number) => (\n                <div key={index}>\n                  <SaveComponent\n                    title=\"\"\n                    // renderHeaderContent={renderSaveComponentHeader}\n                    // disabled={isLegalSectionAccessDisabled(legalStatus)}\n                    className=\"\"\n                    pageMode={property.pageMode}\n                    disabled={pageObj?.property?.isCalculating}\n                    onSave={() => onSave(index, { data: property })}\n                    onCancel={() => onCancel(index)}\n                    onEdit={() => onEdit(index)}\n                  >\n                    <AclGuard override={{ read: property.pageMode === PAGE_MODE.VIEW }}>\n                      <div className=\"grid grid-cols-4 gap-5\">\n                        <div className=\"flex flex-col\">\n                          <Text\n                            className=\"text-primary-gray-600 text-xs\"\n                            label={\"label.dde.propertyAddress\"}\n                          />\n                          <Text\n                            className=\"text-primary-ptext-1000 text-xs \"\n                            label={property?.address ?? \"\"}\n                          />\n                        </div>\n                        <div className=\"flex flex-col\">\n                          <Text\n                            className=\"text-primary-gray-600 text-xs\"\n                            label={\"heading.pincode\"}\n                          />\n                          <Text\n                            className=\"text-primary-ptext-1000 text-xs\"\n                            label={property?.pincode?.pinCode ?? \"\"}\n                          />\n                        </div>\n                        <div className=\"flex flex-col\">\n                          <Text\n                            className=\"text-primary-gray-600 text-xs\"\n                            label={\"input.pincode.city\"}\n                          />\n                          <Text\n                            className=\"text-primary-ptext-1000 text-xs\"\n                            label={property?.city?.name ?? \"\"}\n                          />\n                        </div>\n                        <div className=\"flex flex-col\">\n                          <Text\n                            className=\"text-primary-gray-600 text-xs\"\n                            label={\"input.pincode.state\"}\n                          />\n                          <Text\n                            className=\"text-primary-ptext-1000 text-xs\"\n                            label={property?.city?.state?.name ?? \"\"}\n                          />\n                        </div>\n                        <div className=\"col-span-4\">\n                          <div className=\"mb-3\">\n                            <Text\n                              className=\"text-primary-ptext-1000  text-xs \"\n                              label={\"label.cam.valuation\"}\n                            />\n                          </div>\n                          <ReadOnlyTable\n                            value={property?.valuationTable}\n                            className={`transaction ${\n                              property?.valuationTable?.length\n                                ? \"  \"\n                                : \" rcu-stage-document-verification\"\n                            }`}\n                            ref={tableRef}\n                            dataKey=\"uid\"\n                          >\n                            <Column\n                              className=\"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6\"\n                              header={i18n.t(\"label.cam.vendorName\")}\n                              body={renderVenderName}\n                              footer={() => renderValuationMethod(property, index)}\n                            />\n                            <Column\n                              className=\"text-primary-ptext-1000 text-left text-xs  p-1 h-12 pl-6\"\n                              header={i18n.t(\"label.cam.dateOfValuation\")}\n                              body={renderDateOfValuation}\n                            />\n                            <Column\n                              className=\"text-primary-ptext-1000 text-right text-xs  p-1 h-12 pl-6 pr-5\"\n                              header={i18n.t(\"label.cam.totalValuation(₹)\")}\n                              body={renderTotalValuation}\n                              style={{ maxWidth: \"168px\" }}\n                              footer={() => renderCalculatedValuation(property)}\n                            />\n                          </ReadOnlyTable>\n                        </div>\n                      </div>\n                    </AclGuard>\n                  </SaveComponent>\n                </div>\n              )\n            )}\n            {pageObj?.collateralProperties.length > 0 ? (\n              <div className=\"bg-[#fbfbff] flex justify-between pl-7 pr-11 py-6\">\n                <div>\n                  <Text\n                    className=\" font-medium text-xs\"\n                    label={\"label.cam.totalValuationBeingConsidered\"}\n                    args={{ properties: getAllPropertyAnnotations() }}\n                  />\n                </div>\n                <div>\n                  <Text\n                    className=\" font-medium text-xs\"\n                    label={\n                      pageObj?.totalPropertyValuation\n                        ? \"₹ \" + showCurrency(pageObj?.totalPropertyValuation)\n                        : \"\"\n                    }\n                  />\n                </div>\n              </div>\n            ) : null}\n          </>\n        )}\n        <div></div>\n\n        <ToastCustom\n          position={\"bottom-right\"}\n          ref={toastMessageRef}\n          toastText={toastMessage}\n          variant={TOAST_STYLE_TYPE.PRIMARY}\n        />\n\n        <ErrorDialog\n          onHide={() => {\n            setShowDialogAPIError(false);\n            setErrorMessage(\"\");\n          }}\n          visible={showDialogAPIError}\n          errorMessage={errorMessage}\n        />\n      </>\n    </Section>\n  );\n});\n\nexport default PropertyValuation;\n","import AclGuard from \"components/AclGuard\";\nimport ErrorDialog from \"components/ErrorDialog/ErrorDialog\";\nimport RichTextEditor from \"components/RichTextEditor/RichTextEditor\";\nimport SaveComponent from \"components/Save/SaveComponent\";\nimport SkeletonCustom from \"components/Skeleton/Skeleton\";\nimport ToastCustom from \"components/Toast\";\nimport React, { forwardRef, useEffect, useRef, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport CamService from \"services/transaction/CamService\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport {\n  getStandardValidator,\n  messageReplace,\n  parseStandardAPIErrorMessage,\n} from \"utils/CommonUtil\";\nimport { PAGE_MODE, STATIC_MASTER_TYPE_TOAST_TEXT, TOAST_STYLE_TYPE } from \"utils/Constant\";\n\nexport interface ICamRepaymentHistoryCommentPageObj {\n  uid: string;\n  editorText: string;\n  errorMessage?: string;\n}\n\nexport const initialRepaymentHistoryCommentPageObj: ICamRepaymentHistoryCommentPageObj = {\n  uid: \"\",\n  editorText: \"\",\n  errorMessage: \"\",\n};\n\ninterface IEditorRef {\n  editor: {\n    getContent: () => void;\n    plugins: {\n      wordcount: {\n        body: {\n          getCharacterCount: () => any;\n        };\n      };\n    };\n  };\n}\n\ninterface IProps {\n  isLoading: boolean;\n  data: ICamRepaymentHistoryCommentPageObj;\n  getDetailsCallback?: () => void;\n}\n\nconst RepaymentHistoryComment: React.FC<IProps> = forwardRef((props, ref) => {\n  const { data, isLoading, getDetailsCallback } = props;\n\n  const params: { loanUid?: string; stageUid?: string } = useParams();\n  /*\n    -------------------------------------------------------\n      State\n    -------------------------------------------------------\n  */\n  const [pageObj, setPageObj] = useState<ICamRepaymentHistoryCommentPageObj>({\n    ...initialRepaymentHistoryCommentPageObj,\n  });\n  const [pageMode, setPageMode] = useState(PAGE_MODE.VIEW);\n  const [toastMessage, setToastMessage] = useState(\"\");\n  const [triggerToast, setTriggerToast] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [showDialogAPIError, setShowDialogAPIError] = useState(false);\n\n  // ref\n  const toastMessageRef = useRef(null);\n  const editorRef = useRef<IEditorRef>(null);\n\n  // --------------------------- validator initialization ---------------------- //\n  const [, forceUpdate] = useState<boolean>(false);\n\n  const simpleValidator = useRef(\n    new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    })\n  );\n\n  // --------------------------- global variables ---------------------- //\n\n  /*\n     -------------------------------------------------------\n       useEffect\n     -------------------------------------------------------\n   */\n\n  useEffect(() => {\n    // if (data.loanUid) {\n    setPageObj((prevObj) => ({\n      ...prevObj,\n      ...data,\n    }));\n    // }\n  }, [data]);\n\n  useEffect(() => {\n    if (toastMessageRef?.current && toastMessage !== \"\") {\n      // @ts-ignore: will be fixed in future\n      toastMessageRef?.current?.showFunction();\n      setToastMessage(\"\");\n    }\n  }, [toastMessage, triggerToast]);\n\n  useEffect(() => {\n    if (errorMessage) {\n      setShowDialogAPIError(true);\n    }\n  }, [errorMessage]);\n\n  /*\n    -------------------------------------------------------\n      Service Calls\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n      Handlers\n    -------------------------------------------------------\n  */\n  const handleEditorValidation = (e: any) => {\n    if (validateEditor()) {\n      if (pageObj?.errorMessage) {\n        setPageObj((prevPageObj) => ({ ...prevPageObj, errorMessage: \"\" }));\n      }\n    }\n  };\n\n  /* \n    --------------------------------------------------------\n    Validators:\n    --------------------------------------------------------\n  */\n\n  const validateForm = () => {\n    let isValid = false;\n    isValid = simpleValidator?.current?.allValid() ?? false;\n    if (isValid) {\n      return isValid;\n    } else {\n      forceUpdate((prev) => !prev);\n      simpleValidator?.current?.showMessages();\n      forceUpdate((prev) => !prev);\n      return false;\n    }\n  };\n\n  const validateEditor = () => {\n    console.log(\"editor \", editorRef);\n\n    const wordcount = editorRef?.current?.editor?.plugins?.wordcount?.body.getCharacterCount();\n\n    if (wordcount < 1) {\n      setPageObj((prevState) => {\n        return {\n          ...prevState,\n          errorMessage: \"Mandatory\",\n        };\n      });\n      return false;\n    }\n\n    return true;\n  };\n\n  /*\n    -------------------------------------------------------\n      Button Click Handlers\n    -------------------------------------------------------\n  */\n\n  const onSave = async () => {\n    if (validateEditor()) {\n      const payload = enrichForSave();\n      try {\n        await CamService.updateRepaymentHistoryComment(payload);\n        setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.SAVED);\n        setTriggerToast(!triggerToast);\n        setPageMode(PAGE_MODE.VIEW);\n        getDetailsCallback?.();\n      } catch (error) {\n        setErrorMessage(parseStandardAPIErrorMessage(error));\n      }\n    }\n  };\n\n  const onEdit = () => setPageMode(PAGE_MODE.EDIT);\n\n  const onCancel = () => {\n    setPageMode(PAGE_MODE.VIEW);\n    resetValidator();\n    // if  form has existing saved  data then call api else clear all\n    getDetailsCallback?.();\n  };\n\n  /*\n    -------------------------------------------------------\n      Helper Functions\n    -------------------------------------------------------\n  */\n\n  const enrichForSave = () => {\n    return {\n      loan: {\n        uid: params?.loanUid,\n      },\n      stage: {\n        uid: params?.stageUid,\n      },\n      remarksOnRepaymentHistory: editorRef.current?.editor?.getContent(),\n    };\n  };\n\n  const resetValidator = () => {\n    simpleValidator.current = new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    });\n    simpleValidator?.current?.hideMessages();\n  };\n\n  /*\n    -------------------------------------------------------\n      Sectional Renders\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n    Main Renders\n    -------------------------------------------------------\n  */\n\n  return (\n    <div>\n      <SaveComponent\n        title={\"label.cam.commentsOnRepaymentHistory\"}\n        pageMode={pageMode}\n        disabled={isLoading}\n        onSave={onSave}\n        onCancel={onCancel}\n        onEdit={onEdit}\n      >\n        {isLoading ? (\n          <SkeletonCustom height=\"19.375rem\" width=\"100%\" borderRadius=\"8px\" animation=\"wave\" />\n        ) : (\n          <AclGuard override={{ read: pageMode === PAGE_MODE.VIEW }}>\n            <div className=\"grid grid-cols-4 gap-3 \">\n              <div className=\"col-span-4\">\n                <RichTextEditor\n                  ref={editorRef}\n                  validation={{ errorMessage: pageObj.errorMessage }}\n                  initialValue={pageObj.editorText}\n                  onChange={handleEditorValidation}\n                  height={\"400x\"}\n                  disabled={pageMode === PAGE_MODE.VIEW}\n                />\n              </div>\n            </div>\n          </AclGuard>\n        )}\n      </SaveComponent>\n\n      <ToastCustom\n        position={\"bottom-right\"}\n        ref={toastMessageRef}\n        toastText={toastMessage}\n        variant={TOAST_STYLE_TYPE.PRIMARY}\n      />\n\n      <ErrorDialog\n        onHide={() => {\n          setShowDialogAPIError(false);\n          setErrorMessage(\"\");\n        }}\n        visible={showDialogAPIError}\n        errorMessage={errorMessage}\n      />\n    </div>\n  );\n});\n\nexport default RepaymentHistoryComment;\n","import AclGuard from \"components/AclGuard\";\nimport ButtonBox from \"components/ButtonBox/ButtonBox\";\nimport EditableTableV2, {\n  Column,\n  EditableComponentRef,\n} from \"components/EditableTableV2/EditableTableV2\";\nimport ErrorDialog from \"components/ErrorDialog/ErrorDialog\";\nimport IconButton, { BUTTON_TYPES } from \"components/IconButton/IconButton\";\nimport InputAddon from \"components/InputAddon/InputAddon\";\nimport InputBox from \"components/InputBox\";\nimport SaveComponent from \"components/Save/SaveComponent\";\nimport SimpleDropDown from \"components/SimpleDropDown/SimpleDropDown\";\nimport SkeletonCustom from \"components/Skeleton/Skeleton\";\nimport Text from \"components/Text/Text\";\nimport TextButton from \"components/TextButton/TextButton\";\nimport ToastCustom from \"components/Toast\";\nimport i18n from \"i18n\";\nimport { numberFormatter } from \"locale\";\nimport React, { forwardRef, useEffect, useImperativeHandle, useRef, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport CamService from \"services/transaction/CamService\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport {\n  getStandardValidator,\n  messageReplace,\n  parseStandardAPIErrorMessage,\n} from \"utils/CommonUtil\";\nimport {\n  BUTTON_TYPE,\n  CAM_CHARGE_CONFIGURATION_CODE,\n  CAM_CHARGE_TYPE,\n  CAM_FEE_STATUS,\n  INPUT_STYLE_TYPE,\n  PAGE_MODE,\n  STATIC_MASTER_TYPE_TOAST_TEXT,\n  TOAST_STYLE_TYPE,\n} from \"utils/Constant\";\nimport { getNumber, showCurrency, updateCamFeeDetailsRowDataObj } from \"../../Helper\";\nimport { ICamLoanDetailsDropdownList } from \"../../PageLoanDetails/PageLoanDetails\";\nimport WarningDialog from \"components/WarningDialog/WarningDialog\";\n\nexport type TCamFeeStatus = \"APPLICABLE\";\nexport type TCamChargeTypeCode = \"CHARGE_TYPE_SYSTEM_DEFINED\" | \"CHARGE_TYPE_USER_DEFINED\";\nexport type TCamConfigurationTypeCode = \"CONFIGURATION_FIXED\" | \"CONFIGURATION_VARIABLE\";\nexport interface ICamProductIncomeSchemeDropdownOption {\n  uid?: string;\n  name?: string;\n  product?: {\n    uid?: string;\n    name?: string;\n    productType?: {\n      uid?: string;\n      name?: string;\n    };\n  };\n  incomeSchemeName?: {\n    uid?: string;\n    name?: string;\n  };\n  bank?: {\n    uid?: string;\n    name?: string;\n  };\n  lendingType?: {\n    uid?: string;\n    name?: string;\n  };\n  details?: {\n    maxFoir?: number | string;\n  }[];\n}\n\nexport interface ICamChargeNameDropdownOption {\n  uid?: string; // fee configuration Uid\n  // name?:string;\n  fee?: {\n    name?: string; // display name\n    chargeType?: {\n      name?: string;\n      code?: TCamChargeTypeCode;\n    };\n    configurationType?: {\n      name?: string;\n      code?: TCamConfigurationTypeCode;\n    };\n  };\n  isWaiver: boolean;\n  isDefault: boolean;\n  amount: string | number;\n  amountInPercent: string;\n}\nexport interface ICamSchemeDetailsPageObj {\n  tableSearch?: string;\n  productIncomeScheme: ICamProductIncomeSchemeDropdownOption;\n  loadingForUpdatedProductIncomeScheme?: boolean;\n  chargeNameOptions?: ICamChargeNameDropdownOption[];\n  row?: {\n    isCalculating: boolean;\n    uid: string;\n  };\n  isChangeProductIncomeScheme?: boolean;\n  newProductIncomeScheme?: ICamProductIncomeSchemeDropdownOption;\n  // delete\n}\n\nexport interface ICamSchemeDetailsRef {\n  refreshFeeTable: () => void;\n}\n\ninterface IProps {\n  isLoading: boolean;\n  dropDownOptions: ICamLoanDetailsDropdownList;\n  data: ICamSchemeDetailsPageObj;\n  ref: any;\n  getDetailsCallback?: (options?: { isProductIncomeSchemeUpdated?: boolean }) => void;\n}\n\nexport interface ICamFeeDetailsRowData {\n  uid: string;\n  chargeTypeCode: TCamChargeTypeCode | \"\";\n  amount: string | number;\n  amountIncludingGst: string | number; // not present in the rowData sometimes\n  feeConfiguration: {\n    uid?: string; // update this uid on charge name change for payload\n    fee?: {\n      name?: string; // update this uid on charge name change for UI\n    };\n    configurationType?: {\n      name?: string; // update this uid on charge name change for UI\n      code?: TCamConfigurationTypeCode | \"\"; // update this field on charge name change for Payload\n    };\n    isWaiver?: boolean;\n    isDefault?: boolean;\n  };\n  status: TCamFeeStatus;\n  isActive: boolean;\n}\nconst initialProductIncomeScheme = {\n  uid: \"\",\n  name: \"\",\n  product: {\n    uid: \"\",\n    name: \"\",\n  },\n  bank: {\n    uid: \"\",\n    name: \"\",\n  },\n  incomeSchemeName: {\n    uid: \"\",\n    name: \"\",\n  },\n  lendingType: {\n    uid: \"\",\n    name: \"\",\n  },\n};\n\nexport const initialCamSchemeDetailsData: ICamSchemeDetailsPageObj = {\n  tableSearch: \"\",\n  productIncomeScheme: {\n    ...initialProductIncomeScheme,\n  },\n  loadingForUpdatedProductIncomeScheme: false,\n  chargeNameOptions: [],\n  row: {\n    isCalculating: false,\n    uid: \"\",\n  },\n  isChangeProductIncomeScheme: false,\n  newProductIncomeScheme: { ...initialProductIncomeScheme },\n  // totalValuation: \"\",\n};\n\nconst initialTableRowData: ICamFeeDetailsRowData = {\n  uid: \"\",\n  chargeTypeCode: \"\",\n  amount: \"\",\n  amountIncludingGst: \"\", // not present in the rowData\n  feeConfiguration: {\n    uid: \"\",\n    fee: {\n      name: \"\",\n    },\n    configurationType: {\n      name: \"\",\n      code: \"\",\n    },\n    isDefault: false,\n    isWaiver: false,\n  },\n  status: CAM_FEE_STATUS.APPLICABLE,\n  isActive: true,\n};\n\nconst SchemeDetails: React.FC<IProps> = forwardRef((props, ref) => {\n  const { data, dropDownOptions, isLoading, getDetailsCallback } = props;\n  const params: { loanUid?: string; stageUid?: string } = useParams();\n  /*\n    -------------------------------------------------------\n      State\n    -------------------------------------------------------\n    */\n  const [pageObj, setPageObj] = useState<ICamSchemeDetailsPageObj>({\n    ...initialCamSchemeDetailsData,\n  });\n  // const [pageObj, setPageObj] = useState({});\n  const [pageMode, setPageMode] = useState(PAGE_MODE.VIEW);\n  const [timeOutLocal, setTimeOutLocal] = useState<any>(undefined);\n  const [toastMessage, setToastMessage] = useState(\"\");\n  const [triggerToast, setTriggerToast] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [showDialogAPIError, setShowDialogAPIError] = useState(false);\n  // ref\n  const toastMessageRef = useRef(null);\n  const tableRef = React.useRef<EditableComponentRef>(null);\n\n  // --------------------------- validator initialization ---------------------- //\n  const [, forceUpdate] = useState<boolean>(false);\n\n  const simpleValidator = useRef(\n    new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    })\n  );\n\n  useImperativeHandle(ref, () => ({\n    refreshFeeTable: refreshFeeTable,\n  }));\n\n  // --------------------------- global variables ---------------------- //\n\n  /*\n     -------------------------------------------------------\n       useEffect\n     -------------------------------------------------------\n   */\n\n  // useEffect(() => {\n  //   setPageObj((prevPageObj) => ({\n  //     ...prevPageObj,\n  //     tableSearch: `&loanUid=${params?.loanUid}&reEvalDefaultFee=false`,\n  //   }));\n  // }, []);\n\n  useEffect(() => {\n    setPageObj((prevObj) => ({\n      ...prevObj,\n      productIncomeScheme: data?.productIncomeScheme,\n      tableSearch: `&loanUid=${params?.loanUid}&reEvalDefaultFee=false&start=0&limit=10000`,\n    }));\n  }, [data]);\n\n  useEffect(() => {\n    if (toastMessageRef?.current && toastMessage !== \"\") {\n      // @ts-ignore: will be fixed in future\n      toastMessageRef?.current?.showFunction();\n      setToastMessage(\"\");\n    }\n  }, [toastMessage, triggerToast]);\n\n  useEffect(() => {\n    if (errorMessage) {\n      setShowDialogAPIError(true);\n    }\n  }, [errorMessage]);\n\n  useEffect(() => {\n    if (\n      pageObj?.productIncomeScheme?.lendingType?.uid &&\n      pageObj?.productIncomeScheme?.bank?.uid && //&&\n      dropDownOptions?.productIncomeScheme &&\n      dropDownOptions?.productIncomeScheme?.length > 0\n    ) {\n      const selectedProductIncomeScheme: ICamProductIncomeSchemeDropdownOption | undefined =\n        dropDownOptions?.productIncomeScheme?.find(\n          (record) => record.uid === pageObj?.productIncomeScheme?.uid\n        );\n      getChargeNameDropdownOptions(selectedProductIncomeScheme?.product?.productType?.uid ?? \"\");\n    }\n  }, [pageObj?.productIncomeScheme?.uid, dropDownOptions.productIncomeScheme]);\n\n  /*\n    -------------------------------------------------------\n      Service Calls\n    -------------------------------------------------------\n  */\n\n  // implementation before old api\n  // const getChargeNameDropdownOptions = async (productTypeUid:string) => {\n  //   try {\n  //     const res = await CamService.getChargeNameOptions(\n  //       `?bank.uid=${pageObj?.productIncomeScheme?.bank?.uid}&lendingType.uid=${pageObj?.productIncomeScheme?.lendingType?.uid}&fee.productType.uid=${productTypeUid}&isDefault=false&fee.isActive=true&isActive=true`\n  //     );\n\n  //     setPageObj((prevObj) => {\n  //       const updatedPageObj = { ...prevObj };\n  //       updatedPageObj.chargeNameOptions = res?.data?.results;\n  //       return updatedPageObj;\n  //     });\n  //   } catch (err) {\n  //     console.log(err);\n  //     setErrorMessage(parseStandardAPIErrorMessage(err));\n  //   }\n  // };\n\n  const getChargeNameDropdownOptions = async (productTypeUid: string) => {\n    try {\n      const res = await CamService.getChargeNameOptions(\n        `?bankUid=${pageObj?.productIncomeScheme?.bank?.uid}&lendingTypeUid=${pageObj?.productIncomeScheme?.lendingType?.uid}&productTypeUid=${productTypeUid}`\n      );\n\n      setPageObj((prevObj) => {\n        const updatedPageObj = { ...prevObj };\n        updatedPageObj.chargeNameOptions = res?.data;\n        return updatedPageObj;\n      });\n    } catch (err) {\n      console.log(err);\n      setErrorMessage(parseStandardAPIErrorMessage(err));\n    }\n  };\n\n  const getAmountIncludingGst = async (rowData: ICamFeeDetailsRowData) => {\n    setPageObj((prevPageObj) => ({\n      ...prevPageObj,\n      row: {\n        ...prevPageObj.row,\n        isCalculating: true,\n        uid: rowData?.uid,\n      },\n    }));\n    try {\n      const payload = enrichForCalculation(rowData);\n      const res = await CamService.engine(payload);\n      // loanFeeAmountIncludingGst\n\n      setPageObj((prevObj) => ({\n        ...prevObj,\n        row: {\n          ...prevObj.row,\n          isCalculating: false,\n          uid: \"\",\n        },\n      }));\n      const allRecords = tableRef?.current?.getCurrentRecords();\n      const editedRecord = allRecords?.find((record) => record.uid === rowData?.uid);\n      const updatedRowDataObj: ICamFeeDetailsRowData = {\n        ...editedRecord,\n        amountIncludingGst: showCurrency(res?.data?.loanFeeAmountIncludingGst),\n      };\n      tableRef.current?.reportDataChange(updatedRowDataObj);\n    } catch (err) {\n      console.log(err);\n      setPageObj((prevObj) => ({\n        ...prevObj,\n        row: {\n          ...prevObj.row,\n          isCalculating: false,\n          uid: \"\",\n        },\n      }));\n      setErrorMessage(parseStandardAPIErrorMessage(err));\n    }\n  };\n\n  /*\n    -------------------------------------------------------\n      Handlers\n    -------------------------------------------------------\n  */\n\n  const handleChange = (e: any) => {\n    setPageObj((prevObj) => ({\n      ...prevObj,\n      [e.target.name]: e.target.value,\n    }));\n  };\n\n  const handleProductSchemeChange = (e: any) => {\n    const selectedProductIncomeScheme = dropDownOptions?.productIncomeScheme?.find(\n      (record) => record.uid === e.target.value\n    );\n    //data?.productIncomeScheme?.uid;\n    setPageObj((prevObj) => {\n      let updatePageObj = { ...prevObj };\n      let updateKey: \"newProductIncomeScheme\" | \"productIncomeScheme\" = \"productIncomeScheme\";\n      const updatesProductIncomeScheme: ICamProductIncomeSchemeDropdownOption = {\n        ...prevObj.productIncomeScheme,\n        name: selectedProductIncomeScheme?.name ?? \"\",\n        uid: selectedProductIncomeScheme?.uid ?? \"\",\n        product: {\n          ...prevObj.productIncomeScheme.product,\n          name: selectedProductIncomeScheme?.product?.name ?? \"\",\n          uid: selectedProductIncomeScheme?.product?.uid ?? \"\",\n        },\n        incomeSchemeName: {\n          ...prevObj.productIncomeScheme.incomeSchemeName,\n          name: selectedProductIncomeScheme?.incomeSchemeName?.name ?? \"\",\n          uid: selectedProductIncomeScheme?.incomeSchemeName?.uid ?? \"\",\n        },\n        bank: {\n          ...prevObj.productIncomeScheme.bank,\n          name: selectedProductIncomeScheme?.bank?.name ?? \"\",\n          uid: selectedProductIncomeScheme?.bank?.uid ?? \"\",\n        },\n        lendingType: {\n          ...(prevObj.productIncomeScheme.lendingType ?? \"\"),\n          name: selectedProductIncomeScheme?.lendingType?.name ?? \"\",\n          uid: selectedProductIncomeScheme?.lendingType?.uid ?? \"\",\n        },\n      };\n      if (data?.productIncomeScheme?.uid) {\n        updateKey = \"newProductIncomeScheme\";\n        updatePageObj.isChangeProductIncomeScheme = true;\n      }\n      updatePageObj = {\n        ...updatePageObj,\n        [`${updateKey}`]: { ...updatesProductIncomeScheme },\n      };\n\n      return updatePageObj;\n    });\n  };\n\n  const handleTableChargeNameChange = (\n    e: any,\n    options: {\n      rowData: ICamFeeDetailsRowData;\n    }\n  ) => {\n    let rowDataObj: ICamFeeDetailsRowData = { ...options.rowData };\n\n    const selectedChargeName = pageObj?.chargeNameOptions?.find(\n      (record) => record.uid === e.target.value\n    );\n    rowDataObj = {\n      ...rowDataObj,\n      feeConfiguration: {\n        ...rowDataObj.feeConfiguration,\n        uid: selectedChargeName?.uid ?? \"\",\n        configurationType: {\n          ...rowDataObj.feeConfiguration.configurationType,\n          name: selectedChargeName?.fee?.configurationType?.name ?? \"\",\n          code: selectedChargeName?.fee?.configurationType?.code ?? \"\",\n        },\n        isDefault: selectedChargeName?.isDefault,\n        isWaiver: selectedChargeName?.isWaiver,\n        fee: {\n          ...rowDataObj.feeConfiguration.fee,\n          name: selectedChargeName?.fee?.name,\n        },\n      },\n      amount:\n        selectedChargeName?.fee?.configurationType?.code ===\n        CAM_CHARGE_CONFIGURATION_CODE.CONFIGURATION_FIXED\n          ? selectedChargeName?.amount\n          : selectedChargeName?.amountInPercent ?? \"\",\n      chargeTypeCode: selectedChargeName?.fee?.chargeType?.code ?? \"\",\n    };\n    debounce(() => getAmountIncludingGst(rowDataObj), 1200);\n    tableRef.current?.reportDataChange(rowDataObj);\n  };\n\n  const handleTableAmountChange = (\n    e: any,\n    options: {\n      rowData: ICamFeeDetailsRowData;\n    }\n  ) => {\n    let rowDataObj: ICamFeeDetailsRowData = { ...options.rowData };\n    let updatedAmount;\n    if (\n      options?.rowData?.feeConfiguration?.configurationType?.code ===\n      CAM_CHARGE_CONFIGURATION_CODE.CONFIGURATION_FIXED\n    ) {\n      updatedAmount = showCurrency(e.target.value);\n    } else {\n      updatedAmount = e.target.value;\n    }\n    // const unformattedValue = currencyFormatToNumber(e.target.value);\n    rowDataObj = {\n      ...rowDataObj,\n      amount: updatedAmount,\n    };\n    tableRef.current?.reportDataChange(rowDataObj);\n    debounce(() => getAmountIncludingGst(rowDataObj), 1200);\n  };\n\n  /* \n    --------------------------------------------------------\n    Validators:\n    --------------------------------------------------------\n  */\n\n  const validate = (e: any) => {\n    simpleValidator?.current?.showMessageFor(e?.target?.name);\n  };\n\n  const validateForm = () => {\n    let isValid = false;\n    isValid = simpleValidator?.current?.allValid() ?? false;\n    if (isValid) {\n      return isValid;\n    } else {\n      forceUpdate((prev) => !prev);\n      simpleValidator?.current?.showMessages();\n      forceUpdate((prev) => !prev);\n      return false;\n    }\n  };\n\n  /*\n    -------------------------------------------------------\n      Button Click Handlers\n    -------------------------------------------------------\n  */\n\n  const onSave = async () => {\n    if (!validateForm()) {\n      return;\n    }\n    const payload = enrichForSave();\n    try {\n      await CamService.updateSchemeDetails(payload);\n      setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.SAVED);\n      setTriggerToast(!triggerToast);\n      setPageMode(PAGE_MODE.VIEW);\n      getDetailsCallback?.();\n      tableRef.current?.clearAll();\n      tableRef.current?.search();\n    } catch (error) {\n      setErrorMessage(parseStandardAPIErrorMessage(error));\n    }\n  };\n\n  const onEdit = () => setPageMode(PAGE_MODE.EDIT);\n\n  const onCancel = () => {\n    setPageMode(PAGE_MODE.VIEW);\n    resetValidator();\n    getDetailsCallback?.();\n    tableRef.current?.clearAll();\n    tableRef.current?.search();\n  };\n\n  const onAddDocument = () => {\n    tableRef.current?.addRow({ ...initialTableRowData });\n  };\n\n  const onPrePopulateData = async () => {\n    setPageObj((prevPageObj) => ({\n      ...prevPageObj,\n      tableSearch: `&loanUid=${params?.loanUid}&reEvalDefaultFee=true&bankUid=${pageObj?.productIncomeScheme?.bank?.uid}&lendingTypeUid=${pageObj?.productIncomeScheme?.lendingType?.uid}&start=0&limit=10000`,\n    }));\n  };\n\n  const onDeleteRow = (rowData: ICamFeeDetailsRowData) => {\n    tableRef.current?.deleteRow(rowData);\n    simpleValidator.current = new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    });\n  };\n\n  const onTableUpdateCallback = () => {\n    resetValidator();\n    if (pageObj?.tableSearch?.includes(`reEvalDefaultFee=true`)) {\n      const allTableRows = tableRef?.current?.getCurrentRecords();\n      allTableRows?.forEach((record) => {\n        if (!record?.uid) {\n          getAmountIncludingGst(record);\n        }\n      });\n    }\n  };\n\n  const onHideWarningPopup = () => {\n    setPageObj((prevPageObj) => ({\n      ...prevPageObj,\n      isChangeProductIncomeScheme: false,\n      newProductIncomeScheme: { ...initialProductIncomeScheme },\n    }));\n  };\n\n  const onConfirmDeleteTab = async () => {\n    console.log(\"test\");\n    // const payload = enrichForSave();\n    const newProductIncomeSchemeUid = pageObj?.newProductIncomeScheme?.uid;\n    setPageObj((prevPageObj) => ({\n      ...prevPageObj,\n      isChangeProductIncomeScheme: false,\n      productIncomeScheme: { ...prevPageObj.newProductIncomeScheme },\n      newProductIncomeScheme: { ...initialProductIncomeScheme },\n      loadingForUpdatedProductIncomeScheme: true,\n    }));\n    try {\n      // await CamService.deactivateSelectedFeesForProductIncomeScheme(params?.loanUid ?? \"\");\n      const payload = enrichForSaveOnProductIncomeSchemeUpdate(newProductIncomeSchemeUid);\n      await CamService.updateSchemeDetails(payload);\n      setPageObj((prevPageObj) => ({\n        ...prevPageObj,\n        loadingForUpdatedProductIncomeScheme: false,\n      }));\n      setToastMessage(STATIC_MASTER_TYPE_TOAST_TEXT.SAVED);\n      setTriggerToast(!triggerToast);\n      getDetailsCallback?.({ isProductIncomeSchemeUpdated: true });\n      tableRef.current?.clearAll();\n      tableRef.current?.search();\n    } catch (error) {\n      setErrorMessage(parseStandardAPIErrorMessage(error));\n      setPageObj((prevPageObj) => ({\n        ...prevPageObj,\n        loadingForUpdatedProductIncomeScheme: false,\n      }));\n    }\n  };\n\n  /*\n    -------------------------------------------------------\n      Helper Functions\n    -------------------------------------------------------\n  */\n\n  const refreshFeeTable = () => {\n    tableRef?.current?.search();\n  };\n\n  const warningPopupMessage = () => {\n    return `Changing the Product Income Scheme will</br></br><ul><li>${\"Clear entries in Fees Details table\"}</li><li>Make changes in Final Loan Details Table</li><li>Clear entries in Income Details table</li><li>Make changes in Monthly Banking Analysis</li><li>Make changes in Credit and Debit Transactions</li></ul><br/>Are you sure you want to continue ?`;\n  };\n\n  const getAmountValidations = (configurationType?: TCamConfigurationTypeCode | \"\") => {\n    if (configurationType === CAM_CHARGE_CONFIGURATION_CODE.CONFIGURATION_VARIABLE) {\n      return \"mandatory|checkNumber|max:100,num|maxDecimal:2\";\n    }\n    return \"mandatory\";\n  };\n  const resetValidator = () => {\n    simpleValidator.current = new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    });\n    simpleValidator?.current?.hideMessages();\n  };\n\n  const enrichForCalculation = (rowData: ICamFeeDetailsRowData) => {\n    const enrichObj = {\n      loanUid: params?.loanUid,\n      stageUid: params?.stageUid,\n      feeConfigurationUid: rowData?.feeConfiguration?.uid,\n      loanFeeAmount: getNumber(rowData?.amount),\n    };\n    return enrichObj;\n  };\n\n  const enrichForSave = () => {\n    console.log(\"enrich for save\");\n    let addRows = tableRef.current?.getAddedRecords() ?? [];\n    let deletedRows = tableRef.current?.getDeletedRecords() ?? [];\n    let updatedRows = tableRef.current?.getUpdatedRecords() ?? [];\n    addRows = addRows.map((rowData: any) => updateCamFeeDetailsRowDataObj(rowData));\n\n    deletedRows = deletedRows.map((rowData: any) => updateCamFeeDetailsRowDataObj(rowData));\n    updatedRows = updatedRows.map((rowData: any) => updateCamFeeDetailsRowDataObj(rowData));\n\n    const loanFees = [...addRows, ...deletedRows, ...updatedRows];\n    return {\n      loan: {\n        uid: params?.loanUid,\n      },\n      stage: {\n        uid: params?.stageUid,\n      },\n      productIncomeScheme: {\n        uid: pageObj?.productIncomeScheme?.uid,\n      },\n      loanFees: loanFees,\n    };\n  };\n\n  const enrichForSaveOnProductIncomeSchemeUpdate = (productIncomeSchemeUid?: string) => {\n    return {\n      loan: {\n        uid: params?.loanUid,\n      },\n      stage: {\n        uid: params?.stageUid,\n      },\n      productIncomeScheme: {\n        uid: productIncomeSchemeUid,\n      },\n      loanFees: [],\n    };\n  };\n\n  const debounce = (func: any, delay: any) => {\n    // for amount incl gst calc\n    clearTimeout(timeOutLocal);\n    setTimeOutLocal(setTimeout(func, delay));\n  };\n\n  /*\n    -------------------------------------------------------\n      Sectional Rendering\n    -------------------------------------------------------\n  */\n  const renderChargeName = (rowData: ICamFeeDetailsRowData) => {\n    if (rowData?.feeConfiguration?.isDefault) {\n      return (\n        <div className=\"pt-4\">\n          <SimpleDropDown\n            hideLabel\n            placeholder=\"placeholder.cam.chargeName\"\n            name={`chargeName${rowData?.uid}`}\n            value={rowData?.feeConfiguration?.fee?.name}\n            variant={INPUT_STYLE_TYPE.PRIMARY}\n            options={[`${rowData?.feeConfiguration?.fee?.name}`]}\n            disabled\n          />\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"pt-4\">\n        <SimpleDropDown\n          hideLabel\n          placeholder=\"placeholder.cam.chargeName\"\n          name={`chargeName${rowData?.uid}`}\n          value={rowData?.feeConfiguration?.uid}\n          variant={INPUT_STYLE_TYPE.PRIMARY}\n          options={pageObj?.chargeNameOptions}\n          optionLabel=\"fee.name\"\n          optionValue=\"uid\"\n          onChange={(e) => handleTableChargeNameChange(e, { rowData })}\n          onBlur={validate}\n          // loader={isLoading}\n          validation={simpleValidator?.current?.message(\n            `chargeName${rowData?.uid}`,\n            rowData.feeConfiguration?.fee?.name,\n            \"mandatory\"\n          )}\n          disabled={pageObj?.row?.isCalculating && pageObj?.row?.uid !== rowData.uid}\n        />\n      </div>\n    );\n  };\n\n  const renderChargeType = (rowData: ICamFeeDetailsRowData) => {\n    return (\n      <InputBox\n        // name={`premiumAmountInclusiveGst${rowData?.uid}`}\n        variant={INPUT_STYLE_TYPE.SECONDARY}\n        value={\n          rowData?.chargeTypeCode !== \"\" ? CAM_CHARGE_TYPE?.[rowData?.chargeTypeCode]?.label : \"\"\n        }\n        disabled\n      />\n    );\n  };\n\n  const renderConfiguration = (rowData: ICamFeeDetailsRowData) => {\n    return (\n      <InputBox\n        // name={`premiumAmountInclusiveGst${rowData?.uid}`}\n        variant={INPUT_STYLE_TYPE.SECONDARY}\n        value={rowData.feeConfiguration?.configurationType?.name}\n        disabled\n      />\n    );\n  };\n\n  const renderWaiver = (rowData: ICamFeeDetailsRowData) => {\n    return (\n      <InputBox\n        // name={`premiumAmountInclusiveGst${rowData?.uid}`}\n        variant={INPUT_STYLE_TYPE.SECONDARY}\n        value={rowData.feeConfiguration?.isWaiver ? \"Yes\" : \"No\"}\n        disabled\n        // onBlur={validate}\n      />\n    );\n  };\n\n  const renderDefault = (rowData: ICamFeeDetailsRowData) => {\n    return (\n      <InputBox\n        // name={`premiumAmountInclusiveGst${rowData?.uid}`}\n        variant={INPUT_STYLE_TYPE.SECONDARY}\n        value={rowData.feeConfiguration?.isDefault ? \"Yes\" : \"No\"}\n        disabled\n      />\n    );\n  };\n\n  const renderAmount = (rowData: ICamFeeDetailsRowData) => {\n    return (\n      <div className=\"\">\n        <InputAddon\n          name={`amount${rowData?.uid}`}\n          label=\"\"\n          // hideLabel\n          className=\"text-right\" //need to check\n          variant={INPUT_STYLE_TYPE.SECONDARY}\n          value={\n            rowData?.feeConfiguration?.configurationType?.code ===\n            CAM_CHARGE_CONFIGURATION_CODE.CONFIGURATION_FIXED\n              ? showCurrency(rowData?.amount)\n              : rowData?.amount\n          }\n          onBlur={validate}\n          onChange={(e: any) => handleTableAmountChange(e, { rowData })}\n          validation={simpleValidator?.current?.message(\n            `amount${rowData?.uid}`,\n            rowData?.amount,\n            getAmountValidations(rowData?.feeConfiguration?.configurationType?.code)\n          )}\n          disabled={\n            rowData?.chargeTypeCode === CAM_CHARGE_TYPE.CHARGE_TYPE_SYSTEM_DEFINED.code ||\n            (pageObj?.row?.isCalculating && pageObj?.row?.uid !== rowData.uid)\n          }\n          isSuffix\n          addOn={\n            rowData?.feeConfiguration?.configurationType?.code ===\n            CAM_CHARGE_CONFIGURATION_CODE.CONFIGURATION_FIXED\n              ? \"₹\"\n              : rowData?.feeConfiguration?.configurationType?.code ===\n                CAM_CHARGE_CONFIGURATION_CODE.CONFIGURATION_VARIABLE\n              ? \"%\"\n              : \"\"\n          }\n        />\n      </div>\n    );\n  };\n\n  const renderAmountIncludingGst = (rowData: ICamFeeDetailsRowData) => {\n    return (\n      <InputBox\n        variant={INPUT_STYLE_TYPE.SECONDARY}\n        className=\"text-right\"\n        value={rowData.amountIncludingGst ?? \"\"}\n        disabled\n      />\n    );\n  };\n\n  const renderActions = (rowData: ICamFeeDetailsRowData) => {\n    return (\n      <div className=\"\">\n        <IconButton\n          buttonType={BUTTON_TYPES.DELETE}\n          onClick={() => onDeleteRow(rowData)}\n          disabled={pageMode === PAGE_MODE.VIEW || !rowData?.feeConfiguration?.isWaiver}\n          tooltipOptions={{\n            position: \"left\",\n            className: \"text-xs font-Roboto bg-black text-white !p-1 rounded-md \",\n            showDelay: \"1000,\",\n            hideDelay: \"300\",\n          }}\n        />\n      </div>\n    );\n  };\n  /*\n    -------------------------------------------------------\n    Main Rendering\n    -------------------------------------------------------\n  */\n  const { productIncomeScheme } = pageObj;\n  return (\n    <>\n      <SaveComponent\n        title=\"label.cam.schemeDetails\"\n        pageMode={pageMode}\n        disabled={pageObj?.row?.isCalculating}\n        onSave={onSave}\n        onCancel={onCancel}\n        onEdit={onEdit}\n      >\n        {isLoading || pageObj?.loadingForUpdatedProductIncomeScheme ? (\n          <SkeletonCustom height=\"19.375rem\" width=\"100%\" borderRadius=\"8px\" animation=\"wave\" />\n        ) : (\n          <AclGuard override={{ read: pageMode === PAGE_MODE.VIEW }}>\n            <div className=\" grid grid-cols-4 gap-3  \">\n              <div className=\"col-span-2\">\n                <SimpleDropDown\n                  label=\"label.cam.productIncomeScheme*\"\n                  placeholder=\"placeholder.cam.productIncomeScheme*\"\n                  name=\"productIncomeScheme\"\n                  value={productIncomeScheme?.uid}\n                  onChange={handleProductSchemeChange}\n                  validation={simpleValidator?.current?.message(\n                    `productIncomeScheme`,\n                    productIncomeScheme?.uid,\n                    \"mandatory\"\n                  )}\n                  onBlur={validate}\n                  options={dropDownOptions.productIncomeScheme}\n                  optionLabel=\"name\"\n                  optionValue=\"uid\"\n                />\n              </div>\n              <div className=\"col-span-2\"></div>\n              <div>\n                <SimpleDropDown\n                  label=\"label.cam.Product*\"\n                  placeholder=\"\"\n                  name=\"product\"\n                  value={productIncomeScheme?.product?.name}\n                  options={\n                    productIncomeScheme?.product?.name ? [productIncomeScheme.product.name] : []\n                  }\n                  // optionLabel=\"n\"\n                  disabled\n                />\n              </div>\n              <div>\n                <SimpleDropDown\n                  label=\"label.cam.incomeScheme*\"\n                  placeholder=\"\"\n                  name=\"product\"\n                  value={productIncomeScheme?.incomeSchemeName?.name}\n                  options={\n                    productIncomeScheme?.incomeSchemeName?.name\n                      ? [productIncomeScheme.incomeSchemeName.name]\n                      : []\n                  }\n                  disabled\n                />\n              </div>\n              <div>\n                <SimpleDropDown\n                  label=\"label.cam.bankOrFinancierName*\"\n                  placeholder=\"\"\n                  name=\"bank\"\n                  value={productIncomeScheme?.bank?.name}\n                  onChange={handleChange}\n                  options={productIncomeScheme?.bank?.name ? [productIncomeScheme.bank.name] : []}\n                  disabled\n                />\n              </div>\n              <div>\n                <SimpleDropDown\n                  label=\"label.cam.lendingType*\"\n                  placeholder=\"\"\n                  name=\"product\"\n                  value={productIncomeScheme?.lendingType?.name}\n                  options={\n                    productIncomeScheme?.lendingType?.name\n                      ? [productIncomeScheme.lendingType.name]\n                      : []\n                  }\n                  disabled\n                />\n              </div>\n              <div className=\"col-span-4\">\n                {typeof pageMode === \"string\" ? (\n                  <>\n                    <div className=\"flex justify-between mb-3\">\n                      <div>\n                        <Text\n                          className=\"text-primary-ptext-900 font-medium text-sm \"\n                          label={\"label.cam.feeDetails\"}\n                        />\n                      </div>\n                      <div className=\"flex \">\n                        <div className=\" mr-3 self-center\">\n                          <TextButton\n                            label=\"label.cam.populateDefaultFees\"\n                            className=\"text-primary-copyTextColor text-sm cursor-pointer\"\n                            onClick={onPrePopulateData}\n                            disabled={!pageObj?.productIncomeScheme?.uid}\n                            //isLoading={tableRef.current?.getLoadingState()}\n                          />\n                        </div>\n                        <div className=\" mr-3 self-center\">\n                          <ButtonBox\n                            buttonType={BUTTON_TYPE.ICON_TEXT_ROW}\n                            customLabel={\"label.cam.addFee\"}\n                            onClick={onAddDocument}\n                          />\n                        </div>\n                      </div>\n                    </div>\n                    {pageObj?.tableSearch ? (\n                      <EditableTableV2\n                        ref={tableRef}\n                        uniqueKey=\"uid\"\n                        standardDataFormatPromise={CamService.getFeeList}\n                        search={pageObj?.tableSearch}\n                        mode={\"UPDATE\"}\n                        onUpdateCallback={onTableUpdateCallback}\n                        variant=\"secondary\"\n                        paginator={false}\n                        className=\"table-auto-height\"\n                      >\n                        <Column\n                          header={i18n.t(\"label.cam.chargeName\")}\n                          className=\"text-primary-ptext-1000 text-left text-xs h-12 pl-6 min-w-49\"\n                          body={renderChargeName}\n                        />\n\n                        <Column\n                          header={i18n.t(\"label.cam.chargeType\")}\n                          className=\" text-primary-ptext-1000 text-xs h-12 pl-6 min-w-50\"\n                          body={renderChargeType}\n                        />\n                        <Column\n                          header={i18n.t(\"label.cam.configuration\")}\n                          className=\" text-primary-ptext-1000 text-xs h-12 pl-6\"\n                          body={renderConfiguration}\n                        />\n                        <Column\n                          header={i18n.t(\"label.cam.waiver\")}\n                          className=\" text-primary-ptext-1000 text-xs h-12 pl-6\"\n                          body={renderWaiver}\n                        />\n                        <Column\n                          header={i18n.t(\"label.cam.default\")}\n                          className=\" text-primary-ptext-1000 text-xs h-12 pl-6\"\n                          body={renderDefault}\n                        />\n                        <Column\n                          header={i18n.t(\"label.cam.amount/percentage\")}\n                          className=\"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6\"\n                          body={renderAmount}\n                        />\n                        <Column\n                          header={i18n.t(\"label.cam.amountIncludingGst(₹)\")}\n                          className=\"table-header-right text-primary-ptext-1000 text-xs h-12 pl-6\"\n                          body={renderAmountIncludingGst}\n                        />\n\n                        <Column\n                          header={i18n.t(\"label.investmentInfo.table.colTitle.action\")}\n                          className=\"text-primary-ptext-1000 text-right text-xs h-12 px-6\"\n                          style={{ minWidth: \"50px\", width: \"50px\" }}\n                          body={renderActions}\n                        />\n                      </EditableTableV2>\n                    ) : null}\n                  </>\n                ) : null}\n              </div>\n            </div>\n          </AclGuard>\n        )}\n      </SaveComponent>\n\n      <WarningDialog\n        visible={pageObj.isChangeProductIncomeScheme}\n        className=\"  !w-100 !px-14\"\n        title={\"Change Product Income Scheme ?\"}\n        warningMessage={warningPopupMessage()}\n        htmlMessage\n        onCancel={onHideWarningPopup}\n        onConfirm={onConfirmDeleteTab}\n        onHide={() => {\n          //\n        }}\n      />\n\n      <ToastCustom\n        position={\"bottom-right\"}\n        ref={toastMessageRef}\n        toastText={toastMessage}\n        variant={TOAST_STYLE_TYPE.PRIMARY}\n      />\n\n      <ErrorDialog\n        onHide={() => {\n          setShowDialogAPIError(false);\n          setErrorMessage(\"\");\n        }}\n        visible={showDialogAPIError}\n        errorMessage={errorMessage}\n      />\n    </>\n  );\n});\n\nexport default SchemeDetails;\n","import AclGuard from \"components/AclGuard\";\nimport ButtonBox from \"components/ButtonBox/ButtonBox\";\nimport EditableTableV2, {\n  Column,\n  EditableComponentRef,\n} from \"components/EditableTableV2/EditableTableV2\";\nimport ErrorDialog from \"components/ErrorDialog/ErrorDialog\";\nimport SaveComponent from \"components/Save/SaveComponent\";\nimport SimpleDropDown from \"components/SimpleDropDown/SimpleDropDown\";\nimport SkeletonCustom from \"components/Skeleton/Skeleton\";\nimport Text from \"components/Text/Text\";\nimport TextButton from \"components/TextButton/TextButton\";\nimport ToastCustom from \"components/Toast\";\nimport i18n from \"i18n\";\nimport React, { forwardRef, useEffect, useRef, useState } from \"react\";\nimport StageService from \"services/transaction/DDE/StageService\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport { getStandardValidator, messageReplace } from \"utils/CommonUtil\";\nimport { BUTTON_TYPE, PAGE_MODE, TOAST_STYLE_TYPE } from \"utils/Constant\";\nimport { ICamLoanDetailsDropdownList } from \"../../PageLoanDetails/PageLoanDetails\";\nimport { numberFormatter } from \"locale\";\nimport { getNumber, showCurrency } from \"../../Helper\";\n\nexport interface ICamSummaryPageObj {\n  uid:string;\n  // loanUid: string;\n  totalAppraisedNetMonthlyIncome: number;\n  maxEmi: number;\n  emiFactor: number;\n  eligibility: number;\n  emi: number;\n  actualLtv: number;\n  // properties: ICamSinglePropertyValuationData[];\n  // totalValuation: number | \"\";\n}\ninterface IProps {\n  isLoading: boolean;\n  // dropDownOptions: ICamLoanDetailsDropdownList;\n  data: ICamSummaryPageObj;\n  getDetailsCallback?: () => void;\n}\n\nexport const initialCamSummaryData: ICamSummaryPageObj = {\n  uid:\"\",\n  totalAppraisedNetMonthlyIncome: 0,\n  maxEmi:  0,\n  emiFactor:  0,\n  eligibility:  0,\n  emi:  0,\n  actualLtv:  0,\n  // totalValuation: \"\",\n};\n\nconst Summary: React.FC<IProps> = forwardRef((props, ref) => {\n  const { data, isLoading, getDetailsCallback } = props;\n\n  /*\n    -------------------------------------------------------\n      State\n    -------------------------------------------------------\n    */\n  const [pageObj, setPageObj] = useState<ICamSummaryPageObj>({\n    ...initialCamSummaryData,\n  });\n  const [pageMode, setPageMode] = useState(PAGE_MODE.VIEW);\n  const [toastMessage, setToastMessage] = useState(\"\");\n  const [triggerToast, setTriggerToast] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [showDialogAPIError, setShowDialogAPIError] = useState(false);\n  // ref\n  const toastMessageRef = useRef(null);\n  const tableRef = React.useRef<EditableComponentRef>(null);\n\n  // --------------------------- validator initialization ---------------------- //\n  const [, forceUpdate] = useState<boolean>(false);\n\n  const simpleValidator = useRef(\n    new SimpleReactValidator({\n      validators: { ...getStandardValidator() },\n      ...messageReplace(),\n      autoForceUpdate: { forceUpdate: () => forceUpdate((prev) => !prev) },\n    })\n  );\n\n  // --------------------------- global variables ---------------------- //\n\n  /*\n     -------------------------------------------------------\n       useEffect\n     -------------------------------------------------------\n   */\n\n  useEffect(() => {\n      setPageObj((prevObj) => ({\n        ...prevObj,\n        ...data,\n      }));\n  }, [data]);\n\n  useEffect(() => {\n    if (toastMessageRef?.current && toastMessage !== \"\") {\n      // @ts-ignore: will be fixed in future\n      toastMessageRef?.current?.showFunction();\n      setToastMessage(\"\");\n    }\n  }, [toastMessage, triggerToast]);\n\n  useEffect(() => {\n    if (errorMessage) {\n      setShowDialogAPIError(true);\n    }\n  }, [errorMessage]);\n\n  /*\n    -------------------------------------------------------\n      Service Calls\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n      Handlers\n    -------------------------------------------------------\n  */\n\n  /* \n    --------------------------------------------------------\n    Validators:\n    --------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n      Button Click Handlers\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n      Helper Functions\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n      Sectional Rendering\n    -------------------------------------------------------\n  */\n\n  /*\n    -------------------------------------------------------\n    Main Rendering\n    -------------------------------------------------------\n  */\n  const { totalAppraisedNetMonthlyIncome, actualLtv, eligibility, emi, emiFactor, maxEmi } =\n    pageObj;\n  return (\n    <>\n      <div className=\"border border-primary-ptext-500 rounded-xl p-5 flex flex-col gap-3 \">\n        {isLoading ? (\n          <SkeletonCustom height=\"19.375rem\" width=\"100%\" borderRadius=\"8px\" animation=\"wave\" />\n        ) : (\n          <div className=\"grid grid-cols-4 gap-3\">\n            <div className=\"flex flex-col\">\n              <Text className=\"text-primary-gray-600 text-xs\" label={\"label.cam.totalAppraisedNetMonthlyIncome\"} />\n              <Text className=\"text-primary-ptext-1000 text-xs \" label={showCurrency(totalAppraisedNetMonthlyIncome)} />\n            </div>\n            <div className=\"flex flex-col\">\n              <Text className=\"text-primary-gray-600 text-xs\" label={\"label.cam.totalMaxEmi\"} />\n              <Text className=\"text-primary-ptext-1000 text-xs \" label={showCurrency(maxEmi)} />\n            </div>\n            <div className=\"flex flex-col\">\n              <Text className=\"text-primary-gray-600 text-xs\" label={\"label.cam.emiFactor\"} />\n              <Text className=\"text-primary-ptext-1000 text-xs \" label={showCurrency(emiFactor)} />\n            </div>\n            <div className=\"flex flex-col\">\n              <Text className=\"text-primary-gray-600 text-xs\" label={\"label.cam.eligibility\"} />\n              <Text className=\"text-primary-ptext-1000 text-xs \" label={showCurrency(eligibility)} />\n            </div>\n            <div className=\"flex flex-col\">\n              <Text className=\"text-primary-gray-600 text-xs\" label={\"label.cam.emi\"} />\n              <Text className=\"text-primary-ptext-1000 text-xs \" label={showCurrency(emi)} />\n            </div>\n            <div className=\"flex flex-col\">\n              <Text className=\"text-primary-gray-600 text-xs\" label={\"label.cam.actualLtv\"} />\n              <Text className=\"text-primary-ptext-1000 text-xs \" label={showCurrency(actualLtv)} />\n            </div>\n          </div>\n        )}\n      </div>\n\n      <ToastCustom\n        position={\"bottom-right\"}\n        ref={toastMessageRef}\n        toastText={toastMessage}\n        variant={TOAST_STYLE_TYPE.PRIMARY}\n      />\n\n      <ErrorDialog\n        onHide={() => {\n          setShowDialogAPIError(false);\n          setErrorMessage(\"\");\n        }}\n        visible={showDialogAPIError}\n        errorMessage={errorMessage}\n      />\n    </>\n  );\n});\n\nexport default Summary;\n"],"names":["initialCamFinalLoanDetailsData","transactionTypeBalanceTransfer","FinalLoanDetails","forwardRef","props","ref","data","dropDownOptions","isLoading","getDetailsCallback","params","useParams","pageObj","setPageObj","useState","timeOutLocal","setTimeOutLocal","pageMode","setPageMode","PAGE_MODE","toastMessage","setToastMessage","triggerToast","setTriggerToast","errorMessage","setErrorMessage","showDialogAPIError","setShowDialogAPIError","toastMessageRef","useRef","React","forceUpdate","simpleValidator","SimpleReactValidator","getStandardValidator","messageReplace","prev","useEffect","prevObj","_a","calculate","payload","enrichForCalculation","res","CamService","showCurrency","_b","_c","_d","err","parseStandardAPIErrorMessage","handleChange","e","options","updatedPageObj","YES_NO","debounce","validate","validateForm","isValid","resetValidator","onSave","enrichForSave","STATIC_MASTER_TYPE_TOAST_TEXT","error","onEdit","onCancel","getNumber","func","delay","getValidationForEmployeeID","getValidationForEmployeeName","getValidationForBalanceTransfer","recommendedLoanAmount","insurancePremium","totalLoanAmount","roi","tenure","interestType","emi","totalDeduction","netDisbursal","transactionType","balanceTransfer","employeeLoan","employeeId","employeeName","jsxs","Fragment","jsx","SaveComponent","SkeletonCustom","AclGuard","InputBox","INPUT_STYLE_TYPE","currencyFormatToNumberIncludeNull","SimpleDropDown","_e","_f","_g","YES_NO_OPTIONS","_h","_i","ToastCustom","TOAST_STYLE_TYPE","ErrorDialog","initialCamFinancierLoanNumberData","initialTableRowData","FinancierLoanNumber","tableRef","handleTableFieldChange","rowDataObj","onAdd","onDeleteRow","rowData","addRows","deletedRows","updatedRows","updateCamFinancierLoanNumbersRowDataObj","financialLoanNumbers","renderFinancierLoanNumber","renderDescription","renderActions","IconButton","BUTTON_TYPES","ButtonBox","BUTTON_TYPE","EditableTableV2","Column","i18n","initialCamLoanTagsData","LoanTags","onAddDocument","updateCamLoanTagsRowDataObj","loanTags","renderTags","renderYesOrNo","RadioButton","CHECKBOX_STYLE_TYPE","Text","InputError","renderComment","initialCamPropertyValuationData","PropertyValuation","useImperativeHandle","onSearch","resetAllSectionValidations","getPropertyValuationByOperation","property","updatedObj","propertyIndex","record","handleValuationMethodChange","index","prevPageObj","resetSectionValidations","totalSections","i","getAllPropertyAnnotations","annotations","PROPERTY_ANNOTATION","renderValuationMethod","PROPERTY_VALUATION_OPERATION_OPTIONS","renderCalculatedValuation","renderVenderName","renderDateOfValuation","formatDate","renderTotalValuation","Section","ReadOnlyTable","initialRepaymentHistoryCommentPageObj","RepaymentHistoryComment","editorRef","handleEditorValidation","validateEditor","prevState","RichTextEditor","initialProductIncomeScheme","initialCamSchemeDetailsData","CAM_FEE_STATUS","SchemeDetails","refreshFeeTable","selectedProductIncomeScheme","getChargeNameDropdownOptions","productTypeUid","getAmountIncludingGst","allRecords","updatedRowDataObj","handleProductSchemeChange","updatePageObj","updateKey","updatesProductIncomeScheme","handleTableChargeNameChange","selectedChargeName","CAM_CHARGE_CONFIGURATION_CODE","_j","_k","handleTableAmountChange","updatedAmount","onPrePopulateData","onTableUpdateCallback","allTableRows","onHideWarningPopup","onConfirmDeleteTab","newProductIncomeSchemeUid","enrichForSaveOnProductIncomeSchemeUpdate","warningPopupMessage","getAmountValidations","configurationType","updateCamFeeDetailsRowDataObj","loanFees","productIncomeSchemeUid","renderChargeName","renderChargeType","CAM_CHARGE_TYPE","renderConfiguration","renderWaiver","renderDefault","renderAmount","InputAddon","renderAmountIncludingGst","productIncomeScheme","TextButton","_l","WarningDialog","initialCamSummaryData","Summary","totalAppraisedNetMonthlyIncome","actualLtv","eligibility","emiFactor","maxEmi"],"mappings":"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"}