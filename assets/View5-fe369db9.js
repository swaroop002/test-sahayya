import{r as s,j as e}from"./index-e8217573.js";import{F as C,I as N,y as T,N as b,H as R}from"./FileUploadCustom-5ab7fd25.js";import{P as F}from"./ProfilePictureUpload-60f86be0.js";import"./Loading-783a01c7.js";import"./MediaGallery-5884b284.js";import"./Download_Icon-51fc7f46.js";import"./Dialog-adadaf64.js";import"./index-8739acfd.js";import"./Skeleton-7e12d019.js";import"./FileUploadService-1aaf11f7.js";import"./ErrorDialog-d5eef4d7.js";import"./ButtonBox-9e46519a.js";import"./kebab-menu-8835ad2e.js";import"./FileUploadMenuBox-f47dc693.js";import"./MenuBox-defc36b0.js";import"./SimpleDropDown-061a3470.js";import"./virtualscroller.esm-9939945c.js";import"./withAuth-6de36ebf.js";import"./Toast-ae99ea5b.js";import"./TransitionGroup-c8afe0ce.js";function w(t,a,i){return b(R({unit:"%",width:90},i,t,a),t,a)}const I=Math.PI/180;function M(t,a,i){s.useEffect(()=>{const l=setTimeout(()=>{},a);return()=>{clearTimeout(l)}},i)}async function A(t,a,i,l=1,g=0){const r=a.getContext("2d");if(!r)throw new Error("No 2d context");const n=t.naturalWidth/t.width,h=t.naturalHeight/t.height,u=window.devicePixelRatio;a.width=Math.floor(i.width*n*u),a.height=Math.floor(i.height*h*u),r.scale(u,u),r.imageSmoothingQuality="high";const c=i.x*n,p=i.y*h,j=g*I,f=t.naturalWidth/2,x=t.naturalHeight/2;r.save(),r.translate(-c,-p),r.translate(f,x),r.rotate(j),r.scale(l,l),r.translate(-f,-x),r.drawImage(t,0,0,t.naturalWidth,t.naturalHeight,0,0,t.naturalWidth,t.naturalHeight),r.restore()}const E=()=>{const[t,a]=s.useState(""),i=s.useRef(null),l=s.useRef(null);s.useRef(null),s.useRef("");const[g,r]=s.useState(),[n,h]=s.useState(),[u,c]=s.useState(1),[p,j]=s.useState(0),[f,x]=s.useState(16/9);function v(o){if(o.target.files&&o.target.files.length>0){r(void 0);const d=new FileReader;d.addEventListener("load",()=>{var m;return a(((m=d.result)==null?void 0:m.toString())||"")}),d.readAsDataURL(o.target.files[0])}}function y(o){if(f){const{width:d,height:m}=o.currentTarget;r(w(d,m,f))}}M(async()=>{n!=null&&n.width&&(n!=null&&n.height)&&l.current&&i.current&&A(l.current,i.current,n,u,p)},100,[n,u,p]),console.log(g,n);function S(){if(f)x(void 0);else if(x(16/9),l.current){const{width:o,height:d}=l.current,m=w(o,d,16/9);r(m),h(T(m,o,d))}}return e.jsxs("div",{className:"App",children:[e.jsxs("div",{className:"Crop-Controls",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:v}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"scale-input",children:"Scale: "}),e.jsx("input",{id:"scale-input",type:"number",step:"0.1",value:u,disabled:!t,onChange:o=>c(Number(o.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"rotate-input",children:"Rotate: "}),e.jsx("input",{id:"rotate-input",type:"number",value:p,disabled:!t,onChange:o=>j(Math.min(180,Math.max(-180,Number(o.target.value))))})]}),e.jsx("div",{children:e.jsxs("button",{onClick:S,children:["Toggle aspect ",f?"off":"on"]})})]}),!!t&&e.jsx(N,{crop:g,onChange:(o,d)=>r(d),onComplete:o=>h(o),aspect:f,minHeight:100,children:e.jsx("img",{ref:l,alt:"Crop me",src:t,style:{transform:`scale(${u}) rotate(${p}deg)`},onLoad:y})}),!!n&&e.jsx(e.Fragment,{children:e.jsx("div",{children:e.jsx("canvas",{ref:i,style:{border:"1px solid black",objectFit:"contain",width:n.width,height:n.height}})})})]})},Z=()=>{s.useState(!1);const t=s.useRef(null),[a,i]=s.useState(""),[l,g]=s.useState(""),[r,n]=s.useState(!1);s.useState(!0);const[h,u]=s.useState({uid:"",placeOfUpload:"",name:"",fileName:"",category:"",type:"",sectionName:"",fileType:"",download:"",url:""});return s.useRef(null),s.useEffect(()=>{var c;t!=null&&t.current&&a!==""&&((c=t==null?void 0:t.current)==null||c.showFunction())},[a,l,r]),e.jsx(s.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-9",children:[e.jsx("div",{children:e.jsx(F,{className:"w-40",getUrl:c=>{console.log(c)},editMode:!1})}),e.jsx("div",{className:"flex flex-col text-xs mb-10",children:e.jsx("div",{children:e.jsx(C,{footerTitle:"DOC",getUrl:c=>{const p={...h,placeOfUpload:"",name:"",fileName:c.fileName,category:"",type:"",sectionName:"",fileType:c.contentType,download:"",url:c.url};u({...p})},docInfoForMediaGallery:h})})}),e.jsx(E,{})]})})};export{A as canvasPreview,Z as default,M as useDebounceEffect};
//# sourceMappingURL=View5-fe369db9.js.map
