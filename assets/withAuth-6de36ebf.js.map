{"version":3,"file":"withAuth-6de36ebf.js","sources":["../../src/components/hoc/withAuth.tsx"],"sourcesContent":["import { ACL_DIRTY_STATUS } from \"components/utils/Constant\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { AclContext, IAclContext } from \"../AclGuard\";\nimport {\n  isAclApplicable,\n  isRouteGuardApplicable,\n  saveAclGuardStatusToStorage,\n} from \"../utils/Helper\";\n\nexport const withAuth = (Component: React.FC<any>) => {\n  const InputComponentWrapper = (props: any) => {\n    const context: IAclContext = useContext(AclContext);\n    const [isDisabled, setIsDisabled] = useState(props.disabled ?? false);\n\n    useEffect(() => {\n      if (isAclApplicable()) {\n        if (!props.isIgnoreAccessLevel && context.isOn) {\n          setIsDisabled(context.read);\n        }\n      }\n    }, []);\n\n    useEffect(() => {\n      if (isAclApplicable()) {\n        if (!props.isIgnoreAccessLevel && context.isOn) {\n          setIsDisabled(context.read);\n        } else {\n          setIsDisabled(false);\n        }\n      }\n    }, [context]);\n\n    const onChange = (e: any) => {\n      reportFormDirty();\n      props.onChange(e);\n    };\n\n    const reportFormDirty = () => {\n      if (isRouteGuardApplicable() && context.isOn) {\n        saveAclGuardStatusToStorage(context.name, ACL_DIRTY_STATUS.Y);\n      }\n    };\n\n    return (\n      <Component\n        {...props}\n        onChange={onChange}\n        isIgnoreAccessLevel={props.isIgnoreAccessLevel ?? false}\n        isDisabledByAcl={context.isOn ? !isDisabled : false}\n        reportFormDirty={reportFormDirty}\n      />\n    );\n  };\n\n  return InputComponentWrapper;\n};\n"],"names":["withAuth","Component","props","context","useContext","AclContext","isDisabled","setIsDisabled","useState","useEffect","isAclApplicable","onChange","e","reportFormDirty","isRouteGuardApplicable","saveAclGuardStatusToStorage","ACL_DIRTY_STATUS","jsx"],"mappings":"uFASa,MAAAA,EAAYC,GACQC,GAAe,CACtC,MAAAC,EAAuBC,aAAWC,CAAU,EAC5C,CAACC,EAAYC,CAAa,EAAIC,EAAS,SAAAN,EAAM,UAAY,EAAK,EAEpEO,EAAAA,UAAU,IAAM,CACVC,KACE,CAACR,EAAM,qBAAuBC,EAAQ,MACxCI,EAAcJ,EAAQ,IAAI,CAGhC,EAAG,CAAE,CAAA,EAELM,EAAAA,UAAU,IAAM,CACVC,MACE,CAACR,EAAM,qBAAuBC,EAAQ,KACxCI,EAAcJ,EAAQ,IAAI,EAE1BI,EAAc,EAAK,EAEvB,EACC,CAACJ,CAAO,CAAC,EAEN,MAAAQ,EAAYC,GAAW,CACXC,IAChBX,EAAM,SAASU,CAAC,CAAA,EAGZC,EAAkB,IAAM,CACxBC,EAAA,GAA4BX,EAAQ,MACVY,EAAAZ,EAAQ,KAAMa,EAAiB,CAAC,CAC9D,EAIA,OAAAC,EAAA,IAAChB,EAAA,CACE,GAAGC,EACJ,SAAAS,EACA,oBAAqBT,EAAM,qBAAuB,GAClD,gBAAiBC,EAAQ,KAAO,CAACG,EAAa,GAC9C,gBAAAO,CAAA,CAAA,CACF"}